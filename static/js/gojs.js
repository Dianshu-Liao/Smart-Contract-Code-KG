/*
 * GoJS v1.7.7 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.7.7/doc/license.html.
 */
(function(window) {
    var f, aa = {};
    if (!window.document || void 0 === window.document.createElement("canvas").getContext) throw window.console && window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),
    Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");
    if (!Object.defineProperty) throw Error("GoJS requires a newer version of JavaScript");
    Function.prototype.bind || (Function.prototype.bind = function(a) {
        function b() {
            return g.apply(a, e.concat(d.call(arguments)))
        }
        function c() {}
        var d = Array.prototype.slice,
        e = d.call(arguments, 1),
        g = this;
        c.prototype = this.prototype;
        b.prototype = new c;
        return b
    }); (function() {
        for (var a = 0,
        b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length && !window.requestAnimationFrame; ++c) window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"],
        window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function(b) {
            var c = (new Date).getTime(),
            g = Math.max(8, 16 - (c - a)),
            h = window.setTimeout(function() {
                b(c + g)
            },
            g);
            a = c + g;
            return h
        });
        window.cancelAnimationFrame || (window.cancelAnimationFrame = function(a) {
            window.clearTimeout(a)
        })
    })();
    var v = {
        zj: !1,
        EA: !1,
        gF: !1,
        AI: !1,
        ZL: !1,
        FF: !1,
        bu: null,
        enableBoundsInfo: function(a) {
            v.zj = !0;
            a && a.Hq()
        },
        disableBoundsInfo: function(a) {
            v.zj = !1;
            a && (a.md.Be(!0), a.Hq())
        },
        dF: function(a, b) {
            void 0 === a && (a = v.bu);
            void 0 === b && (b = a.jm("").pb);
            var c = b.length,
            d = a.md;
            d.fillStyle = "rgba(255,255,0,.3)";
            for (var e = 0; e < c; e++) {
                var g = b.ea(e),
                h = g.$;
                if (g instanceof x) v.dF(a, g.xa);
                else {
                    var k = g.Li.copy();
                    k.lB(g.Hc);
                    d.save();
                    d.transform(k.m11, k.m12, k.m21, k.m22, k.dx, k.dy);
                    d.fillRect(h.x, h.y, h.width, h.height);
                    d.restore()
                }
            }
        },
        eF: function(a, b) {
            a || (a = v.bu);
            b || (b = a.jm("").pb);
            var c = a.md,
            d = b.length;
            c.fillStyle = "rgba(0,0,255,.3)";
            for (var e = 0; e < d; e++) {
                var g = b.ea(e),
                h = g.Ga,
                k = g.Li;
                g instanceof x ? v.eF(a, g.xa) : (c.save(), c.transform(k.m11, k.m12, k.m21, k.m22, k.dx, k.dy), c.fillRect(h.x, h.y, h.width, h.height), c.restore())
            }
        },
        vI: function(a, b) {
            a || (a = v.bu);
            b || (b = a.jm("").pb);
            var c = a.md,
            d = b.length;
            c.fillStyle = "rgba(0,0,255,.3)";
            for (var e = 0; e < d; e++) {
                var g = b.ea(e),
                h = g.Fa,
                k = g.Li;
                g instanceof x ? v.vI(a, g.xa) : (c.save(), c.transform(k.m11, k.m12, k.m21, k.m22, k.dx, k.dy), c.fillRect(h.x || 0, h.y || 0, h.width, h.height), c.restore())
            }
        },
        wL: function() {
            v.eF();
            v.dF()
        },
        xL: function(a) {
            a || (a = v.bu);
            var b = a.cd;
            a = a.md;
            a.strokeStyle = "rgba(0,255,0,.9)";
            a.rect(b.x, b.y, b.width, b.height);
            a.stroke()
        },
        fF: function(a, b) {
            b.fillStyle = "red";
            b.fillRect(0, 0, 8, 8);
            b.lineWidth = 8;
            b.strokeStyle = "rgba(255,255,0,.6)";
            var c = a.xb;
            b.rect(c.x, c.y, c.width, c.height);
            b.stroke();
            b.fillStyle = "rgba(0,255,0,.2)";
            b.fillRect(a.cd.x, a.cd.y, a.cd.width, a.cd.height)
        },
        wI: function(a, b) {
            b instanceof da || (a.lineWidth = 2, a.strokeStyle = "rgba(255,0,0,.5)", a.rect(b.ac.x, b.ac.y, b.ac.width, b.ac.height), a.stroke(), b instanceof z && (a.strokeStyle = b.stroke, a.lineWidth = b.jb), null !== b.Q && b.Q.type === ea && (a.lineWidth = 1, a.strokeStyle = "rgba(10,200,10,.6)", b instanceof z && (a.strokeStyle = b.stroke, a.lineWidth = b.jb)))
        },
        xI: function(a, b) {
            a.lineWidth = 1;
            a.strokeStyle = "rgba(0,0,255,.5)";
            a.rect(b.Ga.x, b.Ga.y, b.Ga.width, b.Ga.height);
            a.stroke();
            void 0 !== b.stroke && (a.strokeStyle = b.stroke);
            void 0 !== b.Ng && (a.lineWidth = b.Ng)
        },
        DA: function(a, b, c) {
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(b.od, b.od);
            a.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
            c = b.bc.length;
            for (var d = 0; d < c; d++) for (var e = b.bc.ea(d), g = e.pb.length, h = 0; h < g; h++) {
                var k = e.pb.ea(h);
                if (void 0 !== k.location && null !== k.location) {
                    if (k.location.F()) {
                        var l = k.location.x,
                        m = k.location.y;
                        a.beginPath();
                        a.strokeStyle = "limegreen";
                        a.lineWidth = 2;
                        a.moveTo(l, m + 6);
                        a.lineTo(l, m);
                        a.lineTo(l + 6, m);
                        a.moveTo(l, m);
                        a.lineTo(l + 10, m + 20);
                        a.stroke()
                    }
                    l = k.position.x;
                    m = k.position.y;
                    a.beginPath();
                    a.strokeStyle = "red";
                    a.lineWidth = 2;
                    a.moveTo(l, m + 6);
                    a.lineTo(l, m);
                    a.lineTo(l + 6, m);
                    a.moveTo(l, m);
                    a.lineTo(l + 20, m + 10);
                    a.stroke()
                }
            }
            a.setTransform(1, 0, 0, 1, 0, 0)
        },
        yL: function(a, b, c) {
            var d = a.length;
            b.fillStyle = "rgba(255,0,0,.1)";
            for (var e = 0; e < d; e++) {
                var g, h = a[e];
                g = c.Hc;
                var k = h.x,
                l = h.y,
                m = k + h.width,
                n = l + h.height,
                p = g.m11,
                q = g.m12,
                r = g.m21,
                s = g.m22,
                u = g.dx,
                t = g.dy,
                y = k * p + l * r + u,
                h = k * q + l * s + t;
                g = m * p + l * r + u;
                var l = m * q + l * s + t,
                w = k * p + n * r + u,
                k = k * q + n * s + t,
                p = m * p + n * r + u,
                m = m * q + n * s + t,
                n = y,
                q = h,
                n = Math.min(n, g),
                y = Math.max(y, g),
                q = Math.min(q, l),
                h = Math.max(h, l),
                n = Math.min(n, w),
                y = Math.max(y, w),
                q = Math.min(q, k),
                h = Math.max(h, k),
                n = Math.min(n, p),
                y = Math.max(y, p),
                q = Math.min(q, m),
                h = Math.max(h, m);
                g = new B(n, q, y - n, h - q);
                b.fillRect(g.x, g.y, g.width, g.height)
            }
        },
        yI: function(a, b, c, d, e) {
            a.fillStyle = "rgba(0,255,0,.2)";
            a.fillRect(b, c, d, e)
        },
        zI: function(a, b, c) {
            a.save();
            var d = b.Hc;
            d.reset();
            1 !== b.scale && d.scale(b.scale);
            b = b.position;
            0 === b.x && 0 === b.y || d.translate( - b.x, -b.y);
            a.setTransform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            c = c.ad.o;
            d = c.length;
            for (b = 0; b < d; b++) {
                var e = c[b];
                a.beginPath();
                a.moveTo(e.x - 4, e.y);
                a.lineTo(e.x + 4, e.y);
                a.moveTo(e.x, e.y - 4);
                a.lineTo(e.x, e.y + 4);
                a.lineWidth = 2;
                a.strokeStyle = "rgba(255,0,0,.9)";
                a.stroke()
            }
            a.restore()
        },
        uL: function(a) {
            a || (a = v.bu);
            for (a = a.ao; a.next();) D.trace(a.value.toString())
        },
        mM: function(a, b) {
            var c = b.ep(a),
            d = b.Tb;
            d.qe = b.TB(c);
            d.ha = c;
            return ga(b, d, a)
        },
        hM: function(a, b) {
            b.Ge(a.ha) && (b.md.fillStyle = "lime", b.md.fillRect(a.qe.x, a.qe.y, 1 * b.scale, 1 * b.scale))
        },
        iM: function(a) {
            var b = ha(a, !1, null, null);
            if (!b.vq) {
                a = a.md;
                for (var c = 0; c <= b.yn; c++) for (var d = 0; d <= b.zn; d++) {
                    var e = b.wd[c][d];
                    if (0 !== e) {
                        var g = c * b.ce + b.Vf,
                        h = d * b.Md + b.Wf;
                        0 !== e && (a.fillStyle = "rgba(255, 0, 0, .2)", a.fillRect(g, h, b.ce, b.Md));
                        999999 <= e || (e %= 10, a.fillStyle = "blue", a.fillText(e.toString(), g, h + b.Md))
                    }
                }
            }
        },
        dumpReferences: function(a) {
            if (a instanceof E) for (a = a.ao; a.next();) {
                var b = a.value;
                D.trace(b.toString());
                for (b = b.Gi; b.next();) v.dumpReferences(b.value)
            } else if (a instanceof F) {
                D.trace("References for " + a);
                null !== a.layer && D.trace("  " + a.layer.toString() + ' LayerName: "' + a.Jf + '"');
                a.ro !== a && D.trace("  SelectionObject: " + a.ro.toString() + ' SelectionObjectName: "' + a.Cy + '"');
                a.uf !== a && D.trace("  LocationObject: " + a.uf.toString() + ' LocationObjectName: "' + a.iy + '"');
                if (a.mh) {
                    for (var b = "",
                    c = a.mh.j; c.next();) b += c.key + " ";
                    D.trace("  Adornments: " + b)
                }
                null !== a.Pa && D.trace("  ContainingGroup: " + a.Pa.toString());
                if (a instanceof G) {
                    if (0 < a.Gd.count) {
                        b = "";
                        for (c = a.Gd; c.next();) b += c.value.toString() + ", ";
                        D.trace("  Links: " + b)
                    }
                    null !== a.zc && D.trace("  LabeledLink: " + a.zc.toString());
                    if (a instanceof I) {
                        D.trace("  Placeholder: " + a.placeholder);
                        b = "";
                        for (c = a.Mc; c.next();) b += c.value.toString() + ", ";
                        D.trace("  Members: " + b);
                        b = "";
                        for (c = a.en.j; c.next();) b += c.value.toString() + ", ";
                        D.trace("  NestedGroups: " + b);
                        D.trace("  Layout: " + a.Vb)
                    }
                } else if (a instanceof J) {
                    D.trace("  Path: " + a.path);
                    D.trace("  From: " + a.aa + " " + a.dd + ' "' + a.cg + '"');
                    D.trace("  To: " + a.da + " " + a.Ld + ' "' + a.jh + '"');
                    b = "";
                    for (a = a.If; a.next();) b += a.value.toString() + ", ";
                    D.trace("  LabelNodes: " + b)
                }
            }
        },
        dumpVisualTree: function(a) {
            if (a instanceof E) for (a = a.ao; a.next();) {
                var b = a.value;
                D.trace(b.toString());
                for (b = b.Gi; b.next();) v.dumpVisualTree(b.value)
            } else a instanceof F && (b = " ", a.UE && (b += "c"), a.YE && (b += "d"), a.DF && (b += "g"), a.gG && (b += "m"), a.zG && (b += "h"), a.AG && (b += "z"), a.FG && (b += "o"), a.$k && (b += "s"), a.XG && (b += "t"), a.MG && (b += "A"), a.Ux && (b += "B"), a.$A && (b += "L"), a.hb && (b += "S"), a.Wk && (b += "H"), v.XC(a, 1, b))
        },
        XC: function(a, b, c) {
            for (var d = "",
            e = 0; e < b; e++) d += "  ";
            d += a.toString();
            c && (d += c);
            c = a.name ? ' "' + a.name + '" ': " ";
            c = a.visible ? c + "v": c + "!v";
            c = a.pg ? c + "p": c + "!p";
            a.Gf && (c += "m");
            a.tu && (c += "a");
            d += c;
            if (0 !== a.Zb || 0 !== a.column) d += " [" + a.Zb + "," + a.column + "]";
            d += " " + a.$.toString();
            a.Ea.F() && (d += " d:" + a.Ea.toString());
            a.Ga.F() && (d += " n:" + a.Ga.toString());
            1 !== a.scale && (d += " s:" + a.scale);
            0 !== a.angle && (d += " a:" + a.angle);
            null !== a.background && (d += " b:" + a.background.toString());
            null !== a.Zl && (d += " a:" + a.background.toString());
            a instanceof x && (d += " elts:" + a.xa.count, a.isEnabled || (d += " !ENABLED"), a.yq && (d += " CLIPPING"), 0 !== a.cH && (d += " top:" + a.cH), 0 !== a.$F && (d += " left:" + a.$F), null !== a.Xk && (d += " itemArray#:" + D.cb(a.Xk)), a.WF && (d += " cat:" + a.WF), null !== a.data && (d += " data:" + a.data));
            null !== a.sd && (d += ' portId: "' + a.sd + '"');
            D.trace(d);
            if (a instanceof x) for (a = a.elements; a.next();) v.XC(a.value, b + 1, "")
        },
        AL: function(a) {
            D.trace("DelayedReferences (" + a.vg.count + ")");
            for (a = a.vg.j; a.next();) {
                for (var b = "",
                c = a.value.j; c.next();) b += ja(c.value) + ", ";
                D.trace("  " + a.key + ": " + b)
            }
        },
        LE: function(a, b) {
            if (!D.Ta(b) || b instanceof Element || b instanceof CanvasRenderingContext2D || b instanceof ka || b instanceof la) return "";
            var c = "",
            d;
            for (d in b) if ("string" !== typeof d)"" === c && (c = b + "\n"),
            c += "  " + d + " is not a string property\n";
            else if ("_" !== d.charAt(0) && !(2 >= d.length)) {
                var e = D.ub(b, d);
                if (null !== e && "function" !== typeof e) {
                    if (b.hasOwnProperty(d)) {
                        var g = Object.getPrototypeOf(b);
                        if (g && g.Dw && g.Dw[d]) continue
                    } else if (D.Px(b, d)) continue;
                    "" === c && (c = b + "\n");
                    c += '  unknown property "' + d + '" has value: ' + e + " at " + a + "\n"
                }
            }
            return c
        },
        sx: function(a, b) {
            if (null !== b && void 0 !== b && "number" !== typeof b && "string" !== typeof b && "boolean" !== typeof b && "function" !== typeof b) if (void 0 !== D.Fd(b)) {
                if (!v.Qw.contains(b)) if (v.Qw.add(b), v.sw.add(v.LE(a, b)), b instanceof K || b instanceof L || b instanceof ma) for (var c = b.j; c.next();) v.sx(a + "[" + c.key + "]", c.value);
                else for (c in b) {
                    var d = D.ub(b, c);
                    if (void 0 !== d && null !== d && D.Ta(d) && d !== b.Dw) {
                        if (b instanceof na) {
                            if (d === b.gi) continue
                        } else if (b instanceof x) {
                            if ("data" === c || d === b.Nd) continue;
                            if ("itemArray" === c || d === b.cj) continue;
                            if (b instanceof F && d === b.Jl) continue
                        } else if (! (b instanceof E)) if (b instanceof oa) {
                            if ("archetypeGroupData" === c || d === b.Zy) continue
                        } else if (b instanceof ra) {
                            if ("archetypeLinkData" === c || d === b.az) continue;
                            if ("archetypeLabelNodeData" === c || d === b.$y) continue
                        } else if (b instanceof ta) {
                            if ("archetypeNodeData" === c || d === b.ol) continue
                        } else if (b instanceof M) {
                            if ("nodeDataArray" === c || d === b.we) continue;
                            if ("linkDataArray" === c || d === b.bf || d === b.hi) continue;
                            if (d === b.Ec) continue;
                            if (d === b.vg) continue
                        } else if (b instanceof va || b instanceof wa || b instanceof xa) continue;
                        v.sx(a + "." + c, d)
                    }
                }
            } else if (Array.isArray(b)) for (c = 0; c < b.length; c++) v.sx(a + "[" + c + "]", b[c]);
            else v.sw.add(v.LE(a, b))
        },
        checkProperties: function(a) {
            void 0 === v.Qw ? v.Qw = new L(Object) : v.Qw.clear();
            v.sw = new ya;
            v.sx("", a);
            a = v.sw.toString();
            v.sw = null;
            return a
        }
    };
    aa.Debug = v;
    var D = {
        ud: 1,
        Yc: 2,
        ld: 4,
        kd: 8,
        Xn: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("534.30") && 0 < window.navigator.userAgent.indexOf("Android"),
        gJ: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 9.0"),
        OF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 10.0"),
        PF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Trident/7"),
        HL: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Edge/"),
        Vk: void 0 !== window.navigator && void 0 !== window.navigator.platform && 0 <= window.navigator.platform.toUpperCase().indexOf("MAC"),
        QF: void 0 !== window.navigator && void 0 !== window.navigator.platform && null !== window.navigator.platform.match(/(iPhone|iPod|iPad)/i),
        VE: function(a, b, c) {
            var d = -1;
            return function() {
                var e = this,
                g = arguments; - 1 !== d && D.clearTimeout(d);
                d = D.setTimeout(function() {
                    d = -1;
                    c || a.apply(e, g)
                },
                b);
                c && !d && a.apply(e, g)
            }
        },
        setTimeout: function(a, b) {
            return window.setTimeout(a, b)
        },
        clearTimeout: function(a) {
            window.clearTimeout(a)
        },
        createElement: function(a) {
            return window.document.createElement(a)
        },
        k: function(a) {
            throw Error(a);
        },
        pa: function(a, b) {
            var c = "The object is frozen, so its properties cannot be set: " + a.toString();
            void 0 !== b && (c += "  to value: " + b);
            D.k(c)
        },
        l: function(a, b, c, d) {
            a instanceof b || (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.gc(a, b, c))
        },
        h: function(a, b, c, d) {
            typeof a !== b && (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.gc(a, b, c))
        },
        p: function(a, b, c) {
            "number" === typeof a && isFinite(a) || (b = D.getTypeName(b), void 0 !== c && (b += "." + c), D.k(b + " must be a real number type, and not NaN or Infinity: " + a))
        },
        Ca: function(a, b, c, d) {
            a instanceof za && a.Ne === b || (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.gc(a, "a constant of class " + D.qf(b), c))
        },
        Yt: function(a, b) {
            "string" === typeof a ? Aa(a) || D.k('Color "' + a + '" is not a valid color string for ' + b) : a instanceof Ba || D.k("Value for " + b + " must be a color string or a Brush, not " + a)
        },
        gc: function(a, b, c, d) {
            b = D.getTypeName(b);
            c = D.getTypeName(c);
            void 0 !== d && (c += "." + d);
            "string" === typeof a ? D.k(c + " value is not an instance of " + b + ': "' + a + '"') : D.k(c + " value is not an instance of " + b + ": " + a)
        },
        ua: function(a, b, c, d) {
            c = D.getTypeName(c);
            void 0 !== d && (c += "." + d);
            D.k(c + " is not in the range " + b + ": " + a)
        },
        td: function(a) {
            D.k(D.qf(a) + " constructor cannot take any arguments.")
        },
        Va: function(a) {
            D.k("Collection was modified during iteration: " + a.toString() + "\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")
        },
        Xj: function(a, b) {
            D.k("No property to set for this enum value: " + b + " on " + a.toString())
        },
        trace: function(a) {
            window.console && window.console.log(a)
        },
        Bx: {},
        Nn: function(a, b) { ! 0 !== D.Bx[a] && (D.Bx[a] = !0, window.console && window.console.log(a + " is deprecated in " + b + ", see the GoJS change log for more information."))
        },
        Ta: function(a) {
            return "object" === typeof a && null !== a
        },
        isArray: function(a) {
            return Array.isArray(a) || a instanceof NodeList || a instanceof HTMLCollection
        },
        hJ: function(a) {
            return Array.isArray(a)
        },
        Xt: function(a, b, c) {
            D.isArray(a) || D.gc(a, "Array or NodeList or HTMLCollection", b, c)
        },
        cb: function(a) {
            return a.length
        },
        cm: function(a) {
            return Array.prototype.slice.call(a)
        },
        La: function(a, b) {
            Array.isArray(a);
            return a[b]
        },
        JE: function(a, b, c) {
            Array.isArray(a) ? a[b] = c: D.k("Cannot replace an object in an HTMLCollection or NodeList at " + b)
        },
        $l: function(a, b) {
            if (Array.isArray(a)) return a.indexOf(b);
            for (var c = a.length,
            d = 0; d < c; d++) if (a[d] === b) return d;
            return - 1
        },
        Ih: function(a, b, c) {
            Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : D.k("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
        },
        Sg: function(a, b) {
            Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : D.k("Cannot remove an object from an HTMLCollection or NodeList at " + b)
        },
        Ry: [],
        P: function() {
            var a = D.Ry.pop();
            return void 0 === a ? new O: a
        },
        Fb: function(a, b) {
            var c = D.Ry.pop();
            if (void 0 === c) return new O(a, b);
            c.x = a;
            c.y = b;
            return c
        },
        A: function(a) {
            D.Ry.push(a)
        },
        hC: [],
        Cm: function() {
            var a = D.hC.pop();
            return void 0 === a ? new Ca: a
        },
        Rk: function(a) {
            D.hC.push(a)
        },
        Sy: [],
        Nf: function() {
            var a = D.Sy.pop();
            return void 0 === a ? new B: a
        },
        gh: function(a, b, c, d) {
            var e = D.Sy.pop();
            if (void 0 === e) return new B(a, b, c, d);
            e.x = a;
            e.y = b;
            e.width = c;
            e.height = d;
            return e
        },
        Mb: function(a) {
            D.Sy.push(a)
        },
        iC: [],
        Of: function() {
            var a = D.iC.pop();
            return void 0 === a ? new Da: a
        },
        He: function(a) {
            D.iC.push(a)
        },
        Ty: null,
        v: function() {
            var a = D.Ty;
            return null !== a ? (D.Ty = null, a) : new Ea
        },
        u: function(a) {
            a.reset();
            D.Ty = a
        },
        gC: [],
        tb: function() {
            var a = D.gC.pop();
            return void 0 === a ? [] : a
        },
        Aa: function(a) {
            a.length = 0;
            D.gC.push(a)
        },
        Co: Object.freeze([]),
        Gm: 1,
        tc: function(a) {
            a.__gohashid = D.Gm++
        },
        sq: function(a) {
            var b = a.__gohashid;
            void 0 === b && (b = D.Gm++, a.__gohashid = b);
            return b
        },
        Fd: function(a) {
            return a.__gohashid
        },
        ja: function(a, b) {
            b.fz = a;
            aa[a] = b
        },
        Sa: function(a, b) {
            function c() {}
            c.prototype = b.prototype;
            a.prototype = new c;
            a.prototype.constructor = a
        },
        Ai: function(a) {
            a.BH = !0
        },
        defineProperty: function(a, b, c, d, e) {
            D.h(a, "function", "Util.defineProperty:classfunc");
            D.h(b, "object", "Util.defineProperty:propobj");
            D.h(c, "function", "Util.defineProperty:getter");
            D.h(d, "function", "Util.defineProperty:setter");
            for (var g in b) {
                b = b[g];
                c = {
                    get: c,
                    set: d,
                    enumerable: !0
                };
                if (void 0 !== e) for (var h in e) c[h] = e[h];
                Object.defineProperty(a.prototype, g, c);
                e = Object.getOwnPropertyDescriptor(a.prototype, g);
                b && e && Object.defineProperty(a.prototype, b, e);
                break
            }
        },
        CK: !1,
        w: function(a, b, c, d) {
            D.h(a, "function", "Util.defineReadOnlyProperty:classfunc");
            D.h(b, "object", "Util.defineReadOnlyProperty:propobj");
            D.h(c, "function", "Util.defineReadOnlyProperty:getter");
            for (var e in b) {
                var g = b[e];
                b = {
                    get: c,
                    set: function(a) {
                        D.k('The property "' + g + '" is read-only and cannot be set to ' + a)
                    },
                    enumerable: !0
                };
                if (void 0 !== d) for (var h in d) b[h] = d[h];
                Object.defineProperty(a.prototype, e, b);
                d = Object.getOwnPropertyDescriptor(a.prototype, e);
                g && d && Object.defineProperty(a.prototype, g, d);
                break
            }
        },
        ke: function(a, b) {
            for (var c in b) b[c] = !0;
            a.prototype.Dw = b
        },
        getTypeName: function(a) {
            return void 0 === a ? "": "string" === typeof a ? a: "function" === typeof a ? D.qf(a) : null === a ? "*": ""
        },
        qf: function(a) {
            if ("function" === typeof a) {
                if (a.fz) return a.fz;
                if (a.name) return a.name;
                var b = a.toString(),
                c = b.indexOf("("),
                b = b.substring(9, c).trim();
                if ("" !== b) return a.fz = b
            } else if ("object" === typeof a && a.constructor) return D.qf(a.constructor);
            return typeof a
        },
        s: function(a, b, c) {
            D.h(a, "function", "Util.defineEnumValue:classfunc");
            D.h(b, "string", "Util.defineEnumValue:name");
            D.h(c, "number", "Util.defineEnumValue:num");
            c = new za(a, b, c);
            Object.freeze(c);
            a[b] = c;
            var d = a.lv;
            d instanceof ma || (d = new ma("string", za), a.lv = d);
            d.add(b, c);
            return c
        },
        ub: function(a, b) {
            if (!a || !b) return null;
            var c = void 0;
            try {
                "function" === typeof b ? c = b(a) : "function" === typeof a.getAttribute ? (c = a.getAttribute(b), null === c && (c = void 0)) : c = a[b]
            } catch(d) {
                v && D.trace("property get error: " + d.toString())
            }
            return c
        },
        Ua: function(a, b, c) {
            if (a && b) try {
                "function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
            } catch(d) {
                v && D.trace("property set error: " + d.toString())
            }
        },
        Zu: function(a, b) {
            D.h(a, "object", "Setting properties requires Objects as arguments");
            D.h(b, "object", "Setting properties requires Objects as arguments");
            var c = a instanceof x,
            d = a instanceof E,
            e;
            for (e in b) {
                "" === e && D.k("Setting properties requires non-empty property names");
                var g = a,
                h = e;
                if (c || d) {
                    var k = e.indexOf(".");
                    if (0 < k) {
                        var l = e.substring(0, k);
                        if (c) g = a.Ed(l);
                        else if (g = a[l], void 0 === g || null === g) g = a.kb[l];
                        D.Ta(g) ? h = e.substr(k + 1) : D.k("Unable to find object named: " + l + " in " + a.toString() + " when trying to set property: " + e)
                    }
                }
                if ("_" !== h[0] && !D.Px(g, h)) if (d && "ModelChanged" === h) {
                    a.NH(b[h]);
                    continue
                } else if (d && "Changed" === h) {
                    a.An(b[h]);
                    continue
                } else if (d && D.Px(a.kb, h)) g = a.kb;
                else if (d && Ga(a, h)) {
                    a.mA(h, b[h]);
                    continue
                } else if (a instanceof M && "Changed" === h) {
                    a.An(b[h]);
                    continue
                } else D.k('Trying to set undefined property "' + h + '" on object: ' + g.toString());
                g[h] = b[e];
                "_" === h[0] && g instanceof P && g.KH(h)
            }
        },
        Px: function(a, b) {
            if (a.hasOwnProperty(b)) return ! 0;
            for (var c = Object.getPrototypeOf(a); c && c !== Function;) {
                if (c.hasOwnProperty(b)) return ! 0;
                var d = c.Dw;
                if (d && d[b]) return ! 0;
                c = Object.getPrototypeOf(c)
            }
            return ! 1
        },
        SJ: function(a) {
            for (var b = [], c = 0; 256 > c; c++) b[c] = c;
            for (var d = 0,
            e = 0,
            c = 0; 256 > c; c++) d = (d + b[c] + 119) % 256,
            e = b[c],
            b[c] = b[d],
            b[d] = e;
            for (var d = c = 0,
            g = "",
            h = 0; h < a.length; h++) c = (c + 1) % 256,
            d = (d + b[c]) % 256,
            e = b[c],
            b[c] = b[d],
            b[d] = e,
            g += String.fromCharCode(a.charCodeAt(h) ^ b[(b[c] + b[d]) % 256]);
            return g
        },
        VI: function(a) {
            for (var b = {},
            c = 0; 256 > c; c++) b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
            a.length % 2 && (a = "0" + a);
            for (var d = [], e = 0, c = 0; c < a.length; c += 2) d[e++] = b[a.substr(c, 2)];
            a = d.join("");
            return "" === a ? "0": a
        },
        Tg: function(a) {
            return D.SJ(D.VI(a))
        },
        Em: null,
        adym: "7da71ca0ad381e90",
        vfo: "2be641fdb4",
        $H: "@COLOR1",
        aI: "@COLOR2",
        WE: !1,
        $t: null,
        au: null
    };
    D.Em = function() {
        var a = window.document.createElement("canvas"),
        b = a.getContext("2d");
        b[D.Tg("7ca11abfd022028846")] = D.Tg("398c3597c01238");
        for (var c = ["5da73c80a3330d854f9e5e671d6633", "32ab5ff3b26f42dc0ed90f22422913b54ae6247590da4bb21c324ba3a84e385776", "54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387", "74bf19bce72555874c86"], d = 1; 5 > d; d++) b[D.Tg("7ca11abfd7330390")](D.Tg(c[d - 1]), 10, 15 * d + 0);
        b[D.Tg("7ca11abfd022028846")] = D.Tg("39f046ebb36e4b");
        for (d = 1; 5 > d; d++) b[D.Tg("7ca11abfd7330390")](D.Tg(c[d - 1]), 10, 15 * d + 0);
        if (4 !== c.length || "5" !== c[0][0] || "7" !== c[3][0]) D.s = function(a, b) {
            var c = new za(a, b, 2);
            Object.freeze(c);
            a[b] = c;
            var d = a.lv;
            d instanceof ma || (d = new ma("string", za), a.lv = d);
            d.add(b, c);
            return c
        };
        return a
    } ();
    function za(a, b, c) {
        D.tc(this);
        this.rC = a;
        this.Xb = b;
        this.FH = c
    }
    D.ja("EnumValue", za);
    za.prototype.toString = function() {
        return D.qf(this.rC) + "." + this.Xb
    };
    D.w(za, {
        Ne: "classType"
    },
    function() {
        return this.rC
    });
    D.w(za, {
        name: "name"
    },
    function() {
        return this.Xb
    });
    D.w(za, {
        value: "value"
    },
    function() {
        return this.FH
    });
    var Ha;
    za.findName = Ha = function(a, b) {
        if (void 0 === b || null === b || "" === b) return null;
        D.h(a, "function", "findName:classfunc");
        D.h(b, "string", "EnumValue.findName:name");
        var c = a.lv;
        return c instanceof ma ? c.oa(b) : null
    };
    function ya() {
        this.qC = []
    }
    ya.prototype.toString = function() {
        return this.qC.join("")
    };
    ya.prototype.add = function(a) {
        "" !== a && this.qC.push(a)
    };
    function la() {}
    function Ia(a) {
        void 0 === a && (a = 42);
        this.seed = a;
        this.Ny = 48271;
        this.kv = 2147483647;
        this.fC = this.kv / this.Ny;
        this.nH = this.kv % this.Ny;
        this.mH = 1 / this.kv;
        this.random()
    }
    Ia.prototype.random = function() {
        var a = this.seed % this.fC * this.Ny - this.seed / this.fC * this.nH;
        this.seed = 0 < a ? a: a + this.kv;
        return this.seed * this.mH
    };
    function Ja() {}
    D.w(Ja, {
        j: "iterator"
    },
    function() {
        return this
    });
    Ja.prototype.reset = Ja.prototype.reset = function() {};
    Ja.prototype.next = Ja.prototype.next = function() {
        return ! 1
    };
    Ja.prototype.hasNext = function() {
        return ! 1
    };
    Ja.prototype.first = Ja.prototype.first = function() {
        return null
    };
    Ja.prototype.any = function() {
        return ! 1
    };
    Ja.prototype.all = function() {
        return ! 0
    };
    Ja.prototype.each = function() {
        return this
    };
    Ja.prototype.map = function() {
        return this
    };
    Ja.prototype.filter = function() {
        return this
    };
    Ja.prototype.concat = function(a) {
        return a.j
    };
    D.w(Ja, {
        count: "count"
    },
    function() {
        return 0
    });
    Ja.prototype.Qf = function() {};
    Ja.prototype.toString = function() {
        return "EmptyIterator"
    };
    var Ka = new Ja;
    function La(a) {
        this.key = -1;
        this.value = a
    }
    D.ke(La, {
        key: !0,
        value: !0
    });
    D.w(La, {
        j: "iterator"
    },
    function() {
        return this
    });
    La.prototype.reset = La.prototype.reset = function() {
        this.key = -1
    };
    La.prototype.next = La.prototype.next = function() {
        return - 1 === this.key ? (this.key = 0, !0) : !1
    };
    La.prototype.hasNext = function() {
        return this.next()
    };
    La.prototype.first = La.prototype.first = function() {
        this.key = 0;
        return this.value
    };
    La.prototype.any = function(a) {
        this.key = -1;
        return a(this.value)
    };
    La.prototype.all = function(a) {
        this.key = -1;
        return a(this.value)
    };
    La.prototype.each = function(a) {
        this.key = -1;
        a(this.value);
        return this
    };
    La.prototype.map = function(a) {
        return new La(a(this.value))
    };
    La.prototype.filter = function(a) {
        return a(this.value) ? new La(this.value) : Ka
    };
    La.prototype.concat = function(a) {
        return new Ma(this, a.j)
    };
    D.w(La, {
        count: "count"
    },
    function() {
        return 1
    });
    La.prototype.Qf = function() {
        this.value = null
    };
    La.prototype.toString = function() {
        return "SingletonIterator(" + this.value + ")"
    };
    function Ma(a, b) {
        this.Bl = a;
        this.Cl = b;
        this.mv = !1
    }
    D.ke(Ma, {
        key: !0,
        value: !0
    });
    D.w(Ma, {
        j: "iterator"
    },
    function() {
        return this
    });
    Ma.prototype.reset = Ma.prototype.reset = function() {
        this.Bl.reset();
        this.Cl.reset();
        this.mv = !1
    };
    Ma.prototype.next = Ma.prototype.next = function() {
        if (!this.mv) {
            var a = this.Bl;
            if (a.next()) return this.key = a.key,
            this.value = a.value,
            !0;
            this.mv = !0
        }
        return this.mv && (a = this.Cl, a.next()) ? (this.key = a.key, this.value = a.value, !0) : !1
    };
    Ma.prototype.hasNext = function() {
        return this.next()
    };
    Ma.prototype.first = Ma.prototype.first = function() {
        this.reset();
        return this.next() ? this.value: null
    };
    Ma.prototype.any = function(a) {
        return this.Bl.any(a) || this.Cl.any(a) ? !0 : !1
    };
    Ma.prototype.all = function(a) {
        return this.Bl.all(a) && this.Cl.all(a) ? !0 : !1
    };
    Ma.prototype.each = function(a) {
        this.Bl.each(a);
        this.Cl.each(a);
        return this
    };
    Ma.prototype.map = function(a) {
        return new Ma(this.Bl.map(a), this.Cl.map(a))
    };
    Ma.prototype.filter = function(a) {
        return new Ma(this.Bl.filter(a), this.Cl.filter(a))
    };
    Ma.prototype.concat = function(a) {
        return new Ma(this, a.j)
    };
    D.w(Ma, {
        count: "count"
    },
    function() {
        return this.Bl.count + this.Cl.count
    });
    Ma.prototype.Qf = function() {
        this.value = this.key = null
    };
    Ma.prototype.toString = function() {
        return "ConcatIterator()"
    };
    function Na(a) {
        this.Dc = a;
        this.mi = null;
        a.Wb = null;
        this.$a = a.G;
        this.Cc = -1
    }
    D.ke(Na, {
        key: !0,
        value: !0
    });
    D.w(Na, {
        j: "iterator"
    },
    function() {
        return this
    });
    D.defineProperty(Na, {
        Fq: "predicate"
    },
    function() {
        return this.mi
    },
    function(a) {
        this.mi = a
    });
    Na.prototype.reset = Na.prototype.reset = function() {
        var a = this.Dc;
        a.Wb = null;
        this.$a = a.G;
        this.Cc = -1
    };
    Na.prototype.next = Na.prototype.next = function() {
        var a = this.Dc;
        if (a.G !== this.$a) {
            if (0 > this.key) return ! 1;
            D.Va(a)
        }
        var a = a.o,
        b = a.length,
        c = ++this.Cc,
        d = this.mi;
        if (null !== d) for (; c < b;) {
            var e = a[c];
            if (d(e)) return this.key = this.Cc = c,
            this.value = e,
            !0;
            c++
        } else {
            if (c < b) return this.key = c,
            this.value = a[c],
            !0;
            this.Qf()
        }
        return ! 1
    };
    Na.prototype.hasNext = function() {
        return this.next()
    };
    Na.prototype.first = Na.prototype.first = function() {
        var a = this.Dc;
        this.$a = a.G;
        this.Cc = 0;
        var a = a.o,
        b = a.length,
        c = this.mi;
        if (null !== c) {
            for (var d = 0; d < b;) {
                var e = a[d];
                if (c(e)) return this.key = this.Cc = d,
                this.value = e;
                d++
            }
            return null
        }
        return 0 < b ? (e = a[0], this.key = 0, this.value = e) : null
    };
    Na.prototype.any = function(a) {
        var b = this.Dc;
        b.Wb = null;
        var c = b.G;
        this.Cc = -1;
        for (var d = b.o,
        e = d.length,
        g = this.mi,
        h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k)) {
                if (a(k)) return ! 0;
                b.G !== c && D.Va(b)
            }
        }
        return ! 1
    };
    Na.prototype.all = function(a) {
        var b = this.Dc;
        b.Wb = null;
        var c = b.G;
        this.Cc = -1;
        for (var d = b.o,
        e = d.length,
        g = this.mi,
        h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k)) {
                if (!a(k)) return ! 1;
                b.G !== c && D.Va(b)
            }
        }
        return ! 0
    };
    Na.prototype.each = function(a) {
        var b = this.Dc;
        b.Wb = null;
        var c = b.G;
        this.Cc = -1;
        for (var d = b.o,
        e = d.length,
        g = this.mi,
        h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k)) a(k),
            b.G !== c && D.Va(b)
        }
        return this
    };
    Na.prototype.map = function(a) {
        var b = this.Dc;
        b.Wb = null;
        var c = b.G;
        this.Cc = -1;
        for (var d = [], e = b.o, g = e.length, h = this.mi, k = 0; k < g; k++) {
            var l = e[k];
            if (null === h || h(l)) d.push(a(l)),
            b.G !== c && D.Va(b)
        }
        a = new K;
        a.o = d;
        a.Qc();
        return a.j
    };
    Na.prototype.filter = function(a) {
        var b = this.Dc;
        b.Wb = null;
        var c = b.G;
        this.Cc = -1;
        for (var d = [], e = b.o, g = e.length, h = this.mi, k = 0; k < g; k++) {
            var l = e[k];
            if (null === h || h(l)) a(l) && d.push(l),
            b.G !== c && D.Va(b)
        }
        a = new K(b.ca);
        a.o = d;
        a.Qc();
        return a.j
    };
    Na.prototype.concat = function(a) {
        this.Dc.Wb = null;
        return new Ma(this, a.j)
    };
    D.w(Na, {
        count: "count"
    },
    function() {
        var a = this.mi;
        if (null !== a) {
            for (var b = 0,
            c = this.Dc.o,
            d = c.length,
            e = 0; e < d; e++) a(c[e]) && b++;
            return b
        }
        return this.Dc.o.length
    });
    Na.prototype.Qf = function() {
        this.key = -1;
        this.value = null;
        this.$a = -1;
        this.mi = null;
        this.Dc.Wb = this
    };
    Na.prototype.toString = function() {
        return "ListIterator@" + this.Cc + "/" + this.Dc.count
    };
    function Pa(a) {
        this.Dc = a;
        a.dj = null;
        this.$a = a.G;
        this.Cc = a.o.length
    }
    D.ke(Pa, {
        key: !0,
        value: !0
    });
    D.w(Pa, {
        j: "iterator"
    },
    function() {
        return this
    });
    Pa.prototype.reset = Pa.prototype.reset = function() {
        var a = this.Dc;
        a.dj = null;
        this.$a = a.G;
        this.Cc = a.o.length
    };
    Pa.prototype.next = Pa.prototype.next = function() {
        var a = this.Dc;
        if (a.G !== this.$a) {
            if (0 > this.key) return ! 1;
            D.Va(a)
        }
        var b = --this.Cc;
        if (0 <= b) return this.key = b,
        this.value = a.o[b],
        !0;
        this.Qf();
        return ! 1
    };
    Pa.prototype.hasNext = function() {
        return this.next()
    };
    Pa.prototype.first = Pa.prototype.first = function() {
        var a = this.Dc;
        this.$a = a.G;
        var b = a.o;
        this.Cc = a = b.length - 1;
        return 0 <= a ? (b = b[a], this.key = a, this.value = b) : null
    };
    Pa.prototype.any = function(a) {
        var b = this.Dc;
        b.dj = null;
        var c = b.G,
        d = b.o,
        e = d.length;
        this.Cc = e;
        for (e -= 1; 0 <= e; e--) {
            if (a(d[e])) return ! 0;
            b.G !== c && D.Va(b)
        }
        return ! 1
    };
    Pa.prototype.all = function(a) {
        var b = this.Dc;
        b.dj = null;
        var c = b.G,
        d = b.o,
        e = d.length;
        this.Cc = e;
        for (e -= 1; 0 <= e; e--) {
            if (!a(d[e])) return ! 1;
            b.G !== c && D.Va(b)
        }
        return ! 0
    };
    Pa.prototype.each = function(a) {
        var b = this.Dc;
        b.dj = null;
        var c = b.G,
        d = b.o,
        e = d.length;
        this.Cc = e;
        for (e -= 1; 0 <= e; e--) a(d[e]),
        b.G !== c && D.Va(b);
        return this
    };
    Pa.prototype.map = function(a) {
        var b = this.Dc;
        b.dj = null;
        var c = b.G,
        d = [],
        e = b.o,
        g = e.length;
        this.Cc = g;
        for (g -= 1; 0 <= g; g--) d.push(a(e[g])),
        b.G !== c && D.Va(b);
        a = new K;
        a.o = d;
        a.Qc();
        return a.j
    };
    Pa.prototype.filter = function(a) {
        var b = this.Dc;
        b.dj = null;
        var c = b.G,
        d = [],
        e = b.o,
        g = e.length;
        this.Cc = g;
        for (g -= 1; 0 <= g; g--) {
            var h = e[g];
            a(h) && d.push(h);
            b.G !== c && D.Va(b)
        }
        a = new K(b.ca);
        a.o = d;
        a.Qc();
        return a.j
    };
    Pa.prototype.concat = function(a) {
        this.Dc.dj = null;
        return new Ma(this, a.j)
    };
    D.w(Pa, {
        count: "count"
    },
    function() {
        return this.Dc.o.length
    });
    Pa.prototype.Qf = function() {
        this.key = -1;
        this.value = null;
        this.$a = -1;
        this.Dc.dj = this
    };
    Pa.prototype.toString = function() {
        return "ListIteratorBackwards(" + this.Cc + "/" + this.Dc.count + ")"
    };
    function K(a) {
        D.tc(this);
        this.J = !1;
        this.o = [];
        this.G = 0;
        this.dj = this.Wb = null;
        void 0 === a || null === a ? this.ca = null: "string" === typeof a ? "object" === a || "string" === a || "number" === a || "boolean" === a || "function" === a ? this.ca = a: D.ua(a, "the string 'object', 'number', 'string', 'boolean', or 'function'", "List constructor: type") : "function" === typeof a ? this.ca = a === Object ? "object": a === String ? "string": a === Number ? "number": a === Boolean ? "boolean": a === Function ? "function": a: D.ua(a, "null, a primitive type name, or a class type", "List constructor: type")
    }
    D.ja("List", K);
    K.prototype.oh = function(a) {
        null !== this.ca && ("string" === typeof this.ca ? typeof a === this.ca && null !== a || D.gc(a, this.ca) : a instanceof this.ca || D.gc(a, this.ca))
    };
    K.prototype.Qc = function() {
        var a = this.G;
        a++;
        999999999 < a && (a = 0);
        this.G = a
    };
    K.prototype.freeze = K.prototype.freeze = function() {
        this.J = !0;
        return this
    };
    K.prototype.thaw = K.prototype.Ya = function() {
        this.J = !1;
        return this
    };
    K.prototype.toString = function() {
        return "List(" + D.getTypeName(this.ca) + ")#" + D.Fd(this)
    };
    K.prototype.add = K.prototype.add = function(a) {
        null !== a && (v && this.oh(a), this.J && D.pa(this, a), this.o.push(a), this.Qc())
    };
    K.prototype.push = K.prototype.push = function(a) {
        this.add(a)
    };
    K.prototype.addAll = K.prototype.Rc = function(a) {
        if (null === a) return this;
        this.J && D.pa(this);
        var b = this.o;
        if (D.isArray(a)) for (var c = D.cb(a), d = 0; d < c; d++) {
            var e = D.La(a, d);
            v && this.oh(e);
            b.push(e)
        } else for (a = a.j; a.next();) e = a.value,
        v && this.oh(e),
        b.push(e);
        this.Qc();
        return this
    };
    K.prototype.clear = K.prototype.clear = function() {
        this.J && D.pa(this);
        this.o.length = 0;
        this.Qc()
    };
    K.prototype.contains = K.prototype.contains = function(a) {
        if (null === a) return ! 1;
        v && this.oh(a);
        return - 1 !== this.o.indexOf(a)
    };
    K.prototype.has = K.prototype.has = function(a) {
        return this.contains(a)
    };
    K.prototype.indexOf = K.prototype.indexOf = function(a) {
        if (null === a) return - 1;
        v && this.oh(a);
        return this.o.indexOf(a)
    };
    K.prototype.elt = K.prototype.ea = function(a) {
        v && D.p(a, K, "elt:i");
        var b = this.o; (0 > a || a >= b.length) && D.ua(a, "0 <= i < length", K, "elt:i");
        return b[a]
    };
    K.prototype.get = K.prototype.get = function(a) {
        return this.ea(a)
    };
    K.prototype.setElt = K.prototype.qg = function(a, b) {
        v && (this.oh(b), D.p(a, K, "setElt:i"));
        var c = this.o; (0 > a || a >= c.length) && D.ua(a, "0 <= i < length", K, "setElt:i");
        this.J && D.pa(this, a);
        c[a] = b
    };
    K.prototype.set = K.prototype.set = function(a, b) {
        this.qg(a, b)
    };
    K.prototype.first = K.prototype.first = function() {
        var a = this.o;
        return 0 === a.length ? null: a[0]
    };
    K.prototype.last = K.prototype.pe = function() {
        var a = this.o,
        b = a.length;
        return 0 < b ? a[b - 1] : null
    };
    K.prototype.pop = K.prototype.pop = function() {
        this.J && D.pa(this);
        var a = this.o;
        return 0 < a.length ? a.pop() : null
    };
    K.prototype.any = function(a) {
        for (var b = this.o,
        c = this.G,
        d = b.length,
        e = 0; e < d; e++) {
            if (a(b[e])) return ! 0;
            this.G !== c && D.Va(this)
        }
        return ! 1
    };
    K.prototype.all = function(a) {
        for (var b = this.o,
        c = this.G,
        d = b.length,
        e = 0; e < d; e++) {
            if (!a(b[e])) return ! 1;
            this.G !== c && D.Va(this)
        }
        return ! 0
    };
    K.prototype.each = function(a) {
        for (var b = this.o,
        c = this.G,
        d = b.length,
        e = 0; e < d; e++) a(b[e]),
        this.G !== c && D.Va(this);
        return this
    };
    K.prototype.map = function(a) {
        for (var b = new K,
        c = [], d = this.o, e = this.G, g = d.length, h = 0; h < g; h++) c.push(a(d[h])),
        this.G !== e && D.Va(this);
        b.o = c;
        b.Qc();
        return b
    };
    K.prototype.filter = function(a) {
        for (var b = new K(this.ca), c = [], d = this.o, e = this.G, g = d.length, h = 0; h < g; h++) {
            var k = d[h];
            a(k) && c.push(k);
            this.G !== e && D.Va(this)
        }
        b.o = c;
        b.Qc();
        return b
    };
    K.prototype.concat = function(a) {
        return this.copy().Rc(a)
    };
    K.prototype.insertAt = K.prototype.Xd = function(a, b) {
        v && (this.oh(b), D.p(a, K, "insertAt:i"));
        0 > a && D.ua(a, ">= 0", K, "insertAt:i");
        this.J && D.pa(this, a);
        var c = this.o;
        a >= c.length ? c.push(b) : c.splice(a, 0, b);
        this.Qc();
        return ! 0
    };
    K.prototype.remove = K.prototype.remove = function(a) {
        if (null === a) return ! 1;
        v && this.oh(a);
        this.J && D.pa(this, a);
        var b = this.o;
        a = b.indexOf(a);
        if ( - 1 === a) return ! 1;
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Qc();
        return ! 0
    };
    K.prototype["delete"] = K.prototype.delete = function(a) {
        return this.remove(a)
    };
    K.prototype.removeAt = K.prototype.jd = function(a) {
        v && D.p(a, K, "removeAt:i");
        var b = this.o; (0 > a || a >= b.length) && D.ua(a, "0 <= i < length", K, "removeAt:i");
        this.J && D.pa(this, a);
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Qc()
    };
    K.prototype.removeRange = K.prototype.removeRange = function(a, b) {
        v && (D.p(a, K, "removeRange:from"), D.p(b, K, "removeRange:to"));
        var c = this.o,
        d = c.length;
        if (0 > a) a = 0;
        else if (a >= d) return this;
        if (0 > b) return this;
        b >= d && (b = d - 1);
        if (a > b) return this;
        this.J && D.pa(this);
        for (var e = a,
        g = b + 1; g < d;) c[e++] = c[g++];
        c.length = d - (b - a + 1);
        this.Qc();
        return this
    };
    K.prototype.copy = function() {
        var a = new K(this.ca),
        b = this.o;
        0 < b.length && (a.o = Array.prototype.slice.call(b));
        return a
    };
    K.prototype.toArray = K.prototype.lc = function() {
        for (var a = this.o,
        b = this.count,
        c = Array(b), d = 0; d < b; d++) c[d] = a[d];
        return c
    };
    K.prototype.toSet = K.prototype.bH = function() {
        for (var a = new L(this.ca), b = this.o, c = this.count, d = 0; d < c; d++) a.add(b[d]);
        return a
    };
    K.prototype.sort = K.prototype.sort = function(a) {
        v && D.h(a, "function", K, "sort:sortfunc");
        this.J && D.pa(this);
        this.o.sort(a);
        this.Qc();
        return this
    };
    K.prototype.sortRange = K.prototype.Uq = function(a, b, c) {
        var d = this.o,
        e = d.length;
        void 0 === b && (b = 0);
        void 0 === c && (c = e);
        v && (D.h(a, "function", K, "sortRange:sortfunc"), D.p(b, K, "sortRange:from"), D.p(c, K, "sortRange:to"));
        this.J && D.pa(this);
        var g = c - b;
        if (1 >= g) return this; (0 > b || b >= e - 1) && D.ua(b, "0 <= from < length", K, "sortRange:from");
        if (2 === g) return c = d[b],
        e = d[b + 1],
        0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.Qc()),
        this;
        if (0 === b) if (c >= e) d.sort(a);
        else for (g = d.slice(0, c), g.sort(a), a = 0; a < c; a++) d[a] = g[a];
        else if (c >= e) for (g = d.slice(b), g.sort(a), a = b; a < e; a++) d[a] = g[a - b];
        else for (g = d.slice(b, c), g.sort(a), a = b; a < c; a++) d[a] = g[a - b];
        this.Qc();
        return this
    };
    K.prototype.reverse = K.prototype.reverse = function() {
        this.J && D.pa(this);
        this.o.reverse();
        this.Qc();
        return this
    };
    D.w(K, {
        count: "count"
    },
    function() {
        return this.o.length
    });
    D.w(K, {
        size: "size"
    },
    function() {
        return this.o.length
    });
    D.w(K, {
        length: "length"
    },
    function() {
        return this.o.length
    });
    D.w(K, {
        j: "iterator"
    },
    function() {
        if (0 >= this.o.length) return Ka;
        var a = this.Wb;
        return null !== a ? (a.reset(), a) : new Na(this)
    });
    D.w(K, {
        $n: "iteratorBackwards"
    },
    function() {
        if (0 >= this.o.length) return Ka;
        var a = this.dj;
        return null !== a ? (a.reset(), a) : new Pa(this)
    });
    function Qa(a) {
        this.oi = a;
        a.Wb = null;
        this.$a = a.G;
        this.bb = null
    }
    D.ke(Qa, {
        key: !0,
        value: !0
    });
    D.w(Qa, {
        j: "iterator"
    },
    function() {
        return this
    });
    Qa.prototype.reset = Qa.prototype.reset = function() {
        var a = this.oi;
        a.Wb = null;
        this.$a = a.G;
        this.bb = null
    };
    Qa.prototype.next = Qa.prototype.next = function() {
        var a = this.oi;
        if (a.G !== this.$a) {
            if (null === this.key) return ! 1;
            D.Va(a)
        }
        var b = this.bb,
        b = null === b ? a.Ka: b.fb;
        if (null !== b) return this.bb = b,
        this.value = b.value,
        this.key = b.key,
        !0;
        this.Qf();
        return ! 1
    };
    Qa.prototype.hasNext = function() {
        return this.next()
    };
    Qa.prototype.first = Qa.prototype.first = function() {
        var a = this.oi;
        this.$a = a.G;
        a = a.Ka;
        if (null !== a) {
            this.bb = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Qa.prototype.any = function(a) {
        var b = this.oi;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (a(d.value)) return ! 0;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 1
    };
    Qa.prototype.all = function(a) {
        var b = this.oi;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (!a(d.value)) return ! 1;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 0
    };
    Qa.prototype.each = function(a) {
        var b = this.oi;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) a(d.value),
        b.G !== c && D.Va(b),
        d = d.fb;
        return this
    };
    Qa.prototype.map = function(a) {
        var b = this.oi;
        b.Wb = null;
        for (var c = new K,
        d = b.G,
        e = b.Ka; null !== e;) c.add(a(e.value)),
        b.G !== d && D.Va(b),
        e = e.fb;
        return c.j
    };
    Qa.prototype.filter = function(a) {
        var b = this.oi;
        b.Wb = null;
        for (var c = new K(b.ca), d = b.G, e = b.Ka; null !== e;) {
            var g = e.value;
            a(g) && c.add(g);
            b.G !== d && D.Va(b);
            e = e.fb
        }
        return c.j
    };
    Qa.prototype.concat = function(a) {
        this.oi.Wb = null;
        return new Ma(this, a.j)
    };
    D.w(Qa, {
        count: "count"
    },
    function() {
        return this.oi.xd
    });
    Qa.prototype.Qf = function() {
        this.value = this.key = null;
        this.$a = -1;
        this.oi.Wb = this
    };
    Qa.prototype.toString = function() {
        return null !== this.bb ? "SetIterator@" + this.bb.value: "SetIterator"
    };
    function L(a) {
        D.tc(this);
        this.J = !1;
        void 0 === a || null === a ? this.ca = null: "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.ca = a: D.ua(a, "the string 'object', 'number' or 'string'", "Set constructor: type") : "function" === typeof a ? this.ca = a === Object ? "object": a === String ? "string": a === Number ? "number": a: D.ua(a, "null, a primitive type name, or a class type", "Set constructor: type");
        this.yd = {};
        this.xd = 0;
        this.Wb = null;
        this.G = 0;
        this.fi = this.Ka = null
    }
    D.ja("Set", L);
    L.prototype.oh = function(a) {
        null !== this.ca && ("string" === typeof this.ca ? typeof a === this.ca && null !== a || D.gc(a, this.ca) : a instanceof this.ca || D.gc(a, this.ca))
    };
    L.prototype.Qc = function() {
        var a = this.G;
        a++;
        999999999 < a && (a = 0);
        this.G = a
    };
    L.prototype.freeze = L.prototype.freeze = function() {
        this.J = !0;
        return this
    };
    L.prototype.thaw = L.prototype.Ya = function() {
        this.J = !1;
        return this
    };
    L.prototype.toString = function() {
        return "Set(" + D.getTypeName(this.ca) + ")#" + D.Fd(this)
    };
    L.prototype.add = L.prototype.add = function(a) {
        if (null === a) return ! 1;
        v && this.oh(a);
        this.J && D.pa(this, a);
        var b = a;
        D.Ta(a) && (b = D.sq(a));
        return void 0 === this.yd[b] ? (this.xd++, a = new Ra(a, a), this.yd[b] = a, b = this.fi, null === b ? this.Ka = a: (a.Fp = b, b.fb = a), this.fi = a, this.Qc(), !0) : !1
    };
    L.prototype.addAll = L.prototype.Rc = function(a) {
        if (null === a) return this;
        this.J && D.pa(this);
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.add(D.La(a, c));
        else for (a = a.j; a.next();) this.add(a.value);
        return this
    };
    L.prototype.contains = L.prototype.contains = function(a) {
        if (null === a) return ! 1;
        v && this.oh(a);
        var b = a;
        return D.Ta(a) && (b = D.Fd(a), void 0 === b) ? !1 : void 0 !== this.yd[b]
    };
    L.prototype.has = L.prototype.has = function(a) {
        return this.contains(a)
    };
    L.prototype.containsAll = function(a) {
        if (null === a) return ! 0;
        for (a = a.j; a.next();) if (!this.contains(a.value)) return ! 1;
        return ! 0
    };
    L.prototype.containsAny = function(a) {
        if (null === a) return ! 0;
        for (a = a.j; a.next();) if (this.contains(a.value)) return ! 0;
        return ! 1
    };
    L.prototype.first = L.prototype.first = function() {
        var a = this.Ka;
        return null === a ? null: a.value
    };
    L.prototype.any = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) {
            if (a(c.value)) return ! 0;
            this.G !== b && D.Va(this);
            c = c.fb
        }
        return ! 1
    };
    L.prototype.all = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) {
            if (!a(c.value)) return ! 1;
            this.G !== b && D.Va(this);
            c = c.fb
        }
        return ! 0
    };
    L.prototype.each = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) a(c.value),
        this.G !== b && D.Va(this),
        c = c.fb;
        return this
    };
    L.prototype.map = function(a) {
        for (var b = new L,
        c = this.G,
        d = this.Ka; null !== d;) b.add(a(d.value)),
        this.G !== c && D.Va(this),
        d = d.fb;
        return b
    };
    L.prototype.filter = function(a) {
        for (var b = new L(this.ca), c = this.G, d = this.Ka; null !== d;) {
            var e = d.value;
            a(e) && b.add(e);
            this.G !== c && D.Va(this);
            d = d.fb
        }
        return b
    };
    L.prototype.concat = function(a) {
        return this.copy().Rc(a)
    };
    L.prototype.remove = L.prototype.remove = function(a) {
        if (null === a) return ! 1;
        v && this.oh(a);
        this.J && D.pa(this, a);
        var b = a;
        if (D.Ta(a) && (b = D.Fd(a), void 0 === b)) return ! 1;
        a = this.yd[b];
        if (void 0 === a) return ! 1;
        var c = a.fb,
        d = a.Fp;
        null !== c && (c.Fp = d);
        null !== d && (d.fb = c);
        this.Ka === a && (this.Ka = c);
        this.fi === a && (this.fi = d);
        delete this.yd[b];
        this.xd--;
        this.Qc();
        return ! 0
    };
    L.prototype["delete"] = L.prototype.delete = function(a) {
        return this.remove(a)
    };
    L.prototype.removeAll = L.prototype.wy = function(a) {
        if (null === a) return this;
        this.J && D.pa(this);
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.remove(D.La(a, c));
        else for (a = a.j; a.next();) this.remove(a.value);
        return this
    };
    L.prototype.retainAll = function(a) {
        if (null === a || 0 === this.count) return this;
        this.J && D.pa(this);
        var b = new L(this.ca);
        b.Rc(a);
        a = [];
        for (var c = this.j; c.next();) {
            var d = c.value;
            b.contains(d) || a.push(d)
        }
        this.wy(a);
        return this
    };
    L.prototype.clear = L.prototype.clear = function() {
        this.J && D.pa(this);
        this.yd = {};
        this.xd = 0;
        this.fi = this.Ka = null;
        this.Qc()
    };
    L.prototype.copy = function() {
        var a = new L(this.ca),
        b = this.yd,
        c;
        for (c in b) a.add(b[c].value);
        return a
    };
    L.prototype.toArray = L.prototype.lc = function() {
        var a = Array(this.xd),
        b = this.yd,
        c = 0,
        d;
        for (d in b) a[c] = b[d].value,
        c++;
        return a
    };
    L.prototype.toList = function() {
        var a = new K(this.ca),
        b = this.yd,
        c;
        for (c in b) a.add(b[c].value);
        return a
    };
    D.w(L, {
        count: "count"
    },
    function() {
        return this.xd
    });
    D.w(L, {
        size: "size"
    },
    function() {
        return this.xd
    });
    D.w(L, {
        j: "iterator"
    },
    function() {
        if (0 >= this.xd) return Ka;
        var a = this.Wb;
        return null !== a ? (a.reset(), a) : new Qa(this)
    });
    function Sa(a) {
        this.Ma = a;
        this.$a = a.G;
        this.bb = null
    }
    D.ke(Sa, {
        key: !0,
        value: !0
    });
    D.w(Sa, {
        j: "iterator"
    },
    function() {
        return this
    });
    Sa.prototype.reset = Sa.prototype.reset = function() {
        this.$a = this.Ma.G;
        this.bb = null
    };
    Sa.prototype.next = Sa.prototype.next = function() {
        var a = this.Ma;
        if (a.G !== this.$a) {
            if (null === this.key) return ! 1;
            D.Va(a)
        }
        var b = this.bb,
        b = null === b ? a.Ka: b.fb;
        if (null !== b) return this.bb = b,
        this.value = this.key = a = b.key,
        !0;
        this.Qf();
        return ! 1
    };
    Sa.prototype.hasNext = function() {
        return this.next()
    };
    Sa.prototype.first = Sa.prototype.first = function() {
        var a = this.Ma;
        this.$a = a.G;
        a = a.Ka;
        return null !== a ? (this.bb = a, this.value = this.key = a = a.key) : null
    };
    Sa.prototype.any = function(a) {
        var b = this.Ma,
        c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (a(d.key)) return ! 0;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 1
    };
    Sa.prototype.all = function(a) {
        var b = this.Ma,
        c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (!a(d.key)) return ! 1;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 0
    };
    Sa.prototype.each = function(a) {
        var b = this.Ma,
        c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) a(d.key),
        b.G !== c && D.Va(b),
        d = d.fb;
        return this
    };
    Sa.prototype.map = function(a) {
        var b = this.Ma,
        c = b.G;
        this.bb = null;
        for (var d = new K,
        e = b.Ka; null !== e;) d.add(a(e.key)),
        b.G !== c && D.Va(b),
        e = e.fb;
        return d.j
    };
    Sa.prototype.filter = function(a) {
        var b = this.Ma,
        c = b.G;
        this.bb = null;
        for (var d = new K(b.af), e = b.Ka; null !== e;) {
            var g = e.key;
            a(g) && d.add(g);
            b.G !== c && D.Va(b);
            e = e.fb
        }
        return d.j
    };
    Sa.prototype.concat = function(a) {
        return new Ma(this, a.j)
    };
    D.w(Sa, {
        count: "count"
    },
    function() {
        return this.Ma.xd
    });
    Sa.prototype.Qf = function() {
        this.value = this.key = null;
        this.$a = -1
    };
    Sa.prototype.toString = function() {
        return null !== this.bb ? "MapKeySetIterator@" + this.bb.value: "MapKeySetIterator"
    };
    function Ta(a) {
        D.tc(this);
        this.J = !0;
        this.Ma = a
    }
    D.Sa(Ta, L);
    Ta.prototype.freeze = function() {
        return this
    };
    Ta.prototype.Ya = function() {
        return this
    };
    Ta.prototype.toString = function() {
        return "MapKeySet(" + this.Ma.toString() + ")"
    };
    Ta.prototype.add = Ta.prototype.add = function() {
        D.k("This Set is read-only: " + this.toString());
        return ! 1
    };
    Ta.prototype.set = Ta.prototype.set = function() {
        D.k("This Set is read-only: " + this.toString());
        return ! 1
    };
    Ta.prototype.contains = Ta.prototype.contains = function(a) {
        return this.Ma.contains(a)
    };
    Ta.prototype.has = Ta.prototype.has = function(a) {
        return this.contains(a)
    };
    Ta.prototype.remove = Ta.prototype.remove = function() {
        D.k("This Set is read-only: " + this.toString());
        return ! 1
    };
    Ta.prototype["delete"] = Ta.prototype.delete = function() {
        return this.remove()
    };
    Ta.prototype.clear = Ta.prototype.clear = function() {
        D.k("This Set is read-only: " + this.toString())
    };
    Ta.prototype.first = Ta.prototype.first = function() {
        var a = this.Ma.Ka;
        return null !== a ? a.key: null
    };
    Ta.prototype.any = function(a) {
        for (var b = this.Ma.Ka; null !== b;) {
            if (a(b.key)) return ! 0;
            b = b.fb
        }
        return ! 1
    };
    Ta.prototype.all = function(a) {
        for (var b = this.Ma.Ka; null !== b;) {
            if (!a(b.key)) return ! 1;
            b = b.fb
        }
        return ! 0
    };
    Ta.prototype.each = function(a) {
        for (var b = this.Ma.Ka; null !== b;) a(b.key),
        b = b.fb;
        return this
    };
    Ta.prototype.map = function(a) {
        for (var b = new L,
        c = this.Ma.Ka; null !== c;) b.add(a(c.key)),
        c = c.fb;
        return b
    };
    Ta.prototype.filter = function(a) {
        for (var b = new L(this.Ma.af), c = this.Ma.Ka; null !== c;) {
            var d = c.key;
            a(d) && b.add(d);
            c = c.fb
        }
        return b
    };
    Ta.prototype.concat = function(a) {
        return this.bH().Rc(a)
    };
    Ta.prototype.copy = function() {
        return new Ta(this.Ma)
    };
    Ta.prototype.toSet = Ta.prototype.bH = function() {
        var a = new L(this.Ma.af),
        b = this.Ma.yd,
        c;
        for (c in b) a.add(b[c].key);
        return a
    };
    Ta.prototype.toArray = Ta.prototype.lc = function() {
        var a = this.Ma.yd,
        b = Array(this.Ma.xd),
        c = 0,
        d;
        for (d in a) b[c] = a[d].key,
        c++;
        return b
    };
    Ta.prototype.toList = function() {
        var a = new K(this.Ma.af),
        b = this.Ma.yd,
        c;
        for (c in b) a.add(b[c].key);
        return a
    };
    D.w(Ta, {
        count: "count"
    },
    function() {
        return this.Ma.xd
    });
    D.w(Ta, {
        size: "size"
    },
    function() {
        return this.Ma.xd
    });
    D.w(Ta, {
        j: "iterator"
    },
    function() {
        return 0 >= this.Ma.xd ? Ka: new Sa(this.Ma)
    });
    function $a(a) {
        this.Ma = a;
        a.ej = null;
        this.$a = a.G;
        this.bb = null
    }
    D.ke($a, {
        key: !0,
        value: !0
    });
    D.w($a, {
        j: "iterator"
    },
    function() {
        return this
    });
    $a.prototype.reset = $a.prototype.reset = function() {
        var a = this.Ma;
        a.ej = null;
        this.$a = a.G;
        this.bb = null
    };
    $a.prototype.next = $a.prototype.next = function() {
        var a = this.Ma;
        if (a.G !== this.$a) {
            if (null === this.key) return ! 1;
            D.Va(a)
        }
        var b = this.bb,
        b = null === b ? a.Ka: b.fb;
        if (null !== b) return this.bb = b,
        this.value = b.value,
        this.key = b.key,
        !0;
        this.Qf();
        return ! 1
    };
    $a.prototype.hasNext = function() {
        return this.next()
    };
    $a.prototype.first = $a.prototype.first = function() {
        var a = this.Ma;
        this.$a = a.G;
        a = a.Ka;
        if (null !== a) {
            this.bb = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    $a.prototype.any = function(a) {
        var b = this.Ma;
        b.ej = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (a(d.value)) return ! 0;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 1
    };
    $a.prototype.all = function(a) {
        var b = this.Ma;
        b.ej = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (!a(d.value)) return ! 1;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 0
    };
    $a.prototype.each = function(a) {
        var b = this.Ma;
        b.ej = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) a(d.value),
        b.G !== c && D.Va(b),
        d = d.fb;
        return this
    };
    $a.prototype.map = function(a) {
        var b = this.Ma;
        b.ej = null;
        var c = b.G;
        this.bb = null;
        for (var d = new K,
        e = b.Ka; null !== e;) d.add(a(e.value)),
        b.G !== c && D.Va(b),
        e = e.fb;
        return d.j
    };
    $a.prototype.filter = function(a) {
        var b = this.Ma;
        b.ej = null;
        var c = b.G;
        this.bb = null;
        for (var d = new K(b.af), e = b.Ka; null !== e;) {
            var g = e.value;
            a(g) && d.add(g);
            b.G !== c && D.Va(b);
            e = e.fb
        }
        return d.j
    };
    $a.prototype.concat = function(a) {
        this.Ma.ej = null;
        return new Ma(this, a.j)
    };
    D.w($a, {
        count: "count"
    },
    function() {
        return this.Ma.xd
    });
    $a.prototype.Qf = function() {
        this.value = this.key = null;
        this.$a = -1;
        this.Ma.ej = this
    };
    $a.prototype.toString = function() {
        return null !== this.bb ? "MapValueSetIterator@" + this.bb.value: "MapValueSetIterator"
    };
    function Ra(a, b) {
        this.key = a;
        this.value = b;
        this.Fp = this.fb = null
    }
    D.ke(Ra, {
        key: !0,
        value: !0
    });
    Ra.prototype.toString = function() {
        return "{" + this.key + ":" + this.value + "}"
    };
    function bb(a) {
        this.Ma = a;
        a.Wb = null;
        this.$a = a.G;
        this.bb = null
    }
    D.ke(bb, {
        key: !0,
        value: !0
    });
    D.w(bb, {
        j: "iterator"
    },
    function() {
        return this
    });
    bb.prototype.reset = bb.prototype.reset = function() {
        var a = this.Ma;
        a.Wb = null;
        this.$a = a.G;
        this.bb = null
    };
    bb.prototype.next = bb.prototype.next = function() {
        var a = this.Ma;
        if (a.G !== this.$a) {
            if (null === this.key) return ! 1;
            D.Va(a)
        }
        var b = this.bb,
        b = null === b ? a.Ka: b.fb;
        if (null !== b) return this.bb = b,
        this.key = b.key,
        this.value = b.value,
        !0;
        this.Qf();
        return ! 1
    };
    bb.prototype.hasNext = function() {
        return this.next()
    };
    bb.prototype.first = bb.prototype.first = function() {
        var a = this.Ma;
        this.$a = a.G;
        a = a.Ka;
        return null !== a ? (this.bb = a, this.key = a.key, this.value = a.value, a) : null
    };
    bb.prototype.any = function(a) {
        var b = this.Ma;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (a(d)) return ! 0;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 1
    };
    bb.prototype.all = function(a) {
        var b = this.Ma;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) {
            if (!a(d)) return ! 1;
            b.G !== c && D.Va(b);
            d = d.fb
        }
        return ! 0
    };
    bb.prototype.each = function(a) {
        var b = this.Ma;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = b.Ka; null !== d;) a(d),
        b.G !== c && D.Va(b),
        d = d.fb;
        return this
    };
    bb.prototype.map = function(a) {
        var b = this.Ma;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = new K,
        e = b.Ka; null !== e;) d.add(a(e)),
        b.G !== c && D.Va(b),
        e = e.fb;
        return d.j
    };
    bb.prototype.filter = function(a) {
        var b = this.Ma;
        b.Wb = null;
        var c = b.G;
        this.bb = null;
        for (var d = new K,
        e = b.Ka; null !== e;) a(e) && d.add(e),
        b.G !== c && D.Va(b),
        e = e.fb;
        return d.j
    };
    bb.prototype.concat = function(a) {
        this.Ma.Wb = null;
        return new Ma(this, a.j)
    };
    D.w(bb, {
        count: "count"
    },
    function() {
        return this.Ma.xd
    });
    bb.prototype.Qf = function() {
        this.value = this.key = null;
        this.$a = -1;
        this.Ma.Wb = this
    };
    bb.prototype.toString = function() {
        return null !== this.bb ? "MapIterator@" + this.bb: "MapIterator"
    };
    function ma(a, b) {
        D.tc(this);
        this.J = !1;
        void 0 === a || null === a ? this.af = null: "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.af = a: D.ua(a, "the string 'object', 'number' or 'string'", "Map constructor: keytype") : "function" === typeof a ? this.af = a === Object ? "object": a === String ? "string": a === Number ? "number": a: D.ua(a, "null, a primitive type name, or a class type", "Map constructor: keytype");
        void 0 === b || null === b ? this.yi = null: "string" === typeof b ? "object" === b || "string" === b || "boolean" === b || "number" === b || "function" === b ? this.yi = b: D.ua(b, "the string 'object', 'number', 'string', 'boolean', or 'function'", "Map constructor: valtype") : "function" === typeof b ? this.yi = b === Object ? "object": b === String ? "string": b === Number ? "number": b === Boolean ? "boolean": b === Function ? "function": b: D.ua(b, "null, a primitive type name, or a class type", "Map constructor: valtype");
        this.yd = {};
        this.xd = 0;
        this.ej = this.Wb = null;
        this.G = 0;
        this.fi = this.Ka = null
    }
    D.ja("Map", ma);
    function cb(a, b) {
        null !== a.af && ("string" === typeof a.af ? typeof b === a.af && null !== b || D.gc(b, a.af) : b instanceof a.af || D.gc(b, a.af))
    }
    ma.prototype.Qc = function() {
        var a = this.G;
        a++;
        999999999 < a && (a = 0);
        this.G = a
    };
    ma.prototype.freeze = ma.prototype.freeze = function() {
        this.J = !0;
        return this
    };
    ma.prototype.thaw = ma.prototype.Ya = function() {
        this.J = !1;
        return this
    };
    ma.prototype.toString = function() {
        return "Map(" + D.getTypeName(this.af) + "," + D.getTypeName(this.yi) + ")#" + D.Fd(this)
    };
    ma.prototype.add = ma.prototype.add = function(a, b) {
        v && (cb(this, a), null !== this.yi && ("string" === typeof this.yi ? typeof b === this.yi && null !== b || D.gc(b, this.yi) : b instanceof this.yi || D.gc(b, this.yi)));
        this.J && D.pa(this, a);
        var c = a;
        D.Ta(a) && (c = D.sq(a));
        var d = this.yd[c];
        if (void 0 === d) return this.xd++,
        d = new Ra(a, b),
        this.yd[c] = d,
        c = this.fi,
        null === c ? this.Ka = d: (d.Fp = c, c.fb = d),
        this.fi = d,
        this.Qc(),
        !0;
        d.value = b;
        return ! 1
    };
    ma.prototype.set = ma.prototype.set = function(a, b) {
        return this.add(a, b)
    };
    ma.prototype.addAll = ma.prototype.Rc = function(a) {
        if (null === a) return this;
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            this.add(d.key, d.value)
        } else for (a = a.j; a.next();) this.add(a.key, a.value);
        return this
    };
    ma.prototype.first = ma.prototype.first = function() {
        return this.Ka
    };
    ma.prototype.any = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) {
            if (a(c)) return ! 0;
            this.G !== b && D.Va(this);
            c = c.fb
        }
        return ! 1
    };
    ma.prototype.all = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) {
            if (!a(c)) return ! 1;
            this.G !== b && D.Va(this);
            c = c.fb
        }
        return ! 0
    };
    ma.prototype.each = function(a) {
        for (var b = this.G,
        c = this.Ka; null !== c;) a(c),
        this.G !== b && D.Va(this),
        c = c.fb;
        return this
    };
    ma.prototype.map = function(a) {
        for (var b = new ma(this.af), c = this.G, d = this.Ka; null !== d;) b.add(d.key, a(d)),
        this.G !== c && D.Va(this),
        d = d.fb;
        return b
    };
    ma.prototype.filter = function(a) {
        for (var b = new ma(this.af, this.yi), c = this.G, d = this.Ka; null !== d;) a(d) && b.add(d.key, d.value),
        this.G !== c && D.Va(this),
        d = d.fb;
        return b
    };
    ma.prototype.concat = function(a) {
        return this.copy().Rc(a)
    };
    ma.prototype.contains = ma.prototype.contains = function(a) {
        v && cb(this, a);
        var b = a;
        return D.Ta(a) && (b = D.Fd(a), void 0 === b) ? !1 : void 0 !== this.yd[b]
    };
    ma.prototype.has = ma.prototype.has = function(a) {
        return this.contains(a)
    };
    ma.prototype.getValue = ma.prototype.oa = function(a) {
        v && cb(this, a);
        var b = a;
        if (D.Ta(a) && (b = D.Fd(a), void 0 === b)) return null;
        a = this.yd[b];
        return void 0 === a ? null: a.value
    };
    ma.prototype.get = ma.prototype.get = function(a) {
        return this.oa(a)
    };
    ma.prototype.remove = ma.prototype.remove = function(a) {
        if (null === a) return ! 1;
        v && cb(this, a);
        this.J && D.pa(this, a);
        var b = a;
        if (D.Ta(a) && (b = D.Fd(a), void 0 === b)) return ! 1;
        a = this.yd[b];
        if (void 0 === a) return ! 1;
        var c = a.fb,
        d = a.Fp;
        null !== c && (c.Fp = d);
        null !== d && (d.fb = c);
        this.Ka === a && (this.Ka = c);
        this.fi === a && (this.fi = d);
        delete this.yd[b];
        this.xd--;
        this.Qc();
        return ! 0
    };
    ma.prototype["delete"] = ma.prototype.delete = function(a) {
        return this.remove(a)
    };
    ma.prototype.clear = ma.prototype.clear = function() {
        this.J && D.pa(this);
        this.yd = {};
        this.xd = 0;
        this.fi = this.Ka = null;
        this.Qc()
    };
    ma.prototype.copy = function() {
        var a = new ma(this.af, this.yi),
        b = this.yd,
        c;
        for (c in b) {
            var d = b[c];
            a.add(d.key, d.value)
        }
        return a
    };
    ma.prototype.toArray = ma.prototype.lc = function() {
        var a = this.yd,
        b = Array(this.xd),
        c = 0,
        d;
        for (d in a) {
            var e = a[d];
            b[c] = new Ra(e.key, e.value);
            c++
        }
        return b
    };
    ma.prototype.toKeySet = ma.prototype.Yj = function() {
        return new Ta(this)
    };
    D.w(ma, {
        count: "count"
    },
    function() {
        return this.xd
    });
    D.w(ma, {
        size: "size"
    },
    function() {
        return this.xd
    });
    D.w(ma, {
        j: "iterator"
    },
    function() {
        if (0 >= this.count) return Ka;
        var a = this.Wb;
        return null !== a ? (a.reset(), a) : new bb(this)
    });
    D.w(ma, {
        XF: "iteratorKeys"
    },
    function() {
        return 0 >= this.count ? Ka: new Sa(this)
    });
    D.w(ma, {
        YF: "iteratorValues"
    },
    function() {
        if (0 >= this.count) return Ka;
        var a = this.ej;
        return null !== a ? (a.reset(), a) : new $a(this)
    });
    function O(a, b) {
        void 0 === a ? this.M = this.L = 0 : "number" === typeof a && "number" === typeof b ? (this.L = a, this.M = b) : D.k("Invalid arguments to Point constructor: " + a + ", " + b);
        this.J = !1
    }
    D.ja("Point", O);
    D.Ai(O);
    D.ke(O, {
        x: !0,
        y: !0
    });
    O.prototype.assign = function(a) {
        this.L = a.L;
        this.M = a.M
    };
    O.prototype.setTo = O.prototype.m = function(a, b) {
        v && (D.h(a, "number", O, "setTo:x"), D.h(b, "number", O, "setTo:y"));
        this.L = a;
        this.M = b;
        return this
    };
    O.prototype.set = O.prototype.set = function(a) {
        v && D.l(a, O, O, "set:p");
        this.Ra();
        this.L = a.L;
        this.M = a.M;
        return this
    };
    O.prototype.copy = function() {
        var a = new O;
        a.L = this.L;
        a.M = this.M;
        return a
    };
    f = O.prototype;
    f.Na = function() {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    f.freeze = function() {
        this.J = !0;
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Ra = function(a) {
        if (this.J) {
            var b = "The Point is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    O.parse = function(a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0,
            c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            return new O(c, e)
        }
        return new O
    };
    O.stringify = function(a) {
        v && D.l(a, O);
        return a.x.toString() + " " + a.y.toString()
    };
    O.prototype.toString = function() {
        return "Point(" + this.x + "," + this.y + ")"
    };
    O.prototype.equals = O.prototype.O = function(a) {
        return a instanceof O ? this.L === a.x && this.M === a.y: !1
    };
    O.prototype.equalTo = O.prototype.Ex = function(a, b) {
        return this.L === a && this.M === b
    };
    O.prototype.equalsApprox = O.prototype.Sc = function(a) {
        return Q(this.L, a.x) && Q(this.M, a.y)
    };
    O.prototype.add = O.prototype.add = function(a) {
        v && D.l(a, O, O, "add:p");
        this.Ra();
        this.L += a.x;
        this.M += a.y;
        return this
    };
    O.prototype.subtract = O.prototype.vo = function(a) {
        v && D.l(a, O, O, "subtract:p");
        this.Ra();
        this.L -= a.x;
        this.M -= a.y;
        return this
    };
    O.prototype.offset = O.prototype.offset = function(a, b) {
        v && (D.p(a, O, "offset:dx"), D.p(b, O, "offset:dy"));
        this.Ra();
        this.L += a;
        this.M += b;
        return this
    };
    O.prototype.rotate = O.prototype.rotate = function(a) {
        v && D.p(a, O, "rotate:angle");
        this.Ra();
        if (0 === a) return this;
        var b = this.L,
        c = this.M;
        if (0 === b && 0 === c) return this;
        var d = 0,
        e = 0;
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (a = a * Math.PI / 180, d = Math.cos(a), e = Math.sin(a));
        this.L = d * b - e * c;
        this.M = e * b + d * c;
        return this
    };
    O.prototype.scale = O.prototype.scale = function(a, b) {
        v && (D.p(a, O, "scale:sx"), D.p(b, O, "scale:sy"));
        this.L *= a;
        this.M *= b;
        return this
    };
    O.prototype.distanceSquaredPoint = O.prototype.Cf = function(a) {
        v && D.l(a, O, O, "distanceSquaredPoint:p");
        var b = a.x - this.L;
        a = a.y - this.M;
        return b * b + a * a
    };
    O.prototype.distanceSquared = O.prototype.mq = function(a, b) {
        v && (D.p(a, O, "distanceSquared:px"), D.p(b, O, "distanceSquared:py"));
        var c = a - this.L,
        d = b - this.M;
        return c * c + d * d
    };
    O.prototype.normalize = O.prototype.normalize = function() {
        this.Ra();
        var a = this.L,
        b = this.M,
        c = Math.sqrt(a * a + b * b);
        0 < c && (this.L = a / c, this.M = b / c);
        return this
    };
    O.prototype.directionPoint = O.prototype.Jc = function(a) {
        v && D.l(a, O, O, "directionPoint:p");
        return db(a.x - this.L, a.y - this.M)
    };
    O.prototype.direction = O.prototype.direction = function(a, b) {
        v && (D.p(a, O, "direction:px"), D.p(b, O, "direction:py"));
        return db(a - this.L, b - this.M)
    };
    function db(a, b) {
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? c = 0 > b ? c + 180 : 180 - c: 0 > b && (c = 360 - c);
        return c
    }
    O.prototype.projectOntoLineSegment = function(a, b, c, d) {
        v && (D.p(a, O, "projectOntoLineSegment:px"), D.p(b, O, "projectOntoLineSegment:py"), D.p(c, O, "projectOntoLineSegment:qx"), D.p(d, O, "projectOntoLineSegment:qy"));
        fb(a, b, c, d, this.L, this.M, this);
        return this
    };
    O.prototype.projectOntoLineSegmentPoint = function(a, b) {
        v && (D.l(a, O, O, "projectOntoLineSegmentPoint:p"), D.l(b, O, O, "projectOntoLineSegmentPoint:q"));
        fb(a.x, a.y, b.x, b.y, this.L, this.M, this);
        return this
    };
    O.prototype.snapToGrid = function(a, b, c, d) {
        v && (D.p(a, O, "snapToGrid:originx"), D.p(b, O, "snapToGrid:originy"), D.p(c, O, "snapToGrid:cellwidth"), D.p(d, O, "snapToGrid:cellheight"));
        gb(this.L, this.M, a, b, c, d, this);
        return this
    };
    O.prototype.snapToGridPoint = function(a, b) {
        v && (D.l(a, O, O, "snapToGridPoint:p"), D.l(b, Ca, O, "snapToGridPoint:q"));
        gb(this.L, this.M, a.x, a.y, b.width, b.height, this);
        return this
    };
    O.prototype.setRectSpot = O.prototype.so = function(a, b) {
        v && (D.l(a, B, O, "setRectSpot:r"), D.l(b, R, O, "setRectSpot:spot"));
        this.Ra();
        this.L = a.x + b.x * a.width + b.offsetX;
        this.M = a.y + b.y * a.height + b.offsetY;
        return this
    };
    O.prototype.setSpot = O.prototype.av = function(a, b, c, d, e) {
        v && (D.p(a, O, "setSpot:x"), D.p(b, O, "setSpot:y"), D.p(c, O, "setSpot:w"), D.p(d, O, "setSpot:h"), (0 > c || 0 > d) && D.k("Point.setSpot:Width and height cannot be negative"), D.l(e, R, O, "setSpot:spot"));
        this.Ra();
        this.L = a + e.x * c + e.offsetX;
        this.M = b + e.y * d + e.offsetY;
        return this
    };
    O.prototype.transform = function(a) {
        v && D.l(a, Da, O, "transform:t");
        a.vb(this);
        return this
    };
    function hb(a, b) {
        v && D.l(b, Da, O, "transformInverted:t");
        b.Ci(a);
        return a
    }
    var jb;
    O.distanceLineSegmentSquared = jb = function(a, b, c, d, e, g) {
        v && (D.p(a, O, "distanceLineSegmentSquared:px"), D.p(b, O, "distanceLineSegmentSquared:py"), D.p(c, O, "distanceLineSegmentSquared:ax"), D.p(d, O, "distanceLineSegmentSquared:ay"), D.p(e, O, "distanceLineSegmentSquared:bx"), D.p(g, O, "distanceLineSegmentSquared:by"));
        var h = e - c,
        k = g - d,
        l = h * h + k * k;
        c -= a;
        d -= b;
        var m = -c * h - d * k;
        if (0 >= m || m >= l) return h = e - a,
        k = g - b,
        Math.min(c * c + d * d, h * h + k * k);
        a = h * d - k * c;
        return a * a / l
    };
    var kb;
    O.distanceSquared = kb = function(a, b, c, d) {
        v && (D.p(a, O, "distanceSquared:px"), D.p(b, O, "distanceSquared:py"), D.p(c, O, "distanceSquared:qx"), D.p(d, O, "distanceSquared:qy"));
        a = c - a;
        b = d - b;
        return a * a + b * b
    };
    var sb;
    O.direction = sb = function(a, b, c, d) {
        v && (D.p(a, O, "direction:px"), D.p(b, O, "direction:py"), D.p(c, O, "direction:qx"), D.p(d, O, "direction:qy"));
        a = c - a;
        b = d - b;
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? d = 0 > b ? d + 180 : 180 - d: 0 > b && (d = 360 - d);
        return d
    };
    D.defineProperty(O, {
        x: "x"
    },
    function() {
        return this.L
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", O, "x");
        this.L = a
    });
    D.defineProperty(O, {
        y: "y"
    },
    function() {
        return this.M
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", O, "y");
        this.M = a
    });
    O.prototype.isReal = O.prototype.F = function() {
        return isFinite(this.x) && isFinite(this.y)
    };
    function Ca(a, b) {
        void 0 === a ? this.Ha = this.Ia = 0 : "number" === typeof a && (0 <= a || isNaN(a)) && "number" === typeof b && (0 <= b || isNaN(b)) ? (this.Ia = a, this.Ha = b) : D.k("Invalid arguments to Size constructor: " + a + ", " + b);
        this.J = !1
    }
    D.ja("Size", Ca);
    D.Ai(Ca);
    D.ke(Ca, {
        width: !0,
        height: !0
    });
    Ca.prototype.assign = function(a) {
        this.Ia = a.Ia;
        this.Ha = a.Ha
    };
    Ca.prototype.setTo = Ca.prototype.m = function(a, b) {
        v && (D.h(a, "number", Ca, "setTo:w"), D.h(b, "number", Ca, "setTo:h"), 0 > a && D.ua(a, ">= 0", Ca, "setTo:w"), 0 > b && D.ua(b, ">= 0", Ca, "setTo:h"));
        this.Ia = a;
        this.Ha = b;
        return this
    };
    Ca.prototype.set = Ca.prototype.set = function(a) {
        v && D.l(a, Ca, Ca, "set:s");
        this.Ra();
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    Ca.prototype.copy = function() {
        var a = new Ca;
        a.Ia = this.Ia;
        a.Ha = this.Ha;
        return a
    };
    f = Ca.prototype;
    f.Na = function() {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    f.freeze = function() {
        this.J = !0;
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Ra = function(a) {
        if (this.J) {
            var b = "The Size is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    Ca.parse = function(a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0,
            c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            return new Ca(c, e)
        }
        return new Ca
    };
    Ca.stringify = function(a) {
        v && D.l(a, Ca);
        return a.width.toString() + " " + a.height.toString()
    };
    Ca.prototype.toString = function() {
        return "Size(" + this.width + "," + this.height + ")"
    };
    Ca.prototype.equals = Ca.prototype.O = function(a) {
        return a instanceof Ca ? this.Ia === a.width && this.Ha === a.height: !1
    };
    Ca.prototype.equalTo = Ca.prototype.Ex = function(a, b) {
        return this.Ia === a && this.Ha === b
    };
    Ca.prototype.equalsApprox = Ca.prototype.Sc = function(a) {
        return Q(this.Ia, a.width) && Q(this.Ha, a.height)
    };
    D.defineProperty(Ca, {
        width: "width"
    },
    function() {
        return this.Ia
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", Ca, "width");
        0 > a && D.ua(a, ">= 0", Ca, "width");
        this.Ia = a
    });
    D.defineProperty(Ca, {
        height: "height"
    },
    function() {
        return this.Ha
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", Ca, "height");
        0 > a && D.ua(a, ">= 0", Ca, "height");
        this.Ha = a
    });
    Ca.prototype.isReal = Ca.prototype.F = function() {
        return isFinite(this.width) && isFinite(this.height)
    };
    function B(a, b, c, d) {
        void 0 === a ? this.Ha = this.Ia = this.M = this.L = 0 : a instanceof O ? b instanceof O ? (this.L = Math.min(a.L, b.L), this.M = Math.min(a.M, b.M), this.Ia = Math.abs(a.L - b.L), this.Ha = Math.abs(a.M - b.M)) : b instanceof Ca ? (this.L = a.L, this.M = a.M, this.Ia = b.Ia, this.Ha = b.Ha) : D.k("Incorrect arguments supplied to Rect constructor") : "number" === typeof a && "number" === typeof b && "number" === typeof c && (0 <= c || isNaN(c)) && "number" === typeof d && (0 <= d || isNaN(d)) ? (this.L = a, this.M = b, this.Ia = c, this.Ha = d) : D.k("Invalid arguments to Rect constructor: " + a + ", " + b + ", " + c + ", " + d);
        this.J = !1
    }
    D.ja("Rect", B);
    D.Ai(B);
    D.ke(B, {
        x: !0,
        y: !0,
        width: !0,
        height: !0
    });
    B.prototype.assign = function(a) {
        this.L = a.L;
        this.M = a.M;
        this.Ia = a.Ia;
        this.Ha = a.Ha
    };
    function wb(a, b, c) {
        a.Ia = b;
        a.Ha = c
    }
    B.prototype.setTo = B.prototype.m = function(a, b, c, d) {
        v && (D.h(a, "number", B, "setTo:x"), D.h(b, "number", B, "setTo:y"), D.h(c, "number", B, "setTo:w"), D.h(d, "number", B, "setTo:h"), 0 > c && D.ua(c, ">= 0", B, "setTo:w"), 0 > d && D.ua(d, ">= 0", B, "setTo:h"));
        this.L = a;
        this.M = b;
        this.Ia = c;
        this.Ha = d;
        return this
    };
    B.prototype.set = B.prototype.set = function(a) {
        v && D.l(a, B, B, "set:r");
        this.Ra();
        this.L = a.L;
        this.M = a.M;
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    B.prototype.setPoint = B.prototype.eh = function(a) {
        v && D.l(a, O, B, "setPoint:p");
        this.Ra();
        this.L = a.L;
        this.M = a.M;
        return this
    };
    B.prototype.setSize = function(a) {
        v && D.l(a, Ca, B, "setSize:s");
        this.Ra();
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    B.prototype.copy = function() {
        var a = new B;
        a.L = this.L;
        a.M = this.M;
        a.Ia = this.Ia;
        a.Ha = this.Ha;
        return a
    };
    f = B.prototype;
    f.Na = function() {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    f.freeze = function() {
        this.J = !0;
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Ra = function(a) {
        if (this.J) {
            var b = "The Rect is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    B.parse = function(a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0,
            c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            for (var g = 0;
            "" === a[b];) b++; (d = a[b++]) && (g = parseFloat(d));
            for (var h = 0;
            "" === a[b];) b++; (d = a[b++]) && (h = parseFloat(d));
            return new B(c, e, g, h)
        }
        return new B
    };
    B.stringify = function(a) {
        v && D.l(a, B);
        return a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString()
    };
    B.prototype.toString = function() {
        return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
    };
    B.prototype.equals = B.prototype.O = function(a) {
        return a instanceof B ? this.L === a.x && this.M === a.y && this.Ia === a.width && this.Ha === a.height: !1
    };
    B.prototype.equalTo = B.prototype.Ex = function(a, b, c, d) {
        return this.L === a && this.M === b && this.Ia === c && this.Ha === d
    };
    B.prototype.equalsApprox = B.prototype.Sc = function(a) {
        return Q(this.L, a.x) && Q(this.M, a.y) && Q(this.Ia, a.width) && Q(this.Ha, a.height)
    };
    function xb(a, b) {
        return yb(a.L, b.x) && yb(a.M, b.y) && yb(a.Ia, b.width) && yb(a.Ha, b.height)
    }
    B.prototype.containsPoint = B.prototype.Oa = function(a) {
        v && D.l(a, O, B, "containsPoint:p");
        return this.L <= a.x && this.L + this.Ia >= a.x && this.M <= a.y && this.M + this.Ha >= a.y
    };
    B.prototype.containsRect = B.prototype.Nk = function(a) {
        v && D.l(a, B, B, "containsRect:r");
        return this.L <= a.x && a.x + a.width <= this.L + this.Ia && this.M <= a.y && a.y + a.height <= this.M + this.Ha
    };
    B.prototype.contains = B.prototype.contains = function(a, b, c, d) {
        v ? (D.p(a, B, "contains:x"), D.p(b, B, "contains:y"), void 0 === c ? c = 0 : D.p(c, B, "contains:w"), void 0 === d ? d = 0 : D.p(d, B, "contains:h"), (0 > c || 0 > d) && D.k("Rect.contains:Width and height cannot be negative")) : (void 0 === c && (c = 0), void 0 === d && (d = 0));
        return this.L <= a && a + c <= this.L + this.Ia && this.M <= b && b + d <= this.M + this.Ha
    };
    B.prototype.reset = function() {
        this.Ra();
        this.Ha = this.Ia = this.M = this.L = 0
    };
    B.prototype.offset = B.prototype.offset = function(a, b) {
        v && (D.p(a, B, "offset:dx"), D.p(b, B, "offset:dy"));
        this.Ra();
        this.L += a;
        this.M += b;
        return this
    };
    B.prototype.inflate = B.prototype.eg = function(a, b) {
        v && (D.p(a, B, "inflate:w"), D.p(b, B, "inflate:h"));
        return Bb(this, b, a, b, a)
    };
    B.prototype.addMargin = B.prototype.ix = function(a) {
        v && D.l(a, Hb, B, "addMargin:m");
        return Bb(this, a.top, a.right, a.bottom, a.left)
    };
    B.prototype.subtractMargin = B.prototype.oK = function(a) {
        v && D.l(a, Hb, B, "subtractMargin:m");
        return Bb(this, -a.top, -a.right, -a.bottom, -a.left)
    };
    B.prototype.grow = function(a, b, c, d) {
        v && (D.p(a, B, "grow:t"), D.p(b, B, "grow:r"), D.p(c, B, "grow:b"), D.p(d, B, "grow:l"));
        return Bb(this, a, b, c, d)
    };
    function Bb(a, b, c, d, e) {
        a.Ra();
        var g = a.Ia;
        c + e <= -g ? (a.L += g / 2, a.Ia = 0) : (a.L -= e, a.Ia += c + e);
        c = a.Ha;
        b + d <= -c ? (a.M += c / 2, a.Ha = 0) : (a.M -= b, a.Ha += b + d);
        return a
    }
    B.prototype.intersectRect = function(a) {
        v && D.l(a, B, B, "intersectRect:r");
        return Kb(this, a.x, a.y, a.width, a.height)
    };
    B.prototype.intersect = B.prototype.HF = function(a, b, c, d) {
        v && (D.p(a, B, "intersect:x"), D.p(b, B, "intersect:y"), D.p(c, B, "intersect:w"), D.p(d, B, "intersect:h"), (0 > c || 0 > d) && D.k("Rect.intersect:Width and height cannot be negative"));
        return Kb(this, a, b, c, d)
    };
    function Kb(a, b, c, d, e) {
        a.Ra();
        var g = Math.max(a.L, b),
        h = Math.max(a.M, c);
        b = Math.min(a.L + a.Ia, b + d);
        c = Math.min(a.M + a.Ha, c + e);
        a.L = g;
        a.M = h;
        a.Ia = Math.max(0, b - g);
        a.Ha = Math.max(0, c - h);
        return a
    }
    B.prototype.intersectsRect = B.prototype.Wg = function(a) {
        v && D.l(a, B, B, "intersectsRect:r");
        return this.IF(a.x, a.y, a.width, a.height)
    };
    B.prototype.intersects = B.prototype.IF = function(a, b, c, d) {
        v && (D.p(a, B, "intersects:x"), D.p(b, B, "intersects:y"), D.p(a, B, "intersects:w"), D.p(b, B, "intersects:h"), (0 > c || 0 > d) && D.k("Rect.intersects:Width and height cannot be negative"));
        var e = this.Ia,
        g = this.L;
        if (Infinity !== e && Infinity !== c && (e += g, c += a, isNaN(c) || isNaN(e) || g > c || a > e)) return ! 1;
        a = this.Ha;
        c = this.M;
        return Infinity !== a && Infinity !== d && (a += c, d += b, isNaN(d) || isNaN(a) || c > d || b > a) ? !1 : !0
    };
    function Lb(a, b) {
        var c = a.Ia,
        d = b.width + 10 + 10,
        e = a.L,
        g = b.x - 10;
        if (e > d + g || g > c + e) return ! 1;
        c = a.Ha;
        d = b.height + 10 + 10;
        e = a.M;
        g = b.y - 10;
        return e > d + g || g > c + e ? !1 : !0
    }
    B.prototype.unionPoint = B.prototype.Ki = function(a) {
        v && D.l(a, O, B, "unionPoint:p");
        return Ob(this, a.x, a.y, 0, 0)
    };
    B.prototype.unionRect = B.prototype.Wh = function(a) {
        v && D.l(a, B, B, "unionRect:r");
        return Ob(this, a.L, a.M, a.Ia, a.Ha)
    };
    B.prototype.union = B.prototype.gH = function(a, b, c, d) {
        this.Ra();
        v ? (D.p(a, B, "union:x"), D.p(b, B, "union:y"), void 0 === c ? c = 0 : D.p(c, B, "union:w"), void 0 === d ? d = 0 : D.p(d, B, "union:h"), (0 > c || 0 > d) && D.k("Rect.union:Width and height cannot be negative")) : (void 0 === c && (c = 0), void 0 === d && (d = 0));
        return Ob(this, a, b, c, d)
    };
    function Ob(a, b, c, d, e) {
        var g = Math.min(a.L, b),
        h = Math.min(a.M, c);
        b = Math.max(a.L + a.Ia, b + d);
        c = Math.max(a.M + a.Ha, c + e);
        a.L = g;
        a.M = h;
        a.Ia = b - g;
        a.Ha = c - h;
        return a
    }
    B.prototype.setSpot = B.prototype.av = function(a, b, c) {
        v && (D.p(a, B, "setSpot:x"), D.p(b, B, "setSpot:y"), D.l(c, R, B, "setSpot:spot"));
        this.Ra();
        this.L = a - c.offsetX - c.x * this.Ia;
        this.M = b - c.offsetY - c.y * this.Ha;
        return this
    };
    var Pb;
    B.contains = Pb = function(a, b, c, d, e, g, h, k) {
        v ? (D.p(a, B, "contains:rx"), D.p(b, B, "contains:ry"), D.p(c, B, "contains:rw"), D.p(d, B, "contains:rh"), D.p(e, B, "contains:x"), D.p(g, B, "contains:y"), void 0 === h ? h = 0 : D.p(h, B, "contains:w"), void 0 === k ? k = 0 : D.p(k, B, "contains:h"), (0 > c || 0 > d || 0 > h || 0 > k) && D.k("Rect.contains:Width and height cannot be negative")) : (void 0 === h && (h = 0), void 0 === k && (k = 0));
        return a <= e && e + h <= a + c && b <= g && g + k <= b + d
    };
    B.intersects = function(a, b, c, d, e, g, h, k) {
        v && (D.p(a, B, "intersects:rx"), D.p(b, B, "intersects:ry"), D.p(c, B, "intersects:rw"), D.p(d, B, "intersects:rh"), D.p(e, B, "intersects:x"), D.p(g, B, "intersects:y"), D.p(h, B, "intersects:w"), D.p(k, B, "intersects:h"), (0 > c || 0 > d || 0 > h || 0 > k) && D.k("Rect.intersects:Width and height cannot be negative"));
        c += a;
        h += e;
        if (a > h || e > c) return ! 1;
        a = d + b;
        k += g;
        return b > k || g > a ? !1 : !0
    };
    D.defineProperty(B, {
        x: "x"
    },
    function() {
        return this.L
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "x");
        this.L = a
    });
    D.defineProperty(B, {
        y: "y"
    },
    function() {
        return this.M
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "y");
        this.M = a
    });
    D.defineProperty(B, {
        width: "width"
    },
    function() {
        return this.Ia
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "width");
        0 > a && D.ua(a, ">= 0", B, "width");
        this.Ia = a
    });
    D.defineProperty(B, {
        height: "height"
    },
    function() {
        return this.Ha
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "height");
        0 > a && D.ua(a, ">= 0", B, "height");
        this.Ha = a
    });
    D.defineProperty(B, {
        left: "left"
    },
    function() {
        return this.L
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "left");
        this.L = a
    });
    D.defineProperty(B, {
        top: "top"
    },
    function() {
        return this.M
    },
    function(a) {
        this.Ra(a);
        v && D.h(a, "number", B, "top");
        this.M = a
    });
    D.defineProperty(B, {
        right: "right"
    },
    function() {
        return this.L + this.Ia
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, B, "right");
        this.L += a - (this.L + this.Ia)
    });
    D.defineProperty(B, {
        bottom: "bottom"
    },
    function() {
        return this.M + this.Ha
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, B, "top");
        this.M += a - (this.M + this.Ha)
    });
    D.defineProperty(B, {
        position: "position"
    },
    function() {
        return new O(this.L, this.M)
    },
    function(a) {
        this.Ra(a);
        v && D.l(a, O, B, "position");
        this.L = a.x;
        this.M = a.y
    });
    D.defineProperty(B, {
        size: "size"
    },
    function() {
        return new Ca(this.Ia, this.Ha)
    },
    function(a) {
        this.Ra(a);
        v && D.l(a, Ca, B, "size");
        this.Ia = a.width;
        this.Ha = a.height
    });
    D.defineProperty(B, {
        bm: "center"
    },
    function() {
        return new O(this.L + this.Ia / 2, this.M + this.Ha / 2)
    },
    function(a) {
        this.Ra(a);
        v && D.l(a, O, B, "center");
        this.L = a.x - this.Ia / 2;
        this.M = a.y - this.Ha / 2
    });
    D.defineProperty(B, {
        na: "centerX"
    },
    function() {
        return this.L + this.Ia / 2
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, B, "centerX");
        this.L = a - this.Ia / 2
    });
    D.defineProperty(B, {
        va: "centerY"
    },
    function() {
        return this.M + this.Ha / 2
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, B, "centerY");
        this.M = a - this.Ha / 2
    });
    B.prototype.isReal = B.prototype.F = function() {
        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
    };
    B.prototype.isEmpty = function() {
        return 0 === this.width && 0 === this.height
    };
    function Hb(a, b, c, d) {
        void 0 === a ? this.uh = this.nh = this.Dh = this.Eh = 0 : void 0 === b ? this.left = this.bottom = this.right = this.top = a: void 0 === c ? (d = b, this.top = a, this.right = b, this.bottom = a, this.left = d) : void 0 !== d ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : D.k("Invalid arguments to Margin constructor: " + a + ", " + b + ", " + c + ", " + d);
        this.J = !1
    }
    D.ja("Margin", Hb);
    D.Ai(Hb);
    D.ke(Hb, {
        top: !0,
        right: !0,
        bottom: !0,
        left: !0
    });
    Hb.prototype.assign = function(a) {
        this.Eh = a.Eh;
        this.Dh = a.Dh;
        this.nh = a.nh;
        this.uh = a.uh
    };
    Hb.prototype.setTo = Hb.prototype.m = function(a, b, c, d) {
        v && (D.h(a, "number", Hb, "setTo:t"), D.h(b, "number", Hb, "setTo:r"), D.h(c, "number", Hb, "setTo:b"), D.h(d, "number", Hb, "setTo:l"));
        this.Ra();
        this.Eh = a;
        this.Dh = b;
        this.nh = c;
        this.uh = d;
        return this
    };
    Hb.prototype.set = Hb.prototype.set = function(a) {
        v && D.l(a, Hb, Hb, "assign:m");
        this.Ra();
        this.Eh = a.Eh;
        this.Dh = a.Dh;
        this.nh = a.nh;
        this.uh = a.uh;
        return this
    };
    Hb.prototype.copy = function() {
        var a = new Hb;
        a.Eh = this.Eh;
        a.Dh = this.Dh;
        a.nh = this.nh;
        a.uh = this.uh;
        return a
    };
    f = Hb.prototype;
    f.Na = function() {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    f.freeze = function() {
        this.J = !0;
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Ra = function(a) {
        if (this.J) {
            var b = "The Margin is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    Hb.parse = function(a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0,
            c = NaN;
            "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            if (isNaN(c)) return new Hb;
            for (var e = NaN;
            "" === a[b];) b++; (d = a[b++]) && (e = parseFloat(d));
            if (isNaN(e)) return new Hb(c);
            for (var g = NaN;
            "" === a[b];) b++; (d = a[b++]) && (g = parseFloat(d));
            if (isNaN(g)) return new Hb(c, e);
            for (var h = NaN;
            "" === a[b];) b++; (d = a[b++]) && (h = parseFloat(d));
            return isNaN(h) ? new Hb(c, e) : new Hb(c, e, g, h)
        }
        return new Hb
    };
    Hb.stringify = function(a) {
        v && D.l(a, Hb);
        return a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString()
    };
    Hb.prototype.toString = function() {
        return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
    };
    Hb.prototype.equals = Hb.prototype.O = function(a) {
        return a instanceof Hb ? this.Eh === a.top && this.Dh === a.right && this.nh === a.bottom && this.uh === a.left: !1
    };
    Hb.prototype.equalTo = Hb.prototype.Ex = function(a, b, c, d) {
        return this.Eh === a && this.Dh === b && this.nh === c && this.uh === d
    };
    Hb.prototype.equalsApprox = Hb.prototype.Sc = function(a) {
        return Q(this.Eh, a.top) && Q(this.Dh, a.right) && Q(this.nh, a.bottom) && Q(this.uh, a.left)
    };
    D.defineProperty(Hb, {
        top: "top"
    },
    function() {
        return this.Eh
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, Hb, "top");
        this.Eh = a
    });
    D.defineProperty(Hb, {
        right: "right"
    },
    function() {
        return this.Dh
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, Hb, "right");
        this.Dh = a
    });
    D.defineProperty(Hb, {
        bottom: "bottom"
    },
    function() {
        return this.nh
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, Hb, "bottom");
        this.nh = a
    });
    D.defineProperty(Hb, {
        left: "left"
    },
    function() {
        return this.uh
    },
    function(a) {
        this.Ra(a);
        v && D.p(a, Hb, "left");
        this.uh = a
    });
    Hb.prototype.isReal = Hb.prototype.F = function() {
        return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
    };
    function Da() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0
    }
    D.Ai(Da);
    D.ke(Da, {
        m11: !0,
        m12: !0,
        m21: !0,
        m22: !0,
        dx: !0,
        dy: !0
    });
    Da.prototype.set = Da.prototype.set = function(a) {
        v && D.l(a, Da, Da, "set:t");
        this.m11 = a.m11;
        this.m12 = a.m12;
        this.m21 = a.m21;
        this.m22 = a.m22;
        this.dx = a.dx;
        this.dy = a.dy;
        return this
    };
    Da.prototype.copy = function() {
        var a = new Da;
        a.m11 = this.m11;
        a.m12 = this.m12;
        a.m21 = this.m21;
        a.m22 = this.m22;
        a.dx = this.dx;
        a.dy = this.dy;
        return a
    };
    Da.prototype.toString = function() {
        return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.dx + "," + this.dy + ")"
    };
    Da.prototype.equals = Da.prototype.O = function(a) {
        return a instanceof Da ? this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.dx === a.dx && this.dy === a.dy: !1
    };
    Da.prototype.isIdentity = Da.prototype.xu = function() {
        return 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22 && 0 === this.dx && 0 === this.dy
    };
    Da.prototype.reset = Da.prototype.reset = function() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0;
        return this
    };
    Da.prototype.multiply = Da.prototype.multiply = function(a) {
        v && D.l(a, Da, Da, "multiply:matrix");
        var b = this.m12 * a.m11 + this.m22 * a.m12,
        c = this.m11 * a.m21 + this.m21 * a.m22,
        d = this.m12 * a.m21 + this.m22 * a.m22,
        e = this.m11 * a.dx + this.m21 * a.dy + this.dx,
        g = this.m12 * a.dx + this.m22 * a.dy + this.dy;
        this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = g;
        return this
    };
    Da.prototype.multiplyInverted = Da.prototype.lB = function(a) {
        v && D.l(a, Da, Da, "multiplyInverted:matrix");
        var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21),
        c = a.m22 * b,
        d = -a.m12 * b,
        e = -a.m21 * b,
        g = a.m11 * b,
        h = b * (a.m21 * a.dy - a.m22 * a.dx),
        k = b * (a.m12 * a.dx - a.m11 * a.dy);
        a = this.m12 * c + this.m22 * d;
        b = this.m11 * e + this.m21 * g;
        e = this.m12 * e + this.m22 * g;
        g = this.m11 * h + this.m21 * k + this.dx;
        h = this.m12 * h + this.m22 * k + this.dy;
        this.m11 = this.m11 * c + this.m21 * d;
        this.m12 = a;
        this.m21 = b;
        this.m22 = e;
        this.dx = g;
        this.dy = h;
        return this
    };
    Da.prototype.invert = Da.prototype.Qx = function() {
        var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
        b = -this.m12 * a,
        c = -this.m21 * a,
        d = this.m11 * a,
        e = a * (this.m21 * this.dy - this.m22 * this.dx),
        g = a * (this.m12 * this.dx - this.m11 * this.dy);
        this.m11 = this.m22 * a;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = g;
        return this
    };
    Da.prototype.rotate = Da.prototype.rotate = function(a, b, c) {
        v && (D.p(a, Da, "rotate:angle"), D.p(b, Da, "rotate:rx"), D.p(c, Da, "rotate:ry"));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        if (0 === a) return this;
        this.translate(b, c);
        var d = 0,
        e = 0;
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (e = a * Math.PI / 180, d = Math.cos(e), e = Math.sin(e));
        a = this.m12 * d + this.m22 * e;
        var g = this.m11 * -e + this.m21 * d,
        h = this.m12 * -e + this.m22 * d;
        this.m11 = this.m11 * d + this.m21 * e;
        this.m12 = a;
        this.m21 = g;
        this.m22 = h;
        this.translate( - b, -c);
        return this
    };
    Da.prototype.translate = Da.prototype.translate = function(a, b) {
        v && (D.p(a, Da, "translate:x"), D.p(b, Da, "translate:y"));
        this.dx += this.m11 * a + this.m21 * b;
        this.dy += this.m12 * a + this.m22 * b;
        return this
    };
    Da.prototype.scale = Da.prototype.scale = function(a, b) {
        void 0 === b && (b = a);
        v && (D.p(a, Da, "translate:sx"), D.p(b, Da, "translate:sy"));
        this.m11 *= a;
        this.m12 *= a;
        this.m21 *= b;
        this.m22 *= b;
        return this
    };
    Da.prototype.transformPoint = Da.prototype.vb = function(a) {
        v && D.l(a, O, Da, "transformPoint:p");
        var b = a.L,
        c = a.M;
        a.L = b * this.m11 + c * this.m21 + this.dx;
        a.M = b * this.m12 + c * this.m22 + this.dy;
        return a
    };
    Da.prototype.invertedTransformPoint = Da.prototype.Ci = function(a) {
        v && D.l(a, O, Da, "invertedTransformPoint:p");
        var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
        c = -this.m12 * b,
        d = this.m11 * b,
        e = b * (this.m12 * this.dx - this.m11 * this.dy),
        g = a.L,
        h = a.M;
        a.L = g * this.m22 * b + h * -this.m21 * b + b * (this.m21 * this.dy - this.m22 * this.dx);
        a.M = g * c + h * d + e;
        return a
    };
    Da.prototype.transformRect = Da.prototype.fH = function(a) {
        v && D.l(a, B, Da, "transformRect:rect");
        var b = a.L,
        c = a.M,
        d = b + a.Ia,
        e = c + a.Ha,
        g = this.m11,
        h = this.m12,
        k = this.m21,
        l = this.m22,
        m = this.dx,
        n = this.dy,
        p = b * g + c * k + m,
        q = b * h + c * l + n,
        r = d * g + c * k + m,
        c = d * h + c * l + n,
        s = b * g + e * k + m,
        b = b * h + e * l + n,
        g = d * g + e * k + m,
        d = d * h + e * l + n,
        e = p,
        h = q,
        p = Math.min(p, r),
        e = Math.max(e, r),
        h = Math.min(h, c),
        q = Math.max(q, c),
        p = Math.min(p, s),
        e = Math.max(e, s),
        h = Math.min(h, b),
        q = Math.max(q, b),
        p = Math.min(p, g),
        e = Math.max(e, g),
        h = Math.min(h, d),
        q = Math.max(q, d);
        a.L = p;
        a.M = h;
        a.Ia = e - p;
        a.Ha = q - h;
        return a
    };
    function R(a, b, c, d) {
        void 0 === a ? this.Jg = this.Ig = this.M = this.L = 0 : (void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d);
        this.J = !1
    }
    D.ja("Spot", R);
    D.Ai(R);
    D.ke(R, {
        x: !0,
        y: !0,
        offsetX: !0,
        offsetY: !0
    });
    R.prototype.assign = function(a) {
        this.L = a.L;
        this.M = a.M;
        this.Ig = a.Ig;
        this.Jg = a.Jg
    };
    R.prototype.setTo = R.prototype.m = function(a, b, c, d) {
        v && (Qb(a, "setTo:x"), Qb(b, "setTo:y"), Ub(c, "setTo:offx"), Ub(d, "setTo:offy"));
        this.Ra();
        this.L = a;
        this.M = b;
        this.Ig = c;
        this.Jg = d;
        return this
    };
    R.prototype.set = R.prototype.set = function(a) {
        v && D.l(a, R, R, "set:s");
        this.Ra();
        this.L = a.L;
        this.M = a.M;
        this.Ig = a.Ig;
        this.Jg = a.Jg;
        return this
    };
    R.prototype.copy = function() {
        var a = new R;
        a.L = this.L;
        a.M = this.M;
        a.Ig = this.Ig;
        a.Jg = this.Jg;
        return a
    };
    f = R.prototype;
    f.Na = function() {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function() {
        return Object.isFrozen(this) ? this: this.copy().freeze()
    };
    f.freeze = function() {
        this.J = !0;
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Ra = function(a) {
        if (this.J) {
            var b = "The Spot is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    function Xb(a, b) {
        a.L = NaN;
        a.M = NaN;
        a.Ig = b;
        return a
    }
    function Qb(a, b) { (isNaN(a) || 1 < a || 0 > a) && D.ua(a, "0 <= " + b + " <= 1", R, b)
    }
    function Ub(a, b) { (isNaN(a) || Infinity === a || -Infinity === a) && D.ua(a, "real number, not NaN or Infinity", R, b)
    }
    var Yb;
    R.parse = Yb = function(a) {
        if ("string" === typeof a) {
            a = a.trim();
            if ("None" === a) return bc;
            if ("TopLeft" === a) return cc;
            if ("Top" === a || "TopCenter" === a || "MiddleTop" === a) return dc;
            if ("TopRight" === a) return ec;
            if ("Left" === a || "LeftCenter" === a || "MiddleLeft" === a) return fc;
            if ("Center" === a) return gc;
            if ("Right" === a || "RightCenter" === a || "MiddleRight" === a) return oc;
            if ("BottomLeft" === a) return pc;
            if ("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a) return qc;
            if ("BottomRight" === a) return rc;
            if ("TopSide" === a) return sc;
            if ("LeftSide" === a) return tc;
            if ("RightSide" === a) return uc;
            if ("BottomSide" === a) return yc;
            if ("TopBottomSides" === a) return zc;
            if ("LeftRightSides" === a) return Gc;
            if ("TopLeftSides" === a) return Hc;
            if ("TopRightSides" === a) return Ic;
            if ("BottomLeftSides" === a) return Jc;
            if ("BottomRightSides" === a) return Kc;
            if ("NotTopSide" === a) return Lc;
            if ("NotLeftSide" === a) return Mc;
            if ("NotRightSide" === a) return Qc;
            if ("NotBottomSide" === a) return Rc;
            if ("AllSides" === a) return Sc;
            if ("Default" === a) return Tc;
            a = a.split(" ");
            for (var b = 0,
            c = 0;
            "" === a[b];) b++;
            var d = a[b++];
            void 0 !== d && 0 < d.length && (c = parseFloat(d));
            for (var e = 0;
            "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (e = parseFloat(d));
            for (var g = 0;
            "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (g = parseFloat(d));
            for (var h = 0;
            "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (h = parseFloat(d));
            return new R(c, e, g, h)
        }
        return new R
    };
    R.stringify = function(a) {
        v && D.l(a, R);
        return a.fd() ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString()
    };
    R.prototype.toString = function() {
        return this.fd() ? 0 === this.Ig && 0 === this.Jg ? "Spot(" + this.x + "," + this.y + ")": "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")": this.O(bc) ? "None": this.O(cc) ? "TopLeft": this.O(dc) ? "Top": this.O(ec) ? "TopRight": this.O(fc) ? "Left": this.O(gc) ? "Center": this.O(oc) ? "Right": this.O(pc) ? "BottomLeft": this.O(qc) ? "Bottom": this.O(rc) ? "BottomRight": this.O(sc) ? "TopSide": this.O(tc) ? "LeftSide": this.O(uc) ? "RightSide": this.O(yc) ? "BottomSide": this.O(zc) ? "TopBottomSides": this.O(Gc) ? "LeftRightSides": this.O(Hc) ? "TopLeftSides": this.O(Ic) ? "TopRightSides": this.O(Jc) ? "BottomLeftSides": this.O(Kc) ? "BottomRightSides": this.O(Lc) ? "NotTopSide": this.O(Mc) ? "NotLeftSide": this.O(Qc) ? "NotRightSide": this.O(Rc) ? "NotBottomSide": this.O(Sc) ? "AllSides": this.O(Tc) ? "Default": "None"
    };
    R.prototype.equals = R.prototype.O = function(a) {
        return a instanceof R ? (this.L === a.x || isNaN(this.L) && isNaN(a.x)) && (this.M === a.y || isNaN(this.M) && isNaN(a.y)) && this.Ig === a.offsetX && this.Jg === a.offsetY: !1
    };
    R.prototype.opposite = R.prototype.kG = function() {
        return new R(.5 - (this.L - .5), .5 - (this.M - .5), -this.Ig, -this.Jg)
    };
    R.prototype.includesSide = R.prototype.Ij = function(a) {
        if (!this.Kj()) return ! 1;
        if (!a.Kj()) if (a.O(Uc)) a = tc;
        else if (a.O(Vc)) a = uc;
        else if (a.O(Wc)) a = sc;
        else if (a.O(Xc)) a = yc;
        else return ! 1;
        a = a.offsetY;
        return (this.Jg & a) === a
    };
    D.defineProperty(R, {
        x: "x"
    },
    function() {
        return this.L
    },
    function(a) {
        this.Ra(a);
        v && Qb(a, "x");
        this.L = a
    });
    D.defineProperty(R, {
        y: "y"
    },
    function() {
        return this.M
    },
    function(a) {
        this.Ra(a);
        v && Qb(a, "y");
        this.M = a
    });
    D.defineProperty(R, {
        offsetX: "offsetX"
    },
    function() {
        return this.Ig
    },
    function(a) {
        this.Ra(a);
        v && Ub(a, "offsetX");
        this.Ig = a
    });
    D.defineProperty(R, {
        offsetY: "offsetY"
    },
    function() {
        return this.Jg
    },
    function(a) {
        this.Ra(a);
        v && Ub(a, "offsetY");
        this.Jg = a
    });
    R.prototype.isSpot = R.prototype.fd = function() {
        return ! isNaN(this.x) && !isNaN(this.y)
    };
    R.prototype.isNoSpot = R.prototype.Zd = function() {
        return isNaN(this.x) || isNaN(this.y)
    };
    R.prototype.isSide = R.prototype.Kj = function() {
        return isNaN(this.x) && isNaN(this.y) && 1 === this.offsetX && 0 !== this.offsetY
    };
    R.prototype.isNone = function() {
        return isNaN(this.x) && isNaN(this.y) && 0 === this.offsetX && 0 === this.offsetY
    };
    R.prototype.isDefault = R.prototype.ed = function() {
        return isNaN(this.x) && isNaN(this.y) && -1 === this.offsetX && 0 === this.offsetY
    };
    var bc;
    R.None = bc = Xb(new R(0, 0, 0, 0), 0).Na();
    var Tc;
    R.Default = Tc = Xb(new R(0, 0, -1, 0), -1).Na();
    var cc;
    R.TopLeft = cc = (new R(0, 0, 0, 0)).Na();
    var dc;
    R.TopCenter = dc = (new R(.5, 0, 0, 0)).Na();
    var ec;
    R.TopRight = ec = (new R(1, 0, 0, 0)).Na();
    var fc;
    R.LeftCenter = fc = (new R(0, .5, 0, 0)).Na();
    var gc;
    R.Center = gc = (new R(.5, .5, 0, 0)).Na();
    var oc;
    R.RightCenter = oc = (new R(1, .5, 0, 0)).Na();
    var pc;
    R.BottomLeft = pc = (new R(0, 1, 0, 0)).Na();
    var qc;
    R.BottomCenter = qc = (new R(.5, 1, 0, 0)).Na();
    var rc;
    R.BottomRight = rc = (new R(1, 1, 0, 0)).Na();
    var Yc;
    R.MiddleTop = Yc = dc;
    var ed;
    R.MiddleLeft = ed = fc;
    var fd;
    R.MiddleRight = fd = oc;
    var gd;
    R.MiddleBottom = gd = qc;
    var Wc;
    R.Top = Wc = dc;
    var Uc;
    R.Left = Uc = fc;
    var Vc;
    R.Right = Vc = oc;
    var Xc;
    R.Bottom = Xc = qc;
    var sc;
    R.TopSide = sc = Xb(new R(0, 0, 1, D.ud), 1).Na();
    var tc;
    R.LeftSide = tc = Xb(new R(0, 0, 1, D.Yc), 1).Na();
    var uc;
    R.RightSide = uc = Xb(new R(0, 0, 1, D.ld), 1).Na();
    var yc;
    R.BottomSide = yc = Xb(new R(0, 0, 1, D.kd), 1).Na();
    var zc;
    R.TopBottomSides = zc = Xb(new R(0, 0, 1, D.ud | D.kd), 1).Na();
    var Gc;
    R.LeftRightSides = Gc = Xb(new R(0, 0, 1, D.Yc | D.ld), 1).Na();
    var Hc;
    R.TopLeftSides = Hc = Xb(new R(0, 0, 1, D.ud | D.Yc), 1).Na();
    var Ic;
    R.TopRightSides = Ic = Xb(new R(0, 0, 1, D.ud | D.ld), 1).Na();
    var Jc;
    R.BottomLeftSides = Jc = Xb(new R(0, 0, 1, D.kd | D.Yc), 1).Na();
    var Kc;
    R.BottomRightSides = Kc = Xb(new R(0, 0, 1, D.kd | D.ld), 1).Na();
    var Lc;
    R.NotTopSide = Lc = Xb(new R(0, 0, 1, D.Yc | D.ld | D.kd), 1).Na();
    var Mc;
    R.NotLeftSide = Mc = Xb(new R(0, 0, 1, D.ud | D.ld | D.kd), 1).Na();
    var Qc;
    R.NotRightSide = Qc = Xb(new R(0, 0, 1, D.ud | D.Yc | D.kd), 1).Na();
    var Rc;
    R.NotBottomSide = Rc = Xb(new R(0, 0, 1, D.ud | D.Yc | D.ld), 1).Na();
    var Sc;
    R.AllSides = Sc = Xb(new R(0, 0, 1, D.ud | D.Yc | D.ld | D.kd), 1).Na();
    function hd() {
        this.Yb = [1, 0, 0, 1, 0, 0]
    }
    hd.prototype.copy = function() {
        var a = new hd;
        a.Yb[0] = this.Yb[0];
        a.Yb[1] = this.Yb[1];
        a.Yb[2] = this.Yb[2];
        a.Yb[3] = this.Yb[3];
        a.Yb[4] = this.Yb[4];
        a.Yb[5] = this.Yb[5];
        return a
    };
    hd.prototype.translate = function(a, b) {
        this.Yb[4] += this.Yb[0] * a + this.Yb[2] * b;
        this.Yb[5] += this.Yb[1] * a + this.Yb[3] * b
    };
    hd.prototype.scale = function(a, b) {
        this.Yb[0] *= a;
        this.Yb[1] *= a;
        this.Yb[2] *= b;
        this.Yb[3] *= b
    };
    function id(a) {
        this.type = a;
        this.r2 = this.y2 = this.x2 = this.r1 = this.y1 = this.x1 = 0;
        this.NE = [];
        this.pattern = null
    }
    id.prototype.addColorStop = function(a, b) {
        this.NE.push({
            offset: a,
            color: b
        })
    };
    function nd(a, b, c) {
        this.fillStyle = "#000000";
        this.font = "10px sans-serif";
        this.globalAlpha = 1;
        this.lineCap = "butt";
        this.bo = 0;
        this.lineJoin = "miter";
        this.lineWidth = 1;
        this.miterLimit = 10;
        this.shadowBlur = 0;
        this.shadowColor = "rgba(0, 0, 0, 0)";
        this.shadowOffsetY = this.shadowOffsetX = 0;
        this.strokeStyle = "#000000";
        this.textAlign = "start";
        this.eq = !1;
        this.Lg = this.tt = this.st = 0;
        this.document = b || document;
        this.hF = c;
        this.$x = null;
        this.path = [];
        this.Mh = new hd;
        this.stack = [];
        this.Ef = [];
        this.Cx = a;
        this.NJ = "http://www.w3.org/2000/svg";
        this.width = this.Cx.width;
        this.height = this.Cx.height;
        this.Am = od(this, "svg", {
            width: this.width + "px",
            height: this.height + "px",
            FM: "0 0 " + this.Cx.width + " " + this.Cx.height
        });
        this.Am.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "http://www.w3.org/2000/svg");
        this.Am.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
        pd(this, 1, 0, 0, 1, 0, 0);
        a = D.Gm++;
        b = od(this, "clipPath", {
            id: "mainClip" + a
        });
        b.appendChild(od(this, "rect", {
            x: 0,
            y: 0,
            width: this.width,
            height: this.height
        }));
        this.Am.appendChild(b);
        this.Ef[0].setAttributeNS(null, "clip-path", "url(#mainClip" + a + ")")
    }
    f = nd.prototype;
    f.arc = function(a, b, c, d, e, g) {
        qd(this, a, b, c, d, e, g)
    };
    f.beginPath = function() {
        this.path = []
    };
    f.bezierCurveTo = function(a, b, c, d, e, g) {
        this.path.push(["C", a, b, c, d, e, g])
    };
    f.clearRect = function() {};
    f.clip = function() {
        rd(this, "clipPath", this.path, new hd)
    };
    f.closePath = function() {
        this.path.push(["z"])
    };
    f.createLinearGradient = function(a, b, c, d) {
        var e = new id("linear");
        e.x1 = a;
        e.y1 = b;
        e.x2 = c;
        e.y2 = d;
        return e
    };
    f.createPattern = function() {
        return null
    };
    f.createRadialGradient = function(a, b, c, d, e, g) {
        var h = new id("radial");
        h.x1 = a;
        h.y1 = b;
        h.r1 = c;
        h.x2 = d;
        h.y2 = e;
        h.r2 = g;
        return h
    };
    f.drawImage = function(a, b, c, d, e, g, h, k, l) {
        var m = "";
        a instanceof HTMLCanvasElement && (m = a.toDataURL());
        a instanceof HTMLImageElement && (m = a.src);
        void 0 === d && (g = b, h = c, k = d = a.naturalWidth, l = e = a.naturalHeight);
        d = d || 0;
        e = e || 0;
        g = g || 0;
        h = h || 0;
        k = k || 0;
        l = l || 0;
        m = {
            x: 0,
            y: 0,
            width: a.naturalWidth,
            height: a.naturalHeight,
            href: m,
            preserveAspectRatio: "xMidYMid slice"
        };
        yb(d, k) && yb(e, l) || (m.preserveAspectRatio = "none");
        var n = "";
        k /= d;
        l /= e;
        if (0 !== g || 0 !== h) n += " translate(" + g + ", " + h + ")";
        if (1 !== k || 1 !== l) n += " scale(" + k + ", " + l + ")";
        if (0 !== b || 0 !== c) n += " translate(" + -b + ", " + -c + ")";
        if (0 !== b || 0 !== c || d !== a.naturalWidth || e !== a.naturalHeight) a = "CLIP" + D.Gm++,
        g = od(this, "clipPath", {
            id: a
        }),
        g.appendChild(od(this, "rect", {
            x: b,
            y: c,
            width: d,
            height: e
        })),
        this.Am.appendChild(g),
        m["clip-path"] = "url(#" + a + ")";
        Ad(this, "image", m, this.Mh, n);
        this.addElement("image", m)
    };
    f.fill = function() {
        rd(this, "fill", this.path, this.Mh)
    };
    f.Ug = function() {
        this.eq ? this.clip() : this.fill()
    };
    f.fillRect = function(a, b, c, d) {
        Bd(this, "fill", [a, b, c, d], this.Mh)
    };
    f.fillText = function(a, b, c) {
        a = [a, b, c];
        b = this.textAlign;
        "left" === b ? b = "start": "right" === b ? b = "end": "center" === b && (b = "middle");
        b = {
            x: a[1],
            y: a[2],
            style: "font: " + this.font,
            "text-anchor": b
        };
        Ad(this, "fill", b, this.Mh);
        this.addElement("text", b, a[0])
    };
    f.lineTo = function(a, b) {
        this.path.push(["L", a, b])
    };
    f.moveTo = function(a, b) {
        this.path.push(["M", a, b])
    };
    f.quadraticCurveTo = function(a, b, c, d) {
        this.path.push(["Q", a, b, c, d])
    };
    f.rect = function(a, b, c, d) {
        this.path.push(["M", a, b], ["L", a + c, b], ["L", a + c, b + d], ["L", a, b + d], ["z"])
    };
    f.restore = function() {
        this.Mh = this.stack.pop();
        this.path = this.stack.pop();
        var a = this.stack.pop();
        this.fillStyle = a.fillStyle;
        this.font = a.font;
        this.globalAlpha = a.globalAlpha;
        this.lineCap = a.lineCap;
        this.bo = a.bo;
        this.lineJoin = a.lineJoin;
        this.lineWidth = a.lineWidth;
        this.miterLimit = a.miterLimit;
        this.shadowBlur = a.shadowBlur;
        this.shadowColor = a.shadowColor;
        this.shadowOffsetX = a.shadowOffsetX;
        this.shadowOffsetY = a.shadowOffsetY;
        this.strokeStyle = a.strokeStyle;
        this.textAlign = a.textAlign
    };
    f.save = function() {
        this.stack.push({
            fillStyle: this.fillStyle,
            font: this.font,
            globalAlpha: this.globalAlpha,
            lineCap: this.lineCap,
            bo: this.bo,
            lineJoin: this.lineJoin,
            lineWidth: this.lineWidth,
            miterLimit: this.miterLimit,
            shadowBlur: this.shadowBlur,
            shadowColor: this.shadowColor,
            shadowOffsetX: this.shadowOffsetX,
            shadowOffsetY: this.shadowOffsetY,
            strokeStyle: this.strokeStyle,
            textAlign: this.textAlign
        });
        for (var a = [], b = 0; b < this.path.length; b++) a.push(this.path[b]);
        this.stack.push(a);
        this.stack.push(this.Mh.copy())
    };
    f.setTransform = function(a, b, c, d, e, g) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === g || pd(this, a, b, c, d, e, g)
    };
    f.scale = function(a, b) {
        this.Mh.scale(a, b)
    };
    f.translate = function(a, b) {
        this.Mh.translate(a, b)
    };
    f.transform = function() {};
    f.stroke = function() {
        rd(this, "stroke", this.path, this.Mh)
    };
    f.Vj = function() {
        this.eq || this.stroke()
    };
    f.strokeRect = function(a, b, c, d) {
        Bd(this, "stroke", [a, b, c, d], this.Mh)
    };
    function od(a, b, c, d) {
        a = a.document.createElementNS(a.NJ, b);
        if (D.Ta(c)) for (var e in c) a.setAttributeNS("href" === e ? "http://www.w3.org/1999/xlink": "", e, c[e]);
        void 0 !== d && (a.textContent = d);
        return a
    }
    f.addElement = function(a, b, c) {
        a = od(this, a, b, c);
        0 < this.Ef.length ? this.Ef[this.Ef.length - 1].appendChild(a) : this.Am.appendChild(a);
        return this.$x = a
    };
    function Ad(a, b, c, d, e) {
        1 !== a.globalAlpha && (c.opacity = a.globalAlpha);
        "fill" === b ? (a.fillStyle instanceof id ? c.fill = Cd(a, a.fillStyle) : (/^rgba\(/.test(a.fillStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle), c.fill = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["fill-opacity"] = b[4]), c.fill = a.fillStyle), c.stroke = "none") : "stroke" === b && (c.fill = "none", a.strokeStyle instanceof id ? c.stroke = Cd(a, a.strokeStyle) : (/^rgba\(/.test(a.strokeStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle), c.stroke = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["stroke-opacity"] = b[4]), c.stroke = a.strokeStyle), c["stroke-width"] = a.lineWidth, c["stroke-linecap"] = a.lineCap, c["stroke-linejoin"] = a.lineJoin, c["stroke-miterlimit"] = a.miterLimit);
        a = d.Yb;
        a = "matrix(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")";
        void 0 !== e && (a += e);
        c.transform = a
    }
    function Cd(a, b) {
        var c = "GRAD" + D.Gm++,
        d;
        if ("linear" === b.type) d = od(a, "linearGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            id: c,
            gradientUnits: "userSpaceOnUse"
        });
        else if ("radial" === b.type) d = od(a, "radialGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            r1: b.r1,
            r2: b.r2,
            id: c
        });
        else if ("pattern" === b.type) {
            var e = b.pattern;
            d = {
                width: e.width,
                height: e.height,
                id: c,
                patternUnits: "userSpaceOnUse"
            };
            var g = "";
            e instanceof HTMLCanvasElement && (g = e.toDataURL());
            e instanceof HTMLImageElement && (g = e.src);
            e = {
                x: 0,
                y: 0,
                width: e.width,
                height: e.height,
                href: g
            };
            d = od(a, "pattern", d);
            d.appendChild(od(a, "image", e))
        } else throw Error("invalid gradient");
        for (var e = b.NE,
        g = e.length,
        h = [], k = 0; k < g; k++) {
            var l = e[k],
            m = l.color,
            l = {
                offset: l.offset,
                "stop-color": m
            };
            /^rgba\(/.test(m) && (m = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m), l["stop-color"] = "rgb(" + m[1] + "," + m[2] + "," + m[3] + ")", l["stop-opacity"] = m[4]);
            h.push(l)
        }
        h.sort(function(a, b) {
            return a.offset > b.offset ? 1 : -1
        });
        for (k = 0; k < g; k++) d.appendChild(od(a, "stop", h[k]));
        a.Am.appendChild(d);
        return "url(#" + c + ")"
    }
    function Bd(a, b, c, d) {
        c = {
            x: c[0],
            y: c[1],
            width: c[2],
            height: c[3]
        };
        Ad(a, b, c, d);
        a.addElement("rect", c)
    }
    function rd(a, b, c, d) {
        for (var e = [], g = 0; g < c.length; g++) {
            var h = D.cm(c[g]),
            k = [h.shift()];
            if ("A" === k[0]) k.push(h.shift() + "," + h.shift(), h.shift(), h.shift() + "," + h.shift(), h.shift() + "," + h.shift());
            else for (; h.length;) k.push(h.shift() + "," + h.shift());
            e.push(k.join(" "))
        }
        c = {
            d: e.join(" ")
        };
        Ad(a, b, c, d);
        "clipPath" === b ? (b = "CLIP" + D.Gm++, d = od(a, "clipPath", {
            id: b
        }), d.appendChild(od(a, "path", c)), a.Am.appendChild(d), 0 < a.Ef.length && a.Ef[a.Ef.length - 1].setAttributeNS(null, "clip-path", "url(#" + b + ")")) : a.addElement("path", c)
    }
    function qd(a, b, c, d, e, g, h) {
        var k = Math.abs(e - g);
        if (e !== g) {
            var l = b + d * Math.cos(g);
            g = c + d * Math.sin(g);
            k >= 2 * Math.PI ? (qd(a, b, c, d, e, e + Math.PI, h), qd(a, b, c, d, e + Math.PI, e + 2 * Math.PI, h), a.path.push(["M", l, g])) : (b += d * Math.cos(e), c += d * Math.sin(e), k = 180 * k / Math.PI, e = h ? 0 : 1, h = 180 <= k === !!h ? 0 : 1, 0 !== a.path.length ? a.path.push(["L", b, c]) : a.path.push(["M", b, c]), a.path.push(["A", d, d, k, h, e, l, g]))
        }
    }
    function pd(a, b, c, d, e, g, h) {
        var k = new hd;
        k.Yb = [b, c, d, e, g, h];
        b = {};
        Ad(a, "g", b, k);
        k = a.addElement("g", b);
        a.Ef.push(k)
    }
    f.ib = function() {
        if (0 !== this.shadowOffsetX || 0 !== this.shadowOffsetY || 0 !== this.shadowBlur) {
            var a = "SHADOW" + D.Gm++,
            b = this.addElement("filter", {
                id: a,
                x: "-100%",
                y: "-100%",
                width: "300%",
                height: "300%"
            },
            null),
            c,
            d,
            e,
            g,
            h;
            c = od(this, "feGaussianBlur", {
                "in": "SourceAlpha",
                result: "blur",
                vM: this.shadowBlur / 2
            });
            d = od(this, "feFlood", {
                "in": "blur",
                result: "flood",
                "flood-color": this.shadowColor
            });
            e = od(this, "feComposite", {
                "in": "flood",
                in2: "blur",
                operator: "in",
                result: "comp"
            });
            g = od(this, "feOffset", {
                "in": "comp",
                result: "offsetBlur",
                dx: this.shadowOffsetX,
                dy: this.shadowOffsetY
            });
            h = od(this, "feMerge", {});
            h.appendChild(od(this, "feMergeNode", {
                "in": "offsetBlur"
            }));
            h.appendChild(od(this, "feMergeNode", {
                "in": "SourceGraphic"
            }));
            b.appendChild(c);
            b.appendChild(d);
            b.appendChild(e);
            b.appendChild(g);
            b.appendChild(h);
            0 < this.Ef.length && this.Ef[this.Ef.length - 1].setAttributeNS(null, "filter", "url(#" + a + ")")
        }
    };
    f.JB = function(a, b, c) {
        this.st = a;
        this.tt = b;
        this.Lg = c
    };
    f.to = function() {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    f.uo = function() {
        this.shadowOffsetX = this.st;
        this.shadowOffsetY = this.tt;
        this.shadowBlur = this.Lg
    };
    f.GA = function() {
        return ! 1
    };
    f.BA = function() {};
    f.Be = function() {};
    f.Fy = function() {};
    nd.prototype.rotate = function() {};
    function ka(a, b) {
        this.ownerDocument = void 0 === b ? document: b;
        var c = this.ownerDocument.createElement("canvas");
        c.tabIndex = 0;
        this.Ud = c;
        this.Ok = new Dd(c);
        c.ba = a;
        Object.seal(this)
    }
    f = ka.prototype;
    f.toDataURL = function(a, b) {
        return this.Ud.toDataURL(a, b)
    };
    f.getBoundingClientRect = function() {
        return this.Ud.getBoundingClientRect()
    };
    f.focus = function() {
        return this.Ud.focus()
    };
    f.addEventListener = function(a, b, c) {
        this.Ud.addEventListener(a, b, c)
    };
    f.removeEventListener = function(a, b, c) {
        this.Ud.removeEventListener(a, b, c)
    };
    D.defineProperty(ka, {
        width: "width"
    },
    function() {
        return this.Ud.width
    },
    function(a) {
        this.Ud.width = a
    });
    D.defineProperty(ka, {
        height: "height"
    },
    function() {
        return this.Ud.height
    },
    function(a) {
        this.Ud.height = a
    });
    D.w(ka, {
        style: "style"
    },
    function() {
        return this.Ud.style
    });
    function Dd(a) {
        a.getContext && a.getContext("2d") || D.k("Browser does not support HTML Canvas Element");
        this.Da = a.getContext("2d");
        this.bz = this.dz = this.cz = "";
        this.pr = !1;
        this.Lg = this.tt = this.st = 0;
        Object.seal(this)
    }
    Dd.prototype.Fy = function(a) {
        this.Da.VA = a;
        this.Da.YL = a
    };
    D.defineProperty(Dd, {
        fillStyle: "fillStyle"
    },
    function() {
        return this.Da.fillStyle
    },
    function(a) {
        this.bz !== a && (this.bz = this.Da.fillStyle = a)
    });
    D.defineProperty(Dd, {
        font: "font"
    },
    function() {
        return this.Da.font
    },
    function(a) {
        this.cz !== a && (this.cz = this.Da.font = a)
    });
    D.defineProperty(Dd, {
        globalAlpha: "globalAlpha"
    },
    function() {
        return this.Da.globalAlpha
    },
    function(a) {
        this.Da.globalAlpha = a
    });
    D.defineProperty(Dd, {
        lineCap: "lineCap"
    },
    function() {
        return this.Da.lineCap
    },
    function(a) {
        this.Da.lineCap = a
    });
    D.defineProperty(Dd, {
        bo: "lineDashOffset"
    },
    function() {
        return this.Da.bo
    },
    function(a) {
        this.Da.bo = a
    });
    D.defineProperty(Dd, {
        lineJoin: "lineJoin"
    },
    function() {
        return this.Da.lineJoin
    },
    function(a) {
        this.Da.lineJoin = a
    });
    D.defineProperty(Dd, {
        lineWidth: "lineWidth"
    },
    function() {
        return this.Da.lineWidth
    },
    function(a) {
        this.Da.lineWidth = a
    });
    D.defineProperty(Dd, {
        miterLimit: "miterLimit"
    },
    function() {
        return this.Da.miterLimit
    },
    function(a) {
        this.Da.miterLimit = a
    });
    D.defineProperty(Dd, {
        shadowBlur: "shadowBlur"
    },
    function() {
        return this.Da.shadowBlur
    },
    function(a) {
        this.Da.shadowBlur = a
    });
    D.defineProperty(Dd, {
        shadowColor: "shadowColor"
    },
    function() {
        return this.Da.shadowColor
    },
    function(a) {
        this.Da.shadowColor = a
    });
    D.defineProperty(Dd, {
        shadowOffsetX: "shadowOffsetX"
    },
    function() {
        return this.Da.shadowOffsetX
    },
    function(a) {
        this.Da.shadowOffsetX = a
    });
    D.defineProperty(Dd, {
        shadowOffsetY: "shadowOffsetY"
    },
    function() {
        return this.Da.shadowOffsetY
    },
    function(a) {
        this.Da.shadowOffsetY = a
    });
    D.defineProperty(Dd, {
        strokeStyle: "strokeStyle"
    },
    function() {
        return this.Da.strokeStyle
    },
    function(a) {
        this.dz !== a && (this.dz = this.Da.strokeStyle = a)
    });
    D.defineProperty(Dd, {
        textAlign: "textAlign"
    },
    function() {
        return this.Da.textAlign
    },
    function(a) {
        this.Da.textAlign = a
    });
    D.defineProperty(Dd, {
        VA: "imageSmoothingEnabled"
    },
    function() {
        return this.Da.VA
    },
    function(a) {
        this.Da.VA = a
    });
    f = Dd.prototype;
    f.arc = function(a, b, c, d, e, g) {
        this.Da.arc(a, b, c, d, e, g)
    };
    f.beginPath = function() {
        this.Da.beginPath()
    };
    f.bezierCurveTo = function(a, b, c, d, e, g) {
        this.Da.bezierCurveTo(a, b, c, d, e, g)
    };
    f.clearRect = function(a, b, c, d) {
        this.Da.clearRect(a, b, c, d)
    };
    f.clip = function() {
        this.Da.clip()
    };
    f.closePath = function() {
        this.Da.closePath()
    };
    f.createLinearGradient = function(a, b, c, d) {
        return this.Da.createLinearGradient(a, b, c, d)
    };
    f.createPattern = function(a, b) {
        return this.Da.createPattern(a, b)
    };
    f.createRadialGradient = function(a, b, c, d, e, g) {
        return this.Da.createRadialGradient(a, b, c, d, e, g)
    };
    f.drawImage = function(a, b, c, d, e, g, h, k, l) {
        void 0 === d ? this.Da.drawImage(a, b, c) : this.Da.drawImage(a, b, c, d, e, g, h, k, l)
    };
    f.fill = function() {
        this.Da.fill()
    };
    f.fillRect = function(a, b, c, d) {
        this.Da.fillRect(a, b, c, d)
    };
    f.fillText = function(a, b, c) {
        this.Da.fillText(a, b, c)
    };
    f.getImageData = function(a, b, c, d) {
        return this.Da.getImageData(a, b, c, d)
    };
    f.lineTo = function(a, b) {
        this.Da.lineTo(a, b)
    };
    f.measureText = function(a) {
        return this.Da.measureText(a)
    };
    f.moveTo = function(a, b) {
        this.Da.moveTo(a, b)
    };
    f.quadraticCurveTo = function(a, b, c, d) {
        this.Da.quadraticCurveTo(a, b, c, d)
    };
    f.rect = function(a, b, c, d) {
        this.Da.rect(a, b, c, d)
    };
    f.restore = function() {
        this.Da.restore()
    };
    Dd.prototype.rotate = function(a) {
        this.Da.rotate(a)
    };
    f = Dd.prototype;
    f.save = function() {
        this.Da.save()
    };
    f.setTransform = function(a, b, c, d, e, g) {
        this.Da.setTransform(a, b, c, d, e, g)
    };
    f.scale = function(a, b) {
        this.Da.scale(a, b)
    };
    f.stroke = function() {
        this.Da.stroke()
    };
    f.transform = function(a, b, c, d, e, g) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === g || this.Da.transform(a, b, c, d, e, g)
    };
    f.translate = function(a, b) {
        this.Da.translate(a, b)
    };
    f.Ug = function(a) {
        if (a instanceof Ba && a.type === Ed) {
            var b = a.Mo;
            a = a.hz;
            a > b ? (this.scale(b / a, 1), this.translate((a - b) / 2, 0)) : b > a && (this.scale(1, a / b), this.translate(0, (b - a) / 2));
            this.pr ? this.clip() : this.fill();
            a > b ? (this.translate( - (a - b) / 2, 0), this.scale(1 / (b / a), 1)) : b > a && (this.translate(0, -(b - a) / 2), this.scale(1, 1 / (a / b)))
        } else this.pr ? this.clip() : this.fill()
    };
    f.Vj = function() {
        this.pr || this.stroke()
    };
    D.defineProperty(Dd, {
        eq: "clipInsteadOfFill"
    },
    function() {
        return this.pr
    },
    function(a) {
        this.pr = a
    });
    f = Dd.prototype;
    f.JB = function(a, b, c) {
        this.st = a;
        this.tt = b;
        this.Lg = c
    };
    f.to = function() {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    f.uo = function() {
        this.shadowOffsetX = this.st;
        this.shadowOffsetY = this.tt;
        this.shadowBlur = this.Lg
    };
    f.GA = function(a, b) {
        var c = this.Da;
        if (void 0 !== c.setLineDash) c.setLineDash(a),
        c.lineDashOffset = b;
        else if (void 0 !== c.webkitLineDash) c.webkitLineDash = a,
        c.webkitLineDashOffset = b;
        else if (void 0 !== c.mozDash) c.mozDash = a,
        c.mozDashOffset = b;
        else return ! 1;
        return ! 0
    };
    f.BA = function() {
        var a = this.Da;
        void 0 !== a.setLineDash ? (a.setLineDash(D.Co), a.lineDashOffset = 0) : void 0 !== a.webkitLineDash ? (a.webkitLineDash = D.Co, a.webkitLineDashOffset = 0) : void 0 !== a.mozDash && (a.mozDash = null, a.mozDashOffset = 0)
    };
    f.Be = function(a) {
        a && (this.cz = "");
        this.bz = this.dz = ""
    };
    var Fd = (Math.sqrt(2) - 1) / 3 * 4,
    Gd = (new O(0, 0)).Na(),
    Hd = (new B(0, 0, 0, 0)).Na(),
    Ud = (new Hb(0, 0, 0, 0)).Na(),
    Vd = (new Hb(2, 2, 2, 2)).Na(),
    Wd = (new O(6, 6)).Na(),
    Xd = (new O( - Infinity, -Infinity)).Na(),
    Yd = (new O(Infinity, Infinity)).Na(),
    Zd = (new Ca(0, 0)).Na(),
    $d = (new Ca(1, 1)).Na(),
    ae = (new Ca(6, 6)).Na(),
    be = (new Ca(8, 8)).Na(),
    ce = (new Ca(10, 10)).Na(),
    ke = (new Ca(Infinity, Infinity)).Na(),
    le = (new O(NaN, NaN)).Na(),
    me = (new Ca(NaN, NaN)).Na(),
    ne = (new B(NaN, NaN, NaN, NaN)).Na(),
    oe = (new R(.156, .156)).Na(),
    pe = (new R(.844, .844)).Na(),
    qe = new la,
    re = new la,
    se = null;
    function te(a) {
        if (0 >= a) return 0;
        var b = se;
        if (null === b) {
            for (var b = [], c = 0; 2E3 >= c; c++) b[c] = Math.sqrt(c);
            se = b
        }
        return 1 > a ? (c = 1 / a, 2E3 >= c ? 1 / b[c | 0] : Math.sqrt(a)) : 2E3 >= a ? b[a | 0] : Math.sqrt(a)
    }
    function Q(a, b) {
        var c = a - b;
        return.5 > c && -.5 < c
    }
    function yb(a, b) {
        var c = a - b;
        return 5E-8 > c && -5E-8 < c
    }
    function ue(a, b, c, d, e, g, h) {
        0 >= e && (e = 1E-6);
        var k = 0,
        l = 0,
        m = 0,
        n = 0;
        a < c ? (l = a, k = c) : (l = c, k = a);
        b < d ? (n = b, m = d) : (n = d, m = b);
        if (a === c) return n <= h && h <= m && a - e <= g && g <= a + e;
        if (b === d) return l <= g && g <= k && b - e <= h && h <= b + e;
        k += e;
        l -= e;
        if (l <= g && g <= k && (m += e, n -= e, n <= h && h <= m)) if (k - l > m - n) if (a - c > e || c - a > e) {
            if (g = (d - b) / (c - a) * (g - a) + b, g - e <= h && h <= g + e) return ! 0
        } else return ! 0;
        else if (b - d > e || d - b > e) {
            if (h = (c - a) / (d - b) * (h - b) + a, h - e <= g && g <= h + e) return ! 0
        } else return ! 0;
        return ! 1
    }
    function De(a, b, c, d, e, g, h, k, l, m, n, p) {
        if (ue(a, b, h, k, p, c, d) && ue(a, b, h, k, p, e, g)) return ue(a, b, h, k, p, m, n);
        var q = (a + c) / 2,
        r = (b + d) / 2,
        s = (c + e) / 2,
        u = (d + g) / 2;
        e = (e + h) / 2;
        g = (g + k) / 2;
        d = (q + s) / 2;
        c = (r + u) / 2;
        var s = (s + e) / 2,
        u = (u + g) / 2,
        t = (d + s) / 2,
        y = (c + u) / 2;
        return De(a, b, q, r, d, c, t, y, l, m, n, p) || De(t, y, s, u, e, g, h, k, l, m, n, p)
    }
    function Ee(a, b, c, d, e, g, h, k, l, m) {
        if (ue(a, b, h, k, l, c, d) && ue(a, b, h, k, l, e, g)) Ob(m, a, b, 0, 0),
        Ob(m, h, k, 0, 0);
        else {
            var n = (a + c) / 2,
            p = (b + d) / 2,
            q = (c + e) / 2,
            r = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2,
            r = (r + g) / 2,
            s = (d + q) / 2,
            u = (c + r) / 2;
            Ee(a, b, n, p, d, c, s, u, l, m);
            Ee(s, u, q, r, e, g, h, k, l, m)
        }
    }
    function Fe(a, b, c, d, e, g, h, k, l, m) {
        if (ue(a, b, h, k, l, c, d) && ue(a, b, h, k, l, e, g)) 0 === m.length && (m.push(a), m.push(b)),
        m.push(h),
        m.push(k);
        else {
            var n = (a + c) / 2,
            p = (b + d) / 2,
            q = (c + e) / 2,
            r = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2,
            r = (r + g) / 2,
            s = (d + q) / 2,
            u = (c + r) / 2;
            Fe(a, b, n, p, d, c, s, u, l, m);
            Fe(s, u, q, r, e, g, h, k, l, m)
        }
    }
    function Ge(a, b, c, d, e, g, h, k, l, m, n, p, q, r) {
        var s = 1 - l;
        a = a * s + c * l;
        b = b * s + d * l;
        c = c * s + e * l;
        d = d * s + g * l;
        e = e * s + h * l;
        g = g * s + k * l;
        k = a * s + c * l;
        h = b * s + d * l;
        c = c * s + e * l;
        d = d * s + g * l;
        m.x = a;
        m.y = b;
        n.x = k;
        n.y = h;
        p.x = k * s + c * l;
        p.y = h * s + d * l;
        q.x = c;
        q.y = d;
        r.x = e;
        r.y = g
    }
    function He(a, b, c, d, e, g, h, k, l, m) {
        if (ue(a, b, e, g, m, c, d)) return ue(a, b, e, g, m, k, l);
        var n = (a + c) / 2,
        p = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        var q = (n + c) / 2,
        r = (p + d) / 2;
        return He(a, b, n, p, q, r, h, k, l, m) || He(q, r, c, d, e, g, h, k, l, m)
    }
    function Ie(a, b, c, d, e, g, h, k) {
        if (ue(a, b, e, g, h, c, d)) Ob(k, a, b, 0, 0),
        Ob(k, e, g, 0, 0);
        else {
            var l = (a + c) / 2,
            m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + g) / 2;
            var n = (l + c) / 2,
            p = (m + d) / 2;
            Ie(a, b, l, m, n, p, h, k);
            Ie(n, p, c, d, e, g, h, k)
        }
    }
    function Je(a, b, c, d, e, g, h, k) {
        if (ue(a, b, e, g, h, c, d)) 0 === k.length && (k.push(a), k.push(b)),
        k.push(e),
        k.push(g);
        else {
            var l = (a + c) / 2,
            m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + g) / 2;
            var n = (l + c) / 2,
            p = (m + d) / 2;
            Je(a, b, l, m, n, p, h, k);
            Je(n, p, c, d, e, g, h, k)
        }
    }
    function Ke(a, b, c, d, e, g, h, k, l, m, n, p, q, r) {
        0 >= q && (q = 1E-6);
        if (ue(a, b, h, k, q, c, d) && ue(a, b, h, k, q, e, g)) {
            var s = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === s) return ! 1;
            q = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / s;
            s = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / s;
            if ((l > n ? l - n: n - l) < (m > p ? m - p: p - m)) {
                if (h = l = 0, b < k ? (l = b, h = k) : (l = k, h = b), s < l || s > h) return ! 1
            } else if (a < h ? l = a: (l = h, h = a), q < l || q > h) return ! 1;
            r.x = q;
            r.y = s;
            return ! 0
        }
        var s = (a + c) / 2,
        u = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        e = (e + h) / 2;
        g = (g + k) / 2;
        var t = (s + c) / 2,
        y = (u + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        var w = (t + c) / 2,
        C = (y + d) / 2,
        A = (n - l) * (n - l) + (p - m) * (p - m),
        N = !1;
        Ke(a, b, s, u, t, y, w, C, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A && (A = b, N = !0));
        a = r.x;
        s = r.y;
        Ke(w, C, c, d, e, g, h, k, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A ? N = !0 : (r.x = a, r.y = s));
        return N
    }
    function Le(a, b, c, d, e, g, h, k, l, m, n, p, q) {
        var r = 0;
        0 >= q && (q = 1E-6);
        if (ue(a, b, h, k, q, c, d) && ue(a, b, h, k, q, e, g)) {
            q = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === q) return r;
            var s = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / q,
            u = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / q;
            if (s >= n) return r;
            if ((l > n ? l - n: n - l) < (m > p ? m - p: p - m)) {
                if (a = l = 0, b < k ? (l = b, a = k) : (l = k, a = b), u < l || u > a) return r
            } else if (a < h ? (l = a, a = h) : l = h, s < l || s > a) return r;
            0 < q ? r++:0 > q && r--
        } else {
            var s = (a + c) / 2,
            u = (b + d) / 2,
            t = (c + e) / 2,
            y = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (s + t) / 2;
            c = (u + y) / 2;
            var t = (t + e) / 2,
            y = (y + g) / 2,
            w = (d + t) / 2,
            C = (c + y) / 2,
            r = r + Le(a, b, s, u, d, c, w, C, l, m, n, p, q),
            r = r + Le(w, C, t, y, e, g, h, k, l, m, n, p, q)
        }
        return r
    }
    function fb(a, b, c, d, e, g, h) {
        if (yb(a, c)) {
            var k = 0;
            c = 0;
            b < d ? (k = b, c = d) : (k = d, c = b);
            d = g;
            if (d < k) return h.x = a,
            h.y = k,
            !1;
            if (d > c) return h.x = a,
            h.y = c,
            !1;
            h.x = a;
            h.y = d;
            return ! 0
        }
        if (yb(b, d)) {
            a < c ? k = a: (k = c, c = a);
            d = e;
            if (d < k) return h.x = k,
            h.y = b,
            !1;
            if (d > c) return h.x = c,
            h.y = b,
            !1;
            h.x = d;
            h.y = b;
            return ! 0
        }
        k = ((a - e) * (a - c) + (b - g) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
        if ( - 5E-6 > k) return h.x = a,
        h.y = b,
        !1;
        if (1.000005 < k) return h.x = c,
        h.y = d,
        !1;
        h.x = a + k * (c - a);
        h.y = b + k * (d - b);
        return ! 0
    }
    function Me(a, b, c, d, e, g, h, k, l) {
        if (Q(a, c) && Q(b, d)) return l.x = a,
        l.y = b,
        !1;
        if (yb(e, h)) {
            if (yb(a, c)) return fb(a, b, c, d, e, g, l),
            !1;
            g = (d - b) / (c - a) * (e - a) + b;
            return fb(a, b, c, d, e, g, l)
        }
        k = (k - g) / (h - e);
        if (yb(a, c)) {
            g = k * (a - e) + g;
            c = h = 0;
            b < d ? (h = b, c = d) : (h = d, c = b);
            if (g < h) return l.x = a,
            l.y = h,
            !1;
            if (g > c) return l.x = a,
            l.y = c,
            !1;
            l.x = a;
            l.y = g;
            return ! 0
        }
        h = (d - b) / (c - a);
        if (yb(k, h)) return fb(a, b, c, d, e, g, l),
        !1;
        e = (h * a - k * e + g - b) / (h - k);
        if (yb(h, 0)) {
            a < c ? h = a: (h = c, c = a);
            if (e < h) return l.x = h,
            l.y = b,
            !1;
            if (e > c) return l.x = c,
            l.y = b,
            !1;
            l.x = e;
            l.y = b;
            return ! 0
        }
        g = h * (e - a) + b;
        return fb(a, b, c, d, e, g, l)
    }
    function Ne(a, b, c, d, e, g, h, k, l) {
        var m = 1E21,
        n = a,
        p = b;
        if (Me(a, b, a, d, e, g, h, k, l)) {
            var q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g);
            q < m && (m = q, n = l.x, p = l.y)
        }
        Me(c, b, c, d, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        Me(a, b, c, b, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        Me(a, d, c, d, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        l.x = n;
        l.y = p;
        return 1E21 > m
    }
    function Ue(a, b, c, d, e, g, h, k, l) {
        c = a - c;
        var m = e - h,
        n = h = 0;
        0 === c || 0 === m ? 0 === c ? (k = (g - k) / m, h = a, n = k * h + (g - k * e)) : (d = (b - d) / c, h = e, n = d * h + (b - d * a)) : (d = (b - d) / c, k = (g - k) / m, a = b - d * a, h = (g - k * e - a) / (d - k), n = d * h + a);
        l.m(h, n);
        return l
    }
    function Ve(a, b, c) {
        var d = b.x,
        e = b.y,
        g = c.x,
        h = c.y,
        k = a.left,
        l = a.right,
        m = a.top,
        n = a.bottom;
        return d === g ? (g = a = 0, e < h ? (a = e, g = h) : (a = h, g = e), k <= d && d <= l && a <= n && g >= m) : e === h ? (d < g ? a = d: (a = g, g = d), m <= e && e <= n && a <= l && g >= k) : a.Oa(b) || a.Oa(c) || We(k, m, l, m, d, e, g, h) || We(l, m, l, n, d, e, g, h) || We(l, n, k, n, d, e, g, h) || We(k, n, k, m, d, e, g, h) ? !0 : !1
    }
    function We(a, b, c, d, e, g, h, k) {
        return 0 >= Xe(a, b, c, d, e, g) * Xe(a, b, c, d, h, k) && 0 >= Xe(e, g, h, k, a, b) * Xe(e, g, h, k, c, d)
    }
    function Xe(a, b, c, d, e, g) {
        c -= a;
        d -= b;
        a = e - a;
        b = g - b;
        g = a * d - b * c;
        0 === g && (g = a * c + b * d, 0 < g && (g = (a - c) * c + (b - d) * d, 0 > g && (g = 0)));
        return 0 > g ? -1 : 0 < g ? 1 : 0
    }
    function Ye(a) {
        0 > a && (a += 360);
        360 <= a && (a -= 360);
        return a
    }
    function Ze(a, b, c, d) {
        var e = Math.PI;
        d || (b *= e / 180, c *= e / 180);
        d = b < c ? 1 : -1;
        var g = [],
        h = e / 2,
        k = b;
        for (b = Math.min(2 * e, Math.abs(c - b)); 1E-5 < b;) {
            c = k + d * Math.min(b, h);
            var e = (c - k) / 2,
            l = a * Math.cos(e),
            m = a * Math.sin(e),
            n = -m,
            p = l * l + n * n,
            q = p + l * l + n * m,
            p = 4 / 3 * (Math.sqrt(2 * p * q) - q) / (l * m - n * l),
            m = l - p * n,
            l = n + p * l,
            n = -l,
            p = e + k,
            e = Math.cos(p),
            p = Math.sin(p);
            g.push([0 + a * Math.cos(k), 0 + a * Math.sin(k), 0 + m * e - l * p, 0 + m * p + l * e, 0 + m * e - n * p, 0 + m * p + n * e, 0 + a * Math.cos(c), 0 + a * Math.sin(c)]);
            b -= Math.abs(c - k);
            k = c
        }
        return g
    }
    function gb(a, b, c, d, e, g, h) {
        c = Math.floor((a - c) / e) * e + c;
        d = Math.floor((b - d) / g) * g + d;
        var k = c;
        c + e - a < e / 2 && (k = c + e);
        a = d;
        d + g - b < g / 2 && (a = d + g);
        h.m(k, a)
    }
    function $e(a, b) {
        var c = Math.max(a, b),
        d = Math.min(a, b),
        e = 1,
        g = 1;
        do e = c % d,
        c = g = d,
        d = e;
        while (0 < e);
        return g
    }
    function af(a, b, c, d) {
        var e = 0 > c,
        g = 0 > d,
        h = 0,
        k = h = 0;
        a < b ? (h = 1, k = 0) : (h = 0, k = 1);
        var l = 0,
        m = 0,
        n = 0,
        p = 0,
        l = 0 === h ? a: b,
        n = 0 === h ? c: d;
        if (0 === h ? e: g) n = -n;
        h = k;
        m = 0 === h ? a: b;
        p = 0 === h ? c: d;
        if (0 === h ? e: g) p = -p;
        a = a = 0;
        if (0 < p) if (0 < n) {
            b = l * l;
            a = m * m;
            l *= n;
            c = m * p;
            d = -a + c;
            e = -a + Math.sqrt(l * l + c * c);
            m = d;
            for (g = 0; 9999999999 > g; ++g) {
                m = .5 * (d + e);
                if (m === d || m === e) break;
                k = l / (m + b);
                h = c / (m + a);
                k = k * k + h * h - 1;
                if (0 < k) d = m;
                else if (0 > k) e = m;
                else break
            }
            n = b * n / (m + b) - n;
            p = a * p / (m + a) - p;
            a = Math.sqrt(n * n + p * p)
        } else a = Math.abs(p - m);
        else p = l * l - m * m,
        a = l * n,
        a < p ? (p = a / p, a = m * Math.sqrt(Math.abs(1 - p * p)), n = l * p - n, a = Math.sqrt(n * n + a * a)) : a = Math.abs(n - l);
        return a
    }
    function bf(a) {
        1 < arguments.length && D.k("Geometry constructor can take at most one optional argument, the Geometry type.");
        D.tc(this);
        this.J = !1;
        void 0 === a ? a = cf: v && D.Ca(a, bf, bf, "constructor:type");
        this.ca = a;
        this.Ib = this.Ab = this.Gc = this.wc = 0;
        this.fk = new K(df);
        this.Sv = this.fk.G;
        this.Cv = (new B).freeze();
        this.lb = !0;
        this.er = this.Fo = null;
        this.fr = NaN;
        this.ui = cc;
        this.vi = rc;
        this.kp = this.mp = NaN;
        this.Vi = rf
    }
    D.ja("Geometry", bf);
    D.Ai(bf);
    bf.prototype.copy = function() {
        var a = new bf;
        a.ca = this.ca;
        a.wc = this.wc;
        a.Gc = this.Gc;
        a.Ab = this.Ab;
        a.Ib = this.Ib;
        for (var b = this.fk.o,
        c = b.length,
        d = a.fk,
        e = 0; e < c; e++) {
            var g = b[e].copy();
            d.add(g)
        }
        a.Sv = this.Sv;
        a.Cv.assign(this.Cv);
        a.lb = this.lb;
        a.Fo = this.Fo;
        a.er = this.er;
        a.fr = this.fr;
        a.ui = this.ui.V();
        a.vi = this.vi.V();
        a.mp = this.mp;
        a.kp = this.kp;
        a.Vi = this.Vi;
        return a
    };
    var sf;
    bf.Line = sf = D.s(bf, "Line", 0);
    var tf;
    bf.Rectangle = tf = D.s(bf, "Rectangle", 1);
    var uf;
    bf.Ellipse = uf = D.s(bf, "Ellipse", 2);
    var cf;
    bf.Path = cf = D.s(bf, "Path", 3);
    bf.prototype.Na = function() {
        this.freeze();
        Object.freeze(this);
        return this
    };
    bf.prototype.freeze = function() {
        this.J = !0;
        var a = this.kc;
        a.freeze();
        for (var a = a.o,
        b = a.length,
        c = 0; c < b; c++) a[c].freeze();
        return this
    };
    bf.prototype.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        var a = this.kc;
        a.Ya();
        for (var a = a.o,
        b = a.length,
        c = 0; c < b; c++) a[c].Ya();
        return this
    };
    bf.prototype.equalsApprox = bf.prototype.Sc = function(a) {
        if (! (a instanceof bf)) return ! 1;
        if (this.type !== a.type) return this.type === sf && a.type === cf ? vf(this, a) : a.type === sf && this.type === cf ? vf(a, this) : !1;
        if (this.type === cf) {
            var b = this.kc.o;
            a = a.kc.o;
            var c = b.length;
            if (c !== a.length) return ! 1;
            for (var d = 0; d < c; d++) if (!b[d].Sc(a[d])) return ! 1;
            return ! 0
        }
        return Q(this.ma, a.ma) && Q(this.ka, a.ka) && Q(this.H, a.H) && Q(this.I, a.I)
    };
    function vf(a, b) {
        if (a.type !== sf || b.type !== cf) return ! 1;
        if (1 === b.kc.count) {
            var c = b.kc.ea(0);
            if (1 === c.Db.count && Q(a.ma, c.ma) && Q(a.ka, c.ka) && (c = c.Db.ea(0), c.type === wf && Q(a.H, c.H) && Q(a.I, c.I))) return ! 0
        }
        return ! 1
    }
    var xf;
    bf.stringify = xf = function(a) {
        return a.toString()
    };
    bf.prototype.nc = function(a) {
        a.Ne === bf ? this.type = a: D.Xj(this, a)
    };
    bf.prototype.toString = function(a) {
        void 0 === a && (a = -1);
        switch (this.type) {
        case sf:
            return 0 > a ? "M" + this.ma.toString() + " " + this.ka.toString() + "L" + this.H.toString() + " " + this.I.toString() : "M" + this.ma.toFixed(a) + " " + this.ka.toFixed(a) + "L" + this.H.toFixed(a) + " " + this.I.toFixed(a);
        case tf:
            var b = new B(this.ma, this.ka, 0, 0);
            b.gH(this.H, this.I, 0, 0);
            return 0 > a ? "M" + b.x.toString() + " " + b.y.toString() + "H" + b.right.toString() + "V" + b.bottom.toString() + "H" + b.left.toString() + "z": "M" + b.x.toFixed(a) + " " + b.y.toFixed(a) + "H" + b.right.toFixed(a) + "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
        case uf:
            b = new B(this.ma, this.ka, 0, 0);
            b.gH(this.H, this.I, 0, 0);
            if (0 > a) {
                var c = b.left.toString() + " " + (b.y + b.height / 2).toString(),
                d = b.right.toString() + " " + (b.y + b.height / 2).toString();
                return "M" + c + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + d + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + c
            }
            c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
            d = b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
            return "M" + c + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + d + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
        case cf:
            for (var b = "",
            c = this.kc.o,
            d = c.length,
            e = 0; e < d; e++) {
                var g = c[e];
                0 < e && (b += " x ");
                g.wu && (b += "F ");
                b += g.toString(a)
            }
            return b;
        default:
            return this.type.toString()
        }
    };
    bf.fillPath = function(a) {
        "string" !== typeof a && D.gc(a, "string", bf, "fillPath:str");
        a = a.split(/[Xx]/);
        for (var b = a.length,
        c = "",
        d = 0; d < b; d++) var e = a[d],
        c = null !== e.match(/[Ff]/) ? 0 === d ? c + e: c + ("X" + (" " === e[0] ? "": " ") + e) : c + ((0 === d ? "": "X ") + "F" + (" " === e[0] ? "": " ") + e);
        return c
    };
    var yf;
    bf.parse = yf = function(a, b) {
        function c() {
            return m >= u - 1 ? !0 : null !== l[m + 1].match(/[A-Za-z]/)
        }
        function d() {
            m++;
            return l[m]
        }
        function e() {
            var a = new O(parseFloat(d()), parseFloat(d()));
            n === n.toLowerCase() && (a.x = s.x + a.x, a.y = s.y + a.y);
            return a
        }
        function g() {
            return s = e()
        }
        function h() {
            return r = e()
        }
        function k() {
            return "c" !== p.toLowerCase() && "s" !== p.toLowerCase() ? s: new O(2 * s.x - r.x, 2 * s.y - r.y)
        }
        void 0 === b && (b = !1);
        "string" !== typeof a && D.gc(a, "string", bf, "parse:str");
        a = a.replace(/,/gm, " ");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm, "$1 $2");
        a = a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([0-9])([+\-])/gm, "$1 $2");
        a = a.replace(/(\.[0-9]*)(\.)/gm, "$1 $2");
        a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 ");
        a = a.replace(/[\s\r\t\n]+/gm, " ");
        a = a.replace(/^\s+|\s+$/g, "");
        for (var l = a.split(" "), m = -1, n = "", p = "", q = new O(0, 0), r = new O(0, 0), s = new O(0, 0), u = l.length, t = D.v(), y = !1, w = !1, C = !0, A = null; ! (m >= u - 1);) if (p = n, n = d(), "" !== n) switch (n.toUpperCase()) {
        case "X":
            C = !0;
            w = y = !1;
            break;
        case "M":
            A = g();
            null === t.cc || !0 === C ? (T(t, A.x, A.y, y, !1, !w), C = !1) : t.moveTo(A.x, A.y);
            for (q = s; ! c();) A = g(),
            t.lineTo(A.x, A.y);
            break;
        case "L":
            for (; ! c();) A = g(),
            t.lineTo(A.x, A.y);
            break;
        case "H":
            for (; ! c();) s = A = new O((n === n.toLowerCase() ? s.x: 0) + parseFloat(d()), s.y),
            t.lineTo(s.x, s.y);
            break;
        case "V":
            for (; ! c();) s = A = new O(s.x, (n === n.toLowerCase() ? s.y: 0) + parseFloat(d())),
            t.lineTo(s.x, s.y);
            break;
        case "C":
            for (; ! c();) {
                var N = e(),
                H = h(),
                A = g();
                V(t, N.x, N.y, H.x, H.y, A.x, A.y)
            }
            break;
        case "S":
            for (; ! c();) N = k(),
            H = h(),
            A = g(),
            V(t, N.x, N.y, H.x, H.y, A.x, A.y);
            break;
        case "Q":
            for (; ! c();) H = h(),
            A = g(),
            zf(t, H.x, H.y, A.x, A.y);
            break;
        case "T":
            for (; ! c();) r = H = k(),
            A = g(),
            zf(t, H.x, H.y, A.x, A.y);
            break;
        case "B":
            for (; ! c();) {
                var A = parseFloat(d()),
                N = parseFloat(d()),
                H = parseFloat(d()),
                W = parseFloat(d()),
                fa = parseFloat(d()),
                S = fa,
                ba = !1;
                c() || (S = parseFloat(d()), c() || (ba = 0 !== parseFloat(d())));
                n === n.toLowerCase() && (H += s.x, W += s.y);
                t.arcTo(A, N, H, W, fa, S, ba)
            }
            break;
        case "A":
            for (; ! c();) N = Math.abs(parseFloat(d())),
            H = Math.abs(parseFloat(d())),
            W = parseFloat(d()),
            fa = !!parseFloat(d()),
            S = !!parseFloat(d()),
            A = g(),
            Af(t, N, H, W, fa, S, A.x, A.y);
            break;
        case "Z":
            A = t.q.kc.o[t.q.kc.length - 1];
            X(t);
            s = q;
            break;
        case "F":
            A = "";
            for (N = 1; l[m + N];) if (null !== l[m + N].match(/[Uu]/)) N++;
            else if (null === l[m + N].match(/[A-Za-z]/)) N++;
            else {
                A = l[m + N];
                break
            }
            A.match(/[Mm]/) ? y = !0 : Bf(t);
            break;
        case "U":
            A = "";
            for (N = 1; l[m + N];) if (null !== l[m + N].match(/[Ff]/)) N++;
            else if (null === l[m + N].match(/[A-Za-z]/)) N++;
            else {
                A = l[m + N];
                break
            }
            A.match(/[Mm]/) ? w = !0 : t.ib(!1)
        }
        q = t.q;
        D.u(t);
        if (b) for (t = q.kc.j; t.next();) A = t.value,
        A.wu = !0;
        return q
    };
    function Cf(a, b) {
        for (var c = a.length,
        d = D.P(), e = 0; e < c; e++) {
            var g = a[e];
            d.x = g[0];
            d.y = g[1];
            b.vb(d);
            g[0] = d.x;
            g[1] = d.y;
            d.x = g[2];
            d.y = g[3];
            b.vb(d);
            g[2] = d.x;
            g[3] = d.y;
            d.x = g[4];
            d.y = g[5];
            b.vb(d);
            g[4] = d.x;
            g[5] = d.y;
            d.x = g[6];
            d.y = g[7];
            b.vb(d);
            g[6] = d.x;
            g[7] = d.y
        }
        D.A(d)
    }
    bf.prototype.Vx = function() {
        if (this.lb || this.Sv !== this.kc.G) return ! 0;
        for (var a = this.kc.o,
        b = a.length,
        c = 0; c < b; c++) if (a[c].Vx()) return ! 0;
        return ! 1
    };
    bf.prototype.Ly = function() {
        this.lb = !1;
        this.er = this.Fo = null;
        this.fr = NaN;
        this.Sv = this.kc.G;
        for (var a = this.kc.o,
        b = a.length,
        c = 0; c < b; c++) a[c].Ly()
    };
    bf.prototype.Kh = function() {
        var a = this.Cv;
        a.Ya();
        isNaN(this.mp) || isNaN(this.kp) ? a.m(0, 0, 0, 0) : a.m(0, 0, this.mp, this.kp);
        Df(this, a, !1);
        Ob(a, 0, 0, 0, 0);
        a.freeze()
    };
    bf.prototype.computeBoundsWithoutOrigin = bf.prototype.dI = function() {
        var a = new B;
        Df(this, a, !0);
        return a
    };
    function Df(a, b, c) {
        switch (a.type) {
        case sf:
        case tf:
        case uf:
            c ? b.m(a.wc, a.Gc, 0, 0) : Ob(b, a.wc, a.Gc, 0, 0);
            Ob(b, a.Ab, a.Ib, 0, 0);
            break;
        case cf:
            var d = a.kc;
            a = d.o;
            for (var d = d.length,
            e = 0; e < d; e++) {
                var g = a[e];
                c && 0 === e ? b.m(g.ma, g.ka, 0, 0) : Ob(b, g.ma, g.ka, 0, 0);
                for (var h = g.Db.o,
                k = h.length,
                l = g.ma,
                m = g.ka,
                n = 0; n < k; n++) {
                    var p = h[n];
                    switch (p.type) {
                    case wf:
                    case Ef:
                        l = p.H;
                        m = p.I;
                        Ob(b, l, m, 0, 0);
                        break;
                    case Of:
                        Ee(l, m, p.Ac, p.Wc, p.Rh, p.Sh, p.H, p.I, .5, b);
                        l = p.H;
                        m = p.I;
                        break;
                    case Pf:
                        Ie(l, m, p.Ac, p.Wc, p.H, p.I, .5, b);
                        l = p.H;
                        m = p.I;
                        break;
                    case Qf:
                    case Rf:
                        var q = p.type === Qf ? Sf(p, g) : Tf(p, g, l, m),
                        r = q.length;
                        if (0 === r) {
                            l = p.na;
                            m = p.va;
                            Ob(b, l, m, 0, 0);
                            break
                        }
                        for (var p = null,
                        s = 0; s < r; s++) p = q[s],
                        Ee(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7], .5, b);
                        null !== p && (l = p[6], m = p[7]);
                        break;
                    default:
                        D.k("Unknown Segment type: " + p.type)
                    }
                }
            }
            break;
        default:
            D.k("Unknown Geometry type: " + a.type)
        }
    }
    bf.prototype.normalize = bf.prototype.normalize = function() {
        this.J && D.pa(this);
        var a = this.dI();
        this.offset( - a.x, -a.y);
        return new O( - a.x, -a.y)
    };
    bf.prototype.offset = bf.prototype.offset = function(a, b) {
        this.J && D.pa(this);
        v && (D.p(a, bf, "offset"), D.p(b, bf, "offset"));
        this.transform(1, 0, 0, 1, a, b);
        return this
    };
    bf.prototype.scale = bf.prototype.scale = function(a, b) {
        this.J && D.pa(this);
        v && (D.p(a, bf, "scale:x"), D.p(b, bf, "scale:y"), 0 === a && D.ua(a, "scale must be non-zero", bf, "scale:x"), 0 === b && D.ua(b, "scale must be non-zero", bf, "scale:y"));
        this.transform(a, 0, 0, b, 0, 0);
        return this
    };
    bf.prototype.rotate = bf.prototype.rotate = function(a, b, c) {
        this.J && D.pa(this);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        v && (D.p(a, bf, "rotate:angle"), D.p(b, bf, "rotate:x"), D.p(c, bf, "rotate:y"));
        var d = D.Of();
        d.reset();
        d.rotate(a, b, c);
        this.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
        D.He(d);
        return this
    };
    bf.prototype.transform = bf.prototype.transform = function(a, b, c, d, e, g) {
        var h = 0,
        k = 0;
        switch (this.type) {
        case sf:
        case tf:
        case uf:
            h = this.wc;
            k = this.Gc;
            this.wc = h * a + k * c + e;
            this.Gc = h * b + k * d + g;
            h = this.Ab;
            k = this.Ib;
            this.Ab = h * a + k * c + e;
            this.Ib = h * b + k * d + g;
            break;
        case cf:
            for (var l = this.kc.o,
            m = l.length,
            n = 0; n < m; n++) {
                var p = l[n],
                h = p.ma,
                k = p.ka;
                p.ma = h * a + k * c + e;
                p.ka = h * b + k * d + g;
                for (var p = p.Db.o,
                q = p.length,
                r = 0; r < q; r++) {
                    var s = p[r];
                    switch (s.type) {
                    case wf:
                    case Ef:
                        h = s.H;
                        k = s.I;
                        s.H = h * a + k * c + e;
                        s.I = h * b + k * d + g;
                        break;
                    case Of:
                        h = s.Ac;
                        k = s.Wc;
                        s.Ac = h * a + k * c + e;
                        s.Wc = h * b + k * d + g;
                        h = s.Rh;
                        k = s.Sh;
                        s.Rh = h * a + k * c + e;
                        s.Sh = h * b + k * d + g;
                        h = s.H;
                        k = s.I;
                        s.H = h * a + k * c + e;
                        s.I = h * b + k * d + g;
                        break;
                    case Pf:
                        h = s.Ac;
                        k = s.Wc;
                        s.Ac = h * a + k * c + e;
                        s.Wc = h * b + k * d + g;
                        h = s.H;
                        k = s.I;
                        s.H = h * a + k * c + e;
                        s.I = h * b + k * d + g;
                        break;
                    case Qf:
                        h = s.na;
                        k = s.va;
                        s.na = h * a + k * c + e;
                        s.va = h * b + k * d + g;
                        0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Le += h);
                        0 > a && (s.Le = 180 - s.Le, s.xf = -s.xf);
                        0 > d && (s.Le = -s.Le, s.xf = -s.xf);
                        s.radiusX *= Math.sqrt(a * a + c * c);
                        void 0 !== s.radiusY && (s.radiusY *= Math.sqrt(b * b + d * d));
                        break;
                    case Rf:
                        h = s.H;
                        k = s.I;
                        s.H = h * a + k * c + e;
                        s.I = h * b + k * d + g;
                        0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Zj += h);
                        0 > a && (s.Zj = 180 - s.Zj, s.sm = !s.sm);
                        0 > d && (s.Zj = -s.Zj, s.sm = !s.sm);
                        s.radiusX *= Math.sqrt(a * a + c * c);
                        s.radiusY *= Math.sqrt(b * b + d * d);
                        break;
                    default:
                        D.k("Unknown Segment type: " + s.type)
                    }
                }
            }
        }
        this.lb = !0;
        return this
    };
    bf.prototype.Oa = function(a, b, c, d) {
        var e = a.x,
        g = a.y,
        h = this.sb.x - 20;
        a = a.y;
        for (var k = 0,
        l = 0,
        m = 0,
        n = 0,
        p = 0,
        q = 0,
        r = this.kc.o,
        s = r.length,
        u = 0; u < s; u++) {
            var t = r[u];
            if (t.wu) {
                if (c && t.Oa(e, g, b)) return ! 0;
                for (var y = t.Db,
                l = t.ma,
                m = t.ka,
                w = l,
                C = m,
                A = y.o,
                N = 0; N <= y.length; N++) {
                    var H, W;
                    N !== y.length ? (H = A[N], W = H.type, p = H.H, q = H.I) : (W = wf, p = w, q = C);
                    switch (W) {
                    case Ef:
                        n = Uf(e, g, h, a, l, m, w, C);
                        if (isNaN(n)) return ! 0;
                        k += n;
                        w = p;
                        C = q;
                        break;
                    case wf:
                        n = Uf(e, g, h, a, l, m, p, q);
                        if (isNaN(n)) return ! 0;
                        k += n;
                        break;
                    case Of:
                        n = Le(l, m, H.Ac, H.Wc, H.Rh, H.Sh, p, q, h, a, e, g, .5);
                        k += n;
                        break;
                    case Pf:
                        n = Le(l, m, (l + 2 * H.Ac) / 3, (m + 2 * H.Wc) / 3, (2 * H.Ac + p) / 3, (2 * H.Wc + q) / 3, p, q, h, a, e, g, .5);
                        k += n;
                        break;
                    case Qf:
                    case Rf:
                        W = H.type === Qf ? Sf(H, t) : Tf(H, t, l, m);
                        var fa = W.length;
                        if (0 === fa) {
                            n = Uf(e, g, h, a, l, m, H.na, H.va);
                            if (isNaN(n)) return ! 0;
                            k += n;
                            break
                        }
                        for (var S = null,
                        ba = 0; ba < fa; ba++) {
                            S = W[ba];
                            if (0 === ba) {
                                n = Uf(e, g, h, a, l, m, S[0], S[1]);
                                if (isNaN(n)) return ! 0;
                                k += n
                            }
                            n = Le(S[0], S[1], S[2], S[3], S[4], S[5], S[6], S[7], h, a, e, g, .5);
                            k += n
                        }
                        null !== S && (p = S[6], q = S[7]);
                        break;
                    default:
                        D.k("Unknown Segment type: " + H.type)
                    }
                    l = p;
                    m = q
                }
                if (0 !== k) return ! 0;
                k = 0
            } else if (t.Oa(e, g, d ? b: b + 2)) return ! 0
        }
        return 0 !== k
    };
    function Uf(a, b, c, d, e, g, h, k) {
        if (ue(e, g, h, k, .05, a, b)) return NaN;
        var l = (a - c) * (g - k);
        if (0 === l) return 0;
        var m = ((a * d - b * c) * (e - h) - (a - c) * (e * k - g * h)) / l;
        b = (a * d - b * c) * (g - k) / l;
        if (m >= a) return 0;
        if ((e > h ? e - h: h - e) < (g > k ? g - k: k - g)) {
            if (e = a = 0, g < k ? (a = g, e = k) : (a = k, e = g), b < a || b > e) return 0
        } else if (e < h ? (a = e, e = h) : a = h, m < a || m > e) return 0;
        return 0 < l ? 1 : -1
    }
    function Vf(a, b, c, d) {
        a = a.kc.o;
        for (var e = a.length,
        g = 0; g < e; g++) if (a[g].Oa(b, c, d)) return ! 0;
        return ! 1
    }
    bf.prototype.getPointAlongPath = bf.prototype.NI = function(a, b) {
        0 > a ? a = 0 : 1 < a && (a = 1);
        void 0 === b && (b = new O);
        if (this.type === sf) return b.m(this.ma + a * (this.H - this.ma), this.ka + a * (this.I - this.ka)),
        b;
        for (var c = this.JA,
        d = this.Kx,
        e = c.length,
        g = this.KA * a,
        h = 0,
        k = 0; k < e; k++) for (var l = d[k], m = l.length, n = 0; n < m; n++) {
            var p = l[n];
            if (h + p >= g) return d = (g - h) / p,
            c = c[k],
            k = c[2 * n],
            e = c[2 * n + 1],
            b.m(k + (c[2 * n + 2] - k) * d, e + (c[2 * n + 3] - e) * d),
            b;
            h += p
        }
        b.m(NaN, NaN);
        return b
    };
    bf.prototype.getFractionForPoint = bf.prototype.JI = function(a) {
        if (this.type === sf) {
            var b = this.ma,
            c = this.ka,
            d = this.H,
            e = this.I;
            if (b !== d || c !== e) {
                var g = a.x;
                a = a.y;
                var h = 0,
                k = 0;
                return b === d ? (c < e ? (h = c, k = e) : (h = e, k = c), a <= h ? h === c ? 0 : 1 : a >= k ? k === c ? 0 : 1 : Math.abs(a - c) / (k - h)) : c === e ? (b < d ? (h = b, k = d) : (h = d, k = b), g <= h ? h === b ? 0 : 1 : g >= k ? k === b ? 0 : 1 : Math.abs(g - b) / (k - h)) : ((g - b) * (g - b) + (a - c) * (a - c)) / ((d - b) * (d - b) + (e - c) * (e - c))
            }
        } else if (this.type === tf) {
            if (b = this.ma, c = this.ka, d = this.H, e = this.I, b !== d || c !== e) {
                var h = d - b,
                k = e - c,
                l = 2 * h + 2 * k,
                g = a.x;
                a = a.y;
                g = Math.min(Math.max(g, b), d);
                a = Math.min(Math.max(a, c), e);
                var b = Math.abs(g - b),
                d = Math.abs(g - d),
                c = Math.abs(a - c),
                e = Math.abs(a - e),
                m = Math.min(b, d, c, e);
                if (m === c) return g / l;
                if (m === d) return (h + a) / l;
                if (m === e) return (2 * h + k - g) / l;
                if (m === b) return (2 * h + 2 * k - a) / l
            }
        } else {
            for (var e = this.JA,
            h = this.Kx,
            k = this.KA,
            l = D.P(), c = Infinity, b = d = 0, g = e.length, n = m = 0, p = 0; p < g; p++) for (var q = e[p], r = h[p], s = q.length, u = 0; u < s; u += 2) {
                var t = q[u],
                y = q[u + 1];
                if (0 !== u) {
                    fb(m, n, t, y, a.x, a.y, l);
                    var w = (l.x - a.x) * (l.x - a.x) + (l.y - a.y) * (l.y - a.y);
                    w < c && (c = w, d = b, d += Math.sqrt((l.x - m) * (l.x - m) + (l.y - n) * (l.y - n)));
                    b += r[(u - 2) / 2]
                }
                m = t;
                n = y
            }
            D.A(l);
            a = d / k;
            return 0 > a ? 0 : 1 < a ? 1 : a
        }
        return 0
    };
    D.w(bf, {
        JA: null
    },
    function() {
        Wf(this);
        return this.Fo
    });
    function Wf(a) {
        if (null === a.Fo) {
            a.Vx() && a.Ly();
            var b = a.Fo = [],
            c = a.er = [],
            d = [],
            e = [];
            if (a.type === sf) d.push(a.ma),
            d.push(a.ka),
            d.push(a.H),
            d.push(a.I),
            b.push(d),
            e.push(Math.sqrt((a.ma - a.H) * (a.ma - a.H) + (a.ka - a.I) * (a.ka - a.I))),
            c.push(e);
            else if (a.type === tf) d.push(a.ma),
            d.push(a.ka),
            d.push(a.H),
            d.push(a.ka),
            d.push(a.H),
            d.push(a.I),
            d.push(a.ma),
            d.push(a.I),
            d.push(a.ma),
            d.push(a.ka),
            b.push(d),
            e.push(Math.abs(a.ma - a.H)),
            e.push(Math.abs(a.ka - a.I)),
            e.push(Math.abs(a.ma - a.H)),
            e.push(Math.abs(a.ka - a.I)),
            c.push(e);
            else if (a.type === uf) {
                var g = new df;
                g.ma = a.H;
                g.ka = (a.ka + a.I) / 2;
                var h = new Xf(Qf);
                h.Le = 0;
                h.xf = 360;
                h.na = (a.ma + a.H) / 2;
                h.va = (a.ka + a.I) / 2;
                h.radiusX = Math.abs(a.ma - a.H) / 2;
                h.radiusY = Math.abs(a.ka - a.I) / 2;
                g.add(h);
                a = Sf(h, g);
                e = a.length;
                if (0 === e) d.push(h.na),
                d.push(h.va);
                else for (var h = g.ma,
                g = g.ka,
                k = 0; k < e; k++) {
                    var l = a[k];
                    Fe(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d);
                    h = l[6];
                    g = l[7]
                }
                b.push(d);
                c.push(Yf(d))
            } else for (var m = a.kc.j; m.next();) {
                var n = m.value,
                d = [];
                d.push(n.ma);
                d.push(n.ka);
                for (var h = n.ma,
                g = n.ka,
                p = h,
                q = g,
                r = n.Db.o,
                s = r.length,
                u = 0; u < s; u++) {
                    var t = r[u];
                    switch (t.ca) {
                    case Ef:
                        4 <= d.length && (b.push(d), c.push(Yf(d)));
                        d = [];
                        d.push(t.H);
                        d.push(t.I);
                        h = t.H;
                        g = t.I;
                        p = h;
                        q = g;
                        break;
                    case wf:
                        d.push(t.H);
                        d.push(t.I);
                        h = t.H;
                        g = t.I;
                        break;
                    case Of:
                        Fe(h, g, t.Pd, t.df, t.Ch, t.Kg, t.Ab, t.Ib, .5, d);
                        h = t.H;
                        g = t.I;
                        break;
                    case Pf:
                        Je(h, g, t.Pd, t.df, t.Ab, t.Ib, .5, d);
                        h = t.H;
                        g = t.I;
                        break;
                    case Qf:
                        a = Sf(t, n);
                        e = a.length;
                        if (0 === e) {
                            d.push(t.na);
                            d.push(t.va);
                            h = t.na;
                            g = t.va;
                            break
                        }
                        for (k = 0; k < e; k++) l = a[k],
                        Fe(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d),
                        h = l[6],
                        g = l[7];
                        break;
                    case Rf:
                        a = Tf(t, n, h, g);
                        e = a.length;
                        if (0 === e) {
                            d.push(t.na);
                            d.push(t.va);
                            h = t.na;
                            g = t.va;
                            break
                        }
                        for (k = 0; k < e; k++) l = a[k],
                        Fe(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d),
                        h = l[6],
                        g = l[7];
                        break;
                    default:
                        D.k("Segment not of valid type: " + t.ca)
                    }
                    t.ei && (d.push(p), d.push(q))
                }
                4 <= d.length && (b.push(d), c.push(Yf(d)))
            }
        }
    }
    D.w(bf, {
        Kx: null
    },
    function() {
        Wf(this);
        return this.er
    });
    D.w(bf, {
        KA: null
    },
    function() {
        var a = this.fr;
        if (isNaN(a)) {
            if (this.type === sf) var a = Math.abs(this.H - this.ma),
            b = Math.abs(this.I - this.ka),
            a = Math.sqrt(a * a + b * b);
            else if (this.type === tf) a = Math.abs(this.H - this.ma),
            b = Math.abs(this.I - this.ka),
            a = 2 * a + 2 * b;
            else for (var b = this.Kx,
            c = b.length,
            d = a = 0; d < c; d++) for (var e = b[d], g = e.length, h = 0; h < g; h++) a += e[h];
            this.fr = a
        }
        return a
    });
    function Yf(a) {
        for (var b = [], c = 0, d = 0, e = a.length, g = 0; g < e; g += 2) {
            var h = a[g],
            k = a[g + 1];
            0 !== g && (c = Math.sqrt(kb(c, d, h, k)), b.push(c));
            c = h;
            d = k
        }
        return b
    }
    D.defineProperty(bf, {
        type: "type"
    },
    function() {
        return this.ca
    },
    function(a) {
        this.ca !== a && (v && D.Ca(a, bf, bf, "type"), this.J && D.pa(this, a), this.ca = a, this.lb = !0)
    });
    D.defineProperty(bf, {
        ma: "startX"
    },
    function() {
        return this.wc
    },
    function(a) {
        this.wc !== a && (v && D.p(a, bf, "startX"), this.J && D.pa(this, a), this.wc = a, this.lb = !0)
    });
    D.defineProperty(bf, {
        ka: "startY"
    },
    function() {
        return this.Gc
    },
    function(a) {
        this.Gc !== a && (v && D.p(a, bf, "startY"), this.J && D.pa(this, a), this.Gc = a, this.lb = !0)
    });
    D.defineProperty(bf, {
        H: "endX"
    },
    function() {
        return this.Ab
    },
    function(a) {
        this.Ab !== a && (v && D.p(a, bf, "endX"), this.J && D.pa(this, a), this.Ab = a, this.lb = !0)
    });
    D.defineProperty(bf, {
        I: "endY"
    },
    function() {
        return this.Ib
    },
    function(a) {
        this.Ib !== a && (v && D.p(a, bf, "endY"), this.J && D.pa(this, a), this.Ib = a, this.lb = !0)
    });
    D.defineProperty(bf, {
        kc: "figures"
    },
    function() {
        return this.fk
    },
    function(a) {
        this.fk !== a && (v && D.l(a, K, bf, "figures"), this.J && D.pa(this, a), this.fk = a, this.lb = !0)
    });
    bf.prototype.add = bf.prototype.add = function(a) {
        this.fk.add(a);
        return this
    };
    bf.prototype.setSpots = function(a, b, c, d, e, g, h, k) {
        this.J && D.pa(this);
        this.ui = (new R(a, b, e, g)).freeze();
        this.vi = (new R(c, d, h, k)).freeze();
        return this
    };
    D.defineProperty(bf, {
        C: "spot1"
    },
    function() {
        return this.ui
    },
    function(a) {
        v && D.l(a, R, bf, "spot1");
        this.J && D.pa(this, a);
        this.ui = a.V()
    });
    D.defineProperty(bf, {
        D: "spot2"
    },
    function() {
        return this.vi
    },
    function(a) {
        v && D.l(a, R, bf, "spot2");
        this.J && D.pa(this, a);
        this.vi = a.V()
    });
    D.defineProperty(bf, {
        je: "defaultStretch"
    },
    function() {
        return this.Vi
    },
    function(a) {
        v && D.Ca(a, P, bf, "stretch");
        this.J && D.pa(this, a);
        this.Vi = a
    });
    D.w(bf, {
        sb: "bounds"
    },
    function() {
        this.Vx() && (this.Ly(), this.Kh());
        return this.Cv
    });
    function df(a, b, c, d) {
        D.tc(this);
        this.J = !1;
        void 0 === c && (c = !0);
        this.Tm = c;
        void 0 === d && (d = !0);
        this.np = d;
        void 0 !== a ? (v && D.p(a, df, "sx"), this.wc = a) : this.wc = 0;
        void 0 !== b ? (v && D.p(b, df, "sy"), this.Gc = b) : this.Gc = 0;
        this.Kp = new K(Xf);
        this.Rw = this.Kp.G;
        this.lb = !0
    }
    D.ja("PathFigure", df);
    D.Ai(df);
    df.prototype.copy = function() {
        var a = new df;
        a.Tm = this.Tm;
        a.np = this.np;
        a.wc = this.wc;
        a.Gc = this.Gc;
        for (var b = this.Kp.o,
        c = b.length,
        d = a.Kp,
        e = 0; e < c; e++) {
            var g = b[e].copy();
            d.add(g)
        }
        a.Rw = this.Rw;
        a.lb = this.lb;
        return a
    };
    df.prototype.equalsApprox = df.prototype.Sc = function(a) {
        if (! (a instanceof df && Q(this.ma, a.ma) && Q(this.ka, a.ka))) return ! 1;
        var b = this.Db.o;
        a = a.Db.o;
        var c = b.length;
        if (c !== a.length) return ! 1;
        for (var d = 0; d < c; d++) if (!b[d].Sc(a[d])) return ! 1;
        return ! 0
    };
    f = df.prototype;
    f.toString = function(a) {
        void 0 === a && (a = -1);
        for (var b = 0 > a ? "M" + this.ma.toString() + " " + this.ka.toString() : "M" + this.ma.toFixed(a) + " " + this.ka.toFixed(a), c = this.Db.o, d = c.length, e = 0; e < d; e++) b += " " + c[e].toString(a);
        return b
    };
    f.freeze = function() {
        this.J = !0;
        var a = this.Db;
        a.freeze();
        for (var b = a.o,
        a = a.length,
        c = 0; c < a; c++) b[c].freeze();
        return this
    };
    f.Ya = function() {
        this.J = !1;
        var a = this.Db;
        a.Ya();
        for (var a = a.o,
        b = a.length,
        c = 0; c < b; c++) a[c].Ya();
        return this
    };
    f.Vx = function() {
        if (this.lb) return ! 0;
        var a = this.Db;
        if (this.Rw !== a.G) return ! 0;
        for (var a = a.o,
        b = a.length,
        c = 0; c < b; c++) if (a[c].lb) return ! 0;
        return ! 1
    };
    f.Ly = function() {
        this.lb = !1;
        var a = this.Db;
        this.Rw = a.G;
        for (var a = a.o,
        b = a.length,
        c = 0; c < b; c++) {
            var d = a[c];
            d.lb = !1;
            d.tg = null
        }
    };
    D.defineProperty(df, {
        wu: "isFilled"
    },
    function() {
        return this.Tm
    },
    function(a) {
        v && D.h(a, "boolean", df, "isFilled");
        this.J && D.pa(this, a);
        this.Tm = a
    });
    D.defineProperty(df, {
        Wk: "isShadowed"
    },
    function() {
        return this.np
    },
    function(a) {
        v && D.h(a, "boolean", df, "isShadowed");
        this.J && D.pa(this, a);
        this.np = a
    });
    D.defineProperty(df, {
        ma: "startX"
    },
    function() {
        return this.wc
    },
    function(a) {
        v && D.p(a, df, "startX");
        this.J && D.pa(this, a);
        this.wc = a;
        this.lb = !0
    });
    D.defineProperty(df, {
        ka: "startY"
    },
    function() {
        return this.Gc
    },
    function(a) {
        v && D.p(a, df, "startY");
        this.J && D.pa(this, a);
        this.Gc = a;
        this.lb = !0
    });
    D.defineProperty(df, {
        Db: "segments"
    },
    function() {
        return this.Kp
    },
    function(a) {
        v && D.l(a, K, df, "segments");
        this.J && D.pa(this, a);
        this.Kp = a;
        this.lb = !0
    });
    df.prototype.add = df.prototype.add = function(a) {
        this.Kp.add(a);
        return this
    };
    df.prototype.Oa = function(a, b, c) {
        for (var d = this.ma,
        e = this.ka,
        g = d,
        h = e,
        k = this.Db.o,
        l = k.length,
        m = 0; m < l; m++) {
            var n = k[m];
            switch (n.type) {
            case Ef:
                g = n.H;
                h = n.I;
                d = n.H;
                e = n.I;
                break;
            case wf:
                if (ue(d, e, n.H, n.I, c, a, b)) return ! 0;
                d = n.H;
                e = n.I;
                break;
            case Of:
                if (De(d, e, n.Ac, n.Wc, n.Rh, n.Sh, n.H, n.I, .5, a, b, c)) return ! 0;
                d = n.H;
                e = n.I;
                break;
            case Pf:
                if (He(d, e, n.Ac, n.Wc, n.H, n.I, .5, a, b, c)) return ! 0;
                d = n.H;
                e = n.I;
                break;
            case Qf:
            case Rf:
                var p = n.type === Qf ? Sf(n, this) : Tf(n, this, d, e),
                q = p.length;
                if (0 === q) {
                    if (ue(d, e, n.na, n.va, c, a, b)) return ! 0;
                    d = n.na;
                    e = n.va;
                    break
                }
                for (var r = null,
                s = 0; s < q; s++) if (r = p[s], 0 === s && ue(d, e, r[0], r[1], c, a, b) || De(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], .5, a, b, c)) return ! 0;
                null !== r && (d = r[6], e = r[7]);
                break;
            default:
                D.k("Unknown Segment type: " + n.type)
            }
            if (n.Rx && (d !== g || e !== h) && ue(d, e, g, h, c, a, b)) return ! 0
        }
        return ! 1
    };
    function Xf(a, b, c, d, e, g, h, k) {
        D.tc(this);
        this.J = !1;
        void 0 === a ? a = wf: v && D.Ca(a, Xf, Xf, "constructor:type");
        this.ca = a;
        void 0 !== b ? (v && D.p(b, Xf, "ex"), this.Ab = b) : this.Ab = 0;
        void 0 !== c ? (v && D.p(c, Xf, "ey"), this.Ib = c) : this.Ib = 0;
        void 0 === d && (d = 0);
        void 0 === e && (e = 0);
        void 0 === g && (g = 0);
        void 0 === h && (h = 0);
        a === Rf ? (a = g % 360, 0 > a && (a += 360), this.Pd = a, this.df = 0, v && D.p(d, Xf, "x1"), this.Ch = Math.max(d, 0), v && D.p(e, Xf, "y1"), this.Kg = Math.max(e, 0), this.sp = "boolean" === typeof h ? !!h: !1, this.Ko = !!k) : (v && D.p(d, Xf, "x1"), this.Pd = d, v && D.p(e, Xf, "y1"), this.df = e, v && D.p(g, Xf, "x2"), a === Qf && (g = Math.max(g, 0)), this.Ch = g, "number" === typeof h ? (a === Qf && (h = Math.max(h, 0)), this.Kg = h) : this.Kg = 0, this.Ko = this.sp = !1);
        this.ei = !1;
        this.lb = !0;
        this.tg = null
    }
    D.ja("PathSegment", Xf);
    D.Ai(Xf);
    Xf.prototype.copy = function() {
        var a = new Xf;
        a.ca = this.ca;
        a.Ab = this.Ab;
        a.Ib = this.Ib;
        a.Pd = this.Pd;
        a.df = this.df;
        a.Ch = this.Ch;
        a.Kg = this.Kg;
        a.sp = this.sp;
        a.Ko = this.Ko;
        a.ei = this.ei;
        a.lb = this.lb;
        return a
    };
    Xf.prototype.equalsApprox = Xf.prototype.Sc = function(a) {
        if (! (a instanceof Xf) || this.type !== a.type || this.Rx !== a.Rx) return ! 1;
        switch (this.type) {
        case Ef:
        case wf:
            return Q(this.H, a.H) && Q(this.I, a.I);
        case Of:
            return Q(this.H, a.H) && Q(this.I, a.I) && Q(this.Ac, a.Ac) && Q(this.Wc, a.Wc) && Q(this.Rh, a.Rh) && Q(this.Sh, a.Sh);
        case Pf:
            return Q(this.H, a.H) && Q(this.I, a.I) && Q(this.Ac, a.Ac) && Q(this.Wc, a.Wc);
        case Qf:
            return Q(this.Le, a.Le) && Q(this.xf, a.xf) && Q(this.na, a.na) && Q(this.va, a.va) && Q(this.radiusX, a.radiusX) && Q(this.radiusY, a.radiusY);
        case Rf:
            return this.sm === a.sm && this.Wx === a.Wx && Q(this.Zj, a.Zj) && Q(this.H, a.H) && Q(this.I, a.I) && Q(this.radiusX, a.radiusX) && Q(this.radiusY, a.radiusY);
        default:
            return ! 1
        }
    };
    Xf.prototype.nc = function(a) {
        a.Ne === Xf ? this.type = a: D.Xj(this, a)
    };
    Xf.prototype.toString = function(a) {
        void 0 === a && (a = -1);
        var b = "";
        switch (this.type) {
        case Ef:
            b = 0 > a ? "M" + this.H.toString() + " " + this.I.toString() : "M" + this.H.toFixed(a) + " " + this.I.toFixed(a);
            break;
        case wf:
            b = 0 > a ? "L" + this.H.toString() + " " + this.I.toString() : "L" + this.H.toFixed(a) + " " + this.I.toFixed(a);
            break;
        case Of:
            b = 0 > a ? "C" + this.Ac.toString() + " " + this.Wc.toString() + " " + this.Rh.toString() + " " + this.Sh.toString() + " " + this.H.toString() + " " + this.I.toString() : "C" + this.Ac.toFixed(a) + " " + this.Wc.toFixed(a) + " " + this.Rh.toFixed(a) + " " + this.Sh.toFixed(a) + " " + this.H.toFixed(a) + " " + this.I.toFixed(a);
            break;
        case Pf:
            b = 0 > a ? "Q" + this.Ac.toString() + " " + this.Wc.toString() + " " + this.H.toString() + " " + this.I.toString() : "Q" + this.Ac.toFixed(a) + " " + this.Wc.toFixed(a) + " " + this.H.toFixed(a) + " " + this.I.toFixed(a);
            break;
        case Qf:
            b = 0 > a ? "B" + this.Le.toString() + " " + this.xf.toString() + " " + this.na.toString() + " " + this.va.toString() + " " + this.radiusX: "B" + this.Le.toFixed(a) + " " + this.xf.toFixed(a) + " " + this.na.toFixed(a) + " " + this.va.toFixed(a) + " " + this.radiusX;
            break;
        case Rf:
            b = 0 > a ? "A" + this.radiusX.toString() + " " + this.radiusY.toString() + " " + this.Zj.toString() + " " + (this.Wx ? 1 : 0) + " " + (this.sm ? 1 : 0) + " " + this.H.toString() + " " + this.I.toString() : "A" + this.radiusX.toFixed(a) + " " + this.radiusY.toFixed(a) + " " + this.Zj.toFixed(a) + " " + (this.Wx ? 1 : 0) + " " + (this.sm ? 1 : 0) + " " + this.H.toFixed(a) + " " + this.I.toFixed(a);
            break;
        default:
            b = this.type.toString()
        }
        return b + (this.ei ? "z": "")
    };
    var Ef;
    Xf.Move = Ef = D.s(Xf, "Move", 0);
    var wf;
    Xf.Line = wf = D.s(Xf, "Line", 1);
    var Of;
    Xf.Bezier = Of = D.s(Xf, "Bezier", 2);
    var Pf;
    Xf.QuadraticBezier = Pf = D.s(Xf, "QuadraticBezier", 3);
    var Qf;
    Xf.Arc = Qf = D.s(Xf, "Arc", 4);
    var Rf;
    Xf.SvgArc = Rf = D.s(Xf, "SvgArc", 4);
    Xf.prototype.freeze = function() {
        this.J = !0;
        return this
    };
    Xf.prototype.Ya = function() {
        this.J = !1;
        return this
    };
    Xf.prototype.close = Xf.prototype.close = function() {
        this.ei = !0;
        return this
    };
    function Sf(a, b) {
        if (null !== a.tg && !1 === b.lb) return a.tg;
        var c = a.radiusX,
        d = a.radiusY;
        void 0 === d && (d = c);
        if (0 === c || 0 === d) return a.tg = [],
        a.tg;
        var e = a.Pd,
        g = a.df,
        h = Ze(c < d ? c: d, a.Le, a.Le + a.xf, !1);
        if (c !== d) {
            var k = D.Of();
            k.reset();
            c < d ? k.scale(1, d / c) : k.scale(c / d, 1);
            Cf(h, k);
            D.He(k)
        }
        c = h.length;
        for (d = 0; d < c; d++) k = h[d],
        k[0] += e,
        k[1] += g,
        k[2] += e,
        k[3] += g,
        k[4] += e,
        k[5] += g,
        k[6] += e,
        k[7] += g;
        a.tg = h;
        return a.tg
    }
    function Tf(a, b, c, d) {
        function e(a, b, c, d) {
            return (a * d < b * c ? -1 : 1) * Math.acos((a * c + b * d) / (Math.sqrt(a * a + b * b) * Math.sqrt(c * c + d * d)))
        }
        if (null !== a.tg && !1 === b.lb) return a.tg;
        b = a.Ch;
        var g = a.Kg;
        if (0 === b || 0 === g) return a.tg = [],
        a.tg;
        var h = Math.PI / 180 * a.Pd,
        k = a.sp,
        l = a.Ko,
        m = a.Ab,
        n = a.Ib,
        p = Math.cos(h),
        q = Math.sin(h),
        r = p * (c - m) / 2 + q * (d - n) / 2,
        h = -q * (c - m) / 2 + p * (d - n) / 2,
        s = r * r / (b * b) + h * h / (g * g);
        1 < s && (b *= Math.sqrt(s), g *= Math.sqrt(s));
        s = (k === l ? -1 : 1) * Math.sqrt((b * b * g * g - b * b * h * h - g * g * r * r) / (b * b * h * h + g * g * r * r));
        isNaN(s) && (s = 0);
        k = s * b * h / g;
        s = s * -g * r / b;
        isNaN(k) && (k = 0);
        isNaN(s) && (s = 0);
        c = (c + m) / 2 + p * k - q * s;
        d = (d + n) / 2 + q * k + p * s;
        n = e(1, 0, (r - k) / b, (h - s) / g);
        p = (r - k) / b;
        m = (h - s) / g;
        r = ( - r - k) / b;
        k = ( - h - s) / g;
        h = e(p, m, r, k);
        r = (p * r + m * k) / (Math.sqrt(p * p + m * m) * Math.sqrt(r * r + k * k)); - 1 >= r ? h = Math.PI: 1 <= r && (h = 0); ! l && 0 < h && (h -= 2 * Math.PI);
        l && 0 > h && (h += 2 * Math.PI);
        l = b > g ? 1 : b / g;
        r = b > g ? g / b: 1;
        b = Ze(b > g ? b: g, n, n + h, !0);
        g = D.Of();
        g.reset();
        g.translate(c, d);
        g.rotate(a.Pd, 0, 0);
        g.scale(l, r);
        Cf(b, g);
        D.He(g);
        a.tg = b;
        return a.tg
    }
    D.defineProperty(Xf, {
        Rx: "isClosed"
    },
    function() {
        return this.ei
    },
    function(a) {
        this.ei !== a && (this.ei = a, this.lb = !0)
    });
    D.defineProperty(Xf, {
        type: "type"
    },
    function() {
        return this.ca
    },
    function(a) {
        v && D.Ca(a, Xf, Xf, "type");
        this.J && D.pa(this, a);
        this.ca = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        H: "endX"
    },
    function() {
        return this.Ab
    },
    function(a) {
        v && D.p(a, Xf, "endX");
        this.J && D.pa(this, a);
        this.Ab = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        I: "endY"
    },
    function() {
        return this.Ib
    },
    function(a) {
        v && D.p(a, Xf, "endY");
        this.J && D.pa(this, a);
        this.Ib = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Ac: "point1X"
    },
    function() {
        return this.Pd
    },
    function(a) {
        v && D.p(a, Xf, "point1X");
        this.J && D.pa(this, a);
        this.Pd = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Wc: "point1Y"
    },
    function() {
        return this.df
    },
    function(a) {
        v && D.p(a, Xf, "point1Y");
        this.J && D.pa(this, a);
        this.df = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Rh: "point2X"
    },
    function() {
        return this.Ch
    },
    function(a) {
        v && D.p(a, Xf, "point2X");
        this.J && D.pa(this, a);
        this.Ch = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Sh: "point2Y"
    },
    function() {
        return this.Kg
    },
    function(a) {
        v && D.p(a, Xf, "point2Y");
        this.J && D.pa(this, a);
        this.Kg = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        na: "centerX"
    },
    function() {
        return this.Pd
    },
    function(a) {
        v && D.p(a, Xf, "centerX");
        this.J && D.pa(this, a);
        this.Pd = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        va: "centerY"
    },
    function() {
        return this.df
    },
    function(a) {
        v && D.p(a, Xf, "centerY");
        this.J && D.pa(this, a);
        this.df = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        radiusX: "radiusX"
    },
    function() {
        return this.Ch
    },
    function(a) {
        v && D.p(a, Xf, "radiusX");
        0 > a && D.ua(a, ">= zero", Xf, "radiusX");
        this.J && D.pa(this, a);
        this.Ch = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        radiusY: "radiusY"
    },
    function() {
        return this.Kg
    },
    function(a) {
        v && D.p(a, Xf, "radiusY");
        0 > a && D.ua(a, ">= zero", Xf, "radiusY");
        this.J && D.pa(this, a);
        this.Kg = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Le: "startAngle"
    },
    function() {
        return this.Ab
    },
    function(a) {
        this.Ab !== a && (this.J && D.pa(this, a), v && D.p(a, Xf, "startAngle"), a %= 360, 0 > a && (a += 360), this.Ab = a, this.lb = !0)
    });
    D.defineProperty(Xf, {
        xf: "sweepAngle"
    },
    function() {
        return this.Ib
    },
    function(a) {
        v && D.p(a, Xf, "sweepAngle");
        this.J && D.pa(this, a);
        360 < a && (a = 360); - 360 > a && (a = -360);
        this.Ib = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        sm: "isClockwiseArc"
    },
    function() {
        return this.Ko
    },
    function(a) {
        this.J && D.pa(this, a);
        this.Ko = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Wx: "isLargeArc"
    },
    function() {
        return this.sp
    },
    function(a) {
        this.J && D.pa(this, a);
        this.sp = a;
        this.lb = !0
    });
    D.defineProperty(Xf, {
        Zj: "xAxisRotation"
    },
    function() {
        return this.Pd
    },
    function(a) {
        v && D.p(a, Xf, "xAxisRotation");
        a %= 360;
        0 > a && (a += 360);
        this.J && D.pa(this, a);
        this.Pd = a;
        this.lb = !0
    });
    function Zf() {
        this.ba = null;
        this.iA = (new O(0, 0)).freeze();
        this.qz = (new O(0, 0)).freeze();
        this.zv = this.vw = 0;
        this.Av = 1;
        this.jw = "";
        this.ax = this.Ov = !1;
        this.Lv = this.Bv = 0;
        this.ak = this.Wv = this.gw = !1;
        this.Sr = null;
        this.Zw = 0;
        this.Og = this.Yw = null
    }
    D.ja("InputEvent", Zf);
    Zf.prototype.copy = function() {
        var a = new Zf;
        a.ba = this.ba;
        a.iA.assign(this.qe);
        a.qz.assign(this.ha);
        a.vw = this.vw;
        a.zv = this.zv;
        a.Av = this.Av;
        a.jw = this.jw;
        a.Ov = this.Ov;
        a.ax = this.ax;
        a.Bv = this.Bv;
        a.Lv = this.Lv;
        a.gw = this.gw;
        a.Wv = this.Wv;
        a.ak = this.ak;
        a.Sr = this.Sr;
        a.Zw = this.Zw;
        a.Yw = this.Yw;
        a.Og = this.Og;
        return a
    };
    Zf.prototype.toString = function() {
        var a = "^";
        0 !== this.Jd && (a += "M:" + this.Jd);
        0 !== this.button && (a += "B:" + this.button);
        "" !== this.key && (a += "K:" + this.key);
        0 !== this.Oe && (a += "C:" + this.Oe);
        0 !== this.hm && (a += "D:" + this.hm);
        this.Lc && (a += "h");
        this.bubbles && (a += "b");
        null !== this.ha && (a += "@" + this.ha.toString());
        return a
    };
    D.defineProperty(Zf, {
        g: "diagram"
    },
    function() {
        return this.ba
    },
    function(a) {
        this.ba = a
    });
    D.defineProperty(Zf, {
        qe: "viewPoint"
    },
    function() {
        return this.iA
    },
    function(a) {
        D.l(a, O, Zf, "viewPoint");
        this.iA.assign(a)
    });
    D.defineProperty(Zf, {
        ha: "documentPoint"
    },
    function() {
        return this.qz
    },
    function(a) {
        D.l(a, O, Zf, "documentPoint");
        this.qz.assign(a)
    });
    Zf.prototype.getMultiTouchViewPoint = Zf.prototype.Mx = function(a, b) {
        var c = this.g;
        if (null === c) return b;
        $f(c, this.event, a, b);
        return b
    };
    Zf.prototype.getMultiTouchDocumentPoint = function(a, b) {
        var c = this.g;
        if (null === c) return b;
        $f(c, this.event, a, b);
        b.assign(c.UB(b));
        return b
    };
    D.defineProperty(Zf, {
        Jd: "modifiers"
    },
    function() {
        return this.vw
    },
    function(a) {
        this.vw = a
    });
    D.defineProperty(Zf, {
        button: "button"
    },
    function() {
        return this.zv
    },
    function(a) {
        this.zv = a;
        if (null === this.event) switch (a) {
        case 0:
            this.buttons = 1;
            break;
        case 1:
            this.buttons = 4;
            break;
        case 2:
            this.buttons = 2
        }
    });
    D.defineProperty(Zf, {
        buttons: "buttons"
    },
    function() {
        return this.Av
    },
    function(a) {
        this.Av = a
    });
    D.defineProperty(Zf, {
        key: "key"
    },
    function() {
        return this.jw
    },
    function(a) {
        this.jw = a
    });
    D.defineProperty(Zf, {
        im: "down"
    },
    function() {
        return this.Ov
    },
    function(a) {
        this.Ov = a
    });
    D.defineProperty(Zf, {
        up: "up"
    },
    function() {
        return this.ax
    },
    function(a) {
        this.ax = a
    });
    D.defineProperty(Zf, {
        Oe: "clickCount"
    },
    function() {
        return this.Bv
    },
    function(a) {
        this.Bv = a
    });
    D.defineProperty(Zf, {
        hm: "delta"
    },
    function() {
        return this.Lv
    },
    function(a) {
        this.Lv = a
    });
    D.defineProperty(Zf, {
        yu: "isMultiTouch"
    },
    function() {
        return this.gw
    },
    function(a) {
        this.gw = a
    });
    D.defineProperty(Zf, {
        Lc: "handled"
    },
    function() {
        return this.Wv
    },
    function(a) {
        this.Wv = a
    });
    D.defineProperty(Zf, {
        bubbles: "bubbles"
    },
    function() {
        return this.ak
    },
    function(a) {
        this.ak = a
    });
    D.defineProperty(Zf, {
        event: "event"
    },
    function() {
        return this.Sr
    },
    function(a) {
        this.Sr = a
    });
    D.w(Zf, {
        Lj: "isTouchEvent"
    },
    function() {
        var a = window.TouchEvent;
        return a && this.event instanceof a ? !0 : (a = window.PointerEvent) && this.event instanceof a && "touch" === this.event.pointerType
    });
    D.w(Zf, {
        Vk: "isMac"
    },
    function() {
        return D.Vk
    });
    D.defineProperty(Zf, {
        timestamp: "timestamp"
    },
    function() {
        return this.Zw
    },
    function(a) {
        this.Zw = a
    });
    D.defineProperty(Zf, {
        fh: "targetDiagram"
    },
    function() {
        return this.Yw
    },
    function(a) {
        this.Yw = a
    });
    D.defineProperty(Zf, {
        We: "targetObject"
    },
    function() {
        return this.Og
    },
    function(a) {
        this.Og = a
    });
    D.defineProperty(Zf, {
        control: "control"
    },
    function() {
        return 0 !== (this.Jd & 1)
    },
    function(a) {
        this.Jd = a ? this.Jd | 1 : this.Jd & -2
    });
    D.defineProperty(Zf, {
        shift: "shift"
    },
    function() {
        return 0 !== (this.Jd & 4)
    },
    function(a) {
        this.Jd = a ? this.Jd | 4 : this.Jd & -5
    });
    D.defineProperty(Zf, {
        alt: "alt"
    },
    function() {
        return 0 !== (this.Jd & 2)
    },
    function(a) {
        this.Jd = a ? this.Jd | 2 : this.Jd & -3
    });
    D.defineProperty(Zf, {
        Hu: "meta"
    },
    function() {
        return 0 !== (this.Jd & 8)
    },
    function(a) {
        this.Jd = a ? this.Jd | 8 : this.Jd & -9
    });
    D.defineProperty(Zf, {
        left: "left"
    },
    function() {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 0 === this.button: 0 !== (this.buttons & 1)
    },
    function(a) {
        this.buttons = a ? this.buttons | 1 : this.buttons & -2
    });
    D.defineProperty(Zf, {
        right: "right"
    },
    function() {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 2 === this.button: 0 !== (this.buttons & 2)
    },
    function(a) {
        this.buttons = a ? this.buttons | 2 : this.buttons & -3
    });
    D.defineProperty(Zf, {
        VL: "middle"
    },
    function() {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 1 === this.button: 0 !== (this.buttons & 4)
    },
    function(a) {
        this.buttons = a ? this.buttons | 4 : this.buttons & -5
    });
    function ag() {
        this.ba = null;
        this.Xb = "";
        this.Ew = this.Ww = null;
        this.mr = !1
    }
    D.ja("DiagramEvent", ag);
    ag.prototype.copy = function() {
        var a = new ag;
        a.ba = this.ba;
        a.Xb = this.Xb;
        a.Ww = this.Ww;
        a.Ew = this.Ew;
        a.mr = this.mr;
        return a
    };
    ag.prototype.toString = function() {
        var a = "*" + this.name;
        null !== this.LB && (a += ":" + this.LB.toString());
        null !== this.qB && (a += "(" + this.qB.toString() + ")");
        return a
    };
    D.defineProperty(ag, {
        g: "diagram"
    },
    function() {
        return this.ba
    },
    function(a) {
        this.ba = a
    });
    D.defineProperty(ag, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        this.Xb = a
    });
    D.defineProperty(ag, {
        LB: "subject"
    },
    function() {
        return this.Ww
    },
    function(a) {
        this.Ww = a
    });
    D.defineProperty(ag, {
        qB: "parameter"
    },
    function() {
        return this.Ew
    },
    function(a) {
        this.Ew = a
    });
    D.defineProperty(ag, {
        cancel: "cancel"
    },
    function() {
        return this.mr
    },
    function(a) {
        this.mr !== a && D.Nn("DiagramEvent.cancel", "2.0");
        this.mr = a
    });
    function bg() {
        this.nr = cg;
        this.ln = this.uw = "";
        this.Ms = this.Ns = this.Qs = this.Rs = this.Ps = this.ba = this.ve = null
    }
    D.ja("ChangedEvent", bg);
    var dg;
    bg.Transaction = dg = D.s(bg, "Transaction", -1);
    var cg;
    bg.Property = cg = D.s(bg, "Property", 0);
    var mg;
    bg.Insert = mg = D.s(bg, "Insert", 1);
    var ng;
    bg.Remove = ng = D.s(bg, "Remove", 2);
    bg.prototype.clear = bg.prototype.clear = function() {
        this.Ms = this.Ns = this.Qs = this.Rs = this.Ps = this.ba = this.ve = null
    };
    bg.prototype.copy = function() {
        var a = new bg;
        a.nr = this.nr;
        a.uw = this.uw;
        a.ln = this.ln;
        a.ve = this.ve;
        a.ba = this.ba;
        a.Ps = this.Ps;
        var b = this.Rs;
        a.Rs = D.Ta(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Qs;
        a.Qs = D.Ta(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Ns;
        a.Ns = D.Ta(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Ms;
        a.Ms = D.Ta(b) && "function" === typeof b.V ? b.V() : b;
        return a
    };
    bg.prototype.nc = function(a) {
        a.Ne === bg ? this.Ic = a: D.Xj(this, a)
    };
    bg.prototype.toString = function() {
        var a = "",
        a = this.Ic === dg ? a + "* ": this.Ic === cg ? a + (null !== this.ga ? "!m": "!d") : a + ((null !== this.ga ? "!m": "!d") + this.Ic);
        this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
        this.wf && this.wf !== this.propertyName && (a += " " + this.wf);
        a += ": ";
        this.Ic === dg ? null !== this.oldValue && (a += " " + this.oldValue) : (null !== this.object && (a += ja(this.object)), null !== this.oldValue && (a += "  old: " + ja(this.oldValue)), null !== this.Sj && (a += " " + this.Sj), null !== this.newValue && (a += "  new: " + ja(this.newValue)), null !== this.Qj && (a += " " + this.Qj));
        return a
    };
    bg.prototype.getValue = bg.prototype.oa = function(a) {
        return a ? this.oldValue: this.newValue
    };
    bg.prototype.getParam = function(a) {
        return a ? this.Sj: this.Qj
    };
    bg.prototype.canUndo = bg.prototype.canUndo = function() {
        return null !== this.ga || null !== this.g ? !0 : !1
    };
    bg.prototype.undo = bg.prototype.undo = function() {
        this.canUndo() && (null !== this.ga ? this.ga.En(this, !0) : null !== this.g && this.g.En(this, !0))
    };
    bg.prototype.canRedo = bg.prototype.canRedo = function() {
        return null !== this.ga || null !== this.g ? !0 : !1
    };
    bg.prototype.redo = bg.prototype.redo = function() {
        this.canRedo() && (null !== this.ga ? this.ga.En(this, !1) : null !== this.g && this.g.En(this, !1))
    };
    D.defineProperty(bg, {
        ga: "model"
    },
    function() {
        return this.ve
    },
    function(a) {
        this.ve = a
    });
    D.defineProperty(bg, {
        g: "diagram"
    },
    function() {
        return this.ba
    },
    function(a) {
        this.ba = a
    });
    D.defineProperty(bg, {
        Ic: "change"
    },
    function() {
        return this.nr
    },
    function(a) {
        v && D.Ca(a, bg, bg, "change");
        this.nr = a
    });
    D.defineProperty(bg, {
        wf: "modelChange"
    },
    function() {
        return this.uw
    },
    function(a) {
        v && D.h(a, "string", bg, "modelChange");
        this.uw = a
    });
    D.defineProperty(bg, {
        propertyName: "propertyName"
    },
    function() {
        return this.ln
    },
    function(a) {
        v && "string" !== typeof a && D.h(a, "function", bg, "propertyName");
        this.ln = a
    });
    D.w(bg, {
        VF: "isTransactionFinished"
    },
    function() {
        return this.nr === dg && ("CommittedTransaction" === this.ln || "FinishedUndo" === this.ln || "FinishedRedo" === this.ln)
    });
    D.defineProperty(bg, {
        object: "object"
    },
    function() {
        return this.Ps
    },
    function(a) {
        this.Ps = a
    });
    D.defineProperty(bg, {
        oldValue: "oldValue"
    },
    function() {
        return this.Rs
    },
    function(a) {
        this.Rs = a
    });
    D.defineProperty(bg, {
        Sj: "oldParam"
    },
    function() {
        return this.Qs
    },
    function(a) {
        this.Qs = a
    });
    D.defineProperty(bg, {
        newValue: "newValue"
    },
    function() {
        return this.Ns
    },
    function(a) {
        this.Ns = a
    });
    D.defineProperty(bg, {
        Qj: "newParam"
    },
    function() {
        return this.Ms
    },
    function(a) {
        this.Ms = a
    });
    function M(a) {
        1 < arguments.length && D.k("Model constructor can only take one optional argument, the Array of node data.");
        D.tc(this);
        this.Cr = this.Xb = "";
        this.aj = !1;
        this.Oz = {};
        this.we = [];
        this.Ec = new ma(null, Object);
        this.wk = "key";
        this.Po = this.xp = null;
        this.tr = this.ur = !1;
        this.dr = null;
        this.fn = "category";
        this.vg = new ma(null, L);
        this.sk = null;
        this.tj = !1;
        this.hA = null;
        this.ra = new og;
        void 0 !== a && (this.mg = a)
    }
    D.ja("Model", M);
    M.prototype.cloneProtected = function(a) {
        a.Xb = this.Xb;
        a.Cr = this.Cr;
        a.aj = this.aj;
        a.wk = this.wk;
        a.xp = this.xp;
        a.Po = this.Po;
        a.ur = this.ur;
        a.tr = this.tr;
        a.dr = this.dr;
        a.fn = this.fn
    };
    M.prototype.copy = function() {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    M.prototype.clear = M.prototype.clear = function() {
        this.we = [];
        this.Ec.clear();
        this.vg.clear();
        this.ra.clear()
    };
    f = M.prototype;
    f.toString = function(a) {
        void 0 === a && (a = 0);
        if (1 < a) return this.OB();
        var b = ("" !== this.name ? this.name: "") + " Model";
        if (0 < a) {
            b += "\n node data:";
            a = this.mg;
            for (var c = D.cb(a), d = 0; d < c; d++) var e = D.La(a, d),
            b = b + (" " + this.Cb(e) + ":" + ja(e))
        }
        return b
    };
    f.zo = function() {
        var a = "";
        "" !== this.name && (a += ',\n  "name": ' + this.quote(this.name));
        "" !== this.fm && (a += ',\n  "dataFormat": ' + this.quote(this.fm));
        this.mb && (a += ',\n  "isReadOnly": ' + this.mb);
        "key" !== this.Rj && "string" === typeof this.Rj && (a += ',\n  "nodeKeyProperty": ' + this.quote(this.Rj));
        this.xA && (a += ',\n  "copiesArrays": true');
        this.wA && (a += ',\n  "copiesArrayObjects": true');
        "category" !== this.no && "string" === typeof this.no && (a += ',\n  "nodeCategoryProperty": ' + this.quote(this.no));
        return a
    };
    f.Ru = function(a) {
        a.name && (this.name = a.name);
        a.dataFormat && (this.fm = a.dataFormat);
        a.isReadOnly && (this.mb = a.isReadOnly);
        a.nodeKeyProperty && (this.Rj = a.nodeKeyProperty);
        a.copiesArrays && (this.xA = a.copiesArrays);
        a.copiesArrayObjects && (this.wA = a.copiesArrayObjects);
        a.nodeCategoryProperty && (this.no = a.nodeCategoryProperty)
    };
    function pg(a) {
        return ',\n  "modelData": ' + qg(a, a.Yk)
    }
    function rg(a, b) {
        var c = b.modelData;
        D.Ta(c) && (a.Uu(c), a.Yk = c)
    }
    f.bC = function() {
        var a = this.Yk,
        b = !1,
        c;
        for (c in a) if (!sg(c, a[c])) {
            b = !0;
            break
        }
        a = "";
        b && (a = pg(this));
        return a + ',\n  "nodeDataArray": ' + tg(this, this.mg, !0)
    };
    f.tB = function(a) {
        rg(this, a);
        a = a.nodeDataArray;
        D.isArray(a) && (this.Uu(a), this.mg = a)
    };
    function ug(a, b, c, d) {
        if (b === c) return ! 0;
        if (typeof b !== typeof c || "function" === typeof b || "function" === typeof c) return ! 1;
        if (Array.isArray(b) && Array.isArray(c)) {
            if (d.oa(b) === c) return ! 0;
            d.add(b, c);
            if (b.length !== c.length) return ! 1;
            for (var e = 0; e < b.length; e++) if (!ug(a, b[e], c[e], d)) return ! 1;
            return ! 0
        }
        if (D.Ta(b) && D.Ta(c)) {
            if (d.oa(b) === c) return ! 0;
            d.add(b, c);
            for (e in b) {
                var g = b[e];
                if (!sg(e, g)) {
                    var h = c[e];
                    if (void 0 === h || !ug(a, g, h, d)) return ! 1
                }
            }
            for (var k in c) if (h = c[k], !sg(k, h) && (g = b[k], void 0 === g || !ug(a, g, h, d))) return ! 1;
            return ! 0
        }
        return ! 1
    }
    function vg(a, b, c) {
        a[c] !== b[c] && D.k("Model.computeJsonDifference: Model." + c + ' is not the same in both models: "' + a[c] + '" and "' + b[c] + '"')
    }
    f.cC = function(a) {
        vg(this, a, "nodeKeyProperty");
        this instanceof wg && vg(this, a, "nodeParentKeyProperty");
        for (var b = new L,
        c = new L,
        d = (new L).Rc(this.Ec.XF), e = new ma, g = a.mg, h = 0; h < g.length; h++) {
            var k = g[h],
            l = a.Cb(k);
            if (void 0 !== l) {
                d.remove(l);
                var m = this.Fe(l);
                null === m ? (b.add(l), c.add(k)) : ug(this, m, k, e) || c.add(k)
            } else this.eB(k),
            l = this.Cb(k),
            b.add(l),
            c.add(k)
        }
        g = "";
        ug(this, this.Yk, a.Yk, e) || (g += pg(this));
        0 < b.count && (g += this.Vy + tg(this, b.lc(), !0));
        0 < c.count && (g += this.kC + tg(this, c.lc(), !0));
        0 < d.count && (g += this.Xy + tg(this, d.lc(), !0));
        return g
    };
    M.prototype.computeJsonDifference = M.prototype.computeJSONDifference = function(a, b) {
        D.l(a, M, M, "computeJsonDifference:newmodel");
        void 0 === b && (b = this.constructor === M ? "go.Model": this.constructor === Y ? "go.GraphLinksModel": this.constructor === wg ? "go.TreeModel": D.qf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.zo() + this.cC(a) + "}"
    };
    f = M.prototype;
    f.Vy = ',\n  "insertedNodeKeys": ';
    f.kC = ',\n  "modifiedNodeData": ';
    f.Xy = ',\n  "removedNodeKeys": ';
    f.aC = function(a, b) {
        var c = this,
        d = !1,
        e = new L,
        g = new L,
        h = new L;
        a.ag.each(function(a) {
            a.ga === c && ("nodeDataArray" === a.wf ? a.Ic === mg ? e.add(a.newValue) : a.Ic === ng && h.add(a.oldValue) : c.ie(a.object) ? g.add(a.object) : c.Yk === a.object && a.Ic === cg && (d = !0))
        });
        var k = new L;
        e.each(function(a) {
            k.add(c.Cb(a));
            b || g.add(a)
        });
        var l = new L;
        h.each(function(a) {
            l.add(c.Cb(a));
            b && g.add(a)
        });
        var m = "";
        d && (m += pg(this));
        0 < k.count && (m += (b ? this.Xy: this.Vy) + tg(this, k.lc(), !0));
        0 < g.count && (m += this.kC + tg(this, g.lc(), !0));
        0 < l.count && (m += (b ? this.Vy: this.Xy) + tg(this, l.lc(), !0));
        return m
    };
    f.sB = function(a) {
        rg(this, a);
        var b = a.insertedNodeKeys;
        if (D.isArray(b)) for (var c = D.cb(b), d = 0; d < c; d++) {
            var e = D.La(b, d),
            g = this.Fe(e);
            null === g && (g = this.copyNodeData({}), this.Gy(g, e), this.Vl(g))
        }
        e = a.modifiedNodeData;
        if (D.isArray(e)) for (c = D.cb(e), d = 0; d < c; d++) if (b = D.La(e, d), g = this.Cb(b), g = this.Fe(g), null !== g) for (var h in b)"__gohashid" !== h && h !== this.Rj && this.setDataProperty(g, h, b[h]);
        a = a.removedNodeKeys;
        if (D.isArray(a)) for (c = D.cb(a), d = 0; d < c; d++) e = D.La(a, d),
        g = this.Fe(e),
        null !== g && this.yy(g)
    };
    M.prototype.toIncrementalJson = M.prototype.toIncrementalJSON = function(a, b) {
        D.l(a, bg, M, "toIncrementalJson:e");
        a.Ic !== dg && D.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:" + a.toString());
        var c = a.object;
        if (! (a.VF && c instanceof xg)) return '{ "incremental": 0 }';
        void 0 === b && (b = this.constructor === M ? "go.Model": this.constructor === Y ? "go.GraphLinksModel": this.constructor === wg ? "go.TreeModel": D.qf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.zo() + this.aC(c, "FinishedUndo" === a.propertyName) + "}"
    };
    M.prototype.toJson = M.prototype.toJSON = M.prototype.OB = function(a) {
        void 0 === a && (a = this.constructor === M ? "go.Model": this.constructor === Y ? "go.GraphLinksModel": this.constructor === wg ? "go.TreeModel": D.qf(this));
        return '{ "class": ' + this.quote(a) + this.zo() + this.bC() + "}"
    };
    M.prototype.applyIncrementalJson = M.prototype.applyIncrementalJSON = function(a) {
        var b = null;
        if ("string" === typeof a) if (window.JSON && window.JSON.parse) try {
            b = window.JSON.parse(a)
        } catch(c) {
            v && D.trace("JSON.parse error: " + c.toString())
        } else D.trace("WARNING: no JSON.parse available");
        else "object" === typeof a ? b = a: D.k("Unable to modify a Model from: " + a);
        var d = b.incremental;
        "number" !== typeof d && D.k("Unable to apply non-incremental changes to Model: " + a);
        0 !== d && (this.$b("applyIncrementalJson"), this.sB(b), this.Td("applyIncrementalJson"))
    };
    M.fromJson = M.fromJSON = function(a, b) {
        void 0 === b && (b = null);
        null !== b && D.l(b, M, M, "fromJson:model");
        var c = null;
        if ("string" === typeof a) if (window.JSON && window.JSON.parse) try {
            c = window.JSON.parse(a)
        } catch(d) {
            v && D.trace("JSON.parse error: " + d.toString())
        } else D.trace("WARNING: no JSON.parse available");
        else "object" === typeof a ? c = a: D.k("Unable to construct a Model from: " + a);
        if (null === b) {
            var e;
            e = null;
            var g = c["class"];
            if ("string" === typeof g) try {
                var h = null;
                0 === g.indexOf("go.") ? (g = g.substr(3), h = aa[g]) : (h = aa[g], void 0 === h && (h = window[g]));
                "function" === typeof h && (e = new h)
            } catch(k) {}
            null === e || e instanceof M ? b = e: D.k("Unable to construct a Model of declared class: " + c["class"])
        }
        null === b && (b = new Y);
        b.Ru(c);
        b.tB(c);
        return b
    };
    M.prototype.replaceJsonObjects = M.prototype.Uu = function(a) {
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            D.Ta(d) && D.JE(a, c, this.Uu(d))
        } else if (D.Ta(a)) {
            for (c in a) d = a[c],
            D.Ta(d) && (d = this.Uu(d), a[c] = d);
            if ("object" === typeof a) {
                d = a;
                c = a["class"];
                if ("NaN" === c) d = NaN;
                else if ("Date" === c) d = new Date(a.value);
                else if ("go.Point" === c) d = new O(yg(a.x), yg(a.y));
                else if ("go.Size" === c) d = new Ca(yg(a.width), yg(a.height));
                else if ("go.Rect" === c) d = new B(yg(a.x), yg(a.y), yg(a.width), yg(a.height));
                else if ("go.Margin" === c) d = new Hb(yg(a.top), yg(a.right), yg(a.bottom), yg(a.left));
                else if ("go.Spot" === c) d = "string" === typeof a["enum"] ? Yb(a["enum"]) : new R(yg(a.x), yg(a.y), yg(a.offsetX), yg(a.offsetY));
                else if ("go.Brush" === c) {
                    if (d = new Ba, d.type = Ha(Ba, a.type), "string" === typeof a.color && (d.color = a.color), a.start instanceof R && (d.start = a.start), a.end instanceof R && (d.end = a.end), "number" === typeof a.startRadius && (d.dv = yg(a.startRadius)), "number" === typeof a.endRadius && (d.eu = yg(a.endRadius)), a = a.colorStops, D.Ta(a)) for (b in a) d.addColorStop(parseFloat(b), a[b])
                } else "go.Geometry" === c ? (b = null, b = "string" === typeof a.path ? yf(a.path) : new bf, b.type = Ha(bf, a.type), "number" === typeof a.startX && (b.ma = yg(a.startX)), "number" === typeof a.startY && (b.ka = yg(a.startY)), "number" === typeof a.endX && (b.H = yg(a.endX)), "number" === typeof a.endY && (b.I = yg(a.endY)), a.spot1 instanceof R && (b.C = a.spot1), a.spot2 instanceof R && (b.D = a.spot2), d = b) : "go.EnumValue" === c && (b = a.classType, 0 === b.indexOf("go.") && (b = b.substr(3)), d = Ha(aa[b], a.name));
                a = d
            }
        }
        return a
    };
    M.prototype.quote = function(a) {
        for (var b = "",
        c = a.length,
        d = 0; d < c; d++) {
            var e = a[d];
            if ('"' === e || "\\" === e) b += "\\" + e;
            else if ("\b" === e) b += "\\b";
            else if ("\f" === e) b += "\\f";
            else if ("\n" === e) b += "\\n";
            else if ("\r" === e) b += "\\r";
            else if ("\t" === e) b += "\\t";
            else var g = a.charCodeAt(d),
            b = 16 > g ? b + ("\\u000" + a.charCodeAt(d).toString(16)) : 32 > g ? b + ("\\u00" + a.charCodeAt(d).toString(16)) : 8232 === g ? b + "\\u2028": 8233 === g ? b + "\\u2029": b + e
        }
        return '"' + b + '"'
    };
    M.prototype.writeJsonValue = M.prototype.jv = function(a) {
        return void 0 === a ? "undefined": null === a ? "null": !0 === a ? "true": !1 === a ? "false": "string" === typeof a ? this.quote(a) : "number" === typeof a ? Infinity === a ? "9e9999": -Infinity === a ? "-9e9999": isNaN(a) ? '{"class":"NaN"}': a.toString() : a instanceof Date ? '{"class":"Date", "value":"' + a.toJSON() + '"}': a instanceof Number ? this.jv(a.valueOf()) : D.isArray(a) ? tg(this, a) : D.Ta(a) ? qg(this, a) : "function" === typeof a ? "null": a.toString()
    };
    function tg(a, b, c) {
        void 0 === c && (c = !1);
        var d = D.cb(b);
        if (0 >= d) return "[]";
        var e = new ya;
        e.add("[ ");
        c && 1 < d && e.add("\n");
        for (var g = 0; g < d; g++) {
            var h = D.La(b, g);
            void 0 !== h && (0 < g && (e.add(","), c && e.add("\n")), e.add(a.jv(h)))
        }
        c && 1 < d && e.add("\n");
        e.add(" ]");
        return e.toString()
    }
    function sg(a, b) {
        return void 0 === b || "__gohashid" === a || "_" === a[0] || "function" === typeof b ? !0 : !1
    }
    function zg(a) {
        return isNaN(a) ? "NaN": Infinity === a ? "9e9999": -Infinity === a ? "-9e9999": a
    }
    function qg(a, b) {
        var c = b;
        if (c instanceof O) b = {
            "class": "go.Point",
            x: zg(c.x),
            y: zg(c.y)
        };
        else if (c instanceof Ca) b = {
            "class": "go.Size",
            width: zg(c.width),
            height: zg(c.height)
        };
        else if (c instanceof B) b = {
            "class": "go.Rect",
            x: zg(c.x),
            y: zg(c.y),
            width: zg(c.width),
            height: zg(c.height)
        };
        else if (c instanceof Hb) b = {
            "class": "go.Margin",
            top: zg(c.top),
            right: zg(c.right),
            bottom: zg(c.bottom),
            left: zg(c.left)
        };
        else if (c instanceof R) b = c.fd() ? {
            "class": "go.Spot",
            x: zg(c.x),
            y: zg(c.y),
            offsetX: zg(c.offsetX),
            offsetY: zg(c.offsetY)
        }: {
            "class": "go.Spot",
            "enum": c.toString()
        };
        else if (c instanceof Ba) {
            b = {
                "class": "go.Brush",
                type: c.type.name
            };
            if (c.type === Ag) b.color = c.color;
            else if (c.type === Qg || c.type === Ed) b.start = c.start,
            b.end = c.end,
            c.type === Ed && (0 !== c.dv && (b.startRadius = zg(c.dv)), isNaN(c.eu) || (b.endRadius = zg(c.eu)));
            if (null !== c.Lk) {
                for (var d = {},
                c = c.Lk.j; c.next();) d[c.key] = c.value;
                b.colorStops = d
            }
        } else if (c instanceof bf) b = {
            "class": "go.Geometry",
            type: c.type.name
        },
        0 !== c.ma && (b.startX = zg(c.ma)),
        0 !== c.ka && (b.startY = zg(c.ka)),
        0 !== c.H && (b.endX = zg(c.H)),
        0 !== c.I && (b.endY = zg(c.I)),
        c.C.O(cc) || (b.spot1 = c.C),
        c.D.O(rc) || (b.spot2 = c.D),
        c.type === cf && (b.path = xf(c));
        else if (c instanceof za) b = {
            "class": "go.EnumValue",
            classType: D.qf(c.Ne),
            name: c.name
        };
        else if (c instanceof P || c instanceof E || c instanceof Rg || c instanceof M || c instanceof Sg || c instanceof oa || c instanceof Tg || c instanceof va || c instanceof og || c instanceof xg) return D.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: " + c.toString()),
        "{}";
        var d = "{",
        c = !0,
        e;
        for (e in b) {
            var g = D.ub(b, e);
            if (!sg(e, g)) if (c ? c = !1 : d += ", ", d += '"' + e + '":', "points" === e && g instanceof K && g.ca === O) {
                for (var h = "[",
                g = g.j; g.next();) {
                    var k = g.value;
                    1 < h.length && (h += ",");
                    h += a.jv(k.x);
                    h += ",";
                    h += a.jv(k.y)
                }
                h += "]";
                d += h
            } else d += a.jv(g)
        }
        return d + "}"
    }
    function yg(a) {
        return "number" === typeof a ? a: "NaN" === a ? NaN: "9e9999" === a ? Infinity: "-9e9999" === a ? -Infinity: parseFloat(a)
    }
    D.defineProperty(M, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        var b = this.Xb;
        b !== a && (D.h(a, "string", M, "name"), this.Xb = a, this.i("name", b, a))
    });
    D.defineProperty(M, {
        fm: "dataFormat"
    },
    function() {
        return this.Cr
    },
    function(a) {
        var b = this.Cr;
        b !== a && (D.h(a, "string", M, "dataFormat"), this.Cr = a, this.i("dataFormat", b, a))
    });
    D.defineProperty(M, {
        mb: "isReadOnly"
    },
    function() {
        return this.aj
    },
    function(a) {
        var b = this.aj;
        b !== a && (D.h(a, "boolean", M, "isReadOnly"), this.aj = a, this.i("isReadOnly", b, a))
    });
    D.defineProperty(M, {
        Yk: "modelData"
    },
    function() {
        return this.Oz
    },
    function(a) {
        var b = this.Oz;
        b !== a && (D.h(a, "object", M, "modelData"), this.Oz = a, this.i("modelData", b, a), this.Nb(a))
    });
    M.prototype.addChangedListener = M.prototype.An = function(a) {
        D.h(a, "function", M, "addChangedListener:listener");
        null === this.sk && (this.sk = new K("function"));
        this.sk.add(a)
    };
    M.prototype.removeChangedListener = M.prototype.Su = function(a) {
        D.h(a, "function", M, "removeChangedListener:listener");
        null !== this.sk && (this.sk.remove(a), 0 === this.sk.count && (this.sk = null))
    };
    M.prototype.qx = function(a) {
        this.Eb || this.ra.EF(a);
        if (null !== this.sk) {
            var b = this.sk,
            c = b.length;
            if (1 === c) b = b.ea(0),
            b(a);
            else if (0 !== c) for (var d = b.lc(), e = 0; e < c; e++) b = d[e],
            b(a)
        }
    };
    M.prototype.raiseChangedEvent = M.prototype.hd = function(a, b, c, d, e, g, h) {
        Ug(this, "", a, b, c, d, e, g, h)
    };
    M.prototype.raiseChanged = M.prototype.i = function(a, b, c, d, e) {
        Ug(this, "", cg, a, this, b, c, d, e)
    };
    M.prototype.raiseDataChanged = M.prototype.rB = function(a, b, c, d, e, g) {
        Ug(this, "", cg, b, a, c, d, e, g)
    };
    function Ug(a, b, c, d, e, g, h, k, l) {
        void 0 === k && (k = null);
        void 0 === l && (l = null);
        var m = new bg;
        m.ga = a;
        m.Ic = c;
        m.wf = b;
        m.propertyName = d;
        m.object = e;
        m.oldValue = g;
        m.Sj = k;
        m.newValue = h;
        m.Qj = l;
        a.qx(m)
    }
    D.defineProperty(M, {
        ra: "undoManager"
    },
    function() {
        return this.hA
    },
    function(a) {
        var b = this.hA;
        b !== a && (D.l(a, og, M, "undoManager"), null !== b && b.WJ(this), this.hA = a, null !== a && a.MH(this))
    });
    D.defineProperty(M, {
        Eb: "skipsUndoManager"
    },
    function() {
        return this.tj
    },
    function(a) {
        D.h(a, "boolean", M, "skipsUndoManager");
        this.tj = a
    });
    M.prototype.En = function(a, b) {
        if (null !== a && a.ga === this) if (a.Ic === cg) {
            var c = a.object,
            d = a.propertyName,
            e = a.oa(b);
            D.Ua(c, d, e)
        } else a.Ic === mg ? (c = a.Qj, "nodeDataArray" === a.wf ? (d = a.newValue, D.Ta(d) && "number" === typeof c && (e = this.Cb(d), b ? (D.La(this.we, c) === d && D.Sg(this.we, c), void 0 !== e && this.Ec.remove(e)) : (D.La(this.we, c) !== d && D.Ih(this.we, c, d), void 0 !== e && this.Ec.add(e, d)))) : "" === a.wf ? (d = a.object, !D.isArray(d) && a.propertyName && (d = D.ub(a.object, a.propertyName)), D.isArray(d) && "number" === typeof c && (e = a.newValue, b ? D.Sg(d, c) : D.Ih(d, c, e))) : D.k("unknown ChangedEvent.Insert modelChange: " + a.toString())) : a.Ic === ng ? (c = a.Sj, "nodeDataArray" === a.wf ? (d = a.oldValue, D.Ta(d) && "number" === typeof c && (e = this.Cb(d), b ? (D.La(this.we, c) !== d && D.Ih(this.we, c, d), void 0 !== e && this.Ec.add(e, d)) : (D.La(this.we, c) === d && D.Sg(this.we, c), void 0 !== e && this.Ec.remove(e)))) : "" === a.wf ? (d = a.object, !D.isArray(d) && a.propertyName && (d = D.ub(a.object, a.propertyName)), D.isArray(d) && "number" === typeof c && (e = a.oldValue, b ? D.Ih(d, c, e) : D.Sg(d, c))) : D.k("unknown ChangedEvent.Remove modelChange: " + a.toString())) : a.Ic !== dg && D.k("unknown ChangedEvent: " + a.toString())
    };
    M.prototype.startTransaction = M.prototype.$b = function(a) {
        return this.ra.$b(a)
    };
    M.prototype.commitTransaction = M.prototype.Td = function(a) {
        return this.ra.Td(a)
    };
    M.prototype.rollbackTransaction = M.prototype.Kq = function() {
        return this.ra.Kq()
    };
    M.prototype.updateTargetBindings = M.prototype.Nb = function(a, b) {
        void 0 === b && (b = "");
        Ug(this, "SourceChanged", dg, b, a, null, null)
    };
    D.defineProperty(M, {
        Rj: "nodeKeyProperty"
    },
    function() {
        return this.wk
    },
    function(a) {
        var b = this.wk;
        b !== a && (Vg(a, M, "nodeKeyProperty"), "" === a && D.k("Model.nodeKeyProperty may not be the empty string"), 0 < this.Ec.count && D.k("Cannot set Model.nodeKeyProperty when there is existing node data"), this.wk = a, this.i("nodeKeyProperty", b, a))
    });
    function Vg(a, b, c) {
        "string" !== typeof a && "function" !== typeof a && D.gc(a, "string or function", b, c)
    }
    M.prototype.getKeyForNodeData = M.prototype.Cb = function(a) {
        if (null !== a) {
            var b = this.wk;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("Key value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    M.prototype.setKeyForNodeData = M.prototype.Gy = function(a, b) {
        void 0 !== b && null !== b && Wg(b) || D.gc(b, "number or string", M, "setKeyForNodeData:key");
        if (null !== a) {
            var c = this.wk;
            if ("" !== c) if (this.ie(a)) {
                var d = D.ub(a, c);
                d !== b && null === this.Fe(b) && (D.Ua(a, c, b), this.Ec.remove(d), this.Ec.add(b, a), Ug(this, "nodeKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c), this.Tu(d, b))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(M, {
        OL: "makeUniqueKeyFunction"
    },
    function() {
        return this.xp
    },
    function(a) {
        var b = this.xp;
        b !== a && (null !== a && D.h(a, "function", M, "makeUniqueKeyFunction"), this.xp = a, this.i("makeUniqueKeyFunction", b, a))
    });
    function Wg(a) {
        return "number" === typeof a || "string" === typeof a
    }
    M.prototype.containsNodeData = M.prototype.ie = function(a) {
        var b = this.Cb(a);
        return void 0 === b ? !1 : this.Ec.oa(b) === a
    };
    M.prototype.findNodeDataForKey = M.prototype.Fe = function(a) {
        null === a && D.k("Model.findNodeDataForKey:key must not be null");
        return void 0 !== a && Wg(a) ? this.Ec.oa(a) : null
    };
    D.defineProperty(M, {
        mg: "nodeDataArray"
    },
    function() {
        return this.we
    },
    function(a) {
        var b = this.we;
        if (b !== a) {
            D.Xt(a, M, "nodeDataArray");
            this.Ec.clear();
            this.WB();
            for (var c = D.cb(a), d = 0; d < c; d++) {
                var e = D.La(a, d);
                if (!D.Ta(e)) {
                    D.k("Model.nodeDataArray must only contain Objects, not: " + e);
                    return
                }
                D.sq(e)
            }
            this.we = a;
            for (var g = new K(Object), d = 0; d < c; d++) {
                var e = D.La(a, d),
                h = this.Cb(e);
                void 0 === h ? g.add(e) : null !== this.Ec.oa(h) ? g.add(e) : this.Ec.add(h, e)
            }
            for (d = g.j; d.next();) e = d.value,
            this.eB(e),
            g = this.Cb(e),
            void 0 !== g && this.Ec.add(g, e);
            Ug(this, "nodeDataArray", cg, "nodeDataArray", this, b, a);
            for (d = 0; d < c; d++) e = D.La(a, d),
            this.Jq(e),
            this.Iq(e);
            this.ME();
            D.hJ(a) || (this.mb = !0)
        }
    });
    M.prototype.makeNodeDataKeyUnique = M.prototype.eB = function(a) {
        if (null !== a) {
            var b = this.wk;
            if ("" !== b) {
                var c = this.Cb(a);
                if (void 0 === c || this.Ec.contains(c)) {
                    var d = this.xp;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.Ec.contains(c))) {
                        D.Ua(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.Ec.contains(c + d);) d++;
                        D.Ua(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.Ec.count - 1; this.Ec.contains(d);) d--;
                        D.Ua(a, b, d)
                    } else D.k("Model.getKeyForNodeData returned something other than a string or a number: " + c)
                }
            }
        }
    };
    M.prototype.addNodeData = M.prototype.Vl = function(a) {
        null !== a && (D.sq(a), this.ie(a) || Xg(this, a, !0))
    };
    function Xg(a, b, c) {
        var d = a.Cb(b);
        if (void 0 === d || a.Ec.oa(d) !== b) a.eB(b),
        d = a.Cb(b),
        void 0 === d ? D.k("Model.makeNodeDataKeyUnique failed on " + b + ".  Data not added to Model.") : (a.Ec.add(d, b), d = null, c && (d = D.cb(a.we), D.Ih(a.we, d, b)), Ug(a, "nodeDataArray", mg, "nodeDataArray", a, null, b, null, d), a.Jq(b), a.Iq(b))
    }
    M.prototype.addNodeDataCollection = function(a) {
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.Vl(D.La(a, c));
        else for (a = a.j; a.next();) this.Vl(a.value)
    };
    M.prototype.removeNodeData = M.prototype.yy = function(a) {
        null !== a && Yg(this, a, !0)
    };
    function Yg(a, b, c) {
        var d = a.Cb(b);
        void 0 !== d && a.Ec.remove(d);
        d = null;
        if (c) {
            d = D.$l(a.we, b);
            if (0 > d) return;
            D.Sg(a.we, d)
        }
        Ug(a, "nodeDataArray", ng, "nodeDataArray", a, b, null, d, null);
        a.hv(b)
    }
    M.prototype.removeNodeDataCollection = function(a) {
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.yy(D.La(a, c));
        else for (a = a.j; a.next();) this.yy(a.value)
    };
    f = M.prototype;
    f.Tu = function(a, b) {
        var c = Zg(this, a);
        c instanceof L && this.vg.add(b, c)
    };
    f.WB = function() {};
    f.Jq = function() {};
    f.Iq = function() {};
    f.hv = function() {};
    function $g(a, b, c) {
        if (void 0 !== b) {
            var d = a.vg.oa(b);
            null === d && (d = new L(Object), a.vg.add(b, d));
            d.add(c)
        }
    }
    function ah(a, b, c) {
        if (void 0 !== b) {
            var d = a.vg.oa(b);
            d instanceof L && (void 0 === c || null === c ? a.vg.remove(b) : (d.remove(c), 0 === d.count && a.vg.remove(b)))
        }
    }
    function Zg(a, b) {
        if (void 0 === b) return null;
        var c = a.vg.oa(b);
        return c instanceof L ? c: null
    }
    M.prototype.clearUnresolvedReferences = M.prototype.ME = function(a) {
        void 0 === a ? this.vg.clear() : this.vg.remove(a)
    };
    D.defineProperty(M, {
        fL: "copyNodeDataFunction"
    },
    function() {
        return this.Po
    },
    function(a) {
        var b = this.Po;
        b !== a && (null !== a && D.h(a, "function", M, "copyNodeDataFunction"), this.Po = a, this.i("copyNodeDataFunction", b, a))
    });
    D.defineProperty(M, {
        xA: "copiesArrays"
    },
    function() {
        return this.ur
    },
    function(a) {
        var b = this.ur;
        b !== a && (null !== a && D.h(a, "boolean", M, "copiesArrays"), this.ur = a, this.i("copiesArrays", b, a))
    });
    D.defineProperty(M, {
        wA: "copiesArrayObjects"
    },
    function() {
        return this.tr
    },
    function(a) {
        var b = this.tr;
        b !== a && (null !== a && D.h(a, "boolean", M, "copiesArrayObjects"), this.tr = a, this.i("copiesArrayObjects", b, a))
    });
    M.prototype.copyNodeData = function(a) {
        if (null === a) return null;
        var b = null,
        b = this.Po,
        b = null !== b ? b(a, this) : bh(this, a, !0);
        D.Ta(b) && D.tc(b);
        return b
    };
    function bh(a, b, c) {
        if (a.xA && Array.isArray(b)) {
            var d = [];
            for (c = 0; c < b.length; c++) {
                var e = bh(a, b[c], a.wA);
                d.push(e)
            }
            D.tc(d);
            return d
        }
        if (c && D.Ta(b)) {
            c = (c = b.constructor) ? new c: {};
            for (d in b) if ("__gohashid" !== d) {
                var e = D.ub(b, d),
                g;
                g = e;
                g instanceof P || g instanceof E || g instanceof Rg || g instanceof ch || g instanceof dh || g instanceof Sg || g instanceof oa || g instanceof Tg || g instanceof Zf || g instanceof ag ? ("_" !== d[0] && D.trace('Warning: found GraphObject or Diagram reference when copying model data on property "' + d + '" of data object: ' + b.toString() + "  \nModel data should not have any references to a Diagram or any part of a diagram, such as: " + g.toString()), g = !0) : g = g instanceof M || g instanceof og || g instanceof xg || g instanceof bg ? !0 : !1;
                g || (e = bh(a, e, !1));
                D.Ua(c, d, e)
            }
            D.tc(c);
            return c
        }
        return b instanceof O ? b.copy() : b instanceof Ca ? b.copy() : b instanceof B ? b.copy() : b instanceof R ? b.copy() : b instanceof Hb ? b.copy() : b
    }
    D.defineProperty(M, {
        OH: "afterCopyFunction"
    },
    function() {
        return this.dr
    },
    function(a) {
        var b = this.dr;
        b !== a && (null !== a && D.h(a, "function", M, "afterCopyFunction"), this.dr = a, this.i("afterCopyFunction", b, a))
    });
    var eh = !1;
    M.prototype.setDataProperty = function(a, b, c) {
        v && (D.h(a, "object", M, "setDataProperty:data"), D.h(b, "string", M, "setDataProperty:propname"), "" === b && D.k("Model.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.ie(a)) if (b === this.Rj) this.Gy(a, c);
        else {
            if (b === this.no) {
                this.Ey(a, c);
                return
            }
        } else ! eh && a instanceof P && (eh = !0, D.trace('Model.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.ub(a, b);
        d !== c && (D.Ua(a, b, c), this.rB(a, b, d, c))
    };
    M.prototype.addArrayItem = function(a, b) {
        this.WA(a, -1, b)
    };
    M.prototype.insertArrayItem = M.prototype.WA = function(a, b, c) {
        v && (D.Xt(a, M, "insertArrayItem:arr"), D.p(b, M, "insertArrayItem:idx"));
        a === this.we && D.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");
        0 > b && (b = D.cb(a));
        D.Ih(a, b, c);
        Ug(this, "", mg, "", a, null, c, null, b)
    };
    M.prototype.removeArrayItem = M.prototype.sG = function(a, b) {
        void 0 === b && (b = -1);
        v && (D.Xt(a, M, "removeArrayItem:arr"), D.p(b, M, "removeArrayItem:idx"));
        a === this.we && D.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"); - 1 === b && (b = D.cb(a) - 1);
        var c = D.La(a, b);
        D.Sg(a, b);
        Ug(this, "", ng, "", a, c, null, b, null)
    };
    D.defineProperty(M, {
        no: "nodeCategoryProperty"
    },
    function() {
        return this.fn
    },
    function(a) {
        var b = this.fn;
        b !== a && (Vg(a, M, "nodeCategoryProperty"), this.fn = a, this.i("nodeCategoryProperty", b, a))
    });
    M.prototype.getCategoryForNodeData = M.prototype.OA = function(a) {
        if (null === a) return "";
        var b = this.fn;
        if ("" === b) return "";
        b = D.ub(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        D.k("getCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    M.prototype.setCategoryForNodeData = M.prototype.Ey = function(a, b) {
        D.h(b, "string", M, "setCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.fn;
            if ("" !== c) if (this.ie(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ua(a, c, b), Ug(this, "nodeCategory", cg, c, a, d, b))
            } else D.Ua(a, c, b)
        }
    };
    function Y(a, b) {
        M.call(this);
        2 < arguments.length && D.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");
        this.bf = [];
        this.hi = new L(Object);
        this.nd = new ma(null, Object);
        this.Fl = "";
        this.ol = this.Oo = this.yp = null;
        this.ii = "from";
        this.ji = "to";
        this.bn = this.an = "";
        this.$m = "category";
        this.Gg = "";
        this.Bp = "isGroup";
        this.zh = "group";
        this.vr = !1;
        void 0 !== a && (this.mg = a);
        void 0 !== b && (this.Yg = b)
    }
    D.Sa(Y, M);
    D.ja("GraphLinksModel", Y);
    Y.prototype.cloneProtected = function(a) {
        M.prototype.cloneProtected.call(this, a);
        a.Fl = this.Fl;
        a.yp = this.yp;
        a.Oo = this.Oo;
        a.ii = this.ii;
        a.ji = this.ji;
        a.an = this.an;
        a.bn = this.bn;
        a.$m = this.$m;
        a.Gg = this.Gg;
        a.Bp = this.Bp;
        a.zh = this.zh;
        a.vr = this.vr
    };
    Y.prototype.clear = Y.prototype.clear = function() {
        M.prototype.clear.call(this);
        this.bf = [];
        this.nd.clear();
        this.hi.clear()
    };
    f = Y.prototype;
    f.toString = function(a) {
        void 0 === a && (a = 0);
        if (2 <= a) return this.OB();
        var b = ("" !== this.name ? this.name: "") + " GraphLinksModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.mg;
            for (var c = D.cb(a), d = 0, d = 0; d < c; d++) var e = D.La(a, d),
            b = b + (" " + this.Cb(e) + ":" + ja(e));
            b += "\n link data:";
            a = this.Yg;
            c = D.cb(a);
            for (d = 0; d < c; d++) e = D.La(a, d),
            b += " " + this.om(e) + "--\x3e" + this.pm(e)
        }
        return b
    };
    f.zo = function() {
        var a = M.prototype.zo.call(this),
        b = "";
        "category" !== this.Cu && "string" === typeof this.Cu && (b += ',\n  "linkCategoryProperty": ' + this.quote(this.Cu));
        "" !== this.Oj && "string" === typeof this.Oj && (b += ',\n  "linkKeyProperty": ' + this.quote(this.Oj));
        "from" !== this.co && "string" === typeof this.co && (b += ',\n  "linkFromKeyProperty": ' + this.quote(this.co));
        "to" !== this.eo && "string" === typeof this.eo && (b += ',\n  "linkToKeyProperty": ' + this.quote(this.eo));
        "" !== this.Du && "string" === typeof this.Du && (b += ',\n  "linkFromPortIdProperty": ' + this.quote(this.Du));
        "" !== this.Fu && "string" === typeof this.Fu && (b += ',\n  "linkToPortIdProperty": ' + this.quote(this.Fu));
        "" !== this.Eu && "string" === typeof this.Eu && (b += ',\n  "linkLabelKeysProperty": ' + this.quote(this.Eu));
        "isGroup" !== this.Nu && "string" === typeof this.Nu && (b += ',\n  "nodeIsGroupProperty": ' + this.quote(this.Nu));
        "group" !== this.Mu && "string" === typeof this.Mu && (b += ',\n  "nodeGroupKeyProperty": ' + this.quote(this.Mu));
        return a + b
    };
    f.Ru = function(a) {
        M.prototype.Ru.call(this, a);
        a.linkKeyProperty && (this.Oj = a.linkKeyProperty);
        a.linkFromKeyProperty && (this.co = a.linkFromKeyProperty);
        a.linkToKeyProperty && (this.eo = a.linkToKeyProperty);
        a.linkFromPortIdProperty && (this.Du = a.linkFromPortIdProperty);
        a.linkToPortIdProperty && (this.Fu = a.linkToPortIdProperty);
        a.linkCategoryProperty && (this.Cu = a.linkCategoryProperty);
        a.linkLabelKeysProperty && (this.Eu = a.linkLabelKeysProperty);
        a.nodeIsGroupProperty && (this.Nu = a.nodeIsGroupProperty);
        a.nodeGroupKeyProperty && (this.Mu = a.nodeGroupKeyProperty)
    };
    f.bC = function() {
        var a = M.prototype.bC.call(this),
        b = ',\n  "linkDataArray": ' + tg(this, this.Yg, !0);
        return a + b
    };
    f.tB = function(a) {
        M.prototype.tB.call(this, a);
        a = a.linkDataArray;
        D.isArray(a) && (this.Uu(a), this.Yg = a)
    };
    f.cC = function(a) {
        if (! (a instanceof Y)) return D.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),
        "";
        "" === this.Oj && D.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");
        var b = M.prototype.cC.call(this, a);
        vg(this, a, "linkKeyProperty");
        vg(this, a, "linkFromKeyProperty");
        vg(this, a, "linkToKeyProperty");
        vg(this, a, "linkLabelKeysProperty");
        vg(this, a, "nodeIsGroupProperty");
        vg(this, a, "nodeGroupKeyProperty");
        for (var c = new L,
        d = new L,
        e = (new L).Rc(this.nd.XF), g = new ma, h = a.Yg, k = 0; k < h.length; k++) {
            var l = h[k],
            m = a.dg(l);
            if (void 0 !== m) {
                e.remove(m);
                var n = this.oq(m);
                null === n ? (c.add(m), d.add(l)) : ug(this, n, l, g) || d.add(l)
            } else this.dB(l),
            m = this.dg(l),
            c.add(m),
            d.add(l)
        }
        a = b;
        0 < c.count && (a += this.Uy + tg(this, c.lc(), !0));
        0 < d.count && (a += this.jC + tg(this, d.lc(), !0));
        0 < e.count && (a += this.Wy + tg(this, e.lc(), !0));
        return a
    };
    f.Uy = ',\n  "insertedLinkKeys": ';
    f.jC = ',\n  "modifiedLinkData": ';
    f.Wy = ',\n  "removedLinkKeys": ';
    f.aC = function(a, b) {
        "" === this.Oj && D.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");
        var c = M.prototype.aC.call(this, a, b),
        d = this,
        e = new L,
        g = new L,
        h = new L;
        a.ag.each(function(a) {
            a.ga === d && ("linkDataArray" === a.wf ? a.Ic === mg ? e.add(a.newValue) : a.Ic === ng && h.add(a.oldValue) : d.Lh(a.object) && g.add(a.object))
        });
        var k = new L;
        e.each(function(a) {
            k.add(d.dg(a));
            b || g.add(a)
        });
        var l = new L;
        h.each(function(a) {
            l.add(d.dg(a));
            b && g.add(a)
        });
        0 < k.count && (c += (b ? this.Wy: this.Uy) + tg(this, k.lc(), !0));
        0 < g.count && (c += this.jC + tg(this, g.lc(), !0));
        0 < l.count && (c += (b ? this.Uy: this.Wy) + tg(this, l.lc(), !0));
        return c
    };
    f.sB = function(a) {
        M.prototype.sB.call(this, a);
        var b = a.insertedLinkKeys;
        if (D.isArray(b)) for (var c = D.cb(b), d = 0; d < c; d++) {
            var e = D.La(b, d),
            g = this.oq(e);
            null === g && (g = this.vx({}), this.PG(g, e), this.Qt(g))
        }
        e = a.modifiedLinkData;
        if (D.isArray(e)) for (c = D.cb(e), d = 0; d < c; d++) if (b = D.La(e, d), g = this.dg(b), g = this.oq(g), null !== g) for (var h in b)"__gohashid" !== h && h !== this.Oj && this.setDataProperty(g, h, b[h]);
        a = a.removedLinkKeys;
        if (D.isArray(a)) for (c = D.cb(a), d = 0; d < c; d++) e = D.La(a, d),
        g = this.oq(e),
        null !== g && this.xy(g)
    };
    f.En = function(a, b) {
        if (a.Ic === mg) {
            var c = a.Qj;
            if ("linkDataArray" === a.wf) {
                var d = a.newValue;
                if (D.Ta(d) && "number" === typeof c) {
                    var e = this.dg(d);
                    b ? (this.hi.remove(d), D.La(this.bf, c) === d && D.Sg(this.bf, c), void 0 !== e && this.nd.remove(e)) : (this.hi.add(d), D.La(this.bf, c) !== d && D.Ih(this.bf, c, d), void 0 !== e && this.nd.add(e, d))
                }
                return
            }
            if ("linkLabelKeys" === a.wf) {
                d = this.Sk(a.object);
                D.isArray(d) && "number" === typeof c && (b ? (c = D.$l(d, a.newValue), 0 <= c && D.Sg(d, c)) : 0 > D.$l(d, a.newValue) && D.Ih(d, c, a.newValue));
                return
            }
        } else if (a.Ic === ng) {
            c = a.Sj;
            if ("linkDataArray" === a.wf) {
                d = a.oldValue;
                D.Ta(d) && "number" === typeof c && (e = this.dg(d), b ? (this.hi.add(d), D.La(this.bf, c) !== d && D.Ih(this.bf, c, d), void 0 !== e && this.nd.add(e, d)) : (this.hi.remove(d), D.La(this.bf, c) === d && D.Sg(this.bf, c), void 0 !== e && this.nd.remove(e)));
                return
            }
            if ("linkLabelKeys" === a.wf) {
                d = this.Sk(a.object);
                D.isArray(d) && "number" === typeof c && (b ? 0 > D.$l(d, a.newValue) && D.Ih(d, c, a.newValue) : (c = D.$l(d, a.newValue), 0 <= c && D.Sg(d, c)));
                return
            }
        }
        M.prototype.En.call(this, a, b)
    };
    D.defineProperty(Y, {
        pA: "archetypeNodeData"
    },
    function() {
        return this.ol
    },
    function(a) {
        var b = this.ol;
        b !== a && (null !== a && D.l(a, Object, Y, "archetypeNodeData"), this.ol = a, this.i("archetypeNodeData", b, a))
    });
    Y.prototype.fo = function(a) {
        if (void 0 !== a) {
            var b = this.ol;
            if (null !== b) {
                var c = this.Fe(a);
                null === c && (c = this.copyNodeData(b), D.Ua(c, this.wk, a), this.Vl(c))
            }
            return a
        }
    };
    D.defineProperty(Y, {
        co: "linkFromKeyProperty"
    },
    function() {
        return this.ii
    },
    function(a) {
        var b = this.ii;
        b !== a && (Vg(a, Y, "linkFromKeyProperty"), this.ii = a, this.i("linkFromKeyProperty", b, a))
    });
    Y.prototype.getFromKeyForLinkData = Y.prototype.om = function(a) {
        if (null !== a) {
            var b = this.ii;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("FromKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Y.prototype.setFromKeyForLinkData = Y.prototype.BB = function(a, b) {
        null === b && (b = void 0);
        void 0 === b || Wg(b) || D.gc(b, "number or string", Y, "setFromKeyForLinkData:key");
        if (null !== a) {
            var c = this.ii;
            if ("" !== c) if (b = this.fo(b), this.Lh(a)) {
                var d = D.ub(a, c);
                d !== b && (ah(this, d, a), D.Ua(a, c, b), null === this.Fe(b) && $g(this, b, a), Ug(this, "linkFromKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(Y, {
        eo: "linkToKeyProperty"
    },
    function() {
        return this.ji
    },
    function(a) {
        var b = this.ji;
        b !== a && (Vg(a, Y, "linkToKeyProperty"), this.ji = a, this.i("linkToKeyProperty", b, a))
    });
    Y.prototype.getToKeyForLinkData = Y.prototype.pm = function(a) {
        if (null !== a) {
            var b = this.ji;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("ToKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Y.prototype.setToKeyForLinkData = Y.prototype.HB = function(a, b) {
        null === b && (b = void 0);
        void 0 === b || Wg(b) || D.gc(b, "number or string", Y, "setToKeyForLinkData:key");
        if (null !== a) {
            var c = this.ji;
            if ("" !== c) if (b = this.fo(b), this.Lh(a)) {
                var d = D.ub(a, c);
                d !== b && (ah(this, d, a), D.Ua(a, c, b), null === this.Fe(b) && $g(this, b, a), Ug(this, "linkToKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(Y, {
        Du: "linkFromPortIdProperty"
    },
    function() {
        return this.an
    },
    function(a) {
        var b = this.an;
        b !== a && (Vg(a, Y, "linkFromPortIdProperty"), a !== this.co && a !== this.eo || D.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.an = a, this.i("linkFromPortIdProperty", b, a))
    });
    Y.prototype.getFromPortIdForLinkData = Y.prototype.KI = function(a) {
        if (null === a) return "";
        var b = this.an;
        if ("" === b) return "";
        a = D.ub(a, b);
        return void 0 === a ? "": a
    };
    Y.prototype.setFromPortIdForLinkData = Y.prototype.CB = function(a, b) {
        D.h(b, "string", Y, "setFromPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.an;
            if ("" !== c) if (this.Lh(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ua(a, c, b), Ug(this, "linkFromPortId", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(Y, {
        Fu: "linkToPortIdProperty"
    },
    function() {
        return this.bn
    },
    function(a) {
        var b = this.bn;
        b !== a && (Vg(a, Y, "linkToPortIdProperty"), a !== this.co && a !== this.eo || D.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.bn = a, this.i("linkToPortIdProperty", b, a))
    });
    Y.prototype.getToPortIdForLinkData = Y.prototype.OI = function(a) {
        if (null === a) return "";
        var b = this.bn;
        if ("" === b) return "";
        a = D.ub(a, b);
        return void 0 === a ? "": a
    };
    Y.prototype.setToPortIdForLinkData = Y.prototype.IB = function(a, b) {
        D.h(b, "string", Y, "setToPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.bn;
            if ("" !== c) if (this.Lh(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ua(a, c, b), Ug(this, "linkToPortId", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(Y, {
        Eu: "linkLabelKeysProperty"
    },
    function() {
        return this.Gg
    },
    function(a) {
        var b = this.Gg;
        b !== a && (Vg(a, Y, "linkLabelKeysProperty"), this.Gg = a, this.i("linkLabelKeysProperty", b, a))
    });
    Y.prototype.getLabelKeysForLinkData = Y.prototype.Sk = function(a) {
        if (null === a) return D.Co;
        var b = this.Gg;
        if ("" === b) return D.Co;
        a = D.ub(a, b);
        return void 0 === a ? D.Co: a
    };
    Y.prototype.setLabelKeysForLinkData = Y.prototype.QG = function(a, b) {
        D.Xt(b, Y, "setLabelKeysForLinkData:arr");
        if (null !== a) {
            var c = this.Gg;
            if ("" !== c) if (this.Lh(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = D.Co);
                if (d !== b) {
                    for (var e = D.cb(d), g = 0; g < e; g++) {
                        var h = D.La(d, g);
                        ah(this, h, a)
                    }
                    D.Ua(a, c, b);
                    e = D.cb(b);
                    for (g = 0; g < e; g++) h = D.La(b, g),
                    null === this.Fe(h) && $g(this, h, a);
                    Ug(this, "linkLabelKeys", cg, c, a, d, b);
                    "string" === typeof c && this.Nb(a, c)
                }
            } else D.Ua(a, c, b)
        }
    };
    Y.prototype.addLabelKeyForLinkData = Y.prototype.CE = function(a, b) {
        if (null !== b && void 0 !== b && (Wg(b) || D.gc(b, "number or string", Y, "addLabelKeyForLinkData:key"), null !== a)) {
            var c = this.Gg;
            if ("" !== c) {
                var d = D.ub(a, c);
                if (void 0 === d) c = [],
                c.push(b),
                this.QG(a, c);
                else if (D.isArray(d)) {
                    var e = D.$l(d, b);
                    0 <= e || (e = D.cb(d), D.Ih(d, Infinity, b), this.Lh(a) && (null === this.Fe(b) && $g(this, b, a), Ug(this, "linkLabelKeys", mg, c, a, null, b, null, e)))
                } else D.k(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
            }
        }
    };
    Y.prototype.removeLabelKeyForLinkData = Y.prototype.VJ = function(a, b) {
        if (null !== b && void 0 !== b && (Wg(b) || D.gc(b, "number or string", Y, "removeLabelKeyForLinkData:key"), null !== a)) {
            var c = this.Gg;
            if ("" !== c) {
                var d = D.ub(a, c);
                if (D.isArray(d)) {
                    var e = D.$l(d, b);
                    0 > e || (D.Sg(d, e), this.Lh(a) && (ah(this, b, a), Ug(this, "linkLabelKeys", ng, c, a, b, null, e, null)))
                } else void 0 !== d && D.k(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
            }
        }
    };
    D.defineProperty(Y, {
        Yg: "linkDataArray"
    },
    function() {
        return this.bf
    },
    function(a) {
        var b = this.bf;
        if (b !== a) {
            D.Xt(a, Y, "linkDataArray");
            this.nd.clear();
            for (var c = D.cb(a), d = 0; d < c; d++) {
                var e = D.La(a, d);
                if (!D.Ta(e)) {
                    D.k("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
                    return
                }
                D.sq(e)
            }
            this.bf = a;
            if ("" !== this.Oj) {
                for (var g = new K(Object), d = 0; d < c; d++) {
                    var e = D.La(a, d),
                    h = this.dg(e);
                    void 0 === h ? g.add(e) : null !== this.nd.oa(h) ? g.add(e) : this.nd.add(h, e)
                }
                for (d = g.j; d.next();) e = d.value,
                this.dB(e),
                g = this.dg(e),
                void 0 !== g && this.nd.add(g, e)
            }
            g = new L(Object);
            for (d = 0; d < c; d++) e = D.La(a, d),
            g.add(e);
            this.hi = g;
            Ug(this, "linkDataArray", cg, "linkDataArray", this, b, a);
            for (d = 0; d < c; d++) e = D.La(a, d),
            fh(this, e)
        }
    });
    D.defineProperty(Y, {
        Oj: "linkKeyProperty"
    },
    function() {
        return this.Fl
    },
    function(a) {
        var b = this.Fl;
        if (b !== a) {
            Vg(a, Y, "linkKeyProperty");
            this.Fl = a;
            this.nd.clear();
            for (var c = D.cb(this.Yg), d = 0; d < c; d++) {
                var e = D.La(this.Yg, d),
                g = this.dg(e);
                void 0 !== g && this.nd.add(g, e)
            }
            this.i("linkKeyProperty", b, a)
        }
    });
    Y.prototype.getKeyForLinkData = Y.prototype.dg = function(a) {
        if (null !== a) {
            var b = this.Fl;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("Key value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Y.prototype.setKeyForLinkData = Y.prototype.PG = function(a, b) {
        void 0 !== b && null !== b && Wg(b) || D.gc(b, "number or string", Y, "setKeyForLinkData:key");
        if (null !== a) {
            var c = this.Fl;
            if ("" !== c) if (this.Lh(a)) {
                var d = D.ub(a, c);
                d !== b && null === this.oq(b) && (D.Ua(a, c, b), this.nd.remove(d), this.nd.add(b, a), Ug(this, "linkKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(Y, {
        PL: "makeUniqueLinkKeyFunction"
    },
    function() {
        return this.yp
    },
    function(a) {
        var b = this.yp;
        b !== a && (null !== a && D.h(a, "function", Y, "makeUniqueLinkKeyFunction"), this.yp = a, this.i("makeUniqueLinkKeyFunction", b, a))
    });
    Y.prototype.findLinkDataForKey = Y.prototype.oq = function(a) {
        null === a && D.k("GraphLinksModel.findLinkDataForKey:key must not be null");
        return void 0 !== a && Wg(a) ? this.nd.oa(a) : null
    };
    Y.prototype.makeLinkDataKeyUnique = Y.prototype.dB = function(a) {
        if (null !== a) {
            var b = this.Fl;
            if ("" !== b) {
                var c = this.dg(a);
                if (void 0 === c || this.nd.contains(c)) {
                    var d = this.yp;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.nd.contains(c))) {
                        D.Ua(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.nd.contains(c + d);) d++;
                        D.Ua(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.nd.count - 1; this.nd.contains(d);) d--;
                        D.Ua(a, b, d)
                    } else D.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: " + c)
                }
            }
        }
    };
    Y.prototype.containsLinkData = Y.prototype.Lh = function(a) {
        return null === a ? !1 : this.hi.contains(a)
    };
    Y.prototype.addLinkData = Y.prototype.Qt = function(a) {
        null !== a && (D.sq(a), this.Lh(a) || gh(this, a, !0))
    };
    function gh(a, b, c) {
        if ("" !== a.Oj) {
            var d = a.dg(b);
            if (void 0 !== d && a.nd.oa(d) === b) return;
            a.dB(b);
            d = a.dg(b);
            if (void 0 === d) {
                D.k("GraphLinksModel.makeLinkDataKeyUnique failed on " + b + ". Data not added to model.");
                return
            }
            a.nd.add(d, b)
        }
        a.hi.add(b);
        d = null;
        c && (d = D.cb(a.bf), D.Ih(a.bf, d, b));
        Ug(a, "linkDataArray", mg, "linkDataArray", a, null, b, null, d);
        fh(a, b)
    }
    Y.prototype.addLinkDataCollection = function(a) {
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.Qt(D.La(a, c));
        else for (a = a.j; a.next();) this.Qt(a.value)
    };
    Y.prototype.removeLinkData = Y.prototype.xy = function(a) {
        null !== a && hh(this, a, !0)
    };
    function hh(a, b, c) {
        a.hi.remove(b);
        var d = a.dg(b);
        void 0 !== d && a.nd.remove(d);
        d = null;
        if (c) {
            d = D.$l(a.bf, b);
            if (0 > d) return;
            D.Sg(a.bf, d)
        }
        Ug(a, "linkDataArray", ng, "linkDataArray", a, b, null, d, null);
        c = a.om(b);
        ah(a, c, b);
        c = a.pm(b);
        ah(a, c, b);
        d = a.Sk(b);
        if (D.isArray(d)) for (var e = D.cb(d), g = 0; g < e; g++) c = D.La(d, g),
        ah(a, c, b)
    }
    Y.prototype.removeLinkDataCollection = function(a) {
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) this.xy(D.La(a, c));
        else for (a = a.j; a.next();) this.xy(a.value)
    };
    function fh(a, b) {
        var c = a.om(b),
        c = a.fo(c);
        null === a.Fe(c) && $g(a, c, b);
        c = a.pm(b);
        c = a.fo(c);
        null === a.Fe(c) && $g(a, c, b);
        var d = a.Sk(b);
        if (D.isArray(d)) for (var e = D.cb(d), g = 0; g < e; g++) c = D.La(d, g),
        null === a.Fe(c) && $g(a, c, b)
    }
    D.defineProperty(Y, {
        eL: "copyLinkDataFunction"
    },
    function() {
        return this.Oo
    },
    function(a) {
        var b = this.Oo;
        b !== a && (null !== a && D.h(a, "function", Y, "copyLinkDataFunction"), this.Oo = a, this.i("copyLinkDataFunction", b, a))
    });
    Y.prototype.copyLinkData = Y.prototype.vx = function(a) {
        if (null === a) return null;
        var b = null,
        b = this.Oo,
        b = null !== b ? b(a, this) : bh(this, a, !0);
        D.Ta(b) && (D.tc(b), "" !== this.ii && D.Ua(b, this.ii, void 0), "" !== this.ji && D.Ua(b, this.ji, void 0), "" !== this.Gg && D.Ua(b, this.Gg, []));
        return b
    };
    D.defineProperty(Y, {
        Nu: "nodeIsGroupProperty"
    },
    function() {
        return this.Bp
    },
    function(a) {
        var b = this.Bp;
        b !== a && (Vg(a, Y, "nodeIsGroupProperty"), this.Bp = a, this.i("nodeIsGroupProperty", b, a))
    });
    Y.prototype.isGroupForNodeData = Y.prototype.ZA = function(a) {
        if (null === a) return ! 1;
        var b = this.Bp;
        return "" === b ? !1 : D.ub(a, b) ? !0 : !1
    };
    D.defineProperty(Y, {
        Mu: "nodeGroupKeyProperty"
    },
    function() {
        return this.zh
    },
    function(a) {
        var b = this.zh;
        b !== a && (Vg(a, Y, "nodeGroupKeyProperty"), this.zh = a, this.i("nodeGroupKeyProperty", b, a))
    });
    D.defineProperty(Y, {
        In: "copiesGroupKeyOfNodeData"
    },
    function() {
        return this.vr
    },
    function(a) {
        this.vr !== a && (D.h(a, "boolean", Y, "copiesGroupKeyOfNodeData"), this.vr = a)
    });
    Y.prototype.getGroupKeyForNodeData = Y.prototype.Sn = function(a) {
        if (null !== a) {
            var b = this.zh;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("GroupKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Y.prototype.setGroupKeyForNodeData = Y.prototype.DB = function(a, b) {
        null === b && (b = void 0);
        void 0 === b || Wg(b) || D.gc(b, "number or string", Y, "setGroupKeyForNodeData:key");
        if (null !== a) {
            var c = this.zh;
            if ("" !== c) if (this.ie(a)) {
                var d = D.ub(a, c);
                d !== b && (ah(this, d, a), D.Ua(a, c, b), null === this.Fe(b) && $g(this, b, a), Ug(this, "nodeGroupKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    Y.prototype.copyNodeData = function(a) {
        if (null === a) return null;
        a = M.prototype.copyNodeData.call(this, a);
        this.In || "" === this.zh || void 0 === D.ub(a, this.zh) || D.Ua(a, this.zh, void 0);
        return a
    };
    Y.prototype.setDataProperty = function(a, b, c) {
        v && (D.h(a, "object", Y, "setDataProperty:data"), D.h(b, "string", Y, "setDataProperty:propname"), "" === b && D.k("GraphLinksModel.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.ie(a)) if (b === this.Rj) this.Gy(a, c);
        else {
            if (b === this.no) {
                this.Ey(a, c);
                return
            }
            if (b === this.Mu) {
                this.DB(a, c);
                return
            }
            b === this.Nu && D.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: " + b)
        } else if (this.Lh(a)) {
            if (b === this.co) {
                this.BB(a, c);
                return
            }
            if (b === this.eo) {
                this.HB(a, c);
                return
            }
            if (b === this.Du) {
                this.CB(a, c);
                return
            }
            if (b === this.Fu) {
                this.IB(a, c);
                return
            }
            if (b === this.Oj) {
                this.PG(a, c);
                return
            }
            if (b === this.Cu) {
                this.OG(a, c);
                return
            }
            if (b === this.Eu) {
                this.QG(a, c);
                return
            }
        } else ! eh && a instanceof P && (eh = !0, D.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.ub(a, b);
        d !== c && (D.Ua(a, b, c), this.rB(a, b, d, c))
    };
    f = Y.prototype;
    f.Tu = function(a, b) {
        M.prototype.Tu.call(this, a, b);
        for (var c = this.Ec.j; c.next();) this.wB(c.value, a, b);
        for (c = this.hi.j; c.next();) {
            var d = c.value,
            e = a,
            g = b;
            if (this.om(d) === e) {
                var h = this.ii;
                D.Ua(d, h, g);
                Ug(this, "linkFromKey", cg, h, d, e, g);
                "string" === typeof h && this.Nb(d, h)
            }
            this.pm(d) === e && (h = this.ji, D.Ua(d, h, g), Ug(this, "linkToKey", cg, h, d, e, g), "string" === typeof h && this.Nb(d, h));
            h = this.Sk(d);
            if (D.isArray(h)) for (var k = D.cb(h), l = this.Gg, m = 0; m < k; m++) D.La(h, m) === e && (D.JE(h, m, g), Ug(this, "linkLabelKeys", mg, l, d, e, g, m, m))
        }
    };
    f.wB = function(a, b, c) {
        if (this.Sn(a) === b) {
            var d = this.zh;
            D.Ua(a, d, c);
            Ug(this, "nodeGroupKey", cg, d, a, b, c);
            "string" === typeof d && this.Nb(a, d)
        }
    };
    f.WB = function() {
        M.prototype.WB.call(this);
        for (var a = this.Yg,
        b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            fh(this, d)
        }
    };
    f.Jq = function(a) {
        M.prototype.Jq.call(this, a);
        a = this.Cb(a);
        var b = Zg(this, a);
        if (null !== b) {
            for (var c = new K(Object), b = b.j; b.next();) {
                var d = b.value;
                if (this.ie(d)) {
                    if (this.Sn(d) === a) {
                        var e = this.zh;
                        Ug(this, "nodeGroupKey", cg, e, d, a, a);
                        "string" === typeof e && this.Nb(d, e);
                        c.add(d)
                    }
                } else if (this.om(d) === a && (e = this.ii, Ug(this, "linkFromKey", cg, e, d, a, a), "string" === typeof e && this.Nb(d, e), c.add(d)), this.pm(d) === a && (e = this.ji, Ug(this, "linkToKey", cg, e, d, a, a), "string" === typeof e && this.Nb(d, e), c.add(d)), e = this.Sk(d), D.isArray(e)) for (var g = D.cb(e), h = this.Gg, k = 0; k < g; k++) D.La(e, k) === a && (Ug(this, "linkLabelKeys", mg, h, d, a, a, k, k), c.add(d))
            }
            for (c = c.j; c.next();) ah(this, a, c.value)
        }
    };
    f.Iq = function(a) {
        M.prototype.Iq.call(this, a);
        var b = this.Sn(a);
        null === this.Fe(b) && $g(this, b, a)
    };
    f.hv = function(a) {
        M.prototype.hv.call(this, a);
        var b = this.Sn(a);
        ah(this, b, a)
    };
    D.defineProperty(Y, {
        Cu: "linkCategoryProperty"
    },
    function() {
        return this.$m
    },
    function(a) {
        var b = this.$m;
        b !== a && (Vg(a, Y, "linkCategoryProperty"), this.$m = a, this.i("linkCategoryProperty", b, a))
    });
    Y.prototype.getCategoryForLinkData = Y.prototype.Lx = function(a) {
        if (null === a) return "";
        var b = this.$m;
        if ("" === b) return "";
        b = D.ub(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        D.k("getCategoryForLinkData found a non-string category for " + a + ": " + b);
        return ""
    };
    Y.prototype.setCategoryForLinkData = Y.prototype.OG = function(a, b) {
        D.h(b, "string", Y, "setCategoryForLinkData:cat");
        if (null !== a) {
            var c = this.$m;
            if ("" !== c) if (this.Lh(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ua(a, c, b), Ug(this, "linkCategory", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    function wg(a) {
        1 < arguments.length && D.k("TreeModel constructor can only take one optional argument, the Array of node data.");
        M.call(this);
        this.Ah = "parent";
        this.wr = !1;
        this.jn = "parentLinkCategory";
        void 0 !== a && (this.mg = a)
    }
    D.Sa(wg, M);
    D.ja("TreeModel", wg);
    wg.prototype.cloneProtected = function(a) {
        M.prototype.cloneProtected.call(this, a);
        a.Ah = this.Ah;
        a.wr = this.wr;
        a.jn = this.jn
    };
    wg.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        if (2 <= a) return this.OB();
        var b = ("" !== this.name ? this.name: "") + " TreeModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.mg;
            for (var c = D.cb(a), d = 0; d < c; d++) var e = D.La(a, d),
            b = b + (" " + this.Cb(e) + ":" + ja(e))
        }
        return b
    };
    wg.prototype.zo = function() {
        var a = M.prototype.zo.call(this),
        b = "";
        "parent" !== this.Ou && "string" === typeof this.Ou && (b += ',\n  "nodeParentKeyProperty": ' + this.quote(this.Ou));
        return a + b
    };
    wg.prototype.Ru = function(a) {
        M.prototype.Ru.call(this, a);
        a.nodeParentKeyProperty && (this.Ou = a.nodeParentKeyProperty)
    };
    wg.prototype.fo = function(a) {
        return a
    };
    D.defineProperty(wg, {
        Ou: "nodeParentKeyProperty"
    },
    function() {
        return this.Ah
    },
    function(a) {
        var b = this.Ah;
        b !== a && (Vg(a, wg, "nodeParentKeyProperty"), this.Ah = a, this.i("nodeParentKeyProperty", b, a))
    });
    D.defineProperty(wg, {
        Jn: "copiesParentKeyOfNodeData"
    },
    function() {
        return this.wr
    },
    function(a) {
        this.wr !== a && (D.h(a, "boolean", wg, "copiesParentKeyOfNodeData"), this.wr = a)
    });
    wg.prototype.getParentKeyForNodeData = wg.prototype.Un = function(a) {
        if (null !== a) {
            var b = this.Ah;
            if ("" !== b && (b = D.ub(a, b), void 0 !== b)) {
                if (Wg(b)) return b;
                D.k("ParentKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    wg.prototype.setParentKeyForNodeData = wg.prototype.Hi = function(a, b) {
        null === b && (b = void 0);
        void 0 === b || Wg(b) || D.gc(b, "number or string", wg, "setParentKeyForNodeData:key");
        if (null !== a) {
            var c = this.Ah;
            if ("" !== c) if (b = this.fo(b), this.ie(a)) {
                var d = D.ub(a, c);
                d !== b && (ah(this, d, a), D.Ua(a, c, b), null === this.Fe(b) && $g(this, b, a), Ug(this, "nodeParentKey", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    D.defineProperty(wg, {
        jM: "parentLinkCategoryProperty"
    },
    function() {
        return this.jn
    },
    function(a) {
        var b = this.jn;
        b !== a && (Vg(a, wg, "parentLinkCategoryProperty"), this.jn = a, this.i("parentLinkCategoryProperty", b, a))
    });
    wg.prototype.getParentLinkCategoryForNodeData = wg.prototype.MI = function(a) {
        if (null === a) return "";
        var b = this.jn;
        if ("" === b) return "";
        b = D.ub(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        D.k("getParentLinkCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    wg.prototype.setParentLinkCategoryForNodeData = wg.prototype.gK = function(a, b) {
        D.h(b, "string", wg, "setParentLinkCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.jn;
            if ("" !== c) if (this.ie(a)) {
                var d = D.ub(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ua(a, c, b), Ug(this, "parentLinkCategory", cg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ua(a, c, b)
        }
    };
    wg.prototype.copyNodeData = function(a) {
        if (null === a) return null;
        a = M.prototype.copyNodeData.call(this, a);
        this.Jn || "" === this.Ah || void 0 === D.ub(a, this.Ah) || D.Ua(a, this.Ah, void 0);
        return a
    };
    wg.prototype.setDataProperty = function(a, b, c) {
        v && (D.h(a, "object", wg, "setDataProperty:data"), D.h(b, "string", wg, "setDataProperty:propname"), "" === b && D.k("TreeModel.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.ie(a)) if (b === this.Rj) this.Gy(a, c);
        else {
            if (b === this.no) {
                this.Ey(a, c);
                return
            }
            if (b === this.Ou) {
                this.Hi(a, c);
                return
            }
        } else ! eh && a instanceof P && (eh = !0, D.trace('TreeModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.ub(a, b);
        d !== c && (D.Ua(a, b, c), this.rB(a, b, d, c))
    };
    f = wg.prototype;
    f.Tu = function(a, b) {
        M.prototype.Tu.call(this, a, b);
        for (var c = this.Ec.j; c.next();) this.wB(c.value, a, b)
    };
    f.wB = function(a, b, c) {
        if (this.Un(a) === b) {
            var d = this.Ah;
            D.Ua(a, d, c);
            Ug(this, "nodeParentKey", cg, d, a, b, c);
            "string" === typeof d && this.Nb(a, d)
        }
    };
    f.Jq = function(a) {
        M.prototype.Jq.call(this, a);
        a = this.Cb(a);
        var b = Zg(this, a);
        if (null !== b) {
            for (var c = new K(Object), b = b.j; b.next();) {
                var d = b.value;
                if (this.ie(d) && this.Un(d) === a) {
                    var e = this.Ah;
                    Ug(this, "nodeParentKey", cg, e, d, a, a);
                    "string" === typeof e && this.Nb(d, e);
                    c.add(d)
                }
            }
            for (c = c.j; c.next();) ah(this, a, c.value)
        }
    };
    f.Iq = function(a) {
        M.prototype.Iq.call(this, a);
        var b = this.Un(a),
        b = this.fo(b);
        null === this.Fe(b) && $g(this, b, a)
    };
    f.hv = function(a) {
        M.prototype.hv.call(this, a);
        var b = this.Un(a);
        ah(this, b, a)
    };
    function ih(a, b, c) {
        D.tc(this);
        this.J = !1;
        void 0 === a ? a = "": D.h(a, "string", ih, "constructor:targetprop");
        void 0 === b ? b = a: D.h(b, "string", ih, "constructor:sourceprop");
        void 0 === c ? c = null: null !== c && D.h(c, "function", ih, "constructor:conv");
        this.dE = -1;
        this.Og = null;
        this.Vp = a;
        this.Up = this.Et = 0;
        this.Tw = null;
        this.ls = !1;
        this.Mp = b;
        this.sr = c;
        this.Es = jh;
        this.lr = null;
        this.zz = new L
    }
    D.ja("Binding", ih);
    ih.prototype.copy = function() {
        var a = new ih;
        a.Vp = this.Vp;
        a.Et = this.Et;
        a.Up = this.Up;
        a.Tw = this.Tw;
        a.ls = this.ls;
        a.Mp = this.Mp;
        a.sr = this.sr;
        a.Es = this.Es;
        a.lr = this.lr;
        return a
    };
    var jh;
    ih.OneWay = jh = D.s(ih, "OneWay", 1);
    var kh;
    ih.TwoWay = kh = D.s(ih, "TwoWay", 2);
    ih.parseEnum = function(a, b) {
        D.h(a, "function", ih, "parseEnum:ctor");
        D.Ca(b, a, ih, "parseEnum:defval");
        return function(c) {
            c = Ha(a, c);
            return null === c ? b: c
        }
    };
    ih.prototype.nc = function(a) {
        a.Ne === ih ? this.mode = a: D.Xj(this, a)
    };
    var ja;
    ih.toString = ja = function(a) {
        var b = a;
        D.Ta(a) && (a.text ? b = a.text: a.name ? b = a.name: void 0 !== a.key ? b = a.key: void 0 !== a.id ? b = a.id: a.constructor === Object && (a.Text ? b = a.Text: a.Name ? b = a.Name: void 0 !== a.Key ? b = a.Key: void 0 !== a.Id ? b = a.Id: void 0 !== a.ID && (b = a.ID)));
        return void 0 === b ? "undefined": null === b ? "null": b.toString()
    };
    ih.prototype.toString = function() {
        return "Binding(" + this.ev + ":" + this.TG + ( - 1 !== this.Bm ? " " + this.Bm: "") + " " + this.mode.name + ")"
    };
    ih.prototype.freeze = function() {
        this.J = !0;
        return this
    };
    ih.prototype.Ya = function() {
        this.J = !1;
        return this
    };
    D.defineProperty(ih, {
        Bm: null
    },
    function() {
        return this.dE
    },
    function(a) {
        this.J && D.pa(this);
        D.h(a, "number", ih, "targetId");
        this.dE = a
    });
    D.defineProperty(ih, {
        ev: "targetProperty"
    },
    function() {
        return this.Vp
    },
    function(a) {
        this.J && D.pa(this);
        D.h(a, "string", ih, "targetProperty");
        this.Vp = a
    });
    D.defineProperty(ih, {
        Vq: "sourceName"
    },
    function() {
        return this.Tw
    },
    function(a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "string", ih, "sourceName");
        this.Tw = a;
        null !== a && (this.ls = !1)
    });
    D.defineProperty(ih, {
        Yx: "isToModel"
    },
    function() {
        return this.ls
    },
    function(a) {
        this.J && D.pa(this);
        D.h(a, "boolean", ih, "isToModel");
        this.ls = a
    });
    D.defineProperty(ih, {
        TG: "sourceProperty"
    },
    function() {
        return this.Mp
    },
    function(a) {
        this.J && D.pa(this);
        D.h(a, "string", ih, "sourceProperty");
        this.Mp = a
    });
    D.defineProperty(ih, {
        gI: "converter"
    },
    function() {
        return this.sr
    },
    function(a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "function", ih, "converter");
        this.sr = a
    });
    D.defineProperty(ih, {
        UH: "backConverter"
    },
    function() {
        return this.lr
    },
    function(a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "function", ih, "backConverter");
        this.lr = a
    });
    D.defineProperty(ih, {
        mode: "mode"
    },
    function() {
        return this.Es
    },
    function(a) {
        this.J && D.pa(this);
        D.Ca(a, ih, ih, "mode");
        this.Es = a
    });
    ih.prototype.makeTwoWay = ih.prototype.xJ = function(a) {
        void 0 === a && (a = null);
        null !== a && D.h(a, "function", ih, "makeTwoWay");
        this.mode = kh;
        this.UH = a;
        return this
    };
    ih.prototype.ofObject = ih.prototype.ly = function(a) {
        void 0 === a && (a = "");
        v && D.h(a, "string", ih, "ofObject:srcname");
        this.Vq = a;
        this.Yx = !1;
        return this
    };
    ih.prototype.ofModel = function() {
        this.Vq = null;
        this.Yx = !0;
        return this
    };
    function lh(a, b, c) {
        a = a.Vq;
        var d = null;
        return d = null === a || "" === a ? b: "/" === a ? c.Y: "." === a ? c: ".." === a ? c.Q: b.Ed(a)
    }
    ih.prototype.updateTarget = ih.prototype.iH = function(a, b, c) {
        var d = this.Mp;
        if (void 0 === c || "" === d || d === c) {
            c = this.Vp;
            var e = this.sr;
            if (null === e && "" === c) D.trace("Binding error: target property is the empty string: " + this.toString());
            else {
                v && "string" === typeof c && ("function" !== typeof a.setAttribute && 0 < c.length && "_" !== c[0] && !D.Px(a, c) ? D.trace("Binding error: undefined target property: " + c + " on " + a.toString()) : "name" === c && a instanceof P && D.trace("Binding error: cannot modify GraphObject.name on " + a.toString()));
                var g = b;
                "" !== d && (g = D.ub(b, d));
                if (void 0 !== g) if (null === e)"" !== c && D.Ua(a, c, g);
                else try {
                    if ("" !== c) {
                        var h = e(g, a);
                        v && void 0 === h && D.trace('Binding warning: conversion function returned undefined when setting target property "' + c + '" on ' + a.toString() + ", function is: " + e);
                        D.Ua(a, c, h)
                    } else e(g, a)
                } catch(k) {
                    v && D.trace("Binding error: " + k.toString() + ' setting target property "' + c + '" on ' + a.toString() + " with conversion function: " + e)
                }
            }
        }
    };
    ih.prototype.updateSource = ih.prototype.Jy = function(a, b, c, d) {
        if (this.Es === kh) {
            var e = this.Vp;
            if (void 0 === c || e === c) {
                c = this.Mp;
                var g = this.lr,
                h = a;
                "" !== e && (h = D.ub(a, e));
                if (void 0 !== h && !this.zz.contains(a)) try {
                    this.zz.add(a);
                    var k = null !== d ? d.g: null,
                    l = null !== k ? k.ga: null;
                    if (null === g) if ("" !== c) null !== l ? (v && l.Rj === c && l.ie(b) && D.trace("Binding error: cannot have TwoWay Binding on node data key property: " + this.toString()), l.setDataProperty(b, c, h)) : D.Ua(b, c, h);
                    else {
                        if (null !== l && null !== d && 0 <= d.Au && null !== d.Q && Array.isArray(d.Q.Xk)) {
                            var m = d.Au,
                            n = d.Q.Xk;
                            l.sG(n, m);
                            l.WA(n, m, h)
                        }
                    } else try {
                        if ("" !== c) {
                            var p = g(h, b, l);
                            null !== l ? (v && (l.Rj === c && l.ie(b) && D.trace("Binding error: cannot have TwoWay Binding on node data key property: " + this.toString()), void 0 === p && D.trace('Binding warning: conversion function returned undefined when setting source property "' + c + '" on ' + b.toString() + ", function is: " + g)), l.setDataProperty(b, c, p)) : D.Ua(b, c, p)
                        } else p = g(h, b, l),
                        void 0 !== p && null !== l && null !== d && 0 <= d.Au && null !== d.Q && Array.isArray(d.Q.Xk) && (m = d.Au, n = d.Q.Xk, l.sG(n, m), l.WA(n, m, p))
                    } catch(q) {
                        v && D.trace("Binding error: " + q.toString() + ' setting source property "' + c + '" on ' + b.toString() + " with conversion function: " + g)
                    }
                } finally {
                    this.zz.remove(a)
                }
            }
        }
    };
    function xg() {
        this.oH = (new K(bg)).freeze();
        this.Xb = "";
        this.hD = !1
    }
    D.ja("Transaction", xg);
    xg.prototype.toString = function(a) {
        var b = "Transaction: " + this.name + " " + this.ag.count.toString() + (this.uu ? "": ", incomplete");
        if (void 0 !== a && 0 < a) {
            a = this.ag.count;
            for (var c = 0; c < a; c++) {
                var d = this.ag.ea(c);
                null !== d && (b += "\n  " + d.toString())
            }
        }
        return b
    };
    xg.prototype.clear = xg.prototype.clear = function() {
        var a = this.ag;
        a.Ya();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        a.freeze()
    };
    xg.prototype.canUndo = xg.prototype.canUndo = function() {
        return this.uu
    };
    xg.prototype.undo = xg.prototype.undo = function() {
        if (this.canUndo()) for (var a = this.ag.count - 1; 0 <= a; a--) {
            var b = this.ag.ea(a);
            null !== b && b.undo()
        }
    };
    xg.prototype.canRedo = xg.prototype.canRedo = function() {
        return this.uu
    };
    xg.prototype.redo = xg.prototype.redo = function() {
        if (this.canRedo()) for (var a = this.ag.count,
        b = 0; b < a; b++) {
            var c = this.ag.ea(b);
            null !== c && c.redo()
        }
    };
    D.w(xg, {
        ag: "changes"
    },
    function() {
        return this.oH
    });
    D.defineProperty(xg, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        this.Xb = a
    });
    D.defineProperty(xg, {
        uu: "isComplete"
    },
    function() {
        return this.hD
    },
    function(a) {
        this.hD = a
    });
    function og() {
        this.Pz = new L(M);
        this.mf = !1;
        this.sH = (new K(xg)).freeze();
        this.sh = -1;
        this.wD = 999;
        this.bj = !1;
        this.Kv = null;
        this.Sl = 0;
        this.ez = !1;
        v && (this.ez = !0);
        this.yh = (new K("string")).freeze();
        this.Ap = new K("number");
        this.Az = !0;
        this.Kz = !1
    }
    D.ja("UndoManager", og);
    og.prototype.toString = function(a) {
        for (var b = "UndoManager " + this.Hj + "<" + this.history.count + "<=" + this.cG,
        b = b + "[",
        c = this.hG.count,
        d = 0; d < c; d++) 0 < d && (b += " "),
        b += this.hG.ea(d);
        b += "]";
        if (void 0 !== a && 0 < a) for (c = this.history.count, d = 0; d < c; d++) b += "\n " + this.history.ea(d).toString(a - 1);
        return b
    };
    og.prototype.clear = og.prototype.clear = function() {
        var a = this.history;
        a.Ya();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        this.sh = -1;
        a.freeze();
        this.bj = !1;
        this.Kv = null;
        this.Sl = 0;
        this.yh.Ya();
        this.yh.clear();
        this.yh.freeze();
        this.Ap.clear()
    };
    og.prototype.addModel = og.prototype.MH = function(a) {
        this.Pz.add(a)
    };
    og.prototype.removeModel = og.prototype.WJ = function(a) {
        this.Pz.remove(a)
    };
    og.prototype.startTransaction = og.prototype.$b = function(a) {
        void 0 === a && (a = "");
        null === a && (a = "");
        if (this.nb) return ! 1; ! 0 === this.Az && (this.Az = !1, this.Sl++, this.pd("StartingFirstTransaction", a, this.Cj), 0 < this.Sl && this.Sl--);
        this.isEnabled && (this.yh.Ya(), this.yh.add(a), this.yh.freeze(), null === this.Cj ? this.Ap.add(0) : this.Ap.add(this.Cj.ag.count));
        this.Sl++;
        var b = 1 === this.Vh;
        b && this.pd("StartedTransaction", a, this.Cj);
        return b
    };
    og.prototype.commitTransaction = og.prototype.Td = function(a) {
        void 0 === a && (a = "");
        return mh(this, !0, a)
    };
    og.prototype.rollbackTransaction = og.prototype.Kq = function() {
        return mh(this, !1, "")
    };
    function mh(a, b, c) {
        if (a.nb) return ! 1;
        a.rA && 1 > a.Vh && D.trace("Ending transaction without having started a transaction: " + c);
        var d = 1 === a.Vh;
        d && b && a.pd("CommittingTransaction", c, a.Cj);
        var e = 0;
        if (0 < a.Vh && (a.Sl--, a.isEnabled)) {
            var g = a.yh.count;
            0 < g && ("" === c && (c = a.yh.ea(0)), a.yh.Ya(), a.yh.jd(g - 1), a.yh.freeze());
            g = a.Ap.count;
            0 < g && (e = a.Ap.ea(g - 1), a.Ap.jd(g - 1))
        }
        g = a.Cj;
        if (d) {
            if (b) {
                a.Kz = !1;
                if (a.isEnabled && null !== g) {
                    b = g;
                    b.uu = !0;
                    b.name = c;
                    d = a.history;
                    d.Ya();
                    for (e = d.count - 1; e > a.Hj; e--) g = d.ea(e),
                    null !== g && g.clear(),
                    d.jd(e),
                    a.Kz = !0;
                    e = a.cG;
                    0 === e && (e = 1);
                    0 < e && d.count >= e && (g = d.ea(0), null !== g && g.clear(), d.jd(0), a.sh--);
                    d.add(b);
                    a.sh++;
                    d.freeze();
                    g = b
                }
                a.pd("CommittedTransaction", c, g)
            } else {
                a.bj = !0;
                try {
                    a.isEnabled && null !== g && (g.uu = !0, g.undo())
                } finally {
                    a.pd("RolledBackTransaction", c, g),
                    a.bj = !1
                }
                null !== g && g.clear()
            }
            a.Kv = null;
            return ! 0
        }
        if (a.isEnabled && !b && null !== g) {
            a = e;
            c = g.ag;
            for (b = c.count - 1; b >= a; b--) d = c.ea(b),
            null !== d && d.undo(),
            c.Ya(),
            c.jd(b);
            c.freeze()
        }
        return ! 1
    }
    og.prototype.canUndo = og.prototype.canUndo = function() {
        if (!this.isEnabled || 0 < this.Vh || this.nb) return ! 1;
        var a = this.eH;
        return null !== a && a.canUndo() ? !0 : !1
    };
    og.prototype.undo = og.prototype.undo = function() {
        if (this.canUndo()) {
            var a = this.eH;
            try {
                this.pd("StartingUndo", "Undo", a),
                this.bj = !0,
                this.sh--,
                a.undo()
            } catch(b) {
                D.trace("undo error: " + b.toString())
            } finally {
                this.bj = !1,
                this.pd("FinishedUndo", "Undo", a)
            }
        }
    };
    og.prototype.canRedo = og.prototype.canRedo = function() {
        if (!this.isEnabled || 0 < this.Vh || this.nb) return ! 1;
        var a = this.dH;
        return null !== a && a.canRedo() ? !0 : !1
    };
    og.prototype.redo = og.prototype.redo = function() {
        if (this.canRedo()) {
            var a = this.dH;
            try {
                this.pd("StartingRedo", "Redo", a),
                this.bj = !0,
                this.sh++,
                a.redo()
            } catch(b) {
                D.trace("redo error: " + b.toString())
            } finally {
                this.bj = !1,
                this.pd("FinishedRedo", "Redo", a)
            }
        }
    };
    og.prototype.pd = function(a, b, c) {
        void 0 === c && (c = null);
        var d = new bg;
        d.Ic = dg;
        d.propertyName = a;
        d.object = c;
        d.oldValue = b;
        for (a = this.HJ; a.next();) b = a.value,
        d.ga = b,
        b.qx(d)
    };
    og.prototype.handleChanged = og.prototype.EF = function(a) {
        if (this.isEnabled && !this.nb && !this.skipsEvent(a)) {
            var b = this.Cj;
            null === b && (this.Kv = b = new xg);
            var c = a.copy(),
            b = b.ag;
            b.Ya();
            b.add(c);
            b.freeze();
            this.rA && 0 >= this.Vh && !this.Az && (a = a.g, null !== a && !1 === a.Zn || D.trace("Change not within a transaction: " + c.toString()))
        }
    };
    og.prototype.skipsEvent = function(a) {
        if (null === a || 0 > a.Ic.value) return ! 0;
        a = a.object;
        if (a instanceof P) {
            if (a = a.layer, null !== a && a.Tc) return ! 0
        } else if (a instanceof Rg && a.Tc) return ! 0;
        return ! 1
    };
    D.w(og, {
        HJ: "models"
    },
    function() {
        return this.Pz.j
    });
    D.defineProperty(og, {
        isEnabled: "isEnabled"
    },
    function() {
        return this.mf
    },
    function(a) {
        this.mf = a
    });
    D.w(og, {
        eH: "transactionToUndo"
    },
    function() {
        return 0 <= this.Hj && this.Hj <= this.history.count - 1 ? this.history.ea(this.Hj) : null
    });
    D.w(og, {
        dH: "transactionToRedo"
    },
    function() {
        return this.Hj < this.history.count - 1 ? this.history.ea(this.Hj + 1) : null
    });
    D.w(og, {
        nb: "isUndoingRedoing"
    },
    function() {
        return this.bj
    });
    D.w(og, {
        history: "history"
    },
    function() {
        return this.sH
    });
    D.defineProperty(og, {
        cG: "maxHistoryLength"
    },
    function() {
        return this.wD
    },
    function(a) {
        this.wD = a
    });
    D.w(og, {
        Hj: "historyIndex"
    },
    function() {
        return this.sh
    });
    D.w(og, {
        Cj: "currentTransaction"
    },
    function() {
        return this.Kv
    });
    D.w(og, {
        Vh: "transactionLevel"
    },
    function() {
        return this.Sl
    });
    D.w(og, {
        RF: "isInTransaction"
    },
    function() {
        return 0 < this.Sl
    });
    D.defineProperty(og, {
        rA: "checksTransactionLevel"
    },
    function() {
        return this.ez
    },
    function(a) {
        this.ez = a
    });
    D.w(og, {
        hG: "nestedTransactionNames"
    },
    function() {
        return this.yh
    });
    function oa() {
        0 < arguments.length && D.td(oa);
        D.tc(this);
        this.ba = null;
        this.tC = !1;
        this.OC = this.uC = !0;
        this.wC = this.xC = this.PC = this.yC = !1;
        this.Il = this.Zy = null;
        this.wE = 1.05;
        this.LC = 1;
        this.Lz = NaN;
        this.sD = null;
        this.lA = NaN;
        this.kA = Hd;
        this.sj = null
    }
    D.ja("CommandHandler", oa);
    var nh = null,
    Gh = "";
    oa.prototype.toString = function() {
        return "CommandHandler"
    };
    D.w(oa, {
        g: "diagram"
    },
    function() {
        return this.ba
    });
    oa.prototype.Xc = function(a) {
        v && null !== a && D.l(a, E, oa, "setDiagram");
        this.ba = a
    };
    oa.prototype.doKeyDown = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U,
            c = D.Vk ? b.Hu: b.control,
            d = b.shift,
            e = b.alt,
            g = b.key; ! c || "C" !== g && "Insert" !== g ? c && "X" === g || d && "Del" === g ? this.canCutSelection() && this.cutSelection() : c && "V" === g || d && "Insert" === g ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === g || e && d && "Backspace" === g ? this.canRedo() && this.redo() : c && "Z" === g || e && "Backspace" === g ? this.canUndo() && this.undo() : "Del" === g || "Backspace" === g ? this.canDeleteSelection() && this.deleteSelection() : c && "A" === g ? this.canSelectAll() && this.selectAll() : "Esc" === g ? this.canStopCommand() && this.stopCommand() : "Up" === g ? a.ze && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === g ? a.ze && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === g ? a.ye && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === g ? a.ye && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === g ? d && a.ye ? a.scroll("page", "left") : a.ze && a.scroll("page", "up") : "PageDown" === g ? d && a.ye ? a.scroll("page", "right") : a.ze && a.scroll("page", "down") : "Home" === g ? c && a.ze ? a.scroll("document", "up") : !c && a.ye && a.scroll("document", "left") : "End" === g ? c && a.ze ? a.scroll("document", "down") : !c && a.ye && a.scroll("document", "right") : " " === g ? this.canScrollToPart() && this.scrollToPart() : "Subtract" === g ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === g ? this.canIncreaseZoom() && this.increaseZoom() : c && "0" === g ? this.canResetZoom() && this.resetZoom() : d && "Z" === g ? this.canZoomToFit() && this.zoomToFit() : c && !d && "G" === g ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === g ? this.canUngroupSelection() && this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.event && 93 === b.event.which ? this.canShowContextMenu() && this.showContextMenu() : b.bubbles = !0 : this.canCopySelection() && this.copySelection()
        }
    };
    oa.prototype.doKeyUp = function() {
        var a = this.g;
        null !== a && (a.U.bubbles = !0)
    };
    oa.prototype.stopCommand = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.gb;
            b instanceof Hh && a.Bf && a.tx();
            null !== b && b.doCancel()
        }
    };
    oa.prototype.canStopCommand = function() {
        return ! 0
    };
    oa.prototype.selectAll = function() {
        var a = this.g;
        if (null !== a) {
            a.qa();
            try {
                a.jc = "wait";
                a.Ja("ChangingSelection");
                for (var b = a.Gi; b.next();) b.value.hb = !0;
                for (var c = a.ng; c.next();) c.value.hb = !0;
                for (var d = a.links; d.next();) d.value.hb = !0
            } finally {
                a.Ja("ChangedSelection"),
                a.jc = ""
            }
        }
    };
    oa.prototype.canSelectAll = function() {
        var a = this.g;
        return null !== a && a.Bf
    };
    oa.prototype.deleteSelection = function() {
        var a = this.g;
        if (null !== a && !a.Ja("SelectionDeleting", a.selection)) try {
            a.jc = "wait";
            a.$b("Delete");
            a.Ja("ChangingSelection");
            for (var b = new L(F), c = a.selection.j; c.next();) Ih(b, c.value, !0, this.pI ? Infinity: 0, this.bF,
            function(a) {
                return a.canDelete()
            });
            a.vB(b, !0);
            a.Ja("SelectionDeleted", b)
        } finally {
            a.Ja("ChangedSelection"),
            a.Td("Delete"),
            a.jc = ""
        }
    };
    oa.prototype.canDeleteSelection = function() {
        var a = this.g;
        return null === a || a.mb || a.Ff || !a.Bn || 0 === a.selection.count ? !1 : !0
    };
    function Ih(a, b, c, d, e, g) {
        void 0 === g && (g = null);
        if (! (a.contains(b) || null !== g && !g(b) || b instanceof da)) if (a.add(b), b instanceof G) {
            if (c && b instanceof I) for (var h = b.Mc; h.next();) Ih(a, h.value, c, d, e, g);
            if (e) for (h = b.Gd; h.next();) {
                var k = h.value;
                if (!a.contains(k)) {
                    var l = k.aa,
                    m = k.da;
                    null !== l && a.contains(l) && null !== m && a.contains(m) ? Ih(a, k, c, d, e, g) : null !== l && null !== m || Ih(a, k, c, d, e, g)
                }
            }
            if (1 < d) for (b = b.qF(); b.next();) Ih(a, b.value, c, d - 1, e, g)
        } else if (b instanceof J) for (b = b.If; b.next();) Ih(a, b.value, c, d, e, g)
    }
    oa.prototype.hq = function(a, b, c) {
        var d = new ma(F, F);
        for (a = a.j; a.next();) Jh(this, a.value, b, d, c);
        if (null !== b) {
            c = b.ga;
            a = !1;
            null !== b.kb.De && (a = b.kb.De.Ej);
            for (var e = new L(J), g = new ma(J, J), h = d.j; h.next();) {
                var k = h.value;
                if (k instanceof J) {
                    var l = k;
                    a || null !== l.aa && null !== l.da || e.add(l)
                } else if (c instanceof wg && k instanceof G && null !== k.data) {
                    var l = c,
                    m = k,
                    k = h.key,
                    n = k.mm();
                    null !== n && (n = d.oa(n), null !== n ? (l.Hi(m.data, l.Cb(n.data)), l = b.bg(m.data), k = k.Pn(), null !== k && null !== l && g.add(k, l)) : l.Hi(m.data, void 0))
                }
            }
            0 < e.count && b.vB(e, !1);
            if (0 < g.count) for (c = g.j; c.next();) d.add(c.key, c.value)
        }
        if (null !== b && null !== this.g && (b = b.ga, c = b.OH, null !== c)) {
            var p = new ma;
            d.each(function(a) {
                null !== a.key.data && p.add(a.key.data, a.value.data)
            });
            c(p, b, this.g.ga)
        }
        for (b = d.j; b.next();) b.value.Nb();
        return d
    };
    function Jh(a, b, c, d, e) {
        if (null === b || e && !b.canCopy()) return null;
        if (d.contains(b)) return d.oa(b);
        var g = null,
        h = b.data;
        if (null !== h && null !== c) {
            var k = c.ga;
            b instanceof J ? k instanceof Y && (h = k.vx(h), D.Ta(h) && (k.Qt(h), g = c.bg(h))) : (h = k.copyNodeData(h), D.Ta(h) && (k.Vl(h), g = c.Nh(h)))
        } else Kh(b),
        g = b.copy(),
        null !== g && (null !== c ? c.add(g) : null !== h && null !== a.g && a.hI && (k = a.g.ga, h = g instanceof J && k instanceof Y ? k.vx(h) : k.copyNodeData(h), D.Ta(h) && (g.data = h)));
        if (! (g instanceof F)) return null;
        g.hb = !1;
        g.Xg = !1;
        d.add(b, g);
        if (b instanceof G) {
            for (h = b.Gd; h.next();) {
                k = h.value;
                if (k.aa === b) {
                    var l = d.oa(k);
                    null !== l && (l.aa = g)
                }
                k.da === b && (l = d.oa(k), null !== l && (l.da = g))
            }
            if (b instanceof I && g instanceof I) for (h = g, b = b.Mc; b.next();) k = Jh(a, b.value, c, d, e),
            k instanceof J || null === k || (k.Pa = h)
        } else if (b instanceof J && g instanceof J) for (h = b.aa, null !== h && (h = d.oa(h), null !== h && (g.aa = h)), h = b.da, null !== h && (h = d.oa(h), null !== h && (g.da = h)), b = b.If; b.next();) h = Jh(a, b.value, c, d, e),
        null !== h && h instanceof G && (h.zc = g);
        return g
    }
    oa.prototype.copySelection = function() {
        var a = this.g;
        if (null !== a) {
            for (var b = new L(F), a = a.selection.j; a.next();) Ih(b, a.value, !0, this.kI ? Infinity: 0, this.iI,
            function(a) {
                return a.canCopy()
            });
            this.copyToClipboard(b)
        }
    };
    oa.prototype.canCopySelection = function() {
        var a = this.g;
        return null !== a && a.Kk && a.nA && 0 !== a.selection.count ? !0 : !1
    };
    oa.prototype.cutSelection = function() {
        this.copySelection();
        this.deleteSelection()
    };
    oa.prototype.canCutSelection = function() {
        var a = this.g;
        return null !== a && !a.mb && !a.Ff && a.Kk && a.Bn && a.nA && 0 !== a.selection.count ? !0 : !1
    };
    oa.prototype.copyToClipboard = function(a) {
        var b = this.g;
        if (null !== b) {
            var c = null;
            if (null === a) nh = null,
            Gh = "";
            else {
                var c = b.ga,
                d = !1,
                e = !1,
                g = null;
                try {
                    if (c instanceof wg) {
                        var h = c,
                        d = h.Jn;
                        h.Jn = this.TE
                    }
                    c instanceof Y && (h = c, e = h.In, h.In = this.SE);
                    g = b.hq(a, null, !0)
                } finally {
                    c instanceof wg && (c.Jn = d),
                    c instanceof Y && (c.In = e),
                    c = new K(F),
                    c.Rc(g),
                    nh = c,
                    Gh = b.ga.fm
                }
            }
            b.Ja("ClipboardChanged", c)
        }
    };
    oa.prototype.pasteFromClipboard = function() {
        var a = new L(F),
        b = nh;
        if (null === b) return a;
        var c = this.g;
        if (null === c || Gh !== c.ga.fm) return a;
        var d = c.ga,
        e = !1,
        g = !1,
        h = null;
        try {
            if (d instanceof wg) {
                var k = d,
                e = k.Jn;
                k.Jn = this.TE
            }
            d instanceof Y && (k = d, g = k.In, k.In = this.SE);
            h = c.hq(b, c, !1)
        } finally {
            for (d instanceof wg && (d.Jn = e), d instanceof Y && (d.In = g), b = h.j; b.next();) c = b.value,
            d = b.key,
            c.location.F() || (d.location.F() ? c.location = d.location: !c.position.F() && d.position.F() && (c.position = d.position)),
            a.add(c)
        }
        return a
    };
    oa.prototype.pasteSelection = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try {
            b.jc = "wait";
            b.$b("Paste");
            b.Ja("ChangingSelection");
            var c = this.pasteFromClipboard();
            0 < c.count && Lh(b);
            for (var d = c.j; d.next();) d.value.hb = !0;
            b.Ja("ChangedSelection");
            if (null !== a) {
                var e = b.computePartsBounds(b.selection);
                if (e.F()) {
                    var g = b.kb.De;
                    null === g && (g = new Mh, g.Xc(b));
                    var h = g.computeEffectiveCollection(b.selection);
                    g.moveParts(h, new O(a.x - e.na, a.y - e.va), !1)
                }
            }
            b.Ja("ClipboardPasted", c)
        } finally {
            b.Td("Paste"),
            b.jc = ""
        }
    };
    oa.prototype.canPasteSelection = function() {
        var a = this.g;
        return null === a || a.mb || a.Ff || !a.Zp || !a.nA || null === nh || Gh !== a.ga.fm ? !1 : !0
    };
    oa.prototype.undo = function() {
        var a = this.g;
        null !== a && a.ra.undo()
    };
    oa.prototype.canUndo = function() {
        var a = this.g;
        return null === a || a.mb || a.Ff ? !1 : a.FE && a.ra.canUndo()
    };
    oa.prototype.redo = function() {
        var a = this.g;
        null !== a && a.ra.redo()
    };
    oa.prototype.canRedo = function() {
        var a = this.g;
        return null === a || a.mb || a.Ff ? !1 : a.FE && a.ra.canRedo()
    };
    oa.prototype.decreaseZoom = function(a) {
        void 0 === a && (a = 1 / this.My);
        D.p(a, oa, "decreaseZoom:factor");
        var b = this.g;
        null !== b && b.am === Nh && (a *= b.scale, a < b.Qh || a > b.Ph || (b.scale = a))
    };
    oa.prototype.canDecreaseZoom = function(a) {
        void 0 === a && (a = 1 / this.My);
        D.p(a, oa, "canDecreaseZoom:factor");
        var b = this.g;
        if (null === b || b.am !== Nh) return ! 1;
        a *= b.scale;
        return a < b.Qh || a > b.Ph ? !1 : b.px
    };
    oa.prototype.increaseZoom = function(a) {
        void 0 === a && (a = this.My);
        D.p(a, oa, "increaseZoom:factor");
        var b = this.g;
        null !== b && b.am === Nh && (a *= b.scale, a < b.Qh || a > b.Ph || (b.scale = a))
    };
    oa.prototype.canIncreaseZoom = function(a) {
        void 0 === a && (a = this.My);
        D.p(a, oa, "canIncreaseZoom:factor");
        var b = this.g;
        if (null === b || b.am !== Nh) return ! 1;
        a *= b.scale;
        return a < b.Qh || a > b.Ph ? !1 : b.px
    };
    oa.prototype.resetZoom = function(a) {
        void 0 === a && (a = this.zx);
        D.p(a, oa, "resetZoom:newscale");
        var b = this.g;
        null === b || a < b.Qh || a > b.Ph || (b.scale = a)
    };
    oa.prototype.canResetZoom = function(a) {
        void 0 === a && (a = this.zx);
        D.p(a, oa, "canResetZoom:newscale");
        var b = this.g;
        return null === b || a < b.Qh || a > b.Ph ? !1 : b.px
    };
    oa.prototype.zoomToFit = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.scale,
            c = a.position;
            b === this.lA && !isNaN(this.Lz) && a.cd.O(this.kA) ? (a.scale = this.Lz, a.position = this.sD, this.lA = NaN, this.kA = Hd) : (this.Lz = b, this.sD = c.copy(), a.zoomToFit(), this.lA = a.scale, this.kA = a.cd.copy())
        }
    };
    oa.prototype.canZoomToFit = function() {
        var a = this.g;
        return null === a ? !1 : a.px
    };
    oa.prototype.scrollToPart = function(a) {
        void 0 === a && (a = null);
        null !== a && D.l(a, F, oa, "part");
        var b = this.g;
        if (null !== b) {
            if (null === a) {
                try {
                    null !== this.sj && (this.sj.next() ? a = this.sj.value: this.sj = null)
                } catch(c) {
                    this.sj = null
                }
                null === a && (0 < b.qm.count ? this.sj = b.qm.j: 0 < b.selection.count && (this.sj = b.selection.j), null !== this.sj && this.sj.next() && (a = this.sj.value))
            }
            if (null !== a) {
                var d = b.Xa;
                d.oo("Scroll To Part");
                var e = b.position.copy();
                b.VH(a.$);
                e.Sc(b.position) && d.Ii()
            }
        }
    };
    oa.prototype.canScrollToPart = function(a) {
        void 0 === a && (a = null);
        if (null !== a && !(a instanceof F)) return ! 1;
        a = this.g;
        return null === a || 0 === a.selection.count && 0 === a.qm.count ? !1 : a.ye && a.ze
    };
    oa.prototype.collapseTree = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try {
            b.$b("Collapse Tree");
            b.Xa.oo("Collapse Tree");
            var c = new K(G);
            if (null !== a && a.rd) a.collapseTree(),
            c.add(a);
            else for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof G && (a = e, a.rd && (a.collapseTree(), c.add(a)))
            }
            b.Ja("TreeCollapsed", c)
        } finally {
            b.Td("Collapse Tree")
        }
    };
    oa.prototype.canCollapseTree = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb) return ! 1;
        if (null !== a) {
            if (! (a instanceof G && a.rd)) return ! 1;
            if (0 < a.Jx().count) return ! 0
        } else for (a = b.selection.j; a.next();) if (b = a.value, b instanceof G && b.rd && 0 < b.Jx().count) return ! 0;
        return ! 1
    };
    oa.prototype.expandTree = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try {
            b.$b("Expand Tree");
            b.Xa.oo("Expand Tree");
            var c = new K(G);
            if (null === a || a.rd) for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof G && (a = e, a.rd || (a.expandTree(), c.add(a)))
            } else a.expandTree(),
            c.add(a);
            b.Ja("TreeExpanded", c)
        } finally {
            b.Td("Expand Tree")
        }
    };
    oa.prototype.canExpandTree = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb) return ! 1;
        if (null !== a) {
            if (! (a instanceof G) || a.rd) return ! 1;
            if (0 < a.Jx().count) return ! 0
        } else for (a = b.selection.j; a.next();) if (b = a.value, b instanceof G && !b.rd && 0 < b.Jx().count) return ! 0;
        return ! 1
    };
    oa.prototype.groupSelection = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.ga;
            if (b instanceof Y) {
                var c = this.GE;
                if (null !== c) {
                    var d = null;
                    try {
                        a.jc = "wait";
                        a.$b("Group");
                        a.Ja("ChangingSelection");
                        for (var e = new K(F), g = a.selection.j; g.next();) {
                            var h = g.value;
                            h.oe() && h.canGroup() && e.add(h)
                        }
                        for (var k = new K(F), l = e.j; l.next();) {
                            for (var m = l.value,
                            g = !1,
                            n = e.j; n.next();) if (m.Ei(n.value)) {
                                g = !0;
                                break
                            }
                            g || k.add(m)
                        }
                        if (0 < k.count) {
                            var p = k.first().Pa;
                            if (null !== p) for (; null !== p;) {
                                for (var e = !1,
                                q = k.j; q.next();) if (!q.value.Ei(p)) {
                                    e = !0;
                                    break
                                }
                                if (e) p = p.Pa;
                                else break
                            }
                            if (c instanceof I) Kh(c),
                            d = c.copy(),
                            null !== d && a.add(d);
                            else if (b.ZA(c)) {
                                var r = b.copyNodeData(c);
                                D.Ta(r) && (b.Vl(r), d = a.Ix(r))
                            }
                            if (null !== d) {
                                null !== p && this.isValidMember(p, d) && (d.Pa = p);
                                for (var s = k.j; s.next();) {
                                    var u = s.value;
                                    this.isValidMember(d, u) && (u.Pa = d)
                                }
                                a.select(d)
                            }
                        }
                        a.Ja("ChangedSelection");
                        a.Ja("SelectionGrouped", d)
                    } finally {
                        a.Td("Group"),
                        a.jc = ""
                    }
                }
            }
        }
    };
    oa.prototype.canGroupSelection = function() {
        var a = this.g;
        if (null === a || a.mb || a.Ff || !a.Zp || !a.kx || !(a.ga instanceof Y) || null === this.GE) return ! 1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.oe() && b.canGroup()) return ! 0
        }
        return ! 1
    };
    function Oh(a) {
        var b = D.tb();
        for (a = a.j; a.next();) {
            var c = a.value;
            c instanceof J || b.push(c)
        }
        a = new L(F);
        for (var c = b.length,
        d = 0; d < c; d++) {
            for (var e = b[d], g = !0, h = 0; h < c; h++) if (e.Ei(b[h])) {
                g = !1;
                break
            }
            g && a.add(e)
        }
        D.Aa(b);
        return a
    }
    oa.prototype.isValidMember = function(a, b) {
        if (null === b || a === b || b instanceof J) return ! 1;
        if (null !== a) {
            if (a === b || a.Ei(b)) return ! 1;
            var c = a.gB;
            if (null !== c && !c(a, b) || null === a.data && null !== b.data || null !== a.data && null === b.data) return ! 1
        }
        c = this.gB;
        return null !== c ? c(a, b) : !0
    };
    oa.prototype.ungroupSelection = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) {
            var c = b.ga;
            if (c instanceof Y) try {
                b.jc = "wait";
                b.$b("Ungroup");
                b.Ja("ChangingSelection");
                var d = new K(I);
                if (null !== a) d.add(a);
                else for (var e = b.selection.j; e.next();) {
                    var g = e.value;
                    g instanceof I && (a = g, a.canUngroup() && d.add(a))
                }
                if (0 < d.count) {
                    b.tx();
                    for (var h = d.j; h.next();) {
                        var k = h.value;
                        k.expandSubGraph();
                        var l = k.Pa,
                        m = null !== l && null !== l.data ? c.Cb(l.data) : void 0,
                        n = new K(F);
                        n.Rc(k.Mc);
                        for (var p = n.j; p.next();) {
                            var q = p.value;
                            q.hb = !0;
                            if (! (q instanceof J)) {
                                var r = q.data;
                                null !== r ? c.DB(r, m) : q.Pa = l
                            }
                        }
                        b.remove(k)
                    }
                }
                b.Ja("ChangedSelection");
                b.Ja("SelectionUngrouped", d, n)
            } finally {
                b.Td("Ungroup"),
                b.jc = ""
            }
        }
    };
    oa.prototype.canUngroupSelection = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb || b.Ff || !b.Bn || !b.ox || !(b.ga instanceof Y)) return ! 1;
        if (null !== a) {
            if (! (a instanceof I)) return ! 1;
            if (a.canUngroup()) return ! 0
        } else for (a = b.selection.j; a.next();) if (b = a.value, b instanceof I && b.canUngroup()) return ! 0;
        return ! 1
    };
    oa.prototype.addTopLevelParts = function(a, b) {
        for (var c = !0,
        d = Oh(a).j; d.next();) {
            var e = d.value;
            null !== e.Pa && (!b || this.isValidMember(null, e) ? e.Pa = null: c = !1)
        }
        return c
    };
    oa.prototype.collapseSubGraph = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try {
            b.$b("Collapse SubGraph");
            b.Xa.oo("Collapse SubGraph");
            var c = new K(I);
            if (null !== a && a.Je) a.collapseSubGraph(),
            c.add(a);
            else for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof I && (a = e, a.Je && (a.collapseSubGraph(), c.add(a)))
            }
            b.Ja("SubGraphCollapsed", c)
        } finally {
            b.Td("Collapse SubGraph")
        }
    };
    oa.prototype.canCollapseSubGraph = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb) return ! 1;
        if (null !== a) return a instanceof I && a.Je ? !0 : !1;
        for (a = b.selection.j; a.next();) if (b = a.value, b instanceof I && b.Je) return ! 0;
        return ! 1
    };
    oa.prototype.expandSubGraph = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try {
            b.$b("Expand SubGraph");
            b.Xa.oo("Expand SubGraph");
            var c = new K(I);
            if (null === a || a.Je) for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof I && (a = e, a.Je || (a.expandSubGraph(), c.add(a)))
            } else a.expandSubGraph(),
            c.add(a);
            b.Ja("SubGraphExpanded", c)
        } finally {
            b.Td("Expand SubGraph")
        }
    };
    oa.prototype.canExpandSubGraph = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb) return ! 1;
        if (null !== a) return a instanceof I && !a.Je ? !0 : !1;
        for (a = b.selection.j; a.next();) if (b = a.value, b instanceof I && !b.Je) return ! 0;
        return ! 1
    };
    oa.prototype.editTextBlock = function(a) {
        void 0 === a && (a = null);
        null !== a && D.l(a, na, oa, "editTextBlock");
        var b = this.g;
        if (null !== b) {
            var c = b.kb.MB;
            if (null !== c) {
                if (null === a) {
                    a = null;
                    for (var d = b.selection.j; d.next();) {
                        var e = d.value;
                        if (e.canEdit()) {
                            a = e;
                            break
                        }
                    }
                    if (null === a) return;
                    a = a.gu(function(a) {
                        return a instanceof na && a.FA
                    })
                }
                null !== a && (b.gb = null, c.ih = a, b.gb = c)
            }
        }
    };
    oa.prototype.canEditTextBlock = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.mb || b.Ff || !b.nx || null === b.kb.MB) return ! 1;
        if (null !== a) {
            if (! (a instanceof na)) return ! 1;
            a = a.Y;
            if (null !== a && a.canEdit()) return ! 0
        } else for (b = b.selection.j; b.next();) if (a = b.value, a.canEdit() && (a = a.gu(function(a) {
            return a instanceof na && a.FA
        }), null !== a)) return ! 0;
        return ! 1
    };
    oa.prototype.showContextMenu = function(a) {
        var b = this.g;
        if (null !== b) {
            var c = b.kb.vA;
            if (null !== c && (void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b), a = c.findObjectWithContextMenu(a), null !== a)) {
                var d = new Zf,
                e = null;
                a instanceof P ? e = a.eb(gc) : b.iJ || (e = b.xb, e = new O(e.x + e.width / 2, e.y + e.height / 2));
                null !== e && (d.g = b, d.qe = b.TB(e), d.ha = e, d.left = !1, d.right = !0, d.up = !0, b.U = d);
                b.gb = c;
                Ph(c, !1, a)
            }
        }
    };
    oa.prototype.canShowContextMenu = function(a) {
        var b = this.g;
        if (null === b) return ! 1;
        var c = b.kb.vA;
        if (null === c) return ! 1;
        void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b);
        return null === c.findObjectWithContextMenu(a) ? !1 : !0
    };
    D.defineProperty(oa, {
        hI: "copiesClipboardData"
    },
    function() {
        return this.tC
    },
    function(a) {
        D.h(a, "boolean", oa, "copiesClipboardData");
        this.tC = a
    });
    D.defineProperty(oa, {
        iI: "copiesConnectedLinks"
    },
    function() {
        return this.uC
    },
    function(a) {
        D.h(a, "boolean", oa, "copiesConnectedLinks");
        this.uC = a
    });
    D.defineProperty(oa, {
        bF: "deletesConnectedLinks"
    },
    function() {
        return this.OC
    },
    function(a) {
        D.h(a, "boolean", oa, "deletesConnectedLinks");
        this.OC = a
    });
    D.defineProperty(oa, {
        kI: "copiesTree"
    },
    function() {
        return this.yC
    },
    function(a) {
        D.h(a, "boolean", oa, "copiesTree");
        this.yC = a
    });
    D.defineProperty(oa, {
        pI: "deletesTree"
    },
    function() {
        return this.PC
    },
    function(a) {
        D.h(a, "boolean", oa, "deletesTree");
        this.PC = a
    });
    D.defineProperty(oa, {
        TE: "copiesParentKey"
    },
    function() {
        return this.xC
    },
    function(a) {
        D.h(a, "boolean", oa, "copiesParentKey");
        this.xC = a
    });
    D.defineProperty(oa, {
        SE: "copiesGroupKey"
    },
    function() {
        return this.wC
    },
    function(a) {
        D.h(a, "boolean", oa, "copiesGroupKey");
        this.wC = a
    });
    D.defineProperty(oa, {
        GE: "archetypeGroupData"
    },
    function() {
        return this.Zy
    },
    function(a) {
        null !== a && D.l(a, Object, oa, "archetypeGroupData");
        var b = this.g;
        null !== b && (b = b.ga, b instanceof Y && (a instanceof I || b.ZA(a) || D.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: " + a)));
        this.Zy = a
    });
    D.defineProperty(oa, {
        gB: "memberValidation"
    },
    function() {
        return this.Il
    },
    function(a) {
        null !== a && D.h(a, "function", oa, "memberValidation");
        this.Il = a
    });
    D.defineProperty(oa, {
        zx: "defaultScale"
    },
    function() {
        return this.LC
    },
    function(a) {
        D.p(a, oa, "defaultScale");
        0 < a || D.k("defaultScale must be larger than zero, not: " + a);
        this.LC = a
    });
    D.defineProperty(oa, {
        My: "zoomFactor"
    },
    function() {
        return this.wE
    },
    function(a) {
        D.p(a, oa, "zoomFactor");
        1 < a || D.k("zoomFactor must be larger than 1.0, not: " + a);
        this.wE = a
    });
    oa.prototype.Bt = function(a) {
        if (null !== a) for (a = a.j; a.next();) {
            var b = a.key;
            b instanceof J && (b.Wj = !0)
        }
    };
    oa.prototype.Hp = function(a) {
        if (null !== a) for (a = a.j; a.next();) {
            var b = a.key;
            b instanceof J && (b.Wj = !1, Qh(b) && b.fc())
        }
    };
    function Sg() {
        0 < arguments.length && D.td(Sg);
        D.tc(this);
        this.ba = null;
        this.Xb = "";
        this.mf = !0;
        this.fD = !1;
        this.qE = null;
        this.gx = -1
    }
    D.ja("Tool", Sg);
    Sg.prototype.Xc = function(a) {
        v && null !== a && D.l(a, E, Sg, "setDiagram");
        this.ba = a
    };
    Sg.prototype.toString = function() {
        return "" !== this.name ? this.name + " Tool": D.qf(Object.getPrototypeOf(this))
    };
    Sg.prototype.updateAdornments = function() {};
    Sg.prototype.canStart = function() {
        return this.isEnabled
    };
    Sg.prototype.doStart = function() {};
    Sg.prototype.doActivate = function() {
        this.wa = !0
    };
    Sg.prototype.doDeactivate = function() {
        this.wa = !1
    };
    Sg.prototype.doStop = function() {};
    Sg.prototype.doCancel = function() {
        this.stopTool()
    };
    Sg.prototype.stopTool = function() {
        var a = this.g;
        null !== a && a.gb === this && (a.gb = null, a.jc = "")
    };
    Sg.prototype.doMouseDown = function() { ! this.wa && this.canStart() && this.doActivate()
    };
    Sg.prototype.doMouseMove = function() {};
    Sg.prototype.doMouseUp = function() {
        this.stopTool()
    };
    Sg.prototype.doMouseWheel = function() {};
    Sg.prototype.canStartMultiTouch = function() {
        return ! 0
    };
    Sg.prototype.standardPinchZoomStart = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U,
            c = b.Mx(0, D.Fb(NaN, NaN)),
            d = b.Mx(1, D.Fb(NaN, NaN));
            if (c.F() && d.F() && (this.doCancel(), a.pu("hasGestureZoom"))) {
                a.GD = a.scale;
                var e = d.x - c.x,
                g = d.y - c.y;
                a.ZD = Math.sqrt(e * e + g * g);
                b.bubbles = !1
            }
            D.A(c);
            D.A(d)
        }
    };
    Sg.prototype.standardPinchZoomMove = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U,
            c = b.Mx(0, D.Fb(NaN, NaN)),
            d = b.Mx(1, D.Fb(NaN, NaN));
            if (c.F() && d.F() && (this.doCancel(), a.pu("hasGestureZoom"))) {
                var e = d.x - c.x,
                g = d.y - c.y,
                g = Math.sqrt(e * e + g * g) / a.ZD,
                e = new O((Math.min(d.x, c.x) + Math.max(d.x, c.x)) / 2, (Math.min(d.y, c.y) + Math.max(d.y, c.y)) / 2),
                g = a.GD * g,
                h = a.wb;
                if (g !== a.scale && h.canResetZoom(g)) {
                    var k = a.Fm;
                    a.Fm = e;
                    h.resetZoom(g);
                    a.Fm = k
                }
                b.bubbles = !1
            }
            D.A(c);
            D.A(d)
        }
    };
    Sg.prototype.doKeyDown = function() {
        var a = this.g;
        null !== a && "Esc" === a.U.key && this.doCancel()
    };
    Sg.prototype.doKeyUp = function() {};
    Sg.prototype.startTransaction = Sg.prototype.$b = function(a) {
        void 0 === a && (a = this.name);
        this.Pf = null;
        var b = this.g;
        return null === b ? !1 : b.$b(a)
    };
    Sg.prototype.stopTransaction = Sg.prototype.bl = function() {
        var a = this.g;
        return null === a ? !1 : null === this.Pf ? a.Kq() : a.Td(this.Pf)
    };
    Sg.prototype.standardMouseSelect = function() {
        var a = this.g;
        if (null !== a && a.Bf) {
            var b = a.U,
            c = a.iu(b.ha, !1);
            if (null !== c) if (D.Vk ? b.Hu: b.control) {
                a.Ja("ChangingSelection");
                for (b = c; null !== b && !b.canSelect();) b = b.Pa;
                null !== b && (b.hb = !b.hb);
                a.Ja("ChangedSelection")
            } else if (b.shift) {
                if (!c.hb) {
                    a.Ja("ChangingSelection");
                    for (b = c; null !== b && !b.canSelect();) b = b.Pa;
                    null !== b && (b.hb = !0);
                    a.Ja("ChangedSelection")
                }
            } else {
                if (!c.hb) {
                    for (b = c; null !== b && !b.canSelect();) b = b.Pa;
                    null !== b && a.select(b)
                }
            } else ! b.left || (D.Vk ? b.Hu: b.control) || b.shift || a.tx()
        }
    };
    Sg.prototype.standardMouseClick = function(a, b) {
        void 0 === a && (a = null);
        void 0 === b && (b = function(a) {
            return ! a.layer.Tc
        });
        var c = this.g;
        if (null === c) return ! 1;
        var d = c.U,
        e = c.Ge(d.ha, a, b);
        d.We = e;
        Rh(e, d, c);
        return d.Lc
    };
    function Rh(a, b, c) {
        b.Lc = !1;
        if (null === a || a.vu()) {
            var d = 0;
            b.left ? d = 1 === b.Oe ? 1 : 2 === b.Oe ? 2 : 1 : b.right && 1 === b.Oe && (d = 3);
            var e = "";
            if (null !== a) {
                switch (d) {
                case 1:
                    e = "ObjectSingleClicked";
                    break;
                case 2:
                    e = "ObjectDoubleClicked";
                    break;
                case 3:
                    e = "ObjectContextClicked"
                }
                0 !== d && c.Ja(e, a)
            } else {
                switch (d) {
                case 1:
                    e = "BackgroundSingleClicked";
                    break;
                case 2:
                    e = "BackgroundDoubleClicked";
                    break;
                case 3:
                    e = "BackgroundContextClicked"
                }
                0 !== d && c.Ja(e)
            }
            if (null !== a) for (; null !== a;) {
                c = null;
                switch (d) {
                case 1:
                    c = a.click;
                    break;
                case 2:
                    c = a.du ? a.du: a.click;
                    break;
                case 3:
                    c = a.uA
                }
                if (null !== c && (c(b, a), b.Lc)) break;
                a = a.Q
            } else {
                a = null;
                switch (d) {
                case 1:
                    a = c.click;
                    break;
                case 2:
                    a = c.du ? c.du: c.click;
                    break;
                case 3:
                    a = c.uA
                }
                null !== a && a(b)
            }
        }
    }
    Sg.prototype.standardMouseOver = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            if (null !== b.g && !0 !== a.Xa.vc) {
                var c = a.Eb;
                a.Eb = !0;
                var d = a.Ge(b.ha, null, null);
                b.We = d;
                var e = !1;
                if (d !== a.Qo) {
                    var g = a.Qo,
                    h = g;
                    a.Qo = d;
                    this.doCurrentObjectChanged(g, d);
                    for (b.Lc = !1; null !== g;) {
                        var k = g.Ju;
                        if (null !== k) {
                            if (d === g) break;
                            if (null !== d && d.tm(g)) break;
                            k(b, g, d);
                            e = !0;
                            if (b.Lc) break
                        }
                        g = g.Q
                    }
                    g = h;
                    for (b.Lc = !1; null !== d;) {
                        k = d.Iu;
                        if (null !== k) {
                            if (g === d) break;
                            if (null !== g && g.tm(d)) break;
                            k(b, d, g);
                            e = !0;
                            if (b.Lc) break
                        }
                        d = d.Q
                    }
                    d = a.Qo
                }
                if (null !== d) {
                    g = d;
                    for (h = ""; null !== g;) {
                        h = g.cursor;
                        if ("" !== h) break;
                        g = g.Q
                    }
                    a.jc = h;
                    b.Lc = !1;
                    for (g = d; null !== g;) {
                        d = g.kB;
                        if (null !== d && (d(b, g), e = !0, b.Lc)) break;
                        g = g.Q
                    }
                } else a.jc = "",
                d = a.kB,
                null !== d && (d(b), e = !0);
                e && a.Se();
                a.Eb = c
            }
        }
    };
    Sg.prototype.doCurrentObjectChanged = function() {};
    Sg.prototype.standardMouseWheel = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U,
            c = b.hm;
            if (0 !== c && a.cd.F()) {
                var d = a.wb,
                e = a.kb.Ku;
                if ((e === Sh && !b.shift || e === Th && b.control) && (0 < c ? d.canIncreaseZoom() : d.canDecreaseZoom())) e = a.Fm,
                a.Fm = b.qe,
                0 < c ? d.increaseZoom() : d.decreaseZoom(),
                a.Fm = e,
                b.bubbles = !1;
                else if (e === Sh && b.shift || e === Th && !b.control) {
                    var d = a.position.copy(),
                    e = 0 < c ? c: -c,
                    g = b.event.deltaX,
                    h = b.event.deltaY;
                    void 0 === g || void 0 === h || 0 === g && 0 === h || b.shift ? !b.shift && a.ze ? (g = a.Yu, e = e / 40 * g, 0 < c ? a.scroll("pixel", "up", e) : a.scroll("pixel", "down", e)) : b.shift && a.ye && (g = a.Xu, e = e / 40 * g, 0 < c ? a.scroll("pixel", "left", e) : a.scroll("pixel", "right", e)) : (0 !== g && a.ye && (0 < g ? a.scroll("pixel", "left", -g) : a.scroll("pixel", "right", g)), 0 !== h && a.ze && (0 < h ? a.scroll("pixel", "up", -h) : a.scroll("pixel", "down", h)));
                    a.position.O(d) || (b.bubbles = !1)
                }
            }
        }
    };
    Sg.prototype.standardWaitAfter = function(a, b) {
        D.h(a, "number", Sg, "standardWaitAfter:delay");
        this.cancelWaitAfter();
        var c = this,
        d = b.copy();
        this.gx = D.setTimeout(function() {
            c.doWaitAfter(d)
        },
        a)
    };
    Sg.prototype.cancelWaitAfter = function() { - 1 !== this.gx && D.clearTimeout(this.gx);
        this.gx = -1
    };
    Sg.prototype.doWaitAfter = function() {};
    Sg.prototype.findToolHandleAt = function(a, b) {
        var c = this.g;
        if (null === c) return null;
        c = c.Ge(a,
        function(a) {
            for (; null !== a && !(a.Q instanceof da);) a = a.Q;
            return a
        });
        return null === c ? null: c.Y.Dd === b ? c: null
    };
    Sg.prototype.isBeyondDragSize = function(a, b) {
        var c = this.g;
        if (null === c) return ! 1;
        void 0 === a && (a = c.Kc.qe);
        void 0 === b && (b = c.U.qe);
        var d = c.kb.tI,
        e = d.width,
        d = d.height;
        c.Kc.Lj && (e += 6, d += 6);
        return Math.abs(b.x - a.x) > e || Math.abs(b.y - a.y) > d
    };
    D.w(Sg, {
        g: "diagram"
    },
    function() {
        return this.ba
    });
    D.defineProperty(Sg, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        D.h(a, "string", Sg, "name");
        this.Xb = a
    });
    D.defineProperty(Sg, {
        isEnabled: "isEnabled"
    },
    function() {
        return this.mf
    },
    function(a) {
        D.h(a, "boolean", Sg, "isEnabled");
        this.mf = a
    });
    D.defineProperty(Sg, {
        wa: "isActive"
    },
    function() {
        return this.fD
    },
    function(a) {
        D.h(a, "boolean", Sg, "isActive");
        this.fD = a
    });
    D.defineProperty(Sg, {
        Pf: "transactionResult"
    },
    function() {
        return this.qE
    },
    function(a) {
        null !== a && D.h(a, "string", Sg, "transactionResult");
        this.qE = a
    });
    function Mh() {
        Sg.call(this);
        0 < arguments.length && D.td(Mh);
        this.name = "Dragging";
        this.vC = this.jD = !0;
        this.fs = this.VC = !1;
        this.nD = !0;
        this.Bz = (new Ca(NaN, NaN)).freeze();
        this.Cz = cc;
        this.Dz = (new O(NaN, NaN)).freeze();
        this.UC = !1;
        this.SC = this.sC = this.TC = this.DC = this.qj = null;
        this.Mr = this.lD = !1;
        this.Pp = new O(NaN, NaN);
        this.Uw = new O;
        this.Xw = !1;
        this.iD = !0;
        this.Wo = 100;
        this.ek = [];
        this.rH = (new L(F)).freeze()
    }
    D.Sa(Mh, Sg);
    D.ja("DraggingTool", Mh);
    D.defineProperty(Mh, {
        MF: "isCopyEnabled"
    },
    function() {
        return this.jD
    },
    function(a) {
        D.h(a, "boolean", Mh, "isCopyEnabled");
        this.jD = a
    });
    D.defineProperty(Mh, {
        jI: "copiesEffectiveCollection"
    },
    function() {
        return this.vC
    },
    function(a) {
        D.h(a, "boolean", Mh, "copiesEffectiveCollection");
        this.vC = a
    });
    D.defineProperty(Mh, {
        uI: "dragsTree"
    },
    function() {
        return this.VC
    },
    function(a) {
        D.h(a, "boolean", Mh, "dragsTree");
        this.VC = a
    });
    D.defineProperty(Mh, {
        Tx: "isGridSnapEnabled"
    },
    function() {
        return this.fs
    },
    function(a) {
        D.h(a, "boolean", Mh, "isGridSnapEnabled");
        this.fs = a
    });
    D.defineProperty(Mh, {
        dJ: "isComplexRoutingRealtime"
    },
    function() {
        return this.iD
    },
    function(a) {
        D.h(a, "boolean", Mh, "isComplexRoutingRealtime");
        this.iD = a
    });
    D.defineProperty(Mh, {
        fJ: "isGridSnapRealtime"
    },
    function() {
        return this.nD
    },
    function(a) {
        D.h(a, "boolean", Mh, "isGridSnapRealtime");
        this.nD = a
    });
    D.defineProperty(Mh, {
        CF: "gridSnapCellSize"
    },
    function() {
        return this.Bz
    },
    function(a) {
        D.l(a, Ca, Mh, "gridSnapCellSize");
        this.Bz.O(a) || (this.Bz = a = a.V())
    });
    D.defineProperty(Mh, {
        QI: "gridSnapCellSpot"
    },
    function() {
        return this.Cz
    },
    function(a) {
        D.l(a, R, Mh, "gridSnapCellSpot");
        this.Cz.O(a) || (this.Cz = a = a.V())
    });
    D.defineProperty(Mh, {
        RI: "gridSnapOrigin"
    },
    function() {
        return this.Dz
    },
    function(a) {
        D.l(a, O, Mh, "gridSnapOrigin");
        this.Dz.O(a) || (this.Dz = a = a.V())
    });
    D.defineProperty(Mh, {
        Ej: "dragsLink"
    },
    function() {
        return this.UC
    },
    function(a) {
        D.h(a, "boolean", Mh, "dragsLink");
        this.UC = a
    });
    D.defineProperty(Mh, {
        Ln: "currentPart"
    },
    function() {
        return this.DC
    },
    function(a) {
        null !== a && D.l(a, F, Mh, "currentPart");
        this.DC = a
    });
    D.defineProperty(Mh, {
        ic: "copiedParts"
    },
    function() {
        return this.sC
    },
    function(a) {
        this.sC = a
    });
    D.defineProperty(Mh, {
        ec: "draggedParts"
    },
    function() {
        return this.TC
    },
    function(a) {
        this.TC = a
    });
    D.w(Mh, {
        vL: "draggingParts"
    },
    function() {
        return null !== this.ic ? this.ic.Yj() : null !== this.ec ? this.ec.Yj() : this.rH
    });
    D.defineProperty(Mh, {
        qd: "draggedLink"
    },
    function() {
        return this.SC
    },
    function(a) {
        null !== a && D.l(a, J, Mh, "draggedLink");
        this.SC = a
    });
    D.defineProperty(Mh, {
        Sx: "isDragOutStarted"
    },
    function() {
        return this.lD
    },
    function(a) {
        this.lD = a
    });
    D.defineProperty(Mh, {
        al: "startPoint"
    },
    function() {
        return this.Uw
    },
    function(a) {
        D.l(a, O, Mh, "startPoint");
        this.Uw.O(a) || (this.Uw = a = a.V())
    });
    D.defineProperty(Mh, {
        XE: "delay"
    },
    function() {
        return this.Wo
    },
    function(a) {
        D.h(a, "number", Mh, "delay");
        this.Wo = a
    });
    Mh.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || a.mb && !a.Ut || !a.Yl && !a.Kk && !a.Ut || !a.Bf) return ! 1;
        var b = a.U;
        return ! b.left || a.gb !== this && (!this.isBeyondDragSize() || b.Lj && b.timestamp - a.Kc.timestamp < this.Wo) ? !1 : null !== this.findDraggablePart()
    };
    Mh.prototype.findDraggablePart = function() {
        var a = this.g;
        if (null === a) return null;
        a = a.iu(a.Kc.ha, !1);
        if (null === a) return null;
        for (; null !== a && !a.canSelect();) a = a.Pa;
        return null !== a && (a.canMove() || a.canCopy()) ? a: null
    };
    Mh.prototype.standardMouseSelect = function() {
        var a = this.g;
        if (null !== a && a.Bf) {
            var b = a.iu(a.Kc.ha, !1);
            if (null !== b) {
                for (; null !== b && !b.canSelect();) b = b.Pa;
                this.Ln = b;
                this.Ln.hb || (a.Ja("ChangingSelection"), b = a.U, (D.Vk ? b.Hu: b.control) || b.shift || Lh(a), this.Ln.hb = !0, a.Ja("ChangedSelection"))
            }
        }
    };
    Mh.prototype.doActivate = function() {
        var a = this.g;
        if (null !== a) {
            null === this.Ln && this.standardMouseSelect();
            var b = this.Ln;
            null !== b && (b.canMove() || b.canCopy()) && (this.wa = !0, this.Pp.set(a.position), Uh(this, a.selection), this.ek.length = 0, this.ec = this.computeEffectiveCollection(a.selection), a.cv = !0, this.Bt(this.ec), this.$b("Drag"), this.al = a.Kc.ha, a.jf = !0, a.Ut && (this.Sx = !0, this.Mr = !1, Vh = this, Wh = this.g, this.doSimulatedDragOut()))
        }
    };
    function Uh(a, b) {
        if (a.Ej) {
            var c = a.g;
            null !== c && c.Cn && (c.ga instanceof Y && 1 === b.count && b.first() instanceof J ? (a.qd = b.first(), a.qd.canRelinkFrom() && a.qd.canRelinkTo() && a.qd.Zt(), a.qj = c.kb.rG, null === a.qj && (a.qj = new Xh, a.qj.Xc(c))) : (a.qd = null, a.qj = null))
        }
    }
    Mh.prototype.computeEffectiveCollection = function(a) {
        var b = null !== this.g && this.g.gb === this,
        c = new ma(F);
        if (null === a) return c;
        for (var d = a.j; d.next();) Yh(this, c, d.value, b);
        if (null !== this.qd && this.Ej) return c;
        for (d = a.j; d.next();) a = d.value,
        a instanceof J && (b = a.aa, null === b || c.contains(b) ? (b = a.da, null === b || c.contains(b) || c.remove(a)) : c.remove(a));
        return c
    };
    function ki(a) {
        return void 0 === a ? new xi(Gd) : new xi(a.copy())
    }
    function Yh(a, b, c, d) {
        if (!b.contains(c) && (!d || c.canMove() || c.canCopy())) if (c instanceof G) {
            b.add(c, ki(c.location));
            if (c instanceof I) for (var e = c.Mc; e.next();) Yh(a, b, e.value, d);
            for (e = c.Gd; e.next();) {
                var g = e.value;
                if (!b.contains(g)) {
                    var h = g.aa,
                    k = g.da;
                    null !== h && b.contains(h) && null !== k && b.contains(k) && Yh(a, b, g, d)
                }
            }
            if (a.uI) for (c = c.qF(); c.next();) Yh(a, b, c.value, d)
        } else if (c instanceof J) for (g = c, b.add(g, ki()), c = g.If; c.next();) Yh(a, b, c.value, d);
        else c instanceof da || b.add(c, ki(c.location))
    }
    Mh.prototype.doDeactivate = function() {
        this.wa = !1;
        var a = this.g;
        null !== a && yi(a);
        zi(this);
        this.Hp(this.ec);
        this.ec = this.Ln = null;
        this.Mr = this.Sx = !1;
        if (0 < Ai.count) {
            for (var b = Ai.length,
            c = 0; c < b; c++) {
                var d = Ai.ea(c);
                Bi(d);
                Ci(d);
                zi(d);
                null !== d.g && yi(d.g)
            }
            Ai.clear()
        }
        Bi(this);
        this.Pp.m(NaN, NaN);
        Vh = Wh = null;
        Ci(this);
        a.jf = !1;
        a.jc = "";
        a.cv = !1;
        this.bl()
    };
    function zi(a) {
        var b = a.g;
        if (null !== b) {
            var c = b.Eb;
            b.Eb = !0;
            Di(a, b.U, null);
            b.Eb = c
        }
        a.ek.length = 0
    }
    function Ei() {
        var a = Vh;
        Ci(a);
        Fi(a);
        var b = a.g;
        null !== b && a.Pp.F() && (b.position = a.Pp);
        null !== b && yi(b)
    }
    Mh.prototype.doCancel = function() {
        Ci(this);
        Fi(this);
        var a = this.g;
        null !== a && this.Pp.F() && (a.position = this.Pp);
        this.stopTool()
    };
    Mh.prototype.Bt = function(a) {
        if (null !== a) for (this.Xw = !0, a = a.j; a.next();) {
            var b = a.key;
            b instanceof J && (b.Wj = !0)
        }
    };
    Mh.prototype.Hp = function(a) {
        if (null !== a) {
            for (a = a.j; a.next();) {
                var b = a.key;
                b instanceof J && (b.Wj = !1, Qh(b) && b.fc())
            }
            this.Xw = !1
        }
    };
    Mh.prototype.doKeyDown = function() {
        var a = this.g;
        null !== a && (a = a.U, null !== a && this.wa && ("Esc" === a.key ? this.doCancel() : this.doMouseMove()))
    };
    Mh.prototype.doKeyUp = function() {
        var a = this.g;
        null !== a && null !== a.U && this.wa && this.doMouseMove()
    };
    function Gi(a, b) {
        for (var c = Infinity,
        d = Infinity,
        e = -Infinity,
        g = -Infinity,
        h = a.j; h.next();) {
            var k = h.value;
            if (k.oe() && k.isVisible()) {
                var l = k.location,
                k = l.x,
                l = l.y;
                isNaN(k) || isNaN(l) || (k < c && (c = k), l < d && (d = l), k > e && (e = k), l > g && (g = l))
            }
        }
        Infinity === c ? b.m(0, 0, 0, 0) : b.m(c, d, e - c, g - d)
    }
    function Hi(a, b) {
        if (null === a.ic) {
            var c = a.g;
            if (! (null === c || b && (c.mb || c.Ff)) && null !== a.ec) {
                var d = c.ra;
                d.isEnabled && d.RF ? null !== d.Cj && 0 < d.Cj.ag.count && (c.ra.Kq(), c.$b("Drag")) : Fi(a);
                c.Eb = !b;
                c.br = !b;
                a.al = c.Kc.ha;
                d = a.jI ? a.ec.Yj() : c.selection;
                d = c.hq(d, c, !0);
                for (c = d.j; c.next();) c.value.location = c.key.location;
                c = D.Nf();
                Gi(d, c);
                D.Mb(c);
                for (var c = new ma(F), e = a.ec.j; e.next();) {
                    var g = e.key;
                    g.oe() && g.canCopy() && (g = d.oa(g), null !== g && (g.hf(), c.add(g, ki(g.location))))
                }
                for (d = d.j; d.next();) e = d.value,
                e instanceof J && e.canCopy() && c.add(e, ki());
                a.ic = c;
                Uh(a, c.Yj());
                null !== a.qd && (c = a.qd, d = c.qo, c.wm(a.al.x - (d.x + d.width / 2), a.al.y - (d.y + d.height / 2)))
            }
        }
    }
    function Ci(a) {
        var b = a.g;
        if (null !== b) {
            if (null !== a.ic && (b.vB(a.ic.Yj(), !1), a.ic = null, null !== a.ec)) for (var c = a.ec.j; c.next();) c.key instanceof J && (c.value.point = new O(0, 0));
            b.Eb = !1;
            b.br = !1;
            a.al = b.Kc.ha
        }
    }
    function Bi(a) {
        if (null !== a.qd) {
            if (a.Ej && null !== a.qj) {
                var b = a.qj;
                null !== b.g && (b.g.remove(b.ae), b.g.remove(b.be))
            }
            a.qd = null;
            a.qj = null
        }
    }
    function Ii(a, b, c) {
        var d = a.g;
        if (null !== d) {
            var e = a.al,
            g = D.P();
            g.assign(d.U.ha);
            a.moveParts(b, g.vo(e), c);
            D.A(g)
        }
    }
    Mh.prototype.moveParts = function(a, b, c) {
        if (null !== a && (D.l(a, ma, Mh, "moveParts:parts"), 0 !== a.count)) {
            var d = D.P(),
            e = D.P();
            e.assign(b);
            isNaN(e.x) && (e.x = 0);
            isNaN(e.y) && (e.y = 0); (b = this.Xw) || this.Bt(a);
            for (var g = new K(Ji), h = new K(Ra), k = a.j; k.next();) {
                var l = k.key;
                if (l.oe()) {
                    var m = Ki(this, l, a);
                    if (null !== m) g.add(new Ji(l, k.value, m));
                    else if (!c || l.canMove()) {
                        m = k.value.point;
                        d.assign(m);
                        var n = D.P(),
                        p = this.computeMove(l, d.add(e), a, n);
                        l.location = p;
                        k.value.RG = n.vo(m);
                        D.A(n)
                    }
                } else k.key instanceof J && h.add(k.bb)
            }
            for (c = g.j; c.next();) g = c.value,
            m = g.info.point,
            d.assign(m),
            g.Vc.location = d.add(g.SI.RG);
            c = D.P();
            m = D.P();
            for (h = h.j; h.next();) if (k = h.value, g = k.key, g instanceof J) if (g.Wj) l = g.aa,
            n = g.da,
            null !== this.qd && this.Ej ? (k = k.value.point, a.add(g, ki(e)), l = e.x - k.x, k = e.y - k.y, g.wm(l, k)) : (null !== l && (c.assign(l.location), p = a.oa(l), null !== p && c.vo(p.point)), null !== n && (m.assign(n.location), p = a.oa(n), null !== p && m.vo(p.point)), null !== l && null !== n ? c.Sc(m) ? (k = k.value.point, l = d, l.assign(c), l.vo(k), a.add(g, ki(c)), g.wm(l.x, l.y)) : (g.Wj = !1, g.fc()) : (k = k.value.point, n = null !== l ? c: null !== n ? m: e, a.add(g, ki(n)), l = n.x - k.x, k = n.y - k.y, g.wm(l, k)));
            else if (null === g.aa || null === g.da) k = k.value.point,
            a.add(g, ki(e)),
            l = e.x - k.x,
            k = e.y - k.y,
            g.wm(l, k);
            D.A(d);
            D.A(e);
            D.A(c);
            D.A(m);
            b || (Li(this.g), this.Hp(a))
        }
    };
    function Ki(a, b, c) {
        b = b.Pa;
        if (null !== b) {
            a = Ki(a, b, c);
            if (null !== a) return a;
            a = c.oa(b);
            if (null !== a) return a
        }
        return null
    }
    function Fi(a) {
        if (null !== a.ec) {
            for (var b = a.g,
            c = a.ec.j; c.next();) {
                var d = c.key;
                d.oe() && (d.location = c.value.point)
            }
            for (c = a.ec.j; c.next();) if (d = c.key, d instanceof J && d.Wj) {
                var e = c.value.point;
                a.ec.add(d, ki());
                d.wm( - e.x, -e.y)
            }
            b.gg()
        }
    }
    Mh.prototype.computeMove = function(a, b, c, d) {
        void 0 === d && (d = new O);
        d.assign(b);
        if (null === a) return d;
        void 0 === c && (c = null);
        var e = b;
        if (this.Tx && (this.fJ || null === c || null !== this.g && this.g.U.up) && (e = D.P(), c = e, c.assign(b), null !== a)) {
            var g = this.g;
            if (null !== g) {
                var h = g.Vn,
                k = this.CF,
                g = k.width,
                k = k.height,
                l = this.RI,
                m = l.x,
                l = l.y,
                n = this.QI;
                if (null !== h) {
                    var p = h.Ox;
                    isNaN(g) && (g = p.width);
                    isNaN(k) && (k = p.height);
                    h = h.BF;
                    isNaN(m) && (m = h.x);
                    isNaN(l) && (l = h.y)
                }
                h = D.Fb(0, 0);
                h.av(0, 0, g, k, n);
                gb(b.x, b.y, m + h.x, l + h.y, g, k, c);
                D.A(h)
            }
        }
        c = null !== a.cF ? a.cF(a, b, e) : e;
        k = a.GJ;
        g = k.x;
        isNaN(g) && (g = a.location.x);
        k = k.y;
        isNaN(k) && (k = a.location.y);
        h = a.AJ;
        m = h.x;
        isNaN(m) && (m = a.location.x);
        h = h.y;
        isNaN(h) && (h = a.location.y);
        d.m(Math.max(g, Math.min(c.x, m)), Math.max(k, Math.min(c.y, h)));
        e !== b && D.A(e);
        return d
    };
    function Mi(a, b) {
        if (null === b) return ! 0;
        var c = b.Y;
        return null === c || c instanceof da || c.layer.Tc || a.ec && a.ec.contains(c) || a.ic && a.ic.contains(c) ? !0 : !1
    }
    function Ni(a, b, c, d) {
        var e = a.g;
        if (null !== e) {
            a.Ej && (null !== a.qd && (a.qd.aa = null, a.qd.da = null), Oi(a, !1));
            var g = Pi(e, b, null,
            function(b) {
                return ! Mi(a, b)
            }),
            h = e.U;
            h.We = g;
            var k = e.Eb,
            l = !1;
            try {
                e.Eb = !0;
                l = Di(a, h, g);
                if (!a.wa && null === Vh) return;
                if (null === g) {
                    var m = e.KJ;
                    null !== m && (m(h), l = !0)
                }
                if (!a.wa && null === Vh) return;
                a.doDragOver(b, g);
                if (!a.wa && null === Vh) return
            } finally {
                e.Eb = k,
                l && e.gg()
            } (e.ye || e.ze) && (c || d) && e.CA(h.qe)
        }
    }
    function Di(a, b, c) {
        var d = !1,
        e = a.ek.length,
        g = 0 < e ? a.ek[0] : null;
        if (c === g) return ! 1;
        b.Lc = !1;
        for (var h = 0; h < e; h++) {
            var k = a.ek[h],
            l = k.JJ;
            if (null !== l && (l(b, k, c), d = !0, b.Lc)) break
        }
        a.ek.length = 0;
        if (!a.wa && null === Vh || null === c) return d;
        for (b.Lc = !1; null !== c;) a.ek.push(c),
        c = Qi(c);
        e = a.ek.length;
        for (h = 0; h < e && (k = a.ek[h], l = k.IJ, null === l || (l(b, k, g), d = !0, !b.Lc)); h++);
        return d
    }
    function Qi(a) {
        var b = a.Q;
        return null !== b ? b: a instanceof F && !(a instanceof I) && (a = a.Pa, null !== a && a.UI) ? a: null
    }
    function Ri(a, b, c) {
        var d = a.qj;
        if (null === d) return null;
        var e = a.g.On(b, d.pG,
        function(a) {
            return d.findValidLinkablePort(a, c)
        });
        a = D.P();
        for (var g = Infinity,
        h = null,
        e = e.j; e.next();) {
            var k = e.value;
            if (null !== k.Y) {
                var l = k.eb(gc, a),
                l = b.Cf(l);
                l < g && (h = k, g = l)
            }
        }
        D.A(a);
        return h
    }
    function Oi(a, b) {
        var c = a.qd;
        if (null !== c && !(2 > c.ta)) {
            var d = a.g;
            if (null !== d && !d.mb && (d = a.qj, null !== d)) {
                var e = null,
                g = null;
                null === c.aa && (e = Ri(a, c.n(0), !1), null !== e && (g = e.Y));
                var h = null,
                k = null;
                null === c.da && (h = Ri(a, c.n(c.ta - 1), !0), null !== h && (k = h.Y));
                d.isValidLink(g, e, k, h) ? b ? (c.iq = c.n(0), c.jq = c.n(c.ta - 1), c.Wj = !1, c.aa = g, null !== e && (c.cg = e.sd), c.da = k, null !== h && (c.jh = h.sd)) : Si(d, g, e, k, h) : Si(d, null, null, null, null)
            }
        }
    }
    Mh.prototype.doDragOver = function() {};
    function Ti(a, b) {
        var c = a.g;
        if (null !== c) {
            a.Ej && Oi(a, !0);
            zi(a);
            var d = Pi(c, b, null,
            function(b) {
                return ! Mi(a, b)
            }),
            e = c.U;
            e.We = d;
            if (null !== d) {
                e.Lc = !1;
                for (var g = d; null !== g;) {
                    var h = g.hB;
                    if (null !== h && (h(e, g), e.Lc)) break;
                    g = Qi(g)
                }
            } else g = c.hB,
            null !== g && g(e);
            if (a.wa || null !== Vh) {
                for (e = (a.ic || a.ec).j; e.next();) g = e.key,
                g instanceof G && g.Gd.each(function(a) {
                    a.Wj = !1
                });
                a.doDropOnto(b, d);
                if (a.wa || null !== Vh) {
                    d = D.Nf();
                    for (e = c.selection.j; e.next();) g = e.value,
                    g instanceof G && Ui(c, g.getAvoidableRect(d));
                    D.Mb(d)
                }
            }
        }
    }
    Mh.prototype.doDropOnto = function() {};
    Mh.prototype.doMouseMove = function() {
        if (this.wa) {
            var a = this.g;
            if (null !== a && null !== this.Ln && null !== this.ec) {
                var b = !1,
                c = !1;
                this.mayCopy() ? (b = !0, a.jc = "copy", Hi(this, !1), this.Bt(this.ic), Ii(this, this.ic, !1), this.Hp(this.ic)) : this.mayMove() ? (c = !0, a.jc = "default", Ci(this), Ii(this, this.ec, !0)) : this.mayDragOut() ? (a.jc = "no-drop", Hi(this, !1), Ii(this, this.ic, !1)) : Ci(this);
                Ni(this, a.U.ha, c, b)
            }
        }
    };
    Mh.prototype.doMouseUp = function() {
        if (this.wa) {
            var a = this.g;
            if (null !== a) {
                var b = !1,
                c = this.mayCopy();
                c && null !== this.ic ? (Ci(this), Hi(this, !0), this.Bt(this.ic), Ii(this, this.ic, !1), this.Hp(this.ic), null !== this.ic && a.LG(this.ic.Yj())) : (b = !0, Ci(this), this.mayMove() && (Ii(this, this.ec, !0), Ni(this, a.U.ha, !0, !1)));
                this.Mr = !0;
                Ti(this, a.U.ha);
                if (this.wa) {
                    this.ic = null;
                    if (b && null !== this.ec) for (b = this.ec.j; b.next();) {
                        var d = b.key;
                        d instanceof G && (d = d.Pa, null === d || null === d.placeholder || this.ec.contains(d) || d.placeholder.K())
                    }
                    a.yc();
                    this.Hp(this.ec);
                    this.Pf = c ? "Copy": "Move";
                    a.Ja(c ? "SelectionCopied": "SelectionMoved", a.selection)
                }
                this.stopTool()
            }
        }
    };
    Mh.prototype.mayCopy = function() {
        if (!this.MF) return ! 1;
        var a = this.g;
        if (null === a || a.mb || a.Ff || !a.Zp || !a.Kk || (D.Vk ? !a.U.alt: !a.U.control)) return ! 1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.oe() && b.canCopy()) return ! 0
        }
        return null !== this.qd && this.Ej && this.qd.canCopy() ? !0 : !1
    };
    Mh.prototype.mayDragOut = function() {
        if (!this.MF) return ! 1;
        var a = this.g;
        if (null === a || !a.Ut || !a.Kk || a.Yl) return ! 1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.oe() && b.canCopy()) return ! 0
        }
        return null !== this.qd && this.Ej && this.qd.canCopy() ? !0 : !1
    };
    Mh.prototype.mayMove = function() {
        var a = this.g;
        if (null === a || a.mb || !a.Yl) return ! 1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.oe() && b.canMove()) return ! 0
        }
        return null !== this.qd && this.Ej && this.qd.canMove() ? !0 : !1
    };
    var Ai = new K(Mh),
    Vh = null,
    Wh = null;
    Mh.prototype.getDraggingSource = function() {
        return Vh
    };
    Mh.prototype.mayDragIn = function() {
        var a = this.g;
        if (null === a || !a.EE || a.mb || a.Ff || !a.Zp) return ! 1;
        var b = Vh;
        return null === b || null === b.g || b.g.ga.fm !== a.ga.fm ? !1 : !0
    };
    Mh.prototype.doSimulatedDragEnter = function() {
        if (this.mayDragIn()) {
            var a = this.g;
            a.Xa.Ii();
            Vi(a);
            a = Vh;
            null !== a && null !== a.g && (a.g.jc = "copy")
        }
    };
    Mh.prototype.doSimulatedDragLeave = function() {
        var a = Vh;
        null !== a && a.doSimulatedDragOut();
        this.doCancel()
    };
    Mh.prototype.doSimulatedDragOver = function() {
        var a = this.g;
        if (null !== a) {
            var b = Vh;
            null !== b && null !== b.ec && this.mayDragIn() && (a.jc = "copy", Wi(this, b.ec.Yj(), !1), Ii(this, this.ic, !1), Ni(this, a.U.ha, !1, !0))
        }
    };
    Mh.prototype.doSimulatedDrop = function() {
        var a = this.g;
        if (null !== a) {
            var b = Vh;
            if (null !== b) {
                var c = b.g;
                b.Mr = !0;
                Ci(this);
                this.mayDragIn() && (this.$b("Drop"), Wi(this, b.ec.Yj(), !0), Ii(this, this.ic, !1), null !== this.ic && a.LG(this.ic.Yj()), Ti(this, a.U.ha), a.yc(), b = a.selection, null !== this.ic ? this.Pf = "ExternalCopy": b = new L(F), this.ic = null, a.doFocus(), a.Ja("ExternalObjectsDropped", b, c), this.bl())
            }
        }
    };
    function Wi(a, b, c) {
        if (null === a.ic) {
            var d = a.g;
            if (null !== d && !d.mb && !d.Ff) {
                d.Eb = !c;
                d.br = !c;
                a.al = d.U.ha;
                d = d.hq(b, d, !0);
                c = D.Nf();
                Gi(b, c);
                var e = c.x + c.width / 2,
                g = c.y + c.height / 2;
                D.Mb(c);
                var h = a.Uw;
                c = new ma(F);
                var k = D.P();
                for (b = b.j; b.next();) {
                    var l = b.value;
                    if (l.oe() && l.canCopy()) {
                        var m = l.location,
                        l = d.oa(l);
                        k.m(h.x - (e - m.x), h.y - (g - m.y));
                        l.location = k;
                        l.hf();
                        c.add(l, ki(k))
                    }
                }
                D.A(k);
                for (d = d.j; d.next();) e = d.value,
                e instanceof J && e.canCopy() && c.add(e, ki());
                a.ic = c;
                Uh(a, c.Yj());
                null !== a.qd && (c = a.qd, d = c.qo, c.wm(a.al.x - (d.x + d.width / 2), a.al.y - (d.y + d.height / 2)))
            }
        }
    }
    Mh.prototype.doSimulatedDragOut = function() {
        var a = this.g;
        null !== a && (this.mayCopy() || this.mayMove() ? a.jc = "": a.jc = "no-drop")
    };
    function xi(a) {
        this.point = a;
        this.RG = Gd
    }
    D.ja("DraggingInfo", xi);
    function Ji(a, b, c) {
        this.Vc = a;
        this.info = b;
        this.SI = c
    }
    function Xi() {
        0 < arguments.length && D.td(Xi);
        Sg.call(this);
        this.RD = 100;
        this.qD = !1;
        var a = new J,
        b = new z;
        b.Gf = !0;
        b.stroke = "blue";
        a.add(b);
        b = new z;
        b.Wq = "Standard";
        b.fill = "blue";
        b.stroke = "blue";
        a.add(b);
        a.Jf = "Tool";
        this.jE = a;
        a = new G;
        b = new z;
        b.sd = "";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.jb = 2;
        b.Ea = $d;
        a.add(b);
        a.$k = !1;
        a.Jf = "Tool";
        this.hE = a;
        this.iE = b;
        a = new G;
        b = new z;
        b.sd = "";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.jb = 2;
        b.Ea = $d;
        a.add(b);
        a.$k = !1;
        a.Jf = "Tool";
        this.kE = a;
        this.lE = b;
        this.PD = this.OD = this.KD = this.JD = this.LD = null;
        this.mD = !0;
        this.EH = new ma(P, "boolean");
        this.SD = this.Gl = this.eE = null
    }
    D.Sa(Xi, Sg);
    D.ja("LinkingBaseTool", Xi);
    Xi.prototype.doStop = function() {
        var a = this.g;
        null !== a && yi(a);
        this.dh = this.bh = this.ah = this.$g = this.rc = null;
        this.Ky.clear();
        this.Mf = null
    };
    D.defineProperty(Xi, {
        pG: "portGravity"
    },
    function() {
        return this.RD
    },
    function(a) {
        D.h(a, "number", Xi, "portGravity");
        0 <= a && (this.RD = a)
    });
    D.defineProperty(Xi, {
        Aq: "isUnconnectedLinkValid"
    },
    function() {
        return this.qD
    },
    function(a) {
        D.h(a, "boolean", Xi, "isUnconnectedLinkValid");
        this.qD = a
    });
    D.defineProperty(Xi, {
        hh: "temporaryLink"
    },
    function() {
        return this.jE
    },
    function(a) {
        D.l(a, J, Xi, "temporaryLink");
        this.jE = a
    });
    D.defineProperty(Xi, {
        ae: "temporaryFromNode"
    },
    function() {
        return this.hE
    },
    function(a) {
        D.l(a, G, Xi, "temporaryFromNode");
        this.hE = a
    });
    D.defineProperty(Xi, {
        wo: "temporaryFromPort"
    },
    function() {
        return this.iE
    },
    function(a) {
        D.l(a, P, Xi, "temporaryFromPort");
        this.iE = a
    });
    D.defineProperty(Xi, {
        be: "temporaryToNode"
    },
    function() {
        return this.kE
    },
    function(a) {
        D.l(a, G, Xi, "temporaryToNode");
        this.kE = a
    });
    D.defineProperty(Xi, {
        xo: "temporaryToPort"
    },
    function() {
        return this.lE
    },
    function(a) {
        D.l(a, P, Xi, "temporaryToPort");
        this.lE = a
    });
    D.defineProperty(Xi, {
        rc: "originalLink"
    },
    function() {
        return this.LD
    },
    function(a) {
        null !== a && D.l(a, J, Xi, "originalLink");
        this.LD = a
    });
    D.defineProperty(Xi, {
        $g: "originalFromNode"
    },
    function() {
        return this.JD
    },
    function(a) {
        null !== a && D.l(a, G, Xi, "originalFromNode");
        this.JD = a
    });
    D.defineProperty(Xi, {
        ah: "originalFromPort"
    },
    function() {
        return this.KD
    },
    function(a) {
        null !== a && D.l(a, P, Xi, "originalFromPort");
        this.KD = a
    });
    D.defineProperty(Xi, {
        bh: "originalToNode"
    },
    function() {
        return this.OD
    },
    function(a) {
        null !== a && D.l(a, G, Xi, "originalToNode");
        this.OD = a
    });
    D.defineProperty(Xi, {
        dh: "originalToPort"
    },
    function() {
        return this.PD
    },
    function(a) {
        null !== a && D.l(a, P, Xi, "originalToPort");
        this.PD = a
    });
    D.defineProperty(Xi, {
        Yd: "isForwards"
    },
    function() {
        return this.mD
    },
    function(a) {
        D.h(a, "boolean", Xi, "isForwards");
        this.mD = a
    });
    D.w(Xi, {
        Ky: "validPortsCache"
    },
    function() {
        return this.EH
    });
    D.defineProperty(Xi, {
        Mf: "targetPort"
    },
    function() {
        return this.eE
    },
    function(a) {
        null !== a && D.l(a, P, Xi, "targetPort");
        this.eE = a
    });
    Xi.prototype.copyPortProperties = function(a, b, c, d, e) {
        if (null !== a && null !== b && null !== c && null !== d) {
            d.Ea = b.$.size;
            e ? (d.Hb = b.Hb, d.Dm = b.Dm) : (d.Gb = b.Gb, d.nm = b.nm);
            c.Kf = gc;
            var g = D.P();
            c.location = b.eb(gc, g);
            D.A(g);
            d.angle = b.Rn();
            null !== this.sy && this.sy(a, b, c, d, e)
        }
    };
    Xi.prototype.setNoTargetPortProperties = function(a, b, c) {
        null !== b && (b.Ea = $d, b.Gb = bc, b.Hb = bc);
        null !== a && null !== this.g && (a.location = this.g.U.ha);
        null !== this.sy && this.sy(null, null, a, b, c)
    };
    Xi.prototype.doMouseDown = function() {
        this.wa && this.doMouseMove()
    };
    Xi.prototype.doMouseMove = function() {
        if (this.wa) {
            var a = this.g;
            if (null !== a) {
                this.Mf = this.findTargetPort(this.Yd);
                if (null !== this.Mf && this.Mf.Y instanceof G) {
                    var b = this.Mf.Y;
                    this.Yd ? this.copyPortProperties(b, this.Mf, this.be, this.xo, !0) : this.copyPortProperties(b, this.Mf, this.ae, this.wo, !1)
                } else this.Yd ? this.setNoTargetPortProperties(this.be, this.xo, !0) : this.setNoTargetPortProperties(this.ae, this.wo, !1); (a.ye || a.ze) && a.CA(a.U.qe)
            }
        }
    };
    Xi.prototype.findValidLinkablePort = function(a, b) {
        if (null === a) return null;
        var c = a.Y;
        if (! (c instanceof G)) return null;
        for (; null !== a;) {
            var d = b ? a.$G: a.sF;
            if (!0 === d && (null !== a.sd || a instanceof G) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a))) return a;
            if (!1 === d) break;
            a = a.Q
        }
        return null
    };
    Xi.prototype.findTargetPort = function(a) {
        var b = this.g,
        c = b.U.ha,
        d = this.pG;
        0 >= d && (d = .1);
        for (var e = this,
        g = b.On(c, d,
        function(b) {
            return e.findValidLinkablePort(b, a)
        },
        null, !0), d = Infinity, b = null, g = g.j; g.next();) {
            var h = g.value,
            k = h.Y;
            if (k instanceof G) {
                var l = h.eb(gc, D.P()),
                m = c.x - l.x,
                n = c.y - l.y;
                D.A(l);
                l = m * m + n * n;
                l < d && (m = this.Ky.oa(h), null !== m ? m && (b = h, d = l) : a && this.isValidLink(this.$g, this.ah, k, h) || !a && this.isValidLink(k, h, this.bh, this.dh) ? (this.Ky.add(h, !0), b = h, d = l) : this.Ky.add(h, !1))
            }
        }
        return null !== b && (c = b.Y, c instanceof G && (null === c.layer || c.layer.Vt)) ? b: null
    };
    Xi.prototype.isValidFrom = function(a, b) {
        if (null === a || null === b) return this.Aq;
        if (null !== this.g && this.g.gb === this && (null !== a.layer && !a.layer.Vt || !0 !== b.sF)) return ! 1;
        var c = b.MA;
        if (Infinity > c) {
            if (null !== this.rc && a === this.$g && b === this.ah) return ! 0;
            var d = b.sd;
            null === d && (d = "");
            if (a.Hx(d).count >= c) return ! 1
        }
        return ! 0
    };
    Xi.prototype.isValidTo = function(a, b) {
        if (null === a || null === b) return this.Aq;
        if (null !== this.g && this.g.gb === this && (null !== a.layer && !a.layer.Vt || !0 !== b.$G)) return ! 1;
        var c = b.tK;
        if (Infinity > c) {
            if (null !== this.rc && a === this.bh && b === this.dh) return ! 0;
            var d = b.sd;
            null === d && (d = "");
            if (a.Vg(d).count >= c) return ! 1
        }
        return ! 0
    };
    Xi.prototype.isInSameNode = function(a, b) {
        if (null === a || null === b) return ! 1;
        if (a === b) return ! 0;
        var c = a.Y,
        d = b.Y;
        return null !== c && c === d
    };
    Xi.prototype.isLinked = function(a, b) {
        if (null === a || null === b) return ! 1;
        var c = a.Y;
        if (! (c instanceof G)) return ! 1;
        var d = a.sd;
        null === d && (d = "");
        var e = b.Y;
        if (! (e instanceof G)) return ! 1;
        var g = b.sd;
        null === g && (g = "");
        for (e = e.Vg(g); e.next();) if (g = e.value, g.aa === c && g.cg === d) return ! 0;
        return ! 1
    };
    Xi.prototype.isValidLink = function(a, b, c, d) {
        if (!this.isValidFrom(a, b) || !this.isValidTo(c, d) || !(null === b || null === d || (b.HI && d.sK || !this.isInSameNode(b, d)) && (b.GI && d.rK || !this.isLinked(b, d))) || null !== this.rc && (null !== a && this.isLabelDependentOnLink(a, this.rc) || null !== c && this.isLabelDependentOnLink(c, this.rc)) || null !== a && null !== c && (null === a.data && null !== c.data || null !== a.data && null === c.data) || !this.isValidCycle(a, c, this.rc)) return ! 1;
        if (null !== a) {
            var e = a.gy;
            if (null !== e && !e(a, b, c, d, this.rc)) return ! 1
        }
        if (null !== c && (e = c.gy, null !== e && !e(a, b, c, d, this.rc))) return ! 1;
        e = this.gy;
        return null !== e ? e(a, b, c, d, this.rc) : !0
    };
    Xi.prototype.isLabelDependentOnLink = function(a, b) {
        if (null === a) return ! 1;
        var c = a.zc;
        if (null === c) return ! 1;
        if (c === b) return ! 0;
        var d = new L(G);
        d.add(a);
        return Yi(this, c, b, d)
    };
    function Yi(a, b, c, d) {
        if (b === c) return ! 0;
        var e = b.aa;
        if (null !== e && e.tf && (d.add(e), Yi(a, e.zc, c, d))) return ! 0;
        b = b.da;
        return null !== b && b.tf && (d.add(b), Yi(a, b.zc, c, d)) ? !0 : !1
    }
    Xi.prototype.isValidCycle = function(a, b, c) {
        void 0 === c && (c = null);
        if (null === a || null === b) return this.Aq;
        var d = null !== this.g ? this.g.zK: Zi;
        if (d !== Zi) {
            if (d === $i) {
                if (null !== c && !c.Uc) return ! 0;
                for (d = b.Gd; d.next();) {
                    var e = d.value;
                    if (e !== c && e.Uc && e.da === b) return ! 1
                }
                return ! aj(this, a, b, c, !0)
            }
            if (d === bj) {
                if (null !== c && !c.Uc) return ! 0;
                for (d = a.Gd; d.next();) if (e = d.value, e !== c && e.Uc && e.aa === a) return ! 1;
                return ! aj(this, a, b, c, !0)
            }
            if (d === cj) return a === b ? a = !0 : (d = new L(G), d.add(b), a = dj(this, d, a, b, c)),
            !a;
            if (d === ej) return ! aj(this, a, b, c, !1);
            if (d === fj) return a === b ? a = !0 : (d = new L(G), d.add(b), a = gj(this, d, a, b, c)),
            !a
        }
        return ! 0
    };
    function aj(a, b, c, d, e) {
        if (b === c) return ! 0;
        if (null === b || null === c) return ! 1;
        for (var g = b.Gd; g.next();) {
            var h = g.value;
            if (h !== d && (!e || h.Uc) && h.da === b && (h = h.aa, h !== b && aj(a, h, c, d, e))) return ! 0
        }
        return ! 1
    }
    function dj(a, b, c, d, e) {
        if (c === d) return ! 0;
        if (null === c || null === d || b.contains(c)) return ! 1;
        b.add(c);
        for (var g = c.Gd; g.next();) {
            var h = g.value;
            if (h !== e && h.da === c && (h = h.aa, h !== c && dj(a, b, h, d, e))) return ! 0
        }
        return ! 1
    }
    function gj(a, b, c, d, e) {
        if (c === d) return ! 0;
        if (null === c || null === d || b.contains(c)) return ! 1;
        b.add(c);
        for (var g = c.Gd; g.next();) {
            var h = g.value;
            if (h !== e) {
                var k = h.aa,
                h = h.da,
                k = k === c ? h: k;
                if (k !== c && gj(a, b, k, d, e)) return ! 0
            }
        }
        return ! 1
    }
    D.defineProperty(Xi, {
        gy: "linkValidation"
    },
    function() {
        return this.Gl
    },
    function(a) {
        null !== a && D.h(a, "function", Xi, "linkValidation");
        this.Gl = a
    });
    D.defineProperty(Xi, {
        sy: "portTargeted"
    },
    function() {
        return this.SD
    },
    function(a) {
        null !== a && D.h(a, "function", Xi, "portTargeted");
        this.SD = a
    });
    function ra() {
        0 < arguments.length && D.td(ra);
        Xi.call(this);
        this.name = "Linking";
        this.az = {};
        this.$y = null;
        this.fa = hj;
        this.$D = null
    }
    D.Sa(ra, Xi);
    D.ja("LinkingTool", ra);
    var hj;
    ra.Either = hj = D.s(ra, "Either", 0);
    var ij;
    ra.ForwardsOnly = ij = D.s(ra, "ForwardsOnly", 0);
    var jj;
    ra.BackwardsOnly = jj = D.s(ra, "BackwardsOnly", 0);
    D.defineProperty(ra, {
        QH: "archetypeLinkData"
    },
    function() {
        return this.az
    },
    function(a) {
        null !== a && D.l(a, Object, ra, "archetypeLinkData");
        a instanceof P && D.l(a, J, ra, "archetypeLinkData");
        this.az = a
    });
    D.defineProperty(ra, {
        HE: "archetypeLabelNodeData"
    },
    function() {
        return this.$y
    },
    function(a) {
        null !== a && D.l(a, Object, ra, "archetypeLabelNodeData");
        a instanceof P && D.l(a, G, ra, "archetypeLabelNodeData");
        this.$y = a
    });
    D.defineProperty(ra, {
        direction: "direction"
    },
    function() {
        return this.fa
    },
    function(a) {
        D.Ca(a, ra, ra, "direction");
        this.fa = a
    });
    D.defineProperty(ra, {
        UG: "startObject"
    },
    function() {
        return this.$D
    },
    function(a) {
        null !== a && D.l(a, P, ra, "startObject");
        this.$D = a
    });
    ra.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || a.mb || a.Ff || !a.Vt) return ! 1;
        var b = a.ga;
        return (b instanceof Y || b instanceof wg) && a.U.left && (a.gb === this || this.isBeyondDragSize()) ? null !== this.findLinkablePort() : !1
    };
    ra.prototype.findLinkablePort = function() {
        var a = this.g;
        if (null === a) return null;
        var b = this.UG;
        null === b && (b = a.Ge(a.Kc.ha, null, null));
        if (null === b || !(b.Y instanceof G)) return null;
        a = this.direction;
        if (a === hj || a === ij) {
            var c = this.findValidLinkablePort(b, !1);
            if (null !== c) return this.Yd = !0,
            c
        }
        if (a === hj || a === jj) if (c = this.findValidLinkablePort(b, !0), null !== c) return this.Yd = !1,
        c;
        return null
    };
    ra.prototype.doActivate = function() {
        var a = this.g;
        if (null !== a) {
            var b = this.findLinkablePort();
            null !== b && (this.$b(this.name), a.jf = !0, a.jc = "pointer", this.Yd ? (null === this.be || this.be.location.F() || (this.be.location = a.U.ha), this.ah = b, b = this.ah.Y, b instanceof G && (this.$g = b), this.copyPortProperties(this.$g, this.ah, this.ae, this.wo, !1)) : (null === this.ae || this.ae.location.F() || (this.ae.location = a.U.ha), this.dh = b, b = this.dh.Y, b instanceof G && (this.bh = b), this.copyPortProperties(this.bh, this.dh, this.be, this.xo, !0)), a.add(this.ae), a.add(this.be), null !== this.hh && (null !== this.ae && (this.hh.aa = this.ae), null !== this.be && (this.hh.da = this.be), this.hh.fc(), a.add(this.hh)), this.wa = !0)
        }
    };
    ra.prototype.doDeactivate = function() {
        this.wa = !1;
        var a = this.g;
        null !== a && (a.remove(this.hh), a.remove(this.ae), a.remove(this.be), a.jf = !1, a.jc = "", this.bl())
    };
    ra.prototype.doStop = function() {
        Xi.prototype.doStop.call(this);
        this.UG = null
    };
    ra.prototype.doMouseUp = function() {
        if (this.wa) {
            var a = this.g;
            if (null === a) return;
            var b = this.Pf = null,
            c = null,
            d = null,
            e = null,
            g = this.Mf = this.findTargetPort(this.Yd);
            if (null !== g) {
                var h = g.Y;
                h instanceof G && (this.Yd ? (null !== this.$g && (b = this.$g, c = this.ah), d = h, e = g) : (b = h, c = g, null !== this.bh && (d = this.bh, e = this.dh)))
            } else this.Yd ? null !== this.$g && this.Aq && (b = this.$g, c = this.ah) : null !== this.bh && this.Aq && (d = this.bh, e = this.dh);
            null !== b || null !== d ? (h = this.insertLink(b, c, d, e), null !== h ? (null === g && (this.Yd ? h.jq = a.U.ha: h.iq = a.U.ha), a.Bf && a.select(h), this.Pf = this.name, a.Ja("LinkDrawn", h)) : (a.ga.ME(), this.doNoLink(b, c, d, e))) : this.Yd ? this.doNoLink(this.$g, this.ah, null, null) : this.doNoLink(null, null, this.bh, this.dh)
        }
        this.stopTool()
    };
    ra.prototype.insertLink = function(a, b, c, d) {
        var e = this.g;
        if (null === e) return null;
        var g = e.ga;
        if (g instanceof wg) {
            var h = a;
            b = c;
            e.$d || (h = c, b = a);
            if (null !== h && null !== b) return g.Hi(b.data, g.Cb(h.data)),
            b.Pn()
        } else if (g instanceof Y) if (h = "", null !== a && (null === b && (b = a), h = b.sd, null === h && (h = "")), b = "", null !== c && (null === d && (d = c), b = d.sd, null === b && (b = "")), d = this.QH, d instanceof J) {
            if (Kh(d), g = d.copy(), null !== g) return g.aa = a,
            g.cg = h,
            g.da = c,
            g.jh = b,
            e.add(g),
            a = this.HE,
            a instanceof G && (Kh(a), a = a.copy(), null !== a && (a.zc = g, e.add(a))),
            g
        } else if (null !== d && (d = g.vx(d), D.Ta(d))) return null !== a && g.BB(d, g.Cb(a.data)),
        g.CB(d, h),
        null !== c && g.HB(d, g.Cb(c.data)),
        g.IB(d, b),
        g.Qt(d),
        a = this.HE,
        null === a || a instanceof G || (a = g.copyNodeData(a), D.Ta(a) && (g.Vl(a), a = g.Cb(a), void 0 !== a && g.CE(d, a))),
        g = e.bg(d);
        return null
    };
    ra.prototype.doNoLink = function() {};
    function Xh() {
        0 < arguments.length && D.td(Xh);
        Xi.call(this);
        this.name = "Relinking";
        var a = new z;
        a.Jb = "Diamond";
        a.Ea = be;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Te = 0;
        this.$C = a;
        a = new z;
        a.Jb = "Diamond";
        a.Ea = be;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Te = -1;
        this.mE = a;
        this.mc = null;
        this.MD = new B
    }
    D.Sa(Xh, Xi);
    D.ja("RelinkingTool", Xh);
    Xh.prototype.updateAdornments = function(a) {
        if (null !== a && a instanceof J) {
            var b = "RelinkFrom",
            c = null;
            if (a.hb && null !== this.g && !this.g.mb) {
                var d = a.ro;
                null !== d && a.canRelinkFrom() && a.$.F() && a.isVisible() && d.$.F() && d.Nj() && (c = a.nq(b), null === c && (c = this.makeAdornment(d, !1), a.Ul(b, c)))
            }
            null === c && a.Tj(b);
            b = "RelinkTo";
            c = null;
            a.hb && null !== this.g && !this.g.mb && (d = a.ro, null !== d && a.canRelinkTo() && a.$.F() && a.isVisible() && d.$.F() && d.Nj() && (c = a.nq(b), null === c && (c = this.makeAdornment(d, !0), a.Ul(b, c))));
            null === c && a.Tj(b)
        }
    };
    Xh.prototype.makeAdornment = function(a, b) {
        var c = new da;
        c.type = kj;
        var d = b ? this.qK: this.FI;
        null !== d && c.add(d.copy());
        c.zb = a;
        return c
    };
    D.defineProperty(Xh, {
        FI: "fromHandleArchetype"
    },
    function() {
        return this.$C
    },
    function(a) {
        null !== a && D.l(a, P, Xh, "fromHandleArchetype");
        this.$C = a
    });
    D.defineProperty(Xh, {
        qK: "toHandleArchetype"
    },
    function() {
        return this.mE
    },
    function(a) {
        null !== a && D.l(a, P, Xh, "toHandleArchetype");
        this.mE = a
    });
    D.w(Xh, {
        handle: "handle"
    },
    function() {
        return this.mc
    });
    Xh.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || a.mb || a.Ff || !a.Cn) return ! 1;
        var b = a.ga;
        if (! (b instanceof Y || b instanceof wg) || !a.U.left) return ! 1;
        b = this.findToolHandleAt(a.Kc.ha, "RelinkFrom");
        null === b && (b = this.findToolHandleAt(a.Kc.ha, "RelinkTo"));
        return null !== b
    };
    Xh.prototype.doActivate = function() {
        var a = this.g;
        if (null !== a) {
            if (null === this.rc) {
                var b = this.findToolHandleAt(a.Kc.ha, "RelinkFrom");
                null === b && (b = this.findToolHandleAt(a.Kc.ha, "RelinkTo"));
                if (null === b) return;
                var c = b.Y;
                if (! (c instanceof da && c.Zf instanceof J)) return;
                this.mc = b;
                this.Yd = null === c || "RelinkTo" === c.Dd;
                this.rc = c.Zf
            }
            this.$b(this.name);
            a.jf = !0;
            a.jc = "pointer";
            this.ah = this.rc.dd;
            this.$g = this.rc.aa;
            this.dh = this.rc.Ld;
            this.bh = this.rc.da;
            this.MD.set(this.rc.$);
            null !== this.rc && 0 < this.rc.ta && (null === this.rc.aa && (null !== this.wo && (this.wo.Ea = Zd), null !== this.ae && (this.ae.location = this.rc.n(0))), null === this.rc.da && (null !== this.xo && (this.xo.Ea = Zd), null !== this.be && (this.be.location = this.rc.n(this.rc.ta - 1))));
            this.copyPortProperties(this.$g, this.ah, this.ae, this.wo, !1);
            this.copyPortProperties(this.bh, this.dh, this.be, this.xo, !0);
            a.add(this.ae);
            a.add(this.be);
            null !== this.hh && (null !== this.ae && (this.hh.aa = this.ae), null !== this.be && (this.hh.da = this.be), this.copyLinkProperties(this.rc, this.hh), this.hh.fc(), a.add(this.hh));
            this.wa = !0
        }
    };
    Xh.prototype.copyLinkProperties = function(a, b) {
        if (null !== a && null !== b) {
            b.St = a.St;
            b.yA = a.yA;
            var c = a.gf;
            if (c === lj || c === mj) c = nj;
            b.gf = c;
            b.yx = a.yx;
            b.Ay = a.Ay;
            b.Tq = a.Tq;
            b.Gb = a.Gb;
            b.nm = a.nm;
            b.nu = a.nu;
            b.ou = a.ou;
            b.Hb = a.Hb;
            b.Dm = a.Dm;
            b.fv = a.fv;
            b.gv = a.gv
        }
    };
    Xh.prototype.doDeactivate = function() {
        this.wa = !1;
        var a = this.g;
        null !== a && (a.remove(this.hh), a.remove(this.ae), a.remove(this.be), a.jf = !1, a.jc = "", this.bl())
    };
    Xh.prototype.doStop = function() {
        Xi.prototype.doStop.call(this);
        this.mc = null
    };
    Xh.prototype.doMouseUp = function() {
        if (this.wa) {
            var a = this.g;
            if (null === a) return;
            this.Pf = null;
            var b = this.$g,
            c = this.ah,
            d = this.bh,
            e = this.dh,
            g = this.rc;
            this.Mf = this.findTargetPort(this.Yd);
            if (null !== this.Mf) {
                var h = this.Mf.Y;
                h instanceof G && (this.Yd ? (d = h, e = this.Mf) : (b = h, c = this.Mf))
            } else this.Aq ? this.Yd ? e = d = null: c = b = null: g = null;
            null !== g ? (this.reconnectLink(g, this.Yd ? d: b, this.Yd ? e: c, this.Yd), null === this.Mf && (this.Yd ? g.jq = a.U.ha: g.iq = a.U.ha, g.fc()), a.Bf && (g.hb = !0), this.Pf = this.name, a.Ja("LinkRelinked", g, this.Yd ? this.dh: this.ah)) : this.doNoRelink(this.rc, this.Yd);
            oj(this.rc, this.MD)
        }
        this.stopTool()
    };
    Xh.prototype.reconnectLink = function(a, b, c, d) {
        if (null === this.g) return ! 1;
        c = null !== c && null !== c.sd ? c.sd: "";
        d ? (a.da = b, a.jh = c) : (a.aa = b, a.cg = c);
        return ! 0
    };
    Xh.prototype.doNoRelink = function() {};
    function Si(a, b, c, d, e) {
        null !== a.g && (null !== b ? (a.copyPortProperties(b, c, a.ae, a.wo, !1), a.g.add(a.ae)) : a.g.remove(a.ae), null !== d ? (a.copyPortProperties(d, e, a.be, a.xo, !0), a.g.add(a.be)) : a.g.remove(a.be))
    }
    function xj() {
        0 < arguments.length && D.td(xj);
        Sg.call(this);
        this.name = "LinkReshaping";
        var a = new z;
        a.Jb = "Rectangle";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.vl = a;
        a = new z;
        a.Jb = "Diamond";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.xD = a;
        this.TD = 3;
        this.Yy = this.mc = null;
        this.Dp = new O;
        this.Aw = null
    }
    D.Sa(xj, Sg);
    D.ja("LinkReshapingTool", xj);
    var yj;
    xj.None = yj = D.s(xj, "None", 0);
    var zj;
    xj.Horizontal = zj = D.s(xj, "Horizontal", 1);
    var Aj;
    xj.Vertical = Aj = D.s(xj, "Vertical", 2);
    var Mj;
    xj.All = Mj = D.s(xj, "All", 3);
    xj.prototype.getReshapingBehavior = xj.prototype.wF = function(a) {
        return a && a.Uz ? a.Uz: yj
    };
    xj.prototype.setReshapingBehavior = xj.prototype.$u = function(a, b) {
        D.l(a, P, xj, "setReshapingBehavior:obj");
        D.Ca(b, xj, xj, "setReshapingBehavior:behavior");
        a.Uz = b
    };
    xj.prototype.updateAdornments = function(a) {
        if (null !== a && a instanceof J) {
            if (a.hb && null !== this.g && !this.g.mb) {
                var b = a.path;
                if (null !== b && a.canReshape() && a.$.F() && a.isVisible() && b.$.F() && b.Nj()) {
                    var c = a.nq(this.name);
                    if (null === c || c.FD !== a.ta || c.vE !== a.Vu) c = this.makeAdornment(b),
                    null !== c && (c.FD = a.ta, c.vE = a.Vu, a.Ul(this.name, c));
                    if (null !== c) {
                        c.location = a.position;
                        return
                    }
                }
            }
            a.Tj(this.name)
        }
    };
    xj.prototype.makeAdornment = function(a) {
        var b = a.Y,
        c = b.ta,
        d = b.qc,
        e = null;
        if (null !== b.points && 1 < c) {
            e = new da;
            e.type = kj;
            var c = b.ju,
            g = b.ay,
            h = d ? 1 : 0;
            if (b.Vu && b.gf !== Nj) for (var k = c + h; k < g - h; k++) {
                var l = this.makeResegmentHandle(a, k);
                null !== l && (l.Te = k, l.zB = .5, l.MA = 999, e.add(l))
            }
            for (k = c + 1; k < g; k++) if (l = this.makeHandle(a, k), null !== l) {
                l.Te = k;
                if (k !== c) if (k === c + 1 && d) {
                    var h = b.n(c),
                    m = b.n(c + 1);
                    Q(h.x, m.x) && Q(h.y, m.y) && (m = b.n(c - 1));
                    Q(h.x, m.x) ? (this.$u(l, Aj), l.cursor = "n-resize") : Q(h.y, m.y) && (this.$u(l, zj), l.cursor = "w-resize")
                } else k === g - 1 && d ? (h = b.n(g - 1), m = b.n(g), Q(h.x, m.x) && Q(h.y, m.y) && (h = b.n(g + 1)), Q(h.x, m.x) ? (this.$u(l, Aj), l.cursor = "n-resize") : Q(h.y, m.y) && (this.$u(l, zj), l.cursor = "w-resize")) : k !== g && (this.$u(l, Mj), l.cursor = "move");
                e.add(l)
            }
            e.zb = a
        }
        return e
    };
    xj.prototype.makeHandle = function() {
        var a = this.qu;
        return null === a ? null: a.copy()
    };
    D.defineProperty(xj, {
        qu: "handleArchetype"
    },
    function() {
        return this.vl
    },
    function(a) {
        null !== a && D.l(a, P, xj, "handleArchetype");
        this.vl = a
    });
    xj.prototype.makeResegmentHandle = function() {
        var a = this.FJ;
        return null === a ? null: a.copy()
    };
    D.defineProperty(xj, {
        FJ: "midHandleArchetype"
    },
    function() {
        return this.xD
    },
    function(a) {
        null !== a && D.l(a, P, xj, "midHandleArchetype");
        this.xD = a
    });
    D.w(xj, {
        handle: "handle"
    },
    function() {
        return this.mc
    });
    D.w(xj, {
        Tt: "adornedLink"
    },
    function() {
        return this.Yy
    });
    xj.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        return null !== a && !a.mb && a.lx && a.U.left ? null !== this.findToolHandleAt(a.Kc.ha, this.name) : !1
    };
    xj.prototype.doActivate = function() {
        var a = this.g;
        if (null !== a && (this.mc = this.findToolHandleAt(a.Kc.ha, this.name), null !== this.mc)) {
            var b = this.mc.Y.Zf;
            if (b instanceof J) {
                this.Yy = b;
                a.jf = !0;
                this.$b(this.name);
                if (b.Vu && 999 === this.mc.MA) {
                    var c = b.points.copy(),
                    d = this.mc.eb(gc);
                    c.Xd(this.mc.Te + 1, d);
                    b.qc && c.Xd(this.mc.Te + 1, d);
                    b.points = c;
                    b.ne();
                    this.mc = this.findToolHandleAt(a.Kc.ha, this.name);
                    if (null === this.mc) {
                        this.doDeactivate();
                        return
                    }
                }
                this.Dp = b.n(this.mc.Te);
                this.Aw = b.points.copy();
                this.wa = !0
            }
        }
    };
    xj.prototype.doDeactivate = function() {
        this.bl();
        this.Yy = this.mc = null;
        var a = this.g;
        null !== a && (a.jf = !1);
        this.wa = !1
    };
    xj.prototype.doCancel = function() {
        var a = this.Tt;
        null !== a && (a.points = this.Aw);
        this.stopTool()
    };
    xj.prototype.doMouseMove = function() {
        var a = this.g;
        this.wa && null !== a && (a = this.computeReshape(a.U.ha), this.reshape(a))
    };
    xj.prototype.doMouseUp = function() {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.computeReshape(a.U.ha);
            this.reshape(b);
            b = this.Tt;
            if (null !== b && b.Vu) {
                var c = this.handle.Te,
                d = b.n(c - 1),
                e = b.n(c),
                g = b.n(c + 1);
                if (b.qc) {
                    if (c > b.ju + 1 && c < b.ay - 1) {
                        var h = b.n(c - 2);
                        if (Math.abs(d.x - e.x) < this.Th && Math.abs(d.y - e.y) < this.Th && (Oj(this, h, d, e, g, !0) || Oj(this, h, d, e, g, !1))) {
                            var k = b.points.copy();
                            Oj(this, h, d, e, g, !0) ? (k.qg(c - 2, new O(h.x, (g.y + h.y) / 2)), k.qg(c + 1, new O(g.x, (g.y + h.y) / 2))) : (k.qg(c - 2, new O((g.x + h.x) / 2, h.y)), k.qg(c + 1, new O((g.x + h.x) / 2, g.y)));
                            k.jd(c);
                            k.jd(c - 1);
                            b.points = k;
                            b.ne()
                        } else h = b.n(c + 2),
                        Math.abs(e.x - g.x) < this.Th && Math.abs(e.y - g.y) < this.Th && (Oj(this, d, e, g, h, !0) || Oj(this, d, e, g, h, !1)) && (k = b.points.copy(), Oj(this, d, e, g, h, !0) ? (k.qg(c - 1, new O(d.x, (d.y + h.y) / 2)), k.qg(c + 2, new O(h.x, (d.y + h.y) / 2))) : (k.qg(c - 1, new O((d.x + h.x) / 2, d.y)), k.qg(c + 2, new O((d.x + h.x) / 2, h.y))), k.jd(c + 1), k.jd(c), b.points = k, b.ne())
                    }
                } else h = D.P(),
                fb(d.x, d.y, g.x, g.y, e.x, e.y, h) && h.Cf(e) < this.Th * this.Th && (k = b.points.copy(), k.jd(c), b.points = k, b.ne()),
                D.A(h)
            }
            a.yc();
            this.Pf = this.name;
            a.Ja("LinkReshaped", this.Tt, this.Aw)
        }
        this.stopTool()
    };
    function Oj(a, b, c, d, e, g) {
        return g ? Math.abs(b.y - c.y) < a.Th && Math.abs(c.y - d.y) < a.Th && Math.abs(d.y - e.y) < a.Th: Math.abs(b.x - c.x) < a.Th && Math.abs(c.x - d.x) < a.Th && Math.abs(d.x - e.x) < a.Th
    }
    D.defineProperty(xj, {
        Th: "resegmentingDistance"
    },
    function() {
        return this.TD
    },
    function(a) {
        D.h(a, "number", xj, "resegmentingDistance");
        this.TD = a
    });
    xj.prototype.reshape = function(a) {
        var b = this.Tt;
        b.zm();
        var c = this.handle.Te,
        d = this.wF(this.handle);
        if (b.qc) if (c === b.ju + 1) c = b.ju + 1,
        d === Aj ? (b.ia(c, b.n(c - 1).x, a.y), b.ia(c + 1, b.n(c + 2).x, a.y)) : d === zj && (b.ia(c, a.x, b.n(c - 1).y), b.ia(c + 1, a.x, b.n(c + 2).y));
        else if (c === b.ay - 1) c = b.ay - 1,
        d === Aj ? (b.ia(c - 1, b.n(c - 2).x, a.y), b.ia(c, b.n(c + 1).x, a.y)) : d === zj && (b.ia(c - 1, a.x, b.n(c - 2).y), b.ia(c, a.x, b.n(c + 1).y));
        else {
            var d = c,
            e = b.n(d),
            g = b.n(d - 1),
            h = b.n(d + 1);
            Q(g.x, e.x) && Q(e.y, h.y) ? (Q(g.x, b.n(d - 2).x) && !Q(g.y, b.n(d - 2).y) ? (b.B(d, a.x, g.y), c++, d++) : b.ia(d - 1, a.x, g.y), Q(h.y, b.n(d + 2).y) && !Q(h.x, b.n(d + 2).x) ? b.B(d + 1, h.x, a.y) : b.ia(d + 1, h.x, a.y)) : Q(g.y, e.y) && Q(e.x, h.x) ? (Q(g.y, b.n(d - 2).y) && !Q(g.x, b.n(d - 2).x) ? (b.B(d, g.x, a.y), c++, d++) : b.ia(d - 1, g.x, a.y), Q(h.x, b.n(d + 2).x) && !Q(h.y, b.n(d + 2).y) ? b.B(d + 1, a.x, h.y) : b.ia(d + 1, a.x, h.y)) : Q(g.x, e.x) && Q(e.x, h.x) ? (Q(g.x, b.n(d - 2).x) && !Q(g.y, b.n(d - 2).y) ? (b.B(d, a.x, g.y), c++, d++) : b.ia(d - 1, a.x, g.y), Q(h.x, b.n(d + 2).x) && !Q(h.y, b.n(d + 2).y) ? b.B(d + 1, a.x, h.y) : b.ia(d + 1, a.x, h.y)) : Q(g.y, e.y) && Q(e.y, h.y) && (Q(g.y, b.n(d - 2).y) && !Q(g.x, b.n(d - 2).x) ? (b.B(d, g.x, a.y), c++, d++) : b.ia(d - 1, g.x, a.y), Q(h.y, b.n(d + 2).y) && !Q(h.x, b.n(d + 2).x) ? b.B(d + 1, h.x, a.y) : b.ia(d + 1, h.x, a.y));
            b.ia(c, a.x, a.y)
        } else b.ia(c, a.x, a.y),
        1 === c && b.computeSpot(!0).Zd() && (e = b.aa, g = b.dd, null === e || e.isVisible() || (e = e.findVisibleNode(), e !== b.aa && (g = e.km(""))), d = g.eb(gc, D.P()), e = b.getLinkPointFromPoint(e, g, d, a, !0, D.P()), b.ia(0, e.x, e.y), D.A(d), D.A(e)),
        c === b.ta - 2 && b.computeSpot(!1).Zd() && (c = b.da, e = b.Ld, null === c || c.isVisible() || (c = c.findVisibleNode(), c !== b.da && (e = c.km(""))), d = e.eb(gc, D.P()), e = b.getLinkPointFromPoint(c, e, d, a, !1, D.P()), b.ia(b.ta - 1, e.x, e.y), D.A(d), D.A(e));
        b.Aj()
    };
    xj.prototype.computeReshape = function(a) {
        var b = this.Tt,
        c = this.handle.Te;
        switch (this.wF(this.handle)) {
        case Mj:
            return a;
        case Aj:
            return b = b.n(c),
            new O(b.x, a.y);
        case zj:
            return b = b.n(c),
            new O(a.x, b.y);
        default:
        case yj:
            return b.n(c)
        }
    };
    D.w(xj, {
        dM: "originalPoint"
    },
    function() {
        return this.Dp
    });
    D.w(xj, {
        eM: "originalPoints"
    },
    function() {
        return this.Aw
    });
    function Pj() {
        0 < arguments.length && D.td(Pj);
        Sg.call(this);
        this.name = "Resizing";
        this.li = (new Ca(1, 1)).freeze();
        this.ki = (new Ca(9999, 9999)).freeze();
        this.bk = (new Ca(NaN, NaN)).freeze();
        this.fs = !1;
        this.Pc = null;
        var a = new z;
        a.Gh = gc;
        a.Jb = "Rectangle";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.jb = 1;
        a.cursor = "pointer";
        this.vl = a;
        this.mc = null;
        this.Dp = new O;
        this.HD = new Ca;
        this.ND = new O;
        this.yz = new Ca(0, 0);
        this.xz = new Ca(Infinity, Infinity);
        this.wz = new Ca(1, 1);
        this.ED = !0
    }
    D.Sa(Pj, Sg);
    D.ja("ResizingTool", Pj);
    Pj.prototype.updateAdornments = function(a) {
        if (! (null === a || a instanceof J)) {
            if (a.hb && null !== this.g && !this.g.mb) {
                var b = a.CG;
                if (null !== b && a.canResize() && a.$.F() && a.isVisible() && b.$.F() && b.Nj()) {
                    var c = a.nq(this.name);
                    if (null === c || c.zb !== b) c = this.makeAdornment(b);
                    if (null !== c) {
                        var d = b.Rn();
                        c.angle = d;
                        var e = b.eb(c.Kf, D.P()),
                        g = b.Fj();
                        c.location = e;
                        D.A(e);
                        e = c.placeholder;
                        if (null !== e) {
                            var b = b.Ga,
                            h = D.Cm();
                            h.m(b.width * g, b.height * g);
                            e.Ea = h;
                            D.Rk(h)
                        }
                        this.updateResizeHandles(c, d);
                        a.Ul(this.name, c);
                        return
                    }
                }
            }
            a.Tj(this.name)
        }
    };
    Pj.prototype.makeAdornment = function(a) {
        var b = null,
        b = a.Y.BG;
        if (null === b) {
            b = new da;
            b.type = Qj;
            b.Kf = gc;
            var c = new Rj;
            c.Gf = !0;
            b.add(c);
            b.add(this.makeHandle(a, cc));
            b.add(this.makeHandle(a, ec));
            b.add(this.makeHandle(a, rc));
            b.add(this.makeHandle(a, pc));
            b.add(this.makeHandle(a, Yc));
            b.add(this.makeHandle(a, fd));
            b.add(this.makeHandle(a, gd));
            b.add(this.makeHandle(a, ed))
        } else if (Kh(b), b = b.copy(), null === b) return null;
        b.zb = a;
        return b
    };
    Pj.prototype.makeHandle = function(a, b) {
        var c = this.qu;
        if (null === c) return null;
        c = c.copy();
        c.alignment = b;
        return c
    };
    Pj.prototype.updateResizeHandles = function(a, b) {
        if (null !== a) if (!a.alignment.ed() && ("pointer" === a.cursor || 0 < a.cursor.indexOf("resize"))) a: {
            var c = a.alignment;
            c.Zd() && (c = gc);
            var d = b;
            if (0 >= c.x) d = 0 >= c.y ? d + 225 : 1 <= c.y ? d + 135 : d + 180;
            else if (1 <= c.x) 0 >= c.y ? d += 315 : 1 <= c.y && (d += 45);
            else if (0 >= c.y) d += 270;
            else if (1 <= c.y) d += 90;
            else break a;
            0 > d ? d += 360 : 360 <= d && (d -= 360);
            a.cursor = 22.5 > d ? "e-resize": 67.5 > d ? "se-resize": 112.5 > d ? "s-resize": 157.5 > d ? "sw-resize": 202.5 > d ? "w-resize": 247.5 > d ? "nw-resize": 292.5 > d ? "n-resize": 337.5 > d ? "ne-resize": "e-resize"
        } else if (a instanceof x) for (c = a.elements; c.next();) this.updateResizeHandles(c.value, b)
    };
    D.defineProperty(Pj, {
        qu: "handleArchetype"
    },
    function() {
        return this.vl
    },
    function(a) {
        null !== a && D.l(a, P, Pj, "handleArchetype");
        this.vl = a
    });
    D.w(Pj, {
        handle: "handle"
    },
    function() {
        return this.mc
    });
    D.defineProperty(Pj, {
        zb: "adornedObject"
    },
    function() {
        return this.Pc
    },
    function(a) {
        null !== a && D.l(a, P, Pj, "adornedObject");
        this.Pc = a
    });
    Pj.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        return null !== a && !a.mb && a.Wt && a.U.left ? null !== this.findToolHandleAt(a.Kc.ha, this.name) : !1
    };
    Pj.prototype.doActivate = function() {
        var a = this.g;
        null !== a && (this.mc = this.findToolHandleAt(a.Kc.ha, this.name), null !== this.mc && (this.Pc = this.mc.Y.zb, this.Dp.set(this.zb.eb(this.handle.alignment.kG())), this.ND.set(this.Pc.Y.location), this.HD.set(this.Pc.Ea), this.wz = this.computeCellSize(), this.yz = this.computeMinSize(), this.xz = this.computeMaxSize(), a.jf = !0, this.ED = a.Xa.isEnabled, a.Xa.isEnabled = !1, this.$b(this.name), this.wa = !0))
    };
    Pj.prototype.doDeactivate = function() {
        var a = this.g;
        null !== a && (this.bl(), this.Pc = this.mc = null, this.wa = a.jf = !1, a.Xa.isEnabled = this.ED)
    };
    Pj.prototype.doCancel = function() {
        null !== this.zb && (this.zb.Ea = this.lG, this.zb.Y.location = this.OJ);
        this.stopTool()
    };
    Pj.prototype.doMouseMove = function() {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.yz,
            c = this.xz,
            d = this.wz,
            e = this.zb.uF(a.U.ha, D.P()),
            g = this.computeReshape(),
            b = this.computeResize(e, this.handle.alignment, b, c, d, g);
            this.resize(b);
            a.gg();
            D.A(e)
        }
    };
    Pj.prototype.doMouseUp = function() {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.yz,
            c = this.xz,
            d = this.wz,
            e = this.zb.uF(a.U.ha, D.P()),
            g = this.computeReshape(),
            b = this.computeResize(e, this.handle.alignment, b, c, d, g);
            this.resize(b);
            D.A(e);
            a.yc();
            this.Pf = this.name;
            a.Ja("PartResized", this.zb, this.lG)
        }
        this.stopTool()
    };
    Pj.prototype.resize = function(a) {
        if (null !== this.g) {
            var b = this.zb,
            c = b.Y;
            b.Ea = a.size;
            c.hf();
            a = this.zb.eb(this.handle.alignment.kG());
            c instanceof I ? (a = c.position.copy().vo(a).add(this.Dp), c.move(a)) : c.location = c.location.copy().vo(a).add(this.Dp)
        }
    };
    Pj.prototype.computeResize = function(a, b, c, d, e, g) {
        b.Zd() && (b = gc);
        var h = this.zb.Ga,
        k = h.x,
        l = h.y,
        m = h.x + h.width,
        n = h.y + h.height,
        p = 1;
        if (!g) {
            var p = h.width,
            q = h.height;
            0 >= p && (p = 1);
            0 >= q && (q = 1);
            p = q / p
        }
        q = D.P();
        gb(a.x, a.y, k, l, e.width, e.height, q);
        a = h.copy();
        0 >= b.x ? 0 >= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), g || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : (a.width = a.height / p, a.x = m - a.width))) : 1 <= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (b = a.height / a.width, p < b ? a.height = p * a.width: (a.width = a.height / p, a.x = m - a.width))) : (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = m - a.x, g || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 1 <= b.x ? 0 >= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), g || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : a.width = a.height / p)) : 1 <= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (b = a.height / a.width, p < b ? a.height = p * a.width: a.width = a.height / p)) : (a.width = Math.max(Math.min(q.x - k, d.width), c.width), g || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 0 >= b.y ? (a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = n - a.y, g || (a.width = a.height / p, a.x = k + .5 * (m - k - a.width))) : 1 <= b.y && (a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (a.width = a.height / p, a.x = k + .5 * (m - k - a.width)));
        D.A(q);
        return a
    };
    Pj.prototype.computeReshape = function() {
        var a = Sj;
        this.zb instanceof z && (a = Tj(this.zb));
        return ! (a === Uj || a === Vj || null !== this.g && this.g.U.shift)
    };
    Pj.prototype.computeMinSize = function() {
        var a = this.zb.hg.copy(),
        b = this.hg; ! isNaN(b.width) && b.width > a.width && (a.width = b.width); ! isNaN(b.height) && b.height > a.height && (a.height = b.height);
        return a
    };
    Pj.prototype.computeMaxSize = function() {
        var a = this.zb.kf.copy(),
        b = this.kf; ! isNaN(b.width) && b.width < a.width && (a.width = b.width); ! isNaN(b.height) && b.height < a.height && (a.height = b.height);
        return a
    };
    Pj.prototype.computeCellSize = function() {
        var a = new Ca(NaN, NaN),
        b = this.zb.Y;
        if (null !== b) {
            var c = b.XJ; ! isNaN(c.width) && 0 < c.width && (a.width = c.width); ! isNaN(c.height) && 0 < c.height && (a.height = c.height)
        }
        c = this.bq;
        isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width);
        isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height);
        b = this.g; (isNaN(a.width) || isNaN(a.height)) && b && (c = b.kb.De, null !== c && c.Tx && (c = c.CF, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height)), b = b.Vn, null !== b && b.visible && this.Tx && (c = b.Ox, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height)));
        if (isNaN(a.width) || 0 === a.width || Infinity === a.width) a.width = 1;
        if (isNaN(a.height) || 0 === a.height || Infinity === a.height) a.height = 1;
        return a
    };
    D.defineProperty(Pj, {
        hg: "minSize"
    },
    function() {
        return this.li
    },
    function(a) {
        D.l(a, Ca, Pj, "minSize");
        if (!this.li.O(a)) {
            var b = a.width;
            isNaN(b) && (b = 0);
            a = a.height;
            isNaN(a) && (a = 0);
            this.li.m(b, a)
        }
    });
    D.defineProperty(Pj, {
        kf: "maxSize"
    },
    function() {
        return this.ki
    },
    function(a) {
        D.l(a, Ca, Pj, "maxSize");
        if (!this.ki.O(a)) {
            var b = a.width;
            isNaN(b) && (b = Infinity);
            a = a.height;
            isNaN(a) && (a = Infinity);
            this.ki.m(b, a)
        }
    });
    D.defineProperty(Pj, {
        bq: "cellSize"
    },
    function() {
        return this.bk
    },
    function(a) {
        D.l(a, Ca, Pj, "cellSize");
        this.bk.O(a) || this.bk.assign(a)
    });
    D.defineProperty(Pj, {
        Tx: "isGridSnapEnabled"
    },
    function() {
        return this.fs
    },
    function(a) {
        D.h(a, "boolean", Pj, "isGridSnapEnabled");
        this.fs = a
    });
    D.w(Pj, {
        lG: "originalDesiredSize"
    },
    function() {
        return this.HD
    });
    D.w(Pj, {
        OJ: "originalLocation"
    },
    function() {
        return this.ND
    });
    function Wj() {
        0 < arguments.length && D.td(Wj);
        Sg.call(this);
        this.name = "Rotating";
        this.YD = 45;
        this.XD = 2;
        this.Pc = null;
        var a = new z;
        a.Jb = "Ellipse";
        a.Ea = be;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.jb = 1;
        a.cursor = "pointer";
        this.vl = a;
        this.mc = null;
        this.zw = 0;
        this.UD = new O
    }
    D.Sa(Wj, Sg);
    D.ja("RotatingTool", Wj);
    Wj.prototype.updateAdornments = function(a) {
        if (! (null === a || a instanceof J)) {
            if (a.hb && null !== this.g && !this.g.mb) {
                var b = a.GG;
                if (null !== b && a.canRotate() && a.$.F() && a.isVisible() && b.$.F() && b.Nj()) {
                    var c = a.nq(this.name);
                    if (null === c || c.zb !== b) c = this.makeAdornment(b);
                    if (null !== c) {
                        c.angle = b.Rn();
                        var d = null,
                        e = null;
                        b === a || b === a.uf ? (d = a.uf, e = a.Kf) : (d = b, e = gc);
                        for (var g = d.Ga,
                        e = D.Fb(g.width * e.x + e.offsetX, g.height * e.y + e.offsetY); null !== d && d !== b;) d.transform.vb(e),
                        d = d.Q;
                        var d = e.y,
                        g = Math.max(e.x - b.Ga.width, 0),
                        h = D.P();
                        c.location = b.eb(new R(1, 0, 50 + g, d), h);
                        D.A(h);
                        D.A(e);
                        a.Ul(this.name, c);
                        return
                    }
                }
            }
            a.Tj(this.name)
        }
    };
    Wj.prototype.makeAdornment = function(a) {
        var b = null,
        b = a.Y.ZJ;
        if (null === b) {
            b = new da;
            b.type = Xj;
            b.Kf = gc;
            var c = this.qu;
            null !== c && b.add(c.copy())
        } else if (Kh(b), b = b.copy(), null === b) return null;
        b.zb = a;
        return b
    };
    D.defineProperty(Wj, {
        qu: "handleArchetype"
    },
    function() {
        return this.vl
    },
    function(a) {
        null !== a && D.l(a, P, Wj, "handleArchetype");
        this.vl = a
    });
    D.w(Wj, {
        handle: "handle"
    },
    function() {
        return this.mc
    });
    D.defineProperty(Wj, {
        zb: "adornedObject"
    },
    function() {
        return this.Pc
    },
    function(a) {
        null !== a && D.l(a, P, Wj, "adornedObject");
        this.Pc = a
    });
    Wj.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        return null !== a && !a.mb && a.mx && a.U.left ? null !== this.findToolHandleAt(a.Kc.ha, this.name) : !1
    };
    Wj.prototype.doActivate = function() {
        var a = this.g;
        if (null !== a && (this.mc = this.findToolHandleAt(a.Kc.ha, this.name), null !== this.mc)) {
            this.Pc = this.mc.Y.zb;
            var b = this.Pc.Y,
            c = b.uf;
            this.UD = this.Pc === b || this.Pc === c ? c.eb(b.Kf) : this.Pc.eb(gc);
            this.zw = this.Pc.angle;
            a.jf = !0;
            a.AA = !0;
            this.$b(this.name);
            this.wa = !0
        }
    };
    Wj.prototype.doDeactivate = function() {
        var a = this.g;
        null !== a && (this.bl(), this.Pc = this.mc = null, this.wa = a.jf = !1)
    };
    Wj.prototype.doCancel = function() {
        var a = this.g;
        null !== a && (a.AA = !1);
        this.rotate(this.zw);
        this.stopTool()
    };
    Wj.prototype.doMouseMove = function() {
        var a = this.g;
        this.wa && null !== a && (a = this.computeRotate(a.U.ha), this.rotate(a))
    };
    Wj.prototype.doMouseUp = function() {
        var a = this.g;
        if (this.wa && null !== a) {
            a.AA = !1;
            var b = this.computeRotate(a.U.ha);
            this.rotate(b);
            a.yc();
            this.Pf = this.name;
            a.Ja("PartRotated", this.Pc, this.zw)
        }
        this.stopTool()
    };
    Wj.prototype.rotate = function(a) {
        v && D.p(a, Wj, "rotate:newangle");
        null !== this.Pc && (this.Pc.angle = a)
    };
    Wj.prototype.computeRotate = function(a) {
        a = this.UD.Jc(a);
        var b = this.Pc.Q;
        null !== b && (a -= b.Rn(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
        var b = Math.min(Math.abs(this.kK), 180),
        c = Math.min(Math.abs(this.jK), b / 2); (null === this.g || !this.g.U.shift) && 0 < b && 0 < c && (a % b < c ? a = Math.floor(a / b) * b: a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        return a
    };
    D.defineProperty(Wj, {
        kK: "snapAngleMultiple"
    },
    function() {
        return this.YD
    },
    function(a) {
        D.h(a, "number", Wj, "snapAngleMultiple");
        this.YD = a
    });
    D.defineProperty(Wj, {
        jK: "snapAngleEpsilon"
    },
    function() {
        return this.XD
    },
    function(a) {
        D.h(a, "number", Wj, "snapAngleEpsilon");
        this.XD = a
    });
    D.w(Wj, {
        cM: "originalAngle"
    },
    function() {
        return this.zw
    });
    function Yj() {
        Sg.call(this);
        0 < arguments.length && D.td(Yj);
        this.name = "ClickSelecting"
    }
    D.Sa(Yj, Sg);
    D.ja("ClickSelectingTool", Yj);
    Yj.prototype.canStart = function() {
        return ! this.isEnabled || null === this.g || this.isBeyondDragSize() ? !1 : !0
    };
    Yj.prototype.doMouseUp = function() {
        this.wa && (this.standardMouseSelect(), !this.standardMouseClick() && null !== this.g && this.g.U.Lj && this.g.kb.doToolTip());
        this.stopTool()
    };
    function Zj() {
        Sg.call(this);
        0 < arguments.length && D.td(Zj);
        this.name = "Action";
        this.Do = null
    }
    D.Sa(Zj, Sg);
    D.ja("ActionTool", Zj);
    Zj.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a) return ! 1;
        var b = a.U,
        c = a.Ge(b.ha,
        function(a) {
            for (; null !== a.Q && !a.tu;) a = a.Q;
            return a
        });
        if (null !== c) {
            if (!c.tu) return ! 1;
            this.Do = c;
            a.Qo = a.Ge(b.ha, null, null);
            return ! 0
        }
        return ! 1
    };
    Zj.prototype.doMouseDown = function() {
        if (this.wa) {
            var a = this.g.U,
            b = this.Do;
            null !== b && (a.We = b, null !== b.yE && b.yE(a, b))
        } else this.canStart() && this.doActivate()
    };
    Zj.prototype.doMouseMove = function() {
        if (this.wa) {
            var a = this.g.U,
            b = this.Do;
            null !== b && (a.We = b, null !== b.zE && b.zE(a, b))
        }
    };
    Zj.prototype.doMouseUp = function() {
        if (this.wa) {
            var a = this.g,
            b = a.U,
            c = this.Do;
            if (null === c) return;
            b.We = c;
            null !== c.AE && c.AE(b, c);
            this.isBeyondDragSize() || Rh(c, b, a)
        }
        this.stopTool()
    };
    Zj.prototype.doCancel = function() {
        var a = this.g;
        if (null !== a) {
            var a = a.U,
            b = this.Do;
            if (null === b) return;
            a.We = b;
            null !== b.xE && b.xE(a, b)
        }
        this.stopTool()
    };
    Zj.prototype.doStop = function() {
        this.Do = null
    };
    function ta() {
        Sg.call(this);
        0 < arguments.length && D.td(ta);
        this.name = "ClickCreating";
        this.ol = null;
        this.kD = !0;
        this.ZC = new O(0, 0)
    }
    D.Sa(ta, Sg);
    D.ja("ClickCreatingTool", ta);
    ta.prototype.canStart = function() {
        if (!this.isEnabled || null === this.pA) return ! 1;
        var a = this.g;
        if (null === a || a.mb || a.Ff || !a.Zp || !a.U.left || this.isBeyondDragSize()) return ! 1;
        if (this.eJ) {
            if (1 === a.U.Oe && (this.ZC = a.U.qe.copy()), 2 !== a.U.Oe || this.isBeyondDragSize(this.ZC)) return ! 1
        } else if (1 !== a.U.Oe) return ! 1;
        return a.gb !== this && null !== a.iu(a.U.ha, !0) ? !1 : !0
    };
    ta.prototype.doMouseUp = function() {
        var a = this.g;
        this.wa && null !== a && this.insertPart(a.U.ha);
        this.stopTool()
    };
    ta.prototype.insertPart = function(a) {
        var b = this.g;
        if (null === b) return null;
        var c = this.pA;
        if (null === c) return null;
        this.$b(this.name);
        var d = null;
        c instanceof F ? c.oe() && (Kh(c), d = c.copy(), null !== d && b.add(d)) : null !== c && (c = b.ga.copyNodeData(c), D.Ta(c) && (b.ga.Vl(c), d = b.Nh(c)));
        null !== d && (d.location = a, b.Bf && b.select(d));
        b.yc();
        this.Pf = this.name;
        b.Ja("PartCreated", d);
        this.bl();
        return d
    };
    D.defineProperty(ta, {
        pA: "archetypeNodeData"
    },
    function() {
        return this.ol
    },
    function(a) {
        null !== a && D.l(a, Object, ta, "archetypeNodeData");
        this.ol = a
    });
    D.defineProperty(ta, {
        eJ: "isDoubleClick"
    },
    function() {
        return this.kD
    },
    function(a) {
        D.h(a, "boolean", ta, "isDoubleClick");
        this.kD = a
    });
    function ak() {
        this.sE = this.vD = this.Fz = this.$z = null
    }
    D.ja("HTMLInfo", ak);
    D.defineProperty(ak, {
        cB: "mainElement"
    },
    function() {
        return this.vD
    },
    function(a) {
        null !== a && D.l(a, HTMLElement, ak, "mainElement");
        this.vD = a
    });
    D.defineProperty(ak, {
        show: "show"
    },
    function() {
        return this.$z
    },
    function(a) {
        this.$z !== a && (null !== a && D.h(a, "function", ak, "show"), this.$z = a)
    });
    D.defineProperty(ak, {
        Wn: "hide"
    },
    function() {
        return this.Fz
    },
    function(a) {
        this.Fz !== a && (null !== a && D.h(a, "function", ak, "hide"), this.Fz = a)
    });
    D.defineProperty(ak, {
        YB: "valueFunction"
    },
    function() {
        return this.sE
    },
    function(a) {
        this.sE = a
    });
    function bk(a, b, c) {
        this.text = a;
        this.OE = b;
        this.visible = c
    }
    function ck() {
        Sg.call(this);
        0 < arguments.length && D.td(ck);
        this.name = "ContextMenu";
        this.CC = this.iz = this.zC = null;
        this.BD = new O;
        this.kz = this.Nm = null;
        var a = this;
        this.gA = function() {
            a.stopTool()
        };
        dk(this)
    }
    D.Sa(ck, Sg);
    D.ja("ContextMenuTool", ck);
    function dk(a) {
        var b = new ak;
        b.show = function(a, b, c) {
            c.showDefaultContextMenu()
        };
        b.Wn = function(a, b) {
            b.hideDefaultContextMenu()
        };
        a.Nm = b;
        a.gA = function() {
            a.stopTool()
        };
        if (!1 === D.WE) {
            var b = D.createElement("div"),
            c = D.createElement("div");
            b.style.cssText = "top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
            c.style.cssText = "z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
            var d = D.createElement("style");
            window.document.getElementsByTagName("head")[0].appendChild(d);
            d.sheet.insertRule(".goCXul { list-style: none; }", 0);
            d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
            d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
            b.addEventListener("contextmenu", ek, !1);
            b.addEventListener("selectstart", ek, !1);
            c.addEventListener("contextmenu", ek, !1);
            window.document.body && (window.document.body.appendChild(b), window.document.body.appendChild(c));
            D.au = b;
            D.$t = c;
            D.WE = !0
        }
    }
    function ek(a) {
        a.preventDefault();
        return ! 1
    }
    ck.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        return null === a || this.isBeyondDragSize() || !a.U.right ? !1 : null !== this.Nm && a.U.Lj || null !== this.findObjectWithContextMenu() ? !0 : !1
    };
    ck.prototype.doStart = function() {
        var a = this.g;
        null !== a && this.BD.set(a.Kc.ha)
    };
    ck.prototype.doStop = function() {
        this.hideContextMenu();
        this.xx = null
    };
    ck.prototype.findObjectWithContextMenu = function(a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b) return null;
        var c = b.U,
        d = null;
        a instanceof E || (d = a instanceof P ? a: b.Ge(c.ha, null,
        function(a) {
            return ! a.layer.Tc
        }));
        if (null !== d) {
            for (a = d; null !== a;) {
                if (null !== a.contextMenu) return a;
                a = a.Q
            }
            if (null !== this.Nm && b.U.Lj) return d.Y
        } else if (null !== b.contextMenu) return b;
        return null
    };
    ck.prototype.doActivate = function() {};
    ck.prototype.doMouseDown = function() {
        Sg.prototype.doMouseDown.call(this);
        null !== this.g && this.g.kb.lf.contains(this) && fk(this)
    };
    ck.prototype.doMouseUp = function() {
        fk(this)
    };
    function fk(a) {
        var b = a.g;
        if (null !== b) if (a.wa) {
            var c = a.dm;
            if (null !== c) {
                if (! (c instanceof ak)) {
                    var d = b.Ge(b.U.ha, null, null);
                    null !== d && d.tm(c) && a.standardMouseClick(null, null)
                }
                a.stopTool();
                a.canStart() && (b.gb = a, a.doMouseUp())
            }
        } else a.canStart() && (Ph(a, !0), a.wa || a.stopTool())
    }
    function Ph(a, b, c) {
        void 0 === c && (c = null);
        b && a.standardMouseSelect();
        if (!a.standardMouseClick()) if (a.wa = !0, b = a.Nm, null === c && (c = a.findObjectWithContextMenu()), null !== c) {
            var d = c.contextMenu;
            null !== d ? (a.xx = c instanceof P ? c: null, a.showContextMenu(d, a.xx)) : null !== b && a.showContextMenu(b, a.xx)
        } else null !== b && a.showContextMenu(b, null)
    }
    ck.prototype.doMouseMove = function() {
        this.wa && null !== this.g && this.g.kb.doMouseMove()
    };
    ck.prototype.showContextMenu = function(a, b) { ! v || a instanceof da || a instanceof ak || D.k("showContextMenu:contextMenu must be an Adornment or HTMLInfo.");
        null !== b && D.l(b, P, ck, "showContextMenu:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.dm && this.hideContextMenu();
            if (a instanceof da) {
                a.Jf = "Tool";
                a.$k = !1;
                a.scale = 1 / c.scale;
                a.Dd = this.name;
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null,
                    d = b.lm();
                    null !== d && (c = d.data);
                    a.zb = b;
                    a.data = c
                } else a.data = c.ga;
                a.hf();
                this.positionContextMenu(a, b)
            } else a instanceof ak && a.show(b, c, this);
            this.dm = a
        }
    };
    ck.prototype.positionContextMenu = function(a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.U.ha.copy(),
                d = a.Fa,
                e = b.xb;
                b.U.Lj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y + d.height > e.bottom && (c.y -= d.height + 5);
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    ck.prototype.hideContextMenu = function() {
        var a = this.g;
        if (null !== a) {
            var b = this.dm;
            null !== b && (b instanceof da ? (a.remove(b), null !== this.iz && this.iz.Tj(b.Dd), b.data = null, b.zb = null) : b instanceof ak && (null !== b.Wn ? b.Wn(a, this) : null !== b.cB && (b.cB.style.display = "none")), this.dm = null, this.standardMouseOver())
        }
    };
    function gk(a) {
        if (null === a.g) return null;
        a = new K(bk);
        a.add(new bk("Copy",
        function(a) {
            a.wb.copySelection()
        },
        function(a) {
            return a.wb.canCopySelection()
        }));
        a.add(new bk("Cut",
        function(a) {
            a.wb.cutSelection()
        },
        function(a) {
            return a.wb.canCutSelection()
        }));
        a.add(new bk("Delete",
        function(a) {
            a.wb.deleteSelection()
        },
        function(a) {
            return a.wb.canDeleteSelection()
        }));
        a.add(new bk("Paste",
        function(a) {
            a.wb.pasteSelection(a.U.ha)
        },
        function(a) {
            return a.wb.canPasteSelection()
        }));
        a.add(new bk("Select All",
        function(a) {
            a.wb.selectAll()
        },
        function(a) {
            return a.wb.canSelectAll()
        }));
        a.add(new bk("Undo",
        function(a) {
            a.wb.undo()
        },
        function(a) {
            return a.wb.canUndo()
        }));
        a.add(new bk("Redo",
        function(a) {
            a.wb.redo()
        },
        function(a) {
            return a.wb.canRedo()
        }));
        a.add(new bk("Scroll To Part",
        function(a) {
            a.wb.scrollToPart()
        },
        function(a) {
            return a.wb.canScrollToPart()
        }));
        a.add(new bk("Zoom To Fit",
        function(a) {
            a.wb.zoomToFit()
        },
        function(a) {
            return a.wb.canZoomToFit()
        }));
        a.add(new bk("Reset Zoom",
        function(a) {
            a.wb.resetZoom()
        },
        function(a) {
            return a.wb.canResetZoom()
        }));
        a.add(new bk("Group Selection",
        function(a) {
            a.wb.groupSelection()
        },
        function(a) {
            return a.wb.canGroupSelection()
        }));
        a.add(new bk("Ungroup Selection",
        function(a) {
            a.wb.ungroupSelection()
        },
        function(a) {
            return a.wb.canUngroupSelection()
        }));
        a.add(new bk("Edit Text",
        function(a) {
            a.wb.editTextBlock()
        },
        function(a) {
            return a.wb.canEditTextBlock()
        }));
        return a
    }
    ck.prototype.showDefaultContextMenu = function() {
        var a = this.g;
        if (null !== a) {
            null === this.kz && (this.kz = gk(this));
            D.au.innerHTML = "";
            D.$t.addEventListener("click", this.gA, !1);
            var b = this,
            c = D.createElement("ul");
            c.className = "goCXul";
            D.au.appendChild(c);
            c.innerHTML = "";
            for (var d = this.kz.j; d.next();) {
                var e = d.value,
                g = e.visible;
                if ("function" === typeof e.OE && ("function" !== typeof g || g(a))) {
                    g = D.createElement("li");
                    g.className = "goCXli";
                    var h = D.createElement("a");
                    h.className = "goCXa";
                    h.href = "#";
                    h.pH = e.OE;
                    h.addEventListener("click",
                    function(c) {
                        this.pH(a);
                        b.stopTool();
                        c.preventDefault();
                        return ! 1
                    },
                    !1);
                    h.textContent = e.text;
                    g.appendChild(h);
                    c.appendChild(g)
                }
            }
            D.au.style.display = "block";
            D.$t.style.display = "block"
        }
    };
    ck.prototype.hideDefaultContextMenu = function() {
        null !== this.dm && this.dm === this.Nm && (D.au.style.display = "none", D.$t.style.display = "none", D.$t.removeEventListener("click", this.gA, !1), this.dm = null)
    };
    D.defineProperty(ck, {
        dm: "currentContextMenu"
    },
    function() {
        return this.zC
    },
    function(a) { ! v || null === a || a instanceof da || a instanceof ak || D.k("ContextMenuTool.currentContextMenu must be an Adornment or HTMLInfo.");
        this.zC = a;
        this.iz = a instanceof da ? a.Zf: null
    });
    D.defineProperty(ck, {
        tL: "defaultTouchContextMenu"
    },
    function() {
        return this.Nm
    },
    function(a) { ! v || null === a || a instanceof da || a instanceof ak || D.k("ContextMenuTool.defaultTouchContextMenu must be an Adornment or HTMLInfo.");
        this.Nm = a
    });
    D.defineProperty(ck, {
        xx: "currentObject"
    },
    function() {
        return this.CC
    },
    function(a) {
        null !== a && D.l(a, P, ck, "currentObject");
        this.CC = a
    });
    D.w(ck, {
        XL: "mouseDownPoint"
    },
    function() {
        return this.BD
    });
    function hk() {
        Sg.call(this);
        0 < arguments.length && D.td(hk);
        this.name = "DragSelecting";
        this.Wo = 175;
        this.pD = !1;
        var a = new F;
        a.Jf = "Tool";
        a.$k = !1;
        var b = new z;
        b.name = "SHAPE";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        a.add(b);
        this.Jm = a
    }
    D.Sa(hk, Sg);
    D.ja("DragSelectingTool", hk);
    hk.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || !a.Bf) return ! 1;
        var b = a.U;
        return ! b.left || a.gb !== this && (!this.isBeyondDragSize() || b.timestamp - a.Kc.timestamp < this.XE || null !== a.iu(b.ha, !0)) ? !1 : !0
    };
    hk.prototype.doActivate = function() {
        var a = this.g;
        null !== a && (this.wa = !0, a.jf = !0, a.Eb = !0, a.add(this.Jh), this.doMouseMove())
    };
    hk.prototype.doDeactivate = function() {
        var a = this.g;
        null !== a && (yi(a), a.remove(this.Jh), a.Eb = !1, this.wa = a.jf = !1)
    };
    hk.prototype.doMouseMove = function() {
        var a = this.g;
        if (null !== a && this.wa && null !== this.Jh) {
            var b = this.computeBoxBounds(),
            c = this.Jh.Ed("SHAPE");
            null === c && (c = this.Jh.Vd());
            c.Ea = b.size;
            this.Jh.position = b.position; (a.ye || a.ze) && a.CA(a.U.qe)
        }
    };
    hk.prototype.doMouseUp = function() {
        if (this.wa) {
            var a = this.g;
            a.remove(this.Jh);
            try {
                a.jc = "wait",
                this.selectInRect(this.computeBoxBounds())
            } finally {
                a.jc = ""
            }
        }
        this.stopTool()
    };
    hk.prototype.computeBoxBounds = function() {
        var a = this.g;
        return null === a ? new B(0, 0, 0, 0) : new B(a.Kc.ha, a.U.ha)
    };
    hk.prototype.selectInRect = function(a) {
        var b = this.g;
        if (null !== b) {
            var c = b.U;
            b.Ja("ChangingSelection");
            a = b.Qk(a, null,
            function(a) {
                return a instanceof F ? a.canSelect() : !1
            },
            this.kJ);
            if (D.Vk ? c.Hu: c.control) if (c.shift) for (a = a.j; a.next();) c = a.value,
            c.hb && (c.hb = !1);
            else for (a = a.j; a.next();) c = a.value,
            c.hb = !c.hb;
            else {
                if (!c.shift) {
                    for (var c = new K(F), d = b.selection.j; d.next();) {
                        var e = d.value;
                        a.contains(e) || c.add(e)
                    }
                    for (c = c.j; c.next();) c.value.hb = !1
                }
                for (a = a.j; a.next();) c = a.value,
                c.hb || (c.hb = !0)
            }
            b.Ja("ChangedSelection")
        }
    };
    D.defineProperty(hk, {
        XE: "delay"
    },
    function() {
        return this.Wo
    },
    function(a) {
        D.h(a, "number", hk, "delay");
        this.Wo = a
    });
    D.defineProperty(hk, {
        kJ: "isPartialInclusion"
    },
    function() {
        return this.pD
    },
    function(a) {
        D.h(a, "boolean", hk, "isPartialInclusion");
        this.pD = a
    });
    D.defineProperty(hk, {
        Jh: "box"
    },
    function() {
        return this.Jm
    },
    function(a) {
        null !== a && D.l(a, F, hk, "box");
        this.Jm = a
    });
    function ik() {
        Sg.call(this);
        0 < arguments.length && D.td(ik);
        this.name = "Panning";
        this.Sz = new O;
        this.ak = !1;
        var a = this;
        this.bE = function() {
            window.document.removeEventListener("scroll", a.bE, !1);
            a.stopTool()
        }
    }
    D.Sa(ik, Sg);
    D.ja("PanningTool", ik);
    ik.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        return null === a || !a.ye && !a.ze || !a.U.left || a.gb !== this && !this.isBeyondDragSize() ? !1 : !0
    };
    ik.prototype.doActivate = function() {
        var a = this.g;
        null !== a && (this.ak ? (a.U.bubbles = !0, window.document.addEventListener("scroll", this.bE, !1)) : (a.jc = "move", a.jf = !0, this.Sz = a.position.copy()), this.wa = !0)
    };
    ik.prototype.doDeactivate = function() {
        var a = this.g;
        null !== a && (a.jc = "", this.wa = a.jf = !1)
    };
    ik.prototype.doCancel = function() {
        var a = this.g;
        null !== a && (a.position = this.Sz, a.jf = !1);
        this.stopTool()
    };
    ik.prototype.doMouseMove = function() {
        this.move()
    };
    ik.prototype.doMouseUp = function() {
        this.move();
        this.stopTool()
    };
    ik.prototype.move = function() {
        var a = this.g;
        if (this.wa && a) if (this.ak) a.U.bubbles = !0;
        else {
            var b = a.position,
            c = a.Kc.ha,
            d = a.U.ha,
            e = b.x + c.x - d.x,
            c = b.y + c.y - d.y;
            a.ye || (e = b.x);
            a.ze || (c = b.y);
            a.position = new O(e, c)
        }
    };
    D.defineProperty(ik, {
        bubbles: "bubbles"
    },
    function() {
        return this.ak
    },
    function(a) {
        D.h(a, "boolean", ik, "bubbles");
        this.ak = a
    });
    D.w(ik, {
        fM: "originalPosition"
    },
    function() {
        return this.Sz
    });
    function jk() {
        0 < arguments.length && D.td(jk);
        Sg.call(this);
        this.name = "TextEditing";
        this.eA = this.Ck = null;
        this.aE = kk;
        this.Ql = null;
        this.$a = lk;
        this.Ll = null;
        this.yD = 1;
        this.VD = !0;
        var a = new ak;
        this.EC = null;
        this.MC = a;
        this.lz = null;
        mk(this, a)
    }
    D.ja("TextEditingTool", jk);
    D.Sa(jk, Sg);
    var nk;
    jk.LostFocus = nk = D.s(jk, "LostFocus", 0);
    var ok;
    jk.MouseDown = ok = D.s(jk, "MouseDown", 1);
    var pk;
    jk.Tab = pk = D.s(jk, "Tab", 2);
    var qk;
    jk.Enter = qk = D.s(jk, "Enter", 3);
    jk.SingleClick = D.s(jk, "SingleClick", 0);
    var kk;
    jk.SingleClickSelected = kk = D.s(jk, "SingleClickSelected", 1);
    var rk;
    jk.DoubleClick = rk = D.s(jk, "DoubleClick", 2);
    var lk;
    jk.StateNone = lk = D.s(jk, "StateNone", 0);
    var sk;
    jk.StateActive = sk = D.s(jk, "StateActive", 1);
    var tk;
    jk.StateEditing = tk = D.s(jk, "StateEditing", 2);
    var uk;
    jk.StateValidating = uk = D.s(jk, "StateValidating", 3);
    var vk;
    jk.StateInvalid = vk = D.s(jk, "StateInvalid", 4);
    var wk;
    jk.StateValidated = wk = D.s(jk, "StateValidated", 5);
    function mk(a, b) {
        var c = D.createElement("textarea");
        a.lz = c;
        c.addEventListener("input",
        function() {
            if (null !== a.ih) {
                var b = a.CJ(this.value),
                c = this.pK;
                this.style.width = 20 + b.Fa.width * c + "px";
                this.style.height = 10 + b.Fa.height * c + "px";
                this.rows = b.rJ
            }
        },
        !1);
        c.addEventListener("keydown",
        function(b) {
            if (null !== a.ih) {
                var c = b.which;
                13 === c ? (!1 === a.ih.Xx && b.preventDefault(), a.acceptText(qk)) : 9 === c ? (a.acceptText(pk), b.preventDefault()) : 27 === c && (a.doCancel(), null !== a.g && a.g.doFocus())
            }
        },
        !1);
        c.addEventListener("focus",
        function() {
            xk(a)
        },
        !1);
        c.addEventListener("blur",
        function() {
            yk(a)
        },
        !1);
        b.YB = function() {
            return c.value
        };
        b.cB = c;
        b.show = function(a, b, g) {
            if (g.state === vk) c.style.border = "3px solid red",
            c.focus();
            else {
                var h = a.eb(gc),
                k = b.position,
                l = b.scale,
                m = a.Fj() * l;
                m < g.fG && (m = g.fG);
                var n = a.Ga.width * m + 6,
                p = a.Ga.height * m + 2,
                q = (h.x - k.x) * l,
                h = (h.y - k.y) * l;
                c.value = a.text;
                b.Dj.style.font = a.font;
                c.style.cssText = "position: absolute;z-index: 100;font: inherit;fontSize: " + 100 * m + "%;lineHeight: normal;width: " + n + "px;height: " + p + "px;left: " + ((q - n / 2 | 0) - 1) + "px;top: " + ((h - p / 2 | 0) - 1) + "px;textAlign: " + a.textAlign + ";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;";
                c.pK = m;
                b.Dj.appendChild(c);
                c.focus();
                g.Dy && (c.select(), c.setSelectionRange(0, 9999))
            }
        };
        b.Wn = function(a) {
            a.Dj.removeChild(c)
        }
    }
    D.defineProperty(jk, {
        ih: "textBlock"
    },
    function() {
        return this.eA
    },
    function(a) {
        null !== a && D.l(a, na, jk, "textBlock");
        this.eA = a
    });
    D.defineProperty(jk, {
        Bj: "currentTextEditor"
    },
    function() {
        return this.EC
    },
    function(a) {
        this.EC = a
    });
    D.defineProperty(jk, {
        oI: "defaultTextEditor"
    },
    function() {
        return this.MC
    },
    function(a) { ! v || a instanceof HTMLElement || a instanceof ak || D.k("TextEditingTool.defaultTextEditor must be an Element or HTMLInfo.");
        this.MC = a
    });
    D.defineProperty(jk, {
        VG: "starting"
    },
    function() {
        return this.aE
    },
    function(a) {
        D.Ca(a, jk, jk, "starting");
        this.aE = a
    });
    jk.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || a.mb || !a.U.left || this.isBeyondDragSize()) return ! 1;
        var b = a.Ge(a.U.ha, null,
        function(a) {
            return a instanceof na
        });
        if (null === b || !b.FA || !b.Y.canEdit()) return ! 1;
        b = b.Y;
        return null === b || this.VG === kk && !b.hb || this.VG === rk && 2 > a.U.Oe ? !1 : !0
    };
    jk.prototype.doStart = function() {
        this.wa || null === this.ih || this.doActivate()
    };
    jk.prototype.doActivate = function() {
        if (!this.wa) {
            var a = this.g;
            if (null !== a) {
                var b = this.ih;
                null === b && (b = a.Ge(a.U.ha,
                function(a) {
                    return a instanceof na ? a: null
                }));
                if (null !== b && (this.ih = b, null !== b.Y)) {
                    this.wa = !0;
                    this.$a = sk;
                    var c = this.oI;
                    null !== b.ZG && (c = b.ZG);
                    this.Ck = this.ih.copy();
                    var d = new B(this.ih.eb(cc), this.ih.eb(rc));
                    a.dK(d);
                    if (c instanceof ak) c.show(b, a, this);
                    else {
                        c.style.position = "absolute";
                        c.style.zIndex = "100";
                        c.textEditingTool = this;
                        if ("function" === typeof c.onActivate) c.onActivate();
                        "function" === typeof c.focus && c.focus();
                        "function" === typeof c.select && this.Dy && (c.select(), c.setSelectionRange(0, 9999));
                        a.Dj.appendChild(c)
                    }
                    this.Bj = c
                }
            }
        }
    };
    jk.prototype.doCancel = function() {
        null !== this.Ll && this.Bj instanceof HTMLElement && (this.Bj.style.border = this.Ll, this.Ll = null);
        this.stopTool()
    };
    jk.prototype.doMouseUp = function() { ! this.wa && this.canStart() && this.doActivate()
    };
    jk.prototype.doMouseDown = function() {
        this.wa && this.acceptText(ok)
    };
    jk.prototype.acceptText = function(a) {
        switch (a) {
        case ok:
            if (this.$a === wk) this.Bj instanceof HTMLElement && this.Bj.focus();
            else if (this.$a === sk || this.$a === vk || this.$a === tk) this.$a = uk,
            zk(this);
            break;
        case nk:
        case qk:
        case pk:
            if (qk === a && !0 === this.eA.Xx) break;
            if (this.$a === sk || this.$a === vk || this.$a === tk) this.$a = uk,
            zk(this)
        }
    };
    function zk(a) {
        var b = a.ih,
        c = a.g,
        d = a.Bj;
        if (null !== b && null !== d) {
            var e = b.text,
            g = "";
            d instanceof ak ? null !== d.YB && (g = d.YB()) : (g = d.value, g = "function" === typeof g ? g() : g);
            a.isValidText(b, e, g) ? (a.$b(a.name), a.$a = wk, d instanceof ak ? d.show(b, c, a) : null !== a.Ll && (d.style.border = a.Ll, a.Ll = null), a.Pf = a.name, b.text = g, null !== b.YG && b.YG(b, e, g), null !== c && c.Ja("TextEdited", b, e), a.bl(), a.stopTool(), null !== c && c.doFocus()) : (a.$a = vk, null !== b.HA && b.HA(a, e, g), d instanceof ak ? d.show(b, c, a) : (null === a.Ll && (a.Ll = d.style.border, d.style.border = "3px solid red"), "function" === typeof d.focus && d.focus()))
        }
    }
    jk.prototype.doDeactivate = function() {
        var a = this.g;
        if (null !== a) {
            this.$a = lk;
            this.ih = null;
            if (null !== this.Bj) {
                var b = this.Bj;
                if (b instanceof ak) b.Wn(a, this);
                else {
                    if ("function" === typeof b.onDeactivate) b.onDeactivate();
                    null !== b && a.Dj.removeChild(b)
                }
            }
            this.wa = !1
        }
    };
    jk.prototype.doFocus = function() {
        v && D.Nn("TextEditingTool.doFocus", "2.0");
        xk(this)
    };
    jk.prototype.doBlur = function() {
        v && D.Nn("TextEditingTool.doBlur", "2.0");
        yk(this)
    };
    function xk(a) {
        if (null !== a.Bj) {
            var b = a.lz;
            a.$a === sk && (a.$a = tk);
            "function" === typeof b.select && a.Dy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }
    function yk(a) {
        if (null !== a.Bj) {
            var b = a.lz;
            "function" === typeof b.focus && b.focus();
            "function" === typeof b.select && a.Dy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }
    jk.prototype.isValidText = function(a, b, c) {
        D.l(a, na, jk, "isValidText:textblock");
        var d = this.NB;
        if (null !== d && !d(a, b, c)) return ! 1;
        d = a.NB;
        return null === d || d(a, b, c) ? !0 : !1
    };
    D.defineProperty(jk, {
        NB: "textValidation"
    },
    function() {
        return this.Ql
    },
    function(a) {
        null !== a && D.h(a, "function", jk, "textValidation");
        this.Ql = a
    });
    D.defineProperty(jk, {
        fG: "minimumEditorScale"
    },
    function() {
        return this.yD
    },
    function(a) {
        null !== a && D.h(a, "number", jk, "minimumEditorScale");
        this.yD = a
    });
    D.defineProperty(jk, {
        Dy: "selectsTextOnActivate"
    },
    function() {
        return this.VD
    },
    function(a) {
        null !== a && D.h(a, "boolean", jk, "selectsTextOnActivate");
        this.VD = a
    });
    D.defineProperty(jk, {
        state: "state"
    },
    function() {
        return this.$a
    },
    function(a) {
        this.$a !== a && (D.Ca(a, jk, jk, "starting"), this.$a = a)
    });
    jk.prototype.measureTemporaryTextBlock = jk.prototype.CJ = function(a) {
        var b = this.Ck;
        b.text = a;
        Ak(b, this.ih.tp, Infinity);
        return b
    };
    function Hh() {
        Sg.call(this);
        this.name = "ToolManager";
        this.uH = new K(Sg);
        this.vH = new K(Sg);
        this.wH = new K(Sg);
        this.cD = this.dD = 850;
        this.RC = (new Ca(2, 2)).Na();
        this.nE = 5E3;
        this.CD = Th;
        this.aD = Bk;
        this.Jv = this.FC = null;
        this.xn = -1
    }
    D.Sa(Hh, Sg);
    D.ja("ToolManager", Hh);
    var Th;
    Hh.WheelScroll = Th = D.s(Hh, "WheelScroll", 0);
    var Sh;
    Hh.WheelZoom = Sh = D.s(Hh, "WheelZoom", 1);
    Hh.WheelNone = D.s(Hh, "WheelNone", 2);
    var Bk;
    Hh.GestureZoom = Bk = D.s(Hh, "GestureZoom", 3);
    var Ck;
    Hh.GestureCancel = Ck = D.s(Hh, "GestureCancel", 4);
    var Dk;
    Hh.GestureNone = Dk = D.s(Hh, "GestureNone", 5);
    D.defineProperty(Hh, {
        Ku: "mouseWheelBehavior"
    },
    function() {
        return this.CD
    },
    function(a) {
        D.Ca(a, Hh, Hh, "mouseWheelBehavior");
        this.CD = a
    });
    D.defineProperty(Hh, {
        rq: "gestureBehavior"
    },
    function() {
        return this.aD
    },
    function(a) {
        D.Ca(a, Hh, Hh, "gestureBehavior");
        this.aD = a
    });
    Hh.prototype.initializeStandardTools = function() {
        this.GH = new Zj;
        this.rG = new Xh;
        this.uJ = new xj;
        this.EG = new Pj;
        this.aK = new Wj;
        this.bG = new ra;
        this.De = new Mh;
        this.sI = new hk;
        this.PJ = new ik;
        this.vA = new ck;
        this.MB = new jk;
        this.XH = new ta;
        this.YH = new Yj
    };
    Hh.prototype.updateAdornments = function(a) {
        var b = this.em;
        if (b instanceof da && this.Jv === a) {
            var c = b.zb; (null !== a ? c.Y === a: null === c) ? this.showToolTip(b, c) : this.hideToolTip()
        }
    };
    Hh.prototype.doMouseDown = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            b.Lj && this.rq === Ck && (b.bubbles = !1);
            if (b.yu) {
                this.cancelWaitAfter();
                if (this.rq === Dk) {
                    b.bubbles = !0;
                    return
                }
                if (this.rq === Ck) return;
                if (a.gb.canStartMultiTouch()) {
                    a.gb.standardPinchZoomStart();
                    return
                }
            }
            var c = a.ra;
            c.rA && 0 !== c.Vh && D.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
            for (var c = this.lf.length,
            d = 0; d < c; d++) {
                var e = this.lf.ea(d);
                null === e.g && e.Xc(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.gb = e;
                    a.gb === e && (e.wa || e.doActivate(), e.doMouseDown());
                    return
                }
            }
            1 === a.U.button && (this.Ku === Th ? this.Ku = Sh: this.Ku === Sh && (this.Ku = Th));
            this.doActivate();
            this.standardWaitAfter(this.GF, b)
        }
    };
    Hh.prototype.doMouseMove = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            if (b.yu) {
                if (this.rq === Dk) {
                    b.bubbles = !0;
                    return
                }
                if (this.rq === Ck) return;
                if (a.gb.canStartMultiTouch()) {
                    a.gb.standardPinchZoomMove();
                    return
                }
            }
            if (this.wa) for (var c = this.ig.length,
            d = 0; d < c; d++) {
                var e = this.ig.ea(d);
                null === e.g && e.Xc(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.gb = e;
                    a.gb === e && (e.wa || e.doActivate(), e.doMouseMove());
                    return
                }
            }
            Ek(this, a);
            null === b.event || "mousemove" !== b.event.type && b.event.cancelable || (b.bubbles = !0)
        }
    };
    function Ek(a, b) {
        a.standardMouseOver();
        a.isBeyondDragSize() && a.standardWaitAfter(a.wa ? a.GF: a.XI, b.U)
    }
    Hh.prototype.doCurrentObjectChanged = function(a, b) {
        var c = this.em;
        null === c || null !== b && c instanceof da && (b === c || b.tm(c)) || this.hideToolTip()
    };
    Hh.prototype.doWaitAfter = function(a) {
        var b = this.g;
        null !== b && b.Lb && (this.doMouseHover(), this.wa || this.doToolTip(), a.Lj && !b.U.Lc && (a = a.copy(), a.button = 2, a.buttons = 2, b.U = a, b.Dt = !0, b.doMouseUp()))
    };
    Hh.prototype.doMouseHover = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            null === b.We && (b.We = a.Ge(b.ha, null, null));
            var c = b.We;
            if (null !== c) for (b.Lc = !1; null !== c;) {
                a = this.wa ? c.iB: c.jB;
                if (null !== a && (a(b, c), b.Lc)) break;
                c = c.Q
            } else c = this.wa ? a.iB: a.jB,
            null !== c && c(b)
        }
    };
    Hh.prototype.doToolTip = function() {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            null === b.We && (b.We = a.Ge(b.ha, null, null));
            b = b.We;
            if (null !== b) {
                if (a = this.em, !(a instanceof da) || b !== a && !b.tm(a)) {
                    for (; null !== b;) {
                        a = b.PB;
                        if (null !== a) {
                            this.showToolTip(a, b);
                            return
                        }
                        b = b.Q
                    }
                    this.hideToolTip()
                }
            } else a = a.PB,
            null !== a ? this.showToolTip(a, null) : this.hideToolTip()
        }
    };
    Hh.prototype.showToolTip = function(a, b) { ! v || a instanceof da || a instanceof ak || D.k("showToolTip:tooltip must be an Adornment or HTMLInfo.");
        null !== b && D.l(b, P, Hh, "showToolTip:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.em && this.hideToolTip();
            if (a instanceof da) {
                a.Jf = "Tool";
                a.$k = !1;
                a.scale = 1 / c.scale;
                a.Dd = "ToolTip";
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null,
                    d = b.lm();
                    null !== d && (c = d.data);
                    a.zb = b;
                    a.data = c
                } else a.data = c.ga;
                a.hf();
                this.positionToolTip(a, b)
            } else a instanceof ak && a !== this.em && a.show(b, c, this);
            this.em = a; - 1 !== this.xn && (D.clearTimeout(this.xn), this.xn = -1);
            c = this.uK;
            if (0 < c && Infinity !== c) {
                var e = this;
                this.xn = D.setTimeout(function() {
                    e.hideToolTip()
                },
                c)
            }
        }
    };
    Hh.prototype.positionToolTip = function(a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.U.ha.copy(),
                d = a.Fa,
                e = b.xb;
                b.U.Lj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y = c.y + 20 + d.height > e.bottom ? c.y - (d.height + 5) : c.y + 20;
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    Hh.prototype.hideToolTip = function() { - 1 !== this.xn && (D.clearTimeout(this.xn), this.xn = -1);
        var a = this.g;
        if (null !== a) {
            var b = this.em;
            null !== b && (b instanceof da ? (a.remove(b), null !== this.Jv && this.Jv.Tj(b.Dd), b.data = null, b.zb = null) : b instanceof ak && null !== b.Wn && b.Wn(a, this), this.em = null)
        }
    };
    D.defineProperty(Hh, {
        em: "currentToolTip"
    },
    function() {
        return this.FC
    },
    function(a) { ! v || null === a || a instanceof da || a instanceof ak || D.k("ToolManager.currentToolTip must be an Adornment or HTMLInfo.");
        this.FC = a;
        this.Jv = null !== a && a instanceof da ? a.Zf: null
    });
    Hh.prototype.doMouseUp = function() {
        this.cancelWaitAfter();
        var a = this.g;
        if (null !== a) {
            if (this.wa) for (var b = this.jg.length,
            c = 0; c < b; c++) {
                var d = this.jg.ea(c);
                null === d.g && d.Xc(this.g);
                if (d.canStart()) {
                    a.doFocus();
                    a.gb = d;
                    a.gb === d && (d.wa || d.doActivate(), d.doMouseUp());
                    return
                }
            }
            a.doFocus();
            this.doDeactivate()
        }
    };
    Hh.prototype.doMouseWheel = function() {
        this.standardMouseWheel()
    };
    Hh.prototype.doKeyDown = function() {
        var a = this.g;
        null !== a && a.wb.doKeyDown()
    };
    Hh.prototype.doKeyUp = function() {
        var a = this.g;
        null !== a && a.wb.doKeyUp()
    };
    Hh.prototype.doCancel = function() {
        null !== Vh && Vh.doCancel();
        Sg.prototype.doCancel.call(this)
    };
    Hh.prototype.findTool = function(a) {
        D.h(a, "string", Hh, "findTool:name");
        for (var b = this.lf.length,
        c = 0; c < b; c++) {
            var d = this.lf.ea(c);
            if (d.name === a) return d
        }
        b = this.ig.length;
        for (c = 0; c < b; c++) if (d = this.ig.ea(c), d.name === a) return d;
        b = this.jg.length;
        for (c = 0; c < b; c++) if (d = this.jg.ea(c), d.name === a) return d;
        return null
    };
    Hh.prototype.replaceTool = function(a, b) {
        D.h(a, "string", Hh, "replaceTool:name");
        null !== b && (D.l(b, Sg, Hh, "replaceTool:newtool"), b.g && b.g !== this.g && D.k("Cannot share tools between Diagrams: " + b.toString()), b.Xc(this.g));
        for (var c = this.lf.length,
        d = 0; d < c; d++) {
            var e = this.lf.ea(d);
            if (e.name === a) return null !== b ? this.lf.qg(d, b) : this.lf.jd(d),
            e
        }
        c = this.ig.length;
        for (d = 0; d < c; d++) if (e = this.ig.ea(d), e.name === a) return null !== b ? this.ig.qg(d, b) : this.ig.jd(d),
        e;
        c = this.jg.length;
        for (d = 0; d < c; d++) if (e = this.jg.ea(d), e.name === a) return null !== b ? this.jg.qg(d, b) : this.jg.jd(d),
        e;
        return null
    };
    function Fk(a, b, c, d) {
        D.h(b, "string", Hh, "replaceStandardTool:name");
        D.l(d, K, Hh, "replaceStandardTool:list");
        null !== c && (D.l(c, Sg, Hh, "replaceStandardTool:newtool"), c.g && c.g !== a.g && D.k("Cannot share tools between Diagrams: " + c.toString()), c.name = b, c.Xc(a.g));
        a.findTool(b) ? a.replaceTool(b, c) : null !== c && d.add(c)
    }
    D.w(Hh, {
        lf: "mouseDownTools"
    },
    function() {
        return this.uH
    });
    D.w(Hh, {
        ig: "mouseMoveTools"
    },
    function() {
        return this.vH
    });
    D.w(Hh, {
        jg: "mouseUpTools"
    },
    function() {
        return this.wH
    });
    D.defineProperty(Hh, {
        XI: "hoverDelay"
    },
    function() {
        return this.dD
    },
    function(a) {
        D.h(a, "number", Hh, "hoverDelay");
        this.dD = a
    });
    D.defineProperty(Hh, {
        GF: "holdDelay"
    },
    function() {
        return this.cD
    },
    function(a) {
        D.h(a, "number", Hh, "holdDelay");
        this.cD = a
    });
    D.defineProperty(Hh, {
        tI: "dragSize"
    },
    function() {
        return this.RC
    },
    function(a) {
        D.l(a, Ca, Hh, "dragSize");
        this.RC = a.V()
    });
    D.defineProperty(Hh, {
        uK: "toolTipDuration"
    },
    function() {
        return this.nE
    },
    function(a) {
        D.h(a, "number", Hh, "toolTipDuration");
        this.nE = a
    });
    D.defineProperty(Hh, {
        GH: "actionTool"
    },
    function() {
        return this.findTool("Action")
    },
    function(a) {
        Fk(this, "Action", a, this.lf)
    });
    D.defineProperty(Hh, {
        rG: "relinkingTool"
    },
    function() {
        return this.findTool("Relinking")
    },
    function(a) {
        Fk(this, "Relinking", a, this.lf)
    });
    D.defineProperty(Hh, {
        uJ: "linkReshapingTool"
    },
    function() {
        return this.findTool("LinkReshaping")
    },
    function(a) {
        Fk(this, "LinkReshaping", a, this.lf)
    });
    D.defineProperty(Hh, {
        EG: "resizingTool"
    },
    function() {
        return this.findTool("Resizing")
    },
    function(a) {
        Fk(this, "Resizing", a, this.lf)
    });
    D.defineProperty(Hh, {
        aK: "rotatingTool"
    },
    function() {
        return this.findTool("Rotating")
    },
    function(a) {
        Fk(this, "Rotating", a, this.lf)
    });
    D.defineProperty(Hh, {
        bG: "linkingTool"
    },
    function() {
        return this.findTool("Linking")
    },
    function(a) {
        Fk(this, "Linking", a, this.ig)
    });
    D.defineProperty(Hh, {
        De: "draggingTool"
    },
    function() {
        return this.findTool("Dragging")
    },
    function(a) {
        Fk(this, "Dragging", a, this.ig)
    });
    D.defineProperty(Hh, {
        sI: "dragSelectingTool"
    },
    function() {
        return this.findTool("DragSelecting")
    },
    function(a) {
        Fk(this, "DragSelecting", a, this.ig)
    });
    D.defineProperty(Hh, {
        PJ: "panningTool"
    },
    function() {
        return this.findTool("Panning")
    },
    function(a) {
        Fk(this, "Panning", a, this.ig)
    });
    D.defineProperty(Hh, {
        vA: "contextMenuTool"
    },
    function() {
        return this.findTool("ContextMenu")
    },
    function(a) {
        Fk(this, "ContextMenu", a, this.jg)
    });
    D.defineProperty(Hh, {
        MB: "textEditingTool"
    },
    function() {
        return this.findTool("TextEditing")
    },
    function(a) {
        Fk(this, "TextEditing", a, this.jg)
    });
    D.defineProperty(Hh, {
        XH: "clickCreatingTool"
    },
    function() {
        return this.findTool("ClickCreating")
    },
    function(a) {
        Fk(this, "ClickCreating", a, this.jg)
    });
    D.defineProperty(Hh, {
        YH: "clickSelectingTool"
    },
    function() {
        return this.findTool("ClickSelecting")
    },
    function(a) {
        Fk(this, "ClickSelecting", a, this.jg)
    });
    function dh() {
        this.GC = Tk;
        this.Hr = this.Ir = this.ba = null;
        this.Go = this.Jr = this.Kr = 0;
        this.Ho = this.vc = this.op = this.nk = !1;
        this.ok = this.mf = !0;
        this.Hv = this.Gv = this.BC = null;
        this.AC = 0;
        this.Iv = null;
        this.vv = new L("string");
        this.sz = 600;
        this.xH = new O(0, 0);
        this.pC = this.oC = this.rE = !1;
        this.gn = new ma(P, Zk)
    }
    D.ja("AnimationManager", dh);
    dh.prototype.Xc = function(a) {
        this.ba = a
    };
    function Tk(a, b, c, d) {
        a /= d / 2;
        return 1 > a ? c / 2 * a * a + b: -c / 2 * (--a * (a - 2) - 1) + b
    }
    D.w(dh, {
        ZK: "animationReasons"
    },
    function() {
        return this.vv
    });
    dh.prototype.canStart = function() {
        return ! 0
    };
    dh.prototype.prepareAutomaticAnimation = dh.prototype.oo = function(a) {
        this.mf && (this.ok || this.ba.Zn) && (this.vv.add(a), this.canStart(a) && (this.nk && this.Ii(), this.vc = !0))
    };
    function $k(a) {
        if (a.mf && (a.vv.clear(), a.vc)) if (!a.Ho) a.vc = !1;
        else if (0 === a.Go) {
            var b = +new Date;
            a.Go = b;
            requestAnimationFrame(function() {
                if (!1 !== a.vc && !a.nk && a.Go === b) {
                    var c = a.ba;
                    c.Gj("temporaryPixelRatio") && (c.Bk = 1);
                    al(c);
                    a.vc = !1;
                    c.Ja("AnimationStarting");
                    bl(a, b)
                }
            })
        }
    }
    function cl(a, b, c, d, e, g) {
        if (a.vc && (v && D.l(b, P, dh, "addPropToAnimation:obj"), !("position" === c && d.O(e) || b instanceof F && !b.KF))) {
            var h = a.gn;
            if (h.contains(b)) {
                var h = h.oa(b),
                k = h.start,
                l = h.end;
                void 0 === k[c] && (k[c] = dl(d));
                h.wx && void 0 !== l[c] ? h.fu[c] = dl(e) : (g || (h.fu[c] = dl(e)), l[c] = dl(e));
                g && 0 === c.indexOf("position:") && b instanceof F && (h.fu.location = dl(b.location))
            } else k = new la,
            l = new la,
            k[c] = dl(d),
            l[c] = dl(e),
            d = l,
            e = k.position,
            e instanceof O && !e.F() && a.vv.contains("Expand SubGraph") && e.assign(d.position),
            k = new Zk(k, l, g),
            g && 0 === c.indexOf("position:") && b instanceof F && (k.fu.location = dl(b.location)),
            h.add(b, k);
            a.Ho = !0
        }
    }
    function dl(a) {
        return a instanceof O ? a.copy() : a instanceof Ca ? a.copy() : a
    }
    function bl(a, b) {
        var c;
        function d() {
            if (!1 !== g.nk && g.Go === b) {
                var a = +new Date,
                c = a > s ? m: a - r;
                el(g);
                fl(g, e, q, h, c, m);
                g.Gv && g.Gv();
                Vi(e);
                gl(g);
                a > s ? hl(g) : requestAnimationFrame(d)
            }
        }
        void 0 === c && (c = new la);
        var e = a.ba;
        if (null !== e) {
            a.nk = !0;
            var g = a,
            h = c.BL || a.GC,
            k = c.aM || null,
            l = c.bM || null,
            m = c.duration || a.sz,
            n = a.xH;
            for (c = a.gn.j; c.next();) {
                var p = c.value.start.position;
                p instanceof O && (p.F() || p.assign(n))
            }
            a.BC = h;
            a.Gv = k;
            a.Hv = l;
            a.AC = m;
            a.Iv = a.gn;
            var q = a.Iv;
            for (c = q.j; c.next();) k = c.value.end,
            k["position:placeholder"] && (l = k["position:placeholder"], n = l.eb(cc), n.x += l.padding.left, n.y += l.padding.top, k["position:placeholder"] = n);
            el(a);
            fl(a, e, q, h, 0, m);
            Vi(a.ba);
            gl(a);
            var r = +new Date,
            s = r + m;
            g.Go === b && requestAnimationFrame(function() {
                d()
            })
        }
    }
    function el(a) {
        if (!a.op) {
            var b = a.ba;
            a.rE = b.Eb;
            a.oC = b.Ue;
            a.pC = b.cv;
            b.Eb = !0;
            b.Ue = !0;
            b.cv = !0;
            a.op = !0
        }
    }
    function gl(a) {
        var b = a.ba;
        b.Eb = a.rE;
        b.Ue = a.oC;
        b.cv = a.pC;
        a.op = !1
    }
    function fl(a, b, c, d, e, g) {
        for (c = c.j; c.next();) {
            var h = c.key,
            k = c.value,
            l = k.start,
            k = k.end,
            m;
            for (m in k) if (("position" !== m || !k["position:placeholder"] && !k["position:node"]) && void 0 !== il[m]) il[m](h, l[m], k[m], d, e, g)
        }
        d = b.YA;
        b.YA = !0;
        m = a.GC;
        0 !== a.Kr && 0 !== a.Jr && (c = a.Kr, b.Bb = m(e, c, a.Jr - c, g));
        null !== a.Ir && null !== a.Hr && (c = a.Ir, a = a.Hr, b.qb = new O(m(e, c.x, a.x - c.x, g), m(e, c.y, a.y - c.y, g)));
        b.YA = d
    }
    dh.prototype.stopAnimation = dh.prototype.Ii = function() { ! 0 === this.vc && (this.vc = !1, this.Ho && this.ba.Se());
        this.nk && this.mf && hl(this)
    };
    function hl(a) {
        a.nk = !1;
        a.Ho = !1;
        el(a);
        for (var b = a.ba,
        c = a.BC,
        d = a.AC,
        e = a.Iv.j; e.next();) {
            var g = e.key,
            h = e.value,
            k = h.start,
            l = h.end,
            m = h.fu,
            n;
            for (n in l) if (void 0 !== il[n]) {
                var p = n; ! h.wx || "position:node" !== p && "position:placeholder" !== p || (p = "position");
                il[p](g, k[n], void 0 !== m[n] ? m[n] : h.wx ? k[n] : l[n], c, d, d)
            }
            h.wx && void 0 !== m.location && g instanceof F && (g.location = m.location);
            h.vy && g instanceof F && g.Hd(!1)
        }
        for (c = a.ba.links; c.next();) d = c.value,
        null !== d.Jp && (d.points = d.Jp, d.Jp = null);
        b.hy.clear();
        b.Bk = null;
        b.yc();
        b.qa();
        b.gg();
        jl(b);
        gl(a);
        a.Hv && a.Hv();
        a.Go = 0;
        a.Iv = null;
        a.Hv = null;
        a.Gv = null;
        a.Ir = null;
        a.Hr = null;
        a.Kr = 0;
        a.Jr = 0;
        a.gn = new ma(P, Zk);
        b.Ja("AnimationFinished");
        b.Se()
    }
    function kl(a, b, c) {
        var d = b.$,
        e = c.$,
        g = null;
        c instanceof I && (g = c.placeholder);
        null !== g ? (d = g.eb(cc), d.x += g.padding.left, d.y += g.padding.top, cl(a, b, "position", d, b.position, !1)) : cl(a, b, "position", new O(e.x + e.width / 2 - d.width / 2, e.y + e.height / 2 - d.height / 2), b.position, !1);
        cl(a, b, "scale", .01, b.scale, !1);
        if (b instanceof I) for (b = b.Mc; b.next();) g = b.value,
        g instanceof G && kl(a, g, c)
    }
    function ll(a, b, c) {
        if (b.isVisible()) {
            var d = null;
            c instanceof I && (d = c.placeholder);
            null !== d ? cl(a, b, "position:placeholder", b.position, d, !0) : cl(a, b, "position:node", b.position, c, !0);
            cl(a, b, "scale", b.scale, .01, !0);
            a.vc && (d = a.gn, d.contains(b) && (d.oa(b).vy = !0));
            if (b instanceof I) for (b = b.Mc; b.next();) d = b.value,
            d instanceof G && ll(a, d, c)
        }
    }
    function ml(a, b, c) {
        a.vc && (null === a.Ir && b.F() && null === a.Hr && (a.Ir = b.copy()), a.Hr = c.copy(), a.Ho = !0)
    }
    function nl(a, b, c) {
        a.vc && a.ba.Zn && (0 === a.Kr && 0 === a.Jr && (a.Kr = b), a.Jr = c, a.Ho = !0)
    }
    D.defineProperty(dh, {
        isEnabled: "isEnabled"
    },
    function() {
        return this.mf
    },
    function(a) {
        D.h(a, "boolean", dh, "isEnabled");
        this.mf = a
    });
    D.defineProperty(dh, {
        duration: "duration"
    },
    function() {
        return this.sz
    },
    function(a) {
        D.h(a, "number", dh, "duration");
        1 > a && D.ua(a, ">= 1", dh, "duration");
        this.sz = a
    });
    D.w(dh, {
        sf: "isAnimating"
    },
    function() {
        return this.nk
    });
    D.w(dh, {
        lJ: "isTicking"
    },
    function() {
        return this.op
    });
    D.defineProperty(dh, {
        SF: "isInitial"
    },
    function() {
        return this.ok
    },
    function(a) {
        D.h(a, "boolean", dh, "isInitial");
        this.ok = a
    });
    function Zk(a, b, c) {
        this.start = a;
        this.end = b;
        this.fu = new la;
        this.wx = c;
        this.vy = !1
    }
    var il = {
        opacity: function(a, b, c, d, e, g) {
            a.opacity = d(e, b, c - b, g)
        },
        position: function(a, b, c, d, e, g) {
            e !== g ? a.Hy(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g)) : a.position = new O(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g))
        },
        "position:node": function(a, b, c, d, e, g) {
            var h = a.$,
            k = c.$;
            c = k.x + k.width / 2 - h.width / 2;
            h = k.y + k.height / 2 - h.height / 2;
            e !== g ? a.Hy(d(e, b.x, c - b.x, g), d(e, b.y, h - b.y, g)) : a.position = new O(d(e, b.x, c - b.x, g), d(e, b.y, h - b.y, g))
        },
        "position:placeholder": function(a, b, c, d, e, g) {
            e !== g ? a.Hy(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g)) : a.position = new O(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g))
        },
        scale: function(a, b, c, d, e, g) {
            a.scale = d(e, b, c - b, g)
        },
        visible: function(a, b, c, d, e, g) {
            a.visible = e !== g ? b: c
        }
    };
    function Rg() {
        0 < arguments.length && D.td(Rg);
        D.tc(this);
        this.ba = null;
        this.pb = new K(F);
        this.Xb = "";
        this.Fc = 1;
        this.Jz = !1;
        this.Ml = this.jA = this.ll = this.kl = this.jl = this.il = this.gl = this.hl = this.fl = this.nl = this.el = this.ml = this.dl = this.cl = !0;
        this.Gz = !1;
        this.Bw = []
    }
    D.ja("Layer", Rg);
    Rg.prototype.Xc = function(a) {
        this.ba = a
    };
    Rg.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        var b = 'Layer "' + this.name + '"';
        if (0 >= a) return b;
        for (var c = 0,
        d = 0,
        e = 0,
        g = 0,
        h = 0,
        k = this.pb.j; k.next();) {
            var l = k.value;
            l instanceof I ? e++:l instanceof G ? d++:l instanceof J ? g++:l instanceof da ? h++:c++
        }
        k = "";
        0 < c && (k += c + " Parts ");
        0 < d && (k += d + " Nodes ");
        0 < e && (k += e + " Groups ");
        0 < g && (k += g + " Links ");
        0 < h && (k += h + " Adornments ");
        if (1 < a) for (a = this.pb.j; a.next();) c = a.value,
        k += "\n    " + c.toString(),
        d = c.data,
        null !== d && D.Fd(d) && (k += " #" + D.Fd(d)),
        c instanceof G ? k += " " + ja(d) : c instanceof J && (k += " " + ja(c.aa) + " " + ja(c.da));
        return b + " " + this.pb.count + ": " + k
    };
    Rg.prototype.findObjectAt = Rg.prototype.Ge = function(a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (!1 === this.Ml) return null;
        v && !a.F() && D.k("findObjectAt: Point must have a real value, not: " + a.toString());
        var d = !1;
        null !== this.g && this.g.xb.Oa(a) && (d = !0);
        for (var e = D.P(), g = this.pb.o, h = g.length; h--;) {
            var k = g[h];
            if ((!0 !== d || !1 !== ol(k)) && k.isVisible() && (e.assign(a), hb(e, k.Hh), k = k.Ge(e, b, c), null !== k && (null !== b && (k = b(k)), null !== k && (null === c || c(k))))) return D.A(e),
            k
        }
        D.A(e);
        return null
    };
    Rg.prototype.findObjectsAt = Rg.prototype.hu = function(a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new L(P));
        if (!1 === this.Ml) return d;
        v && !a.F() && D.k("findObjectsAt: Point must have a real value, not: " + a.toString());
        var e = !1;
        null !== this.g && this.g.xb.Oa(a) && (e = !0);
        for (var g = D.P(), h = this.pb.o, k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== e || !1 !== ol(l)) && l.isVisible()) {
                g.assign(a);
                hb(g, l.Hh);
                var m = l;
                l.hu(g, b, c, d) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (d instanceof L && d.add(m), d instanceof K && d.add(m)))
            }
        }
        D.A(g);
        return d
    };
    Rg.prototype.findObjectsIn = Rg.prototype.Qk = function(a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof K || e instanceof L || (e = new L(P));
        if (!1 === this.Ml) return e;
        v && !a.F() && D.k("findObjectsIn: Rect must have a real value, not: " + a.toString());
        var g = !1;
        null !== this.g && this.g.xb.Nk(a) && (g = !0);
        for (var h = this.pb.o,
        k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== g || !1 !== ol(l)) && l.isVisible()) {
                var m = l;
                l.Qk(a, b, c, d, e) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (e instanceof L && e.add(m), e instanceof K && e.add(m)))
            }
        }
        return e
    };
    Rg.prototype.IA = function(a, b, c, d, e, g, h) {
        if (!1 === this.Ml) return e;
        for (var k = this.pb.o,
        l = k.length; l--;) {
            var m = k[l];
            if ((!0 !== h || !1 !== ol(m)) && g(m) && m.isVisible()) {
                var n = m;
                m.Qk(a, b, c, d, e) && (null !== b && (n = b(n)), null === n || null !== c && !c(n) || (e instanceof L && e.add(n), e instanceof K && e.add(n)))
            }
        }
        return e
    };
    Rg.prototype.findObjectsNear = Rg.prototype.On = function(a, b, c, d, e, g) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof K || e instanceof L) g = e;
            e = !0
        }
        g instanceof K || g instanceof L || (g = new L(P));
        if (!1 === this.Ml) return g;
        v && !a.F() && D.k("findObjectsNear: Point must have a real value, not: " + a.toString());
        var h = !1;
        null !== this.g && this.g.xb.Oa(a) && (h = !0);
        for (var k = D.P(), l = D.P(), m = this.pb.o, n = m.length; n--;) {
            var p = m[n];
            if ((!0 !== h || !1 !== ol(p)) && p.isVisible()) {
                k.assign(a);
                hb(k, p.Hh);
                l.m(a.x + b, a.y);
                hb(l, p.Hh);
                var q = p;
                p.On(k, l, c, d, e, g) && (null !== c && (q = c(q)), null === q || null !== d && !d(q) || (g instanceof L && g.add(q), g instanceof K && g.add(q)))
            }
        }
        D.A(k);
        D.A(l);
        return g
    };
    f = Rg.prototype;
    f.Lf = function(a, b) {
        if (this.visible) {
            var c;
            c = void 0 === b ? a.xb: b;
            for (var d = this.pb.o,
            e = d.length,
            g = 0; g < e; g++) {
                var h = d[g];
                h.uD = g;
                if (! (h instanceof J && !1 === h.lh)) {
                    if (h instanceof da) {
                        var k = h;
                        if (null !== k.Zf) continue
                    }
                    if (Lb(h.$, c)) for (h.Lf(!0), pl(h), h = h.jx; h.next();) k = h.value,
                    Ak(k, Infinity, Infinity),
                    k.oc(),
                    k.Lf(!0);
                    else h.Lf(!1),
                    null !== h.jx && 0 < h.jx.count && pl(h)
                }
            }
        }
    };
    f.Ee = function(a, b, c) {
        if (this.visible && 0 !== this.Fc && (void 0 === c && (c = !0), c || !this.Tc)) {
            c = this.pb.o;
            var d = c.length;
            if (0 !== d) {
                1 !== this.Fc && (a.globalAlpha = this.Fc);
                var e = this.Bw;
                e.length = 0;
                for (var g = b.scale,
                h = 0; h < d; h++) {
                    var k = c[h];
                    if (ol(k)) {
                        if (k instanceof J) {
                            var l = k;
                            l.qc && e.push(l);
                            if (!1 === l.lh) continue
                        }
                        l = k.$;
                        1 < l.width * g || 1 < l.height * g ? k.Ee(a, b) : ql(k, a)
                    }
                }
                a.globalAlpha = 1
            }
        }
    };
    function rl(a, b, c, d) {
        if (a.visible && 0 !== a.Fc) {
            1 !== a.Fc && (b.globalAlpha = a.Fc);
            var e = a.Bw;
            e.length = 0;
            var g = c.scale;
            a = a.pb.o;
            for (var h = a.length,
            k = d.length,
            l = 0; l < h; l++) {
                var m = a[l];
                if (ol(m)) {
                    if (m instanceof J) {
                        var n = m;
                        n.qc && e.push(n);
                        if (!1 === n.lh) continue
                    }
                    var n = sl(m, m.$),
                    p;
                    a: {
                        p = n;
                        for (var q = d,
                        r = k,
                        s = 2 / g,
                        u = 4 / g,
                        t = 0; t < r; t++) {
                            var y = q[t];
                            if (0 !== y.width && 0 !== y.height && p.IF(y.x - s, y.y - s, y.width + u, y.height + u)) {
                                p = !0;
                                break a
                            }
                        }
                        p = !1
                    }
                    p && (1 < n.width * g || 1 < n.height * g ? m.Ee(b, c) : ql(m, b))
                }
            }
            b.globalAlpha = 1
        }
    }
    f.i = function(a, b, c, d, e) {
        var g = this.g;
        null !== g && g.hd(cg, a, this, b, c, d, e)
    };
    f.uq = function(a, b, c) {
        var d = this.pb;
        b.kw = this;
        if (a >= d.count) a = d.count;
        else if (d.ea(a) === b) return - 1;
        d.Xd(a, b);
        b.ru(c);
        d = this.g;
        null !== d && (c ? d.qa() : d.uq(b));
        tl(this, a, b);
        return a
    };
    f.rf = function(a, b, c) {
        if (!c && b.layer !== this && null !== b.layer) return b.layer.rf(a, b, c);
        var d = this.pb;
        if (0 > a || a >= d.length) {
            if (a = d.indexOf(b), 0 > a) return - 1
        } else if (d.ea(a) !== b && (a = d.indexOf(b), 0 > a)) return - 1;
        b.su(c);
        d.jd(a);
        d = this.g;
        null !== d && (c ? d.qa() : d.rf(b));
        b.kw = null;
        return a
    };
    function tl(a, b, c) {
        b = ul(a, b, c);
        if (c instanceof I && null !== c && isNaN(c.Bo)) {
            if (0 !== c.Mc.count) {
                for (var d = -1,
                e = a.pb.o,
                g = e.length,
                h = 0; h < g; h++) {
                    var k = e[h];
                    if (k === c && (b = h, 0 <= d)) break;
                    if (0 > d && k.Pa === c && (d = h, 0 <= b)) break
                } ! (0 > d) && d < b && (e = a.pb, e.jd(b), e.Xd(d, c))
            }
            c = c.Pa;
            null !== c && tl(a, -1, c)
        }
    }
    function ul(a, b, c) {
        var d = c.Bo;
        if (isNaN(d)) return b;
        a = a.pb;
        var e = a.count;
        if (1 >= e) return b;
        0 > b && (b = a.indexOf(c));
        if (0 > b) return - 1;
        for (var g = b - 1,
        h = NaN; 0 <= g;) {
            h = a.ea(g).Bo;
            if (!isNaN(h)) break;
            g--
        }
        for (var k = b + 1,
        l = NaN; k < e;) {
            l = a.ea(k).Bo;
            if (!isNaN(l)) break;
            k++
        }
        if (!isNaN(h) && h > d) for (;;) {
            if ( - 1 === g || h <= d) {
                g++;
                if (g === b) break;
                a.jd(b);
                a.Xd(g, c);
                return g
            }
            for (h = NaN; 0 <= --g && (h = a.ea(g).Bo, isNaN(h)););
        } else if (!isNaN(l) && l < d) for (;;) {
            if (k === e || l >= d) {
                k--;
                if (k === b) break;
                a.jd(b);
                a.Xd(k, c);
                return k
            }
            for (l = NaN; ++k < e && (l = a.ea(k).Bo, isNaN(l)););
        }
        return b
    }
    f.clear = function() {
        for (var a = this.pb.lc(), b = a.length, c = 0; c < b; c++) a[c].Lf(!1),
        this.rf( - 1, a[c], !1)
    };
    D.w(Rg, {
        Gi: "parts"
    },
    function() {
        return this.pb.j
    });
    D.w(Rg, {
        kM: "partsBackwards"
    },
    function() {
        return this.pb.$n
    });
    D.w(Rg, {
        g: "diagram"
    },
    function() {
        return this.ba
    });
    D.defineProperty(Rg, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        D.h(a, "string", Rg, "name");
        var b = this.Xb;
        if (b !== a) {
            var c = this.g;
            if (null !== c) for ("" === b && D.k("Cannot rename default Layer to: " + a), c = c.ao; c.next();) c.value.name === a && D.k("Layer.name is already present in this diagram: " + a);
            this.Xb = a;
            this.i("name", b, a);
            for (a = this.pb.j; a.next();) a.value.Jf = this.Xb
        }
    });
    D.defineProperty(Rg, {
        opacity: "opacity"
    },
    function() {
        return this.Fc
    },
    function(a) {
        var b = this.Fc;
        b !== a && (D.h(a, "number", Rg, "opacity"), (0 > a || 1 < a) && D.ua(a, "0 <= value <= 1", Rg, "opacity"), this.Fc = a, this.i("opacity", b, a), a = this.g, null !== a && a.qa())
    });
    D.defineProperty(Rg, {
        Tc: "isTemporary"
    },
    function() {
        return this.Jz
    },
    function(a) {
        var b = this.Jz;
        b !== a && (D.h(a, "boolean", Rg, "isTemporary"), this.Jz = a, this.i("isTemporary", b, a))
    });
    D.defineProperty(Rg, {
        visible: "visible"
    },
    function() {
        return this.jA
    },
    function(a) {
        var b = this.jA;
        if (b !== a) {
            D.h(a, "boolean", Rg, "visible");
            this.jA = a;
            this.i("visible", b, a);
            for (b = this.pb.j; b.next();) b.value.Hd(a);
            a = this.g;
            null !== a && a.qa()
        }
    });
    D.defineProperty(Rg, {
        pg: "pickable"
    },
    function() {
        return this.Ml
    },
    function(a) {
        var b = this.Ml;
        b !== a && (D.h(a, "boolean", Rg, "pickable"), this.Ml = a, this.i("pickable", b, a))
    });
    D.defineProperty(Rg, {
        LF: "isBoundsIncluded"
    },
    function() {
        return this.Gz
    },
    function(a) {
        this.Gz !== a && (this.Gz = a, null !== this.g && this.g.yc())
    });
    D.defineProperty(Rg, {
        Kk: "allowCopy"
    },
    function() {
        return this.cl
    },
    function(a) {
        var b = this.cl;
        b !== a && (D.h(a, "boolean", Rg, "allowCopy"), this.cl = a, this.i("allowCopy", b, a))
    });
    D.defineProperty(Rg, {
        Bn: "allowDelete"
    },
    function() {
        return this.dl
    },
    function(a) {
        var b = this.dl;
        b !== a && (D.h(a, "boolean", Rg, "allowDelete"), this.dl = a, this.i("allowDelete", b, a))
    });
    D.defineProperty(Rg, {
        nx: "allowTextEdit"
    },
    function() {
        return this.ml
    },
    function(a) {
        var b = this.ml;
        b !== a && (D.h(a, "boolean", Rg, "allowTextEdit"), this.ml = a, this.i("allowTextEdit", b, a))
    });
    D.defineProperty(Rg, {
        kx: "allowGroup"
    },
    function() {
        return this.el
    },
    function(a) {
        var b = this.el;
        b !== a && (D.h(a, "boolean", Rg, "allowGroup"), this.el = a, this.i("allowGroup", b, a))
    });
    D.defineProperty(Rg, {
        ox: "allowUngroup"
    },
    function() {
        return this.nl
    },
    function(a) {
        var b = this.nl;
        b !== a && (D.h(a, "boolean", Rg, "allowUngroup"), this.nl = a, this.i("allowUngroup", b, a))
    });
    D.defineProperty(Rg, {
        Vt: "allowLink"
    },
    function() {
        return this.fl
    },
    function(a) {
        var b = this.fl;
        b !== a && (D.h(a, "boolean", Rg, "allowLink"), this.fl = a, this.i("allowLink", b, a))
    });
    D.defineProperty(Rg, {
        Cn: "allowRelink"
    },
    function() {
        return this.hl
    },
    function(a) {
        var b = this.hl;
        b !== a && (D.h(a, "boolean", Rg, "allowRelink"), this.hl = a, this.i("allowRelink", b, a))
    });
    D.defineProperty(Rg, {
        Yl: "allowMove"
    },
    function() {
        return this.gl
    },
    function(a) {
        var b = this.gl;
        b !== a && (D.h(a, "boolean", Rg, "allowMove"), this.gl = a, this.i("allowMove", b, a))
    });
    D.defineProperty(Rg, {
        lx: "allowReshape"
    },
    function() {
        return this.il
    },
    function(a) {
        var b = this.il;
        b !== a && (D.h(a, "boolean", Rg, "allowReshape"), this.il = a, this.i("allowReshape", b, a))
    });
    D.defineProperty(Rg, {
        Wt: "allowResize"
    },
    function() {
        return this.jl
    },
    function(a) {
        var b = this.jl;
        b !== a && (D.h(a, "boolean", Rg, "allowResize"), this.jl = a, this.i("allowResize", b, a))
    });
    D.defineProperty(Rg, {
        mx: "allowRotate"
    },
    function() {
        return this.kl
    },
    function(a) {
        var b = this.kl;
        b !== a && (D.h(a, "boolean", Rg, "allowRotate"), this.kl = a, this.i("allowRotate", b, a))
    });
    D.defineProperty(Rg, {
        Bf: "allowSelect"
    },
    function() {
        return this.ll
    },
    function(a) {
        var b = this.ll;
        b !== a && (D.h(a, "boolean", Rg, "allowSelect"), this.ll = a, this.i("allowSelect", b, a))
    });
    function E(a) {
        function b() {
            window.document.removeEventListener("DOMContentLoaded", b, !1);
            vl(c)
        }
        1 < arguments.length && D.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");
        D.tc(this);
        wl = [];
        this.Zc = !0;
        this.mC = new dh;
        this.mC.Xc(this);
        this.Rd = 17;
        this.hs = !1;
        this.Vz = "default";
        var c = this;
        null !== window.document.body ? vl(this) : window.document.addEventListener("DOMContentLoaded", b, !1);
        this.bc = new K(Rg);
        this.Rb = this.Ob = 0;
        this.yk = this.Sb = this.md = this.Lb = null;
        this.yG();
        this.lp = null;
        this.xG();
        this.qb = (new O(NaN, NaN)).freeze();
        this.Bb = 1;
        this.aw = (new O(NaN, NaN)).freeze();
        this.bw = NaN;
        this.tw = 1E-4;
        this.qw = 100;
        this.Hc = new Da;
        this.hx = (new O(NaN, NaN)).freeze();
        this.Tv = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Mw = (new Hb(0, 0, 0, 0)).freeze();
        this.Nw = xl;
        this.Jw = this.Hw = null;
        this.Im = Nh;
        this.No = Tc;
        this.yl = Nh;
        this.ip = Tc;
        this.cw = this.$v = cc;
        this.Me = !0;
        this.ds = !1;
        this.Cg = new L(F);
        this.sl = new ma(J, B);
        this.Yo = !0;
        this.jr = 250;
        this.Io = -1;
        this.yv = (new Hb(16, 16, 16, 16)).freeze();
        this.Mv = this.Yf = !1;
        this.cp = !0;
        this.Zi = new Zf;
        this.bd = new Zf;
        this.Tb = new Zf;
        this.wh = this.Oi = null;
        this.Dt = !1;
        this.oz = this.pz = null;
        yl(this);
        this.Cp = new L(G);
        this.Rl = new L(I);
        this.wp = new L(J);
        this.pb = new L(F);
        this.iw = !0;
        this.$w = zl;
        this.gD = !1;
        this.bx = Zi;
        this.jz = this.mz = this.fA = null;
        this.Fv = "";
        this.Gr = "auto";
        this.Si = this.uj = this.ij = this.ww = this.jj = this.kj = this.lj = this.Ri = this.Wi = this.Pi = null;
        this.Qz = !1;
        this.QD = {};
        this.Gw = 0;
        this.pj = [null, null];
        this.gz = null;
        this.br = this.nz = this.aA = this.WD = this.tj = !1;
        this.rD = !0;
        this.Iz = this.ge = !1;
        this.ve = null;
        var d = this;
        this.zD = function(a) {
            if (a.ga === d.ga && d.ab) {
                d.ab = !1;
                try {
                    var b = a.Ic;
                    "" === a.wf && b === cg && Al(d, a.object, a.propertyName)
                } finally {
                    d.ab = !0
                }
            }
        };
        this.AD = function(a) {
            Bl(d, a)
        };
        this.uE = !0;
        this.sh = -2;
        this.Ti = new ma(Object, F);
        this.ck = new ma(Object, J);
        this.Wm = new ma(Object, Array);
        this.Ep = new ma("string", Array);
        this.Tz = new K(Cl);
        this.aj = !1;
        this.dl = this.cl = this.nv = this.mf = !0;
        this.pv = this.ov = !1;
        this.uv = this.sv = this.ll = this.kl = this.jl = this.il = this.gl = this.hl = this.fl = this.rv = this.nl = this.el = this.ml = !0;
        this.Um = this.oD = !1;
        this.tv = this.qv = this.Yv = this.Xv = !0;
        this.Pw = this.Lw = 16;
        this.Xz = this.Kw = !1;
        this.lt = this.Ow = null;
        this.Yz = this.Zz = 0;
        this.of = (new Hb(5)).freeze();
        this.Sw = (new L(F)).freeze();
        this.rw = 999999999;
        this.Zv = (new L(F)).freeze();
        this.zl = this.Sm = this.mk = !0;
        this.wl = this.lk = !1;
        this.te = null;
        this.wv = !0;
        this.th = !1;
        this.tH = new L(J);
        this.eD = new L(Dl);
        this.Qd = null;
        this.GD = 1;
        this.ZD = 0;
        this.Fh = {
            scale: 1,
            position: new O,
            bounds: new B,
            isScroll: !1
        };
        this.tE = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Nv = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Pv = null;
        this.Cw = new L(El);
        Fl(this);
        this.mw = this.Vv = this.xw = this.JC = this.IC = this.KC = this.rk = this.ul = this.mj = null;
        Gl(this);
        this.zd = null;
        this.Uv = !1;
        this.Qo = null;
        this.kb = new Hh;
        this.kb.initializeStandardTools();
        this.gb = this.cu = this.kb;
        this.wb = new oa;
        this.ga = new Y;
        this.tj = !0;
        this.Vb = new Tg;
        this.tj = !1;
        this.WC = this.rz = null;
        this.od = 1;
        this.Bk = null;
        var e = D.vfo.split("."); ! 0 !== D.Bx.licenseKey && "1" === e[0] && 7 > parseInt(e[1], 10) && (D.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version " + D.vfo + ". This license key will do nothing until you upgrade to GoJS 1.7 or later."), D.Bx.licenseKey = !0);
        this.Dl = 1;
        this.Ym = 0;
        this.tD = new O;
        this.pE = 500;
        this.xv = new O;
        this.ut = null;
        this.Al = !1;
        this.preventDefault = this.uy = this.nG = this.oG = this.mG = this.ko = this.Zg = this.lo = this.io = this.jo = this.$B = this.QB = this.RB = this.SB = this.Ol = this.ht = this.Nl = this.gt = null;
        this.xl = new Hl;
        void 0 !== a && Il(this, a);
        this.fw = !1;
        this.DD = 1;
        this.Zc = !1
    }
    D.ja("Diagram", E);
    E.prototype.clear = E.prototype.clear = function() {
        var a = null;
        null !== this.zd && (a = this.zd.Y);
        this.ga.clear();
        for (var b = this.bc.length,
        c = 0; c < b; c++) this.bc.o[c].clear();
        this.Cg.clear();
        this.sl.clear();
        this.Cp.clear();
        this.Rl.clear();
        this.wp.clear();
        this.pb.clear();
        this.Ti.clear();
        this.ck.clear();
        this.Wm.clear();
        this.Sw.Ya();
        this.Sw.clear();
        this.Sw.freeze();
        this.Zv.Ya();
        this.Zv.clear();
        this.Zv.freeze();
        nh = this.Qo = null;
        Gh = "";
        this.Nv = (new B(NaN, NaN, NaN, NaN)).freeze();
        null !== a && (this.add(a), this.pb.remove(a));
        this.qa()
    };
    E.prototype.reset = E.prototype.reset = function() {
        this.Zc = !0;
        this.clear();
        this.bc = new K(Rg);
        this.yG();
        this.xG();
        this.qb = (new O(NaN, NaN)).freeze();
        this.Bb = 1;
        this.aw = (new O(NaN, NaN)).freeze();
        this.bw = NaN;
        this.tw = 1E-4;
        this.qw = 100;
        this.hx = (new O(NaN, NaN)).freeze();
        this.Tv = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Mw = (new Hb(0, 0, 0, 0)).freeze();
        this.Nw = xl;
        this.Jw = this.Hw = null;
        this.Im = Nh;
        this.No = Tc;
        this.yl = Nh;
        this.ip = Tc;
        this.cw = this.$v = cc;
        this.jr = 250;
        this.yv = (new Hb(16, 16, 16, 16)).freeze();
        this.iw = !0;
        this.$w = zl;
        this.bx = Zi;
        this.Gr = "auto";
        this.Si = this.uj = this.ij = this.ww = this.jj = this.kj = this.lj = this.Ri = this.Wi = this.Pi = null;
        this.aj = !1;
        this.dl = this.cl = this.nv = this.mf = !0;
        this.pv = this.ov = !1;
        this.tv = this.qv = this.Yv = this.Xv = this.uv = this.sv = this.ll = this.kl = this.jl = this.il = this.gl = this.hl = this.fl = this.rv = this.nl = this.el = this.ml = !0;
        this.Pw = this.Lw = 16;
        this.of = (new Hb(5)).freeze();
        this.rw = 999999999;
        this.te = null;
        Gl(this);
        this.zd = null;
        this.kb = new Hh;
        this.kb.initializeStandardTools();
        this.gb = this.cu = this.kb;
        this.wb = new oa;
        this.tj = !0;
        Fl(this);
        this.Vb = new Tg;
        this.tj = !1;
        this.ga = new Y;
        this.th = !1;
        this.cp = !0;
        this.Zc = this.Yf = !1;
        this.qa();
        this.wh = this.Oi = null;
        yl(this);
        this.Fv = ""
    };
    function Gl(a) {
        a.mj = new ma("string", F);
        var b = new G,
        c = new na;
        c.bind(new ih("text", "", ja));
        b.add(c);
        a.KC = b;
        a.mj.add("", b);
        b = new G;
        c = new na;
        c.stroke = "brown";
        c.bind(new ih("text", "", ja));
        b.add(c);
        a.mj.add("Comment", b);
        b = new G;
        b.$k = !1;
        b.qA = !1;
        c = new z;
        c.Jb = "Ellipse";
        c.fill = "black";
        c.stroke = null;
        c.Ea = (new Ca(3, 3)).Na();
        b.add(c);
        a.mj.add("LinkLabel", b);
        a.ul = new ma("string", I);
        b = new I;
        b.Cy = "GROUPPANEL";
        b.type = Jl;
        c = new na;
        c.font = "bold 12pt sans-serif";
        c.bind(new ih("text", "", ja));
        b.add(c);
        c = new x(Kl);
        c.name = "GROUPPANEL";
        var d = new z;
        d.Jb = "Rectangle";
        d.fill = "rgba(128,128,128,0.2)";
        d.stroke = "black";
        c.add(d);
        d = new Rj;
        d.padding = (new Hb(5, 5, 5, 5)).Na();
        c.add(d);
        b.add(c);
        a.IC = b;
        a.ul.add("", b);
        a.rk = new ma("string", J);
        b = new J;
        c = new z;
        c.Gf = !0;
        b.add(c);
        c = new z;
        c.Wq = "Standard";
        c.fill = "black";
        c.stroke = null;
        c.jb = 0;
        b.add(c);
        a.JC = b;
        a.rk.add("", b);
        b = new J;
        c = new z;
        c.Gf = !0;
        c.stroke = "brown";
        b.add(c);
        a.rk.add("Comment", b);
        b = new da;
        b.type = Kl;
        c = new z;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.jb = 3;
        b.add(c);
        c = new Rj;
        c.margin = (new Hb(1.5, 1.5, 1.5, 1.5)).Na();
        b.add(c);
        a.xw = b;
        a.Vv = b;
        b = new da;
        b.type = kj;
        c = new z;
        c.Gf = !0;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.jb = 3;
        b.add(c);
        a.mw = b
    }
    function vl(a) {
        var b = D.createElement("p");
        b.style.width = "100%";
        b.style.height = "200px";
        b.style.boxSizing = "content-box";
        var c = D.createElement("div");
        c.style.position = "absolute";
        c.style.visibility = "hidden";
        c.style.width = "200px";
        c.style.height = "150px";
        c.style.overflow = "hidden";
        c.style.boxSizing = "content-box";
        c.appendChild(b);
        window.document.body.appendChild(c);
        var d = b.offsetWidth;
        c.style.overflow = "scroll";
        b = b.offsetWidth;
        d === b && (b = c.clientWidth);
        window.document.body.removeChild(c);
        c = d - b;
        0 !== c || D.QF || (c = 11);
        a.Rd = c;
        c = D.createElement("div");
        c.dir = "rtl";
        c.style.cssText = "font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";
        c.textContent = "A";
        window.document.body.appendChild(c);
        d = "reverse";
        0 < c.scrollLeft ? d = "default": (c.scrollLeft = 1, 0 === c.scrollLeft && (d = "negative"));
        window.document.body.removeChild(c);
        a.Vz = d
    }
    E.prototype.nc = function(a) {
        a.Ne === E ? this.am = a: D.Xj(this, a)
    };
    E.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        var b = "";
        this.Dj && this.Dj.id && (b = this.Dj.id);
        b = 'Diagram "' + b + '"';
        if (0 >= a) return b;
        for (var c = this.bc.j; c.next();) b += "\n  " + c.value.toString(a - 1);
        return b
    };
    E.fromDiv = function(a) {
        var b = a;
        "string" === typeof a && (b = window.document.getElementById(a));
        return b instanceof HTMLDivElement && b.ba instanceof E ? b.ba: null
    };
    D.defineProperty(E, {
        Dj: "div"
    },
    function() {
        return this.Sb
    },
    function(a) {
        null !== a && D.l(a, HTMLDivElement, E, "div");
        if (this.Sb !== a) {
            wl = [];
            var b = this.Sb;
            null !== b ? (b.ba = void 0, b.innerHTML = "", null !== this.Lb && (this.Lb.removeEventListener("touchstart", this.SB, !1), this.Lb.removeEventListener("touchmove", this.RB, !1), this.Lb.removeEventListener("touchend", this.QB, !1), this.Lb.Ud.ba = null), b = this.kb, null !== b && (b.lf.each(function(a) {
                a.cancelWaitAfter()
            }), b.ig.each(function(a) {
                a.cancelWaitAfter()
            }), b.jg.each(function(a) {
                a.cancelWaitAfter()
            })), b.cancelWaitAfter(), this.gb.doCancel(), this.md = this.Lb = null, window.removeEventListener("resize", this.$B, !1), window.removeEventListener("mousemove", this.jo, !0), window.removeEventListener("mousedown", this.io, !0), window.removeEventListener("mouseup", this.lo, !0), window.removeEventListener("mousewheel", this.Zg, !0), window.removeEventListener("DOMMouseScroll", this.Zg, !0), window.removeEventListener("mouseout", this.ko, !0)) : this.th = !1;
            this.Sb = null;
            if (null !== a) {
                if (b = a.ba) b.Dj = null;
                Il(this, a);
                this.Hq()
            }
        }
    });
    function Ll(a) {
        var b = a.Lb;
        b.addEventListener("touchstart", a.SB, !1);
        b.addEventListener("touchmove", a.RB, !1);
        b.addEventListener("touchend", a.QB, !1);
        b.addEventListener("mousemove", a.jo, !1);
        b.addEventListener("mousedown", a.io, !1);
        b.addEventListener("mouseup", a.lo, !1);
        b.addEventListener("mousewheel", a.Zg, !1);
        b.addEventListener("DOMMouseScroll", a.Zg, !1);
        b.addEventListener("mouseout", a.ko, !1);
        b.addEventListener("keydown", a.nJ, !1);
        b.addEventListener("keyup", a.oJ, !1);
        b.addEventListener("selectstart",
        function(a) {
            a.preventDefault();
            return ! 1
        },
        !1);
        b.addEventListener("contextmenu",
        function(a) {
            a.preventDefault();
            return ! 1
        },
        !1);
        b.addEventListener("gesturechange",
        function(b) {
            a.kb.rq === Ck && b.preventDefault()
        },
        !1);
        b.addEventListener("pointerdown", a.mG, !1);
        b.addEventListener("pointermove", a.oG, !1);
        b.addEventListener("pointerleave", a.nG, !1);
        window.addEventListener("resize", a.$B, !1)
    }
    E.prototype.computePixelRatio = function() {
        return null !== this.Bk ? this.Bk: this.DD
    };
    E.prototype.doMouseMove = function() {
        this.gb.doMouseMove()
    };
    E.prototype.doMouseDown = function() {
        this.gb.doMouseDown()
    };
    E.prototype.doMouseUp = function() {
        this.gb.doMouseUp()
    };
    E.prototype.doMouseWheel = function() {
        this.gb.doMouseWheel()
    };
    E.prototype.doKeyDown = function() {
        this.gb.doKeyDown()
    };
    E.prototype.doKeyUp = function() {
        this.gb.doKeyUp()
    };
    E.prototype.doFocus = function() {
        this.focus()
    };
    E.prototype.focus = E.prototype.focus = function() {
        this.Lb && this.Lb.focus()
    };
    function al(a) {
        if (null !== a.Lb) {
            var b = a.Sb;
            if (0 !== b.clientWidth && 0 !== b.clientHeight) {
                var c = a.wl ? a.Rd: 0,
                d = a.lk ? a.Rd: 0,
                e = a.od;
                a.od = a.computePixelRatio();
                a.od !== e && (a.ds = !0, a.Se());
                if (b.clientWidth !== a.Ob + c || b.clientHeight !== a.Rb + d) a.Sm = !0,
                a.Me = !0,
                b = a.Vb,
                null !== b && b.Zx && a.am === Nh && b.N(),
                a.ge || a.Se()
            }
        }
    }
    function Fl(a) {
        var b = new Rg;
        b.name = "Background";
        a.Pt(b);
        b = new Rg;
        b.name = "";
        a.Pt(b);
        b = new Rg;
        b.name = "Foreground";
        a.Pt(b);
        b = new Rg;
        b.name = "Adornment";
        b.Tc = !0;
        a.Pt(b);
        b = new Rg;
        b.name = "Tool";
        b.Tc = !0;
        b.LF = !0;
        a.Pt(b);
        b = new Rg;
        b.name = "Grid";
        b.Bf = !1;
        b.pg = !1;
        b.Tc = !0;
        a.LH(b, a.jm("Background"))
    }
    function Ml(a) {
        a.zd = new x(Nl);
        a.zd.name = "GRID";
        var b = new z;
        b.Jb = "LineH";
        b.stroke = "lightgray";
        b.jb = .5;
        b.interval = 1;
        a.zd.add(b);
        b = new z;
        b.Jb = "LineH";
        b.stroke = "gray";
        b.jb = .5;
        b.interval = 5;
        a.zd.add(b);
        b = new z;
        b.Jb = "LineH";
        b.stroke = "gray";
        b.jb = 1;
        b.interval = 10;
        a.zd.add(b);
        b = new z;
        b.Jb = "LineV";
        b.stroke = "lightgray";
        b.jb = .5;
        b.interval = 1;
        a.zd.add(b);
        b = new z;
        b.Jb = "LineV";
        b.stroke = "gray";
        b.jb = .5;
        b.interval = 5;
        a.zd.add(b);
        b = new z;
        b.Jb = "LineV";
        b.stroke = "gray";
        b.jb = 1;
        b.interval = 10;
        a.zd.add(b);
        b = new F;
        b.add(a.zd);
        b.Jf = "Grid";
        b.Bo = 0;
        b.Ux = !1;
        b.KF = !1;
        b.pg = !1;
        b.iy = "GRID";
        a.add(b);
        a.pb.remove(b);
        a.zd.visible = !1
    }
    function Ol() {
        this.ba.isEnabled ? this.ba.rI(this) : Pl(this.ba)
    }
    function Ql(a) {
        this.ba.isEnabled ? (this.ba.Xz = !0, this.ba.Zz = a.target.scrollTop, this.ba.Yz = a.target.scrollLeft) : Pl(this.ba)
    }
    E.prototype.diagramScroll = E.prototype.rI = function(a) {
        if (this.Xz && null !== this.Lb) {
            this.Kw = !0;
            var b = this.cd,
            c = this.xb,
            d = b.width,
            e = c.width,
            g = b.height,
            h = c.height,
            k = b.right,
            l = c.right,
            m = b.bottom,
            n = c.bottom,
            p = b.x,
            q = c.x,
            b = b.y,
            c = c.y,
            r = this.scale,
            s;
            s = a.scrollLeft;
            if (this.hs) switch (this.Vz) {
            case "negative":
                s = s + a.scrollWidth - a.clientWidth;
                break;
            case "reverse":
                s = a.scrollWidth - s - a.clientWidth
            }
            var u = s;
            e < d || h < g ? (s = D.Fb(this.position.x, this.position.y), this.ye && this.Yz !== u && (s.x = u / r + p, this.Yz = u), this.ze && this.Zz !== a.scrollTop && (s.y = a.scrollTop / r + b, this.Zz = a.scrollTop), this.position = s, D.A(s), this.Sm = this.Kw = !1) : (s = D.P(), a.zH && this.ye && (p < q && (this.position = s.m(u + p, this.position.y)), k > l && (this.position = s.m( - (this.Ow.scrollWidth - this.Ob) + u - this.Ob / r + k, this.position.y))), a.AH && this.ze && (b < c && (this.position = s.m(this.position.x, a.scrollTop + b)), m > n && (this.position = s.m(this.position.x, -(this.Ow.scrollHeight - this.Rb) + a.scrollTop - this.Rb / r + m))), D.A(s), Rl(this), this.Sm = this.Kw = !1, b = this.cd, c = this.xb, k = b.right, l = c.right, m = b.bottom, n = c.bottom, p = b.x, q = c.x, b = b.y, c = c.y, e >= d && p >= q && k <= l && (this.lt.style.width = "1px"), h >= g && b >= c && m <= n && (this.lt.style.height = "1px"))
        }
    };
    E.prototype.computeBounds = E.prototype.Kh = function() {
        0 < this.Cg.count && Li(this);
        return Sl(this)
    };
    function Sl(a) {
        if (a.rF.F()) {
            var b = a.rF.copy();
            b.ix(a.padding);
            return b
        }
        for (var c = !0,
        d = a.bc.o,
        e = d.length,
        g = 0; g < e; g++) {
            var h = d[g];
            if (h.visible && (!h.Tc || h.LF)) for (var h = h.pb.o,
            k = h.length,
            l = 0; l < k; l++) {
                var m = h[l];
                m.Ux && m.isVisible() && (m = m.$, m.F() && (c ? (c = !1, b = m.copy()) : b.Wh(m)))
            }
        }
        c && (b = new B(0, 0, 0, 0));
        b.ix(a.padding);
        return b
    }
    E.prototype.computePartsBounds = function(a, b) {
        void 0 === b && (b = !1);
        for (var c = null,
        d = a.j; d.next();) {
            var e = d.value; ! b && e instanceof J || (e.hf(), null === c ? c = e.$.copy() : c.Wh(e.$))
        }
        return null === c ? new B(NaN, NaN, 0, 0) : c
    };
    function Tl(a, b) {
        if ((b || a.th) && !a.Zc && null !== a.Lb && !a.Xa.sf && a.cd.F()) {
            a.Zc = !0;
            var c = a.Im;
            b && a.yl !== Nh && (c = a.yl);
            var d = c !== Nh ? Ul(a, c) : a.scale,
            c = a.xb.copy(),
            e = a.Ob / d,
            g = a.Rb / d,
            h = null,
            k = a.Xa;
            k.vc && (h = a.qb.copy());
            a.position.Ya();
            var l = a.No;
            b && !l.fd() && a.ip.fd() && (l = a.ip);
            Vl(a, a.qb, a.cd, e, g, l, b);
            a.position.freeze();
            null !== h && ml(k, h, a.qb);
            e = a.scale;
            a.scale = d;
            a.Zc = !1;
            d = a.xb;
            d.Sc(c) || a.Pu(c, d, e, a.scale, !1)
        }
    }
    function Ul(a, b) {
        var c = a.wb.zx;
        if (null === a.Lb) return c;
        a.mk && Wl(a, a.Kh());
        var d = a.cd;
        if (!d.F()) return c;
        var e = d.width,
        d = d.height,
        g = a.Ob,
        h = a.Rb,
        k = g / e,
        l = h / d;
        return b === Xl ? (e = Math.min(l, k), e > c && (e = c), e < a.Qh && (e = a.Qh), e > a.Ph && (e = a.Ph), e) : b === Yl ? (e = l > k ? (h - a.Rd) / d: (g - a.Rd) / e, e > c && (e = c), e < a.Qh && (e = a.Qh), e > a.Ph && (e = a.Ph), e) : a.scale
    }
    E.prototype.zoomToFit = E.prototype.zoomToFit = function() {
        this.scale = Ul(this, Xl)
    };
    E.prototype.zoomToRect = function(a, b) {
        void 0 === b && (b = Xl);
        var c = a.width,
        d = a.height;
        if (! (0 === c || 0 === d || isNaN(c) && isNaN(d))) {
            var e = 1;
            if (b === Xl || b === Yl) if (isNaN(c)) e = this.xb.height * this.scale / d;
            else if (isNaN(d)) e = this.xb.width * this.scale / c;
            else var e = this.Ob,
            g = this.Rb,
            e = b === Yl ? g / d > e / c ? (g - (this.lk ? this.Rd: 0)) / d: (e - (this.wl ? this.Rd: 0)) / c: Math.min(g / d, e / c);
            this.scale = e;
            this.position = new O(a.x, a.y)
        }
    };
    D.defineProperty(E, {
        YA: null
    },
    function() {
        return this.Zc
    },
    function(a) {
        this.Zc = a
    });
    E.prototype.alignDocument = function(a, b) {
        this.mk && Wl(this, this.Kh());
        var c = this.cd,
        d = this.xb;
        this.position = new O(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY))
    };
    function Vl(a, b, c, d, e, g, h) {
        var k = b.x,
        l = b.y;
        if (h || a.yB === xl) g.fd() && (d > c.width && (k = c.x + (g.x * c.width + g.offsetX) - (g.x * d - g.offsetX)), e > c.height && (l = c.y + (g.y * c.height + g.offsetY) - (g.y * e - g.offsetY))),
        g = a.IG,
        h = d - c.width,
        d < c.width + g.left + g.right ? (k = Math.min(k + d / 2, c.right + Math.max(h, g.right) - d / 2), k = Math.max(k, c.left - Math.max(h, g.left) + d / 2), k -= d / 2) : k > c.left ? k = c.left: k < c.right - d && (k = c.right - d),
        d = e - c.height,
        e < c.height + g.top + g.bottom ? (l = Math.min(l + e / 2, c.bottom + Math.max(d, g.bottom) - e / 2), l = Math.max(l, c.top - Math.max(d, g.top) + e / 2), l -= e / 2) : l > c.top ? l = c.top: l < c.bottom - e && (l = c.bottom - e);
        b.x = isFinite(k) ? k: -a.padding.left;
        b.y = isFinite(l) ? l: -a.padding.top;
        null !== a.qG && (a = a.qG(a, b), b.x = a.x, b.y = a.y)
    }
    E.prototype.findPartAt = E.prototype.iu = function(a, b) {
        var c = b ? Pi(this, a,
        function(a) {
            return a.Y
        },
        function(a) {
            return a.canSelect()
        }) : Pi(this, a,
        function(a) {
            return a.Y
        });
        return c instanceof F ? c: null
    };
    E.prototype.findObjectAt = E.prototype.Ge = function(a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        Li(this);
        for (var d = this.bc.$n; d.next();) {
            var e = d.value;
            if (e.visible && (e = e.Ge(a, b, c), null !== e)) return e
        }
        return null
    };
    function Pi(a, b, c, d) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        Li(a);
        for (a = a.bc.$n; a.next();) {
            var e = a.value;
            if (e.visible && !e.Tc && (e = e.Ge(b, c, d), null !== e)) return e
        }
        return null
    }
    E.prototype.findObjectsAt = E.prototype.hu = function(a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new L(P));
        Li(this);
        for (var e = this.bc.$n; e.next();) {
            var g = e.value;
            g.visible && g.hu(a, b, c, d)
        }
        return d
    };
    E.prototype.findObjectsIn = E.prototype.Qk = function(a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof K || e instanceof L || (e = new L(P));
        Li(this);
        for (var g = this.bc.$n; g.next();) {
            var h = g.value;
            h.visible && h.Qk(a, b, c, d, e)
        }
        return e
    };
    E.prototype.IA = function(a, b, c, d, e, g) {
        var h = new L(P);
        Li(this);
        for (var k = this.bc.$n; k.next();) {
            var l = k.value;
            l.visible && l.IA(a, b, c, d, h, e, g)
        }
        return h
    };
    E.prototype.findObjectsNear = E.prototype.On = function(a, b, c, d, e, g) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof K || e instanceof L) g = e;
            e = !0
        }
        g instanceof K || g instanceof L || (g = new L(P));
        Li(this);
        for (var h = this.bc.$n; h.next();) {
            var k = h.value;
            k.visible && k.On(a, b, c, d, e, g)
        }
        return g
    };
    E.prototype.acceptEvent = function(a) {
        var b = this.bd;
        this.bd = this.Tb;
        this.Tb = b;
        Zl(this, this, a, b, a instanceof MouseEvent);
        return b
    };
    function Zl(a, b, c, d, e) {
        d.g = b;
        d.event = c;
        e ? $l(a, c, d) : (d.qe = b.Tb.qe, d.ha = b.Tb.ha);
        a = 0;
        c.ctrlKey && (a += 1);
        c.altKey && (a += 2);
        c.shiftKey && (a += 4);
        c.metaKey && (a += 8);
        d.Jd = a;
        d.button = c.button;
        void 0 === c.buttons || D.gJ || (d.buttons = c.buttons);
        D.Vk && 0 === c.button && c.ctrlKey && (d.button = 2);
        d.im = !1;
        d.up = !1;
        d.Oe = 1;
        d.hm = 0;
        d.Lc = !1;
        d.bubbles = !1;
        d.timestamp = Date.now();
        d.yu = !1;
        d.fh = c.target.ba ? c.target.ba: null;
        d.We = null
    }
    function am(a, b, c, d, e) {
        d.g = a;
        $l(a, c, d);
        d.Jd = 0;
        d.button = 0;
        d.buttons = 1;
        d.im = !0;
        d.up = !1;
        d.Oe = 1;
        d.hm = 0;
        d.Lc = !1;
        d.bubbles = !0;
        d.event = b;
        d.timestamp = Date.now();
        d.yu = e;
        d.fh = b.target.ba ? b.target.ba: null;
        d.We = null;
        a.Zi = d.copy();
        Vh = null
    }
    function bm(a, b, c, d, e) {
        var g = null;
        d.g = a;
        null !== c ? ((g = window.document.elementFromPoint(c.clientX, c.clientY)) && g.ba ? g = g.ba: (c = b.changedTouches[0], g = a), d.fh = g, $l(a, c, d)) : null !== a.bd ? (d.ha = a.bd.ha, d.qe = a.bd.qe, d.fh = a.bd.fh) : null !== a.Zi && (d.ha = a.Zi.ha, d.qe = a.Zi.qe, d.fh = a.Zi.fh);
        d.Jd = 0;
        d.button = 0;
        d.buttons = 1;
        d.im = !1;
        d.up = !1;
        d.Oe = 1;
        d.hm = 0;
        d.Lc = !1;
        d.bubbles = !1;
        d.event = b;
        d.timestamp = Date.now();
        d.yu = e;
        d.We = null
    }
    function ga(a, b, c) {
        if (b.bubbles) return v && v.FF && D.trace("NOT handled " + c.type + " " + b.toString()),
        !0;
        v && v.FF && D.trace("handled " + c.type + " " + a.gb.name + " " + b.toString());
        void 0 !== c.stopPropagation && c.stopPropagation(); (void 0 === c.touches || 2 > c.touches.length) && c.preventDefault();
        c.cancelBubble = !0;
        return ! 1
    }
    E.prototype.nJ = function(a) {
        if (!this.ba.isEnabled) return ! 1;
        var b = this.ba.Tb;
        Zl(this.ba, this.ba, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.im = !0;
        switch (a.which) {
        case 8:
            b.key = "Backspace";
            break;
        case 33:
            b.key = "PageUp";
            break;
        case 34:
            b.key = "PageDown";
            break;
        case 35:
            b.key = "End";
            break;
        case 36:
            b.key = "Home";
            break;
        case 37:
            b.key = "Left";
            break;
        case 38:
            b.key = "Up";
            break;
        case 39:
            b.key = "Right";
            break;
        case 40:
            b.key = "Down";
            break;
        case 45:
            b.key = "Insert";
            break;
        case 46:
            b.key = "Del";
            break;
        case 48:
            b.key = "0";
            break;
        case 187:
        case 61:
        case 107:
            b.key = "Add";
            break;
        case 189:
        case 173:
        case 109:
            b.key = "Subtract";
            break;
        case 27:
            b.key = "Esc"
        }
        this.ba.doKeyDown();
        return 187 !== a.which && 189 !== a.which && 48 !== a.which && 107 !== a.which && 109 !== a.which && 61 !== a.which && 173 !== a.which || !0 !== a.ctrlKey ? ga(this.ba, b, a) : (a.cancelBubble = !0, a.preventDefault(), a.stopPropagation(), !1)
    };
    E.prototype.oJ = function(a) {
        if (!this.ba.isEnabled) return ! 1;
        var b = this.ba.Tb;
        Zl(this.ba, this.ba, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.up = !0;
        switch (a.which) {
        case 8:
            b.key = "Backspace";
            break;
        case 33:
            b.key = "PageUp";
            break;
        case 34:
            b.key = "PageDown";
            break;
        case 35:
            b.key = "End";
            break;
        case 36:
            b.key = "Home";
            break;
        case 37:
            b.key = "Left";
            break;
        case 38:
            b.key = "Up";
            break;
        case 39:
            b.key = "Right";
            break;
        case 40:
            b.key = "Down";
            break;
        case 45:
            b.key = "Insert";
            break;
        case 46:
            b.key = "Del";
            break;
        case 93:
            a.preventDefault()
        }
        this.ba.doKeyUp();
        return ga(this.ba, b, a)
    };
    E.prototype.ep = function(a) {
        var b = this.Lb;
        if (null === b) return new O(0, 0);
        var c = this.Ob,
        d = this.Rb,
        b = b.getBoundingClientRect(),
        c = a.clientX - c / b.width * b.left;
        a = a.clientY - d / b.height * b.top;
        return null !== this.Hc ? (a = new O(c, a), hb(a, this.Hc), a) : new O(c, a)
    };
    function $l(a, b, c) {
        var d = a.Lb,
        e = a.Ob,
        g = a.Rb,
        h = 0,
        k = 0;
        null !== d && (d = d.getBoundingClientRect(), h = b.clientX - e / d.width * d.left, k = b.clientY - g / d.height * d.top);
        c.qe.m(h, k);
        null !== a.Hc ? (b = D.Fb(h, k), a.Hc.Ci(b), c.ha.assign(b), D.A(b)) : c.ha.m(h, k)
    }
    function $f(a, b, c, d) {
        var e = null;
        if (void 0 !== b.targetTouches) {
            if (2 > b.targetTouches.length) return;
            e = b.targetTouches[c]
        } else if (null !== a.pj[0]) e = a.pj[c];
        else return;
        c = a.Lb;
        b = a.Ob;
        a = a.Rb;
        var g = 0,
        h = 0;
        null !== c && null !== e && (c = c.getBoundingClientRect(), g = e.clientX - b / c.width * c.left, h = e.clientY - a / c.height * c.top);
        d.m(g, h)
    }
    E.prototype.invalidateDocumentBounds = E.prototype.yc = function() {
        this.mk || (this.mk = !0, this.Se(!0))
    };
    function jl(a) {
        a.ge || Li(a);
        a.mk && Wl(a, a.Kh())
    }
    E.prototype.redraw = E.prototype.Hq = function() {
        this.Zc || this.ge || (this.qa(), cm(this), Rl(this), this.yc(), this.gg())
    };
    E.prototype.isUpdateRequested = function() {
        return this.Yf
    };
    E.prototype.delayInitialization = function(a) {
        void 0 === a && (a = null);
        var b = this.Xa,
        c = b.isEnabled;
        b.Ii();
        b.isEnabled = !1;
        Vi(this);
        this.th = !1;
        b.isEnabled = c;
        null !== a && D.setTimeout(a, 1)
    };
    E.prototype.requestUpdate = E.prototype.Se = function(a) {
        void 0 === a && (a = !1);
        if (!0 !== this.Yf && !(this.Zc || !1 === a && this.ge)) {
            this.Yf = !0;
            var b = this;
            requestAnimationFrame(function() {
                b.Yf && b.gg()
            })
        }
    };
    E.prototype.maybeUpdate = E.prototype.gg = function() {
        if (!this.cp || this.Yf) this.cp && (this.cp = !1),
        Vi(this)
    };
    function dm(a, b) {
        a.Xa.sf || a.Zc || !a.Sm || Pl(a) || (b && Li(a), Tl(a, !1))
    }
    function Vi(a) {
        if (!a.ge && (a.Yf = !1, null !== a.Sb)) {
            a.ge = !0;
            var b = a.Xa,
            c = a.Tz;
            if (!b.op && 0 !== c.length) {
                for (var d = c.o,
                e = d.length,
                g = 0; g < e; g++) {
                    var h = d[g];
                    em(h, !1);
                    h.K()
                }
                c.clear()
            }
            c = a.eD;
            0 < c.count && (c.each(function(a) {
                a.XB()
            }), c.clear());
            d = c = !1;
            b.sf && (d = !0, c = a.Eb, a.Eb = !0);
            b.vc || al(a);
            dm(a, !1);
            null !== a.zd && (a.zd.visible && !a.Uv && (fm(a), a.Uv = !0), !a.zd.visible && a.Uv && (a.Uv = !1));
            Li(a);
            e = !1;
            if (!a.th || a.wv) a.th ? gm(a, !a.Mv) : (a.$b("Initial Layout"), !1 === b.isEnabled && b.Ii(), gm(a, !1)),
            e = !0;
            a.Mv = !1;
            Li(a);
            a.aA || b.sf || jl(a);
            dm(a, !0);
            e && (a.th || km(a), a.Ja("LayoutCompleted"));
            Li(a);
            e && !a.th && (a.th = !0, a.Td("Initial Layout"), a.Eb || a.ra.clear(), D.setTimeout(function() {
                a.Fi = !1
            },
            1));
            Fm(a);
            $k(b);
            a.Ee(a.md);
            d && (a.Eb = c);
            a.ge = !1
        }
    }
    D.w(E, {
        Zn: null
    },
    function() {
        return this.th
    });
    function km(a) {
        var b = a.bc.o;
        a.Lf(b, b.length, a);
        a.yl !== Nh ? a.scale = Ul(a, a.yl) : a.Im !== Nh ? a.scale = Ul(a, a.Im) : (b = a.aJ, isFinite(b) && 0 < b && (a.scale = b));
        b = a.$I;
        if (b.F()) a.position = b;
        else {
            b = D.P();
            b.so(a.cd, a.ZI);
            var c = a.xb,
            c = D.gh(0, 0, c.width, c.height),
            d = D.P();
            d.so(c, a.bJ);
            d.m(b.x - d.x, b.y - d.y);
            a.position = d;
            D.Mb(c);
            D.A(d);
            D.A(b);
            cm(a);
            dm(a, !0);
            Tl(a, !0)
        }
        a.Ja("InitialLayoutCompleted");
        fm(a)
    }
    function Li(a) {
        if ((a.ge || !a.Xa.sf) && 0 !== a.Cg.count) {
            for (var b = 0; 23 > b; b++) {
                var c = a.Cg.j;
                if (null === c || 0 === a.Cg.count) break;
                a.Cg = new L(F);
                a.XB(c, a.Cg);
                v && 22 === b && D.trace("failure to validate parts")
            }
            a.ng.each(function(a) {
                a instanceof I && 0 !== (a.Ba & 65536) !== !1 && (a.Ba ^= 65536)
            })
        }
    }
    E.prototype.XB = function(a, b) {
        for (a.reset(); a.next();) {
            var c = a.value; ! c.oe() || c instanceof I || (c.um() ? (Ak(c, Infinity, Infinity), c.oc()) : b.add(c))
        }
        for (a.reset(); a.next();) c = a.value,
        c instanceof I && c.isVisible() && Gm(this, c);
        for (a.reset(); a.next();) c = a.value,
        c instanceof J && c.isVisible() && (c.um() ? (Ak(c, Infinity, Infinity), c.oc()) : b.add(c));
        for (a.reset(); a.next();) c = a.value,
        c instanceof da && c.isVisible() && (c.um() ? (Ak(c, Infinity, Infinity), c.oc()) : b.add(c))
    };
    function Gm(a, b) {
        for (var c = D.tb(), d = D.tb(), e = b.Mc; e.next();) {
            var g = e.value;
            g.isVisible() && (g instanceof I ? (Hm(g) || Im(g) || Jm(g)) && Gm(a, g) : g instanceof J ? g.aa === b || g.da === b ? d.push(g) : c.push(g) : (Ak(g, Infinity, Infinity), g.oc()))
        }
        for (var e = c.length,
        h = 0; h < e; h++) g = c[h],
        Ak(g, Infinity, Infinity),
        g.oc();
        D.Aa(c);
        Ak(b, Infinity, Infinity);
        b.oc();
        e = d.length;
        for (h = 0; h < e; h++) g = d[h],
        Ak(g, Infinity, Infinity),
        g.oc();
        D.Aa(d)
    }
    E.prototype.Lf = function(a, b, c, d) {
        var e = this.Xa;
        if (this.zl || e.sf) for (e = 0; e < b; e++) a[e].Lf(c, d)
    };
    E.prototype.Ee = function(a, b) {
        void 0 === b && (b = null);
        null === this.Sb && D.k("No div specified");
        var c = this.Lb;
        null === c && D.k("No canvas specified");
        var d = this.Xa;
        if (!d.vc && (Km(this), "0" !== this.Sb.style.opacity)) {
            var e = a !== this.md,
            g = this.bc.o,
            h = g.length,
            k = this;
            this.Lf(g, h, k);
            if (e) a.Be(!0),
            Rl(this);
            else if (!this.Me && null === b && !d.nk) return;
            var h = this.qb,
            l = this.Bb,
            m = Math.round(h.x * l) / l,
            n = Math.round(h.y * l) / l,
            d = this.Hc;
            d.reset();
            1 !== l && d.scale(l);
            0 === h.x && 0 === h.y || d.translate( - m, -n);
            l = this.od;
            D.Xn ? (c.width = c.width, a.Be(!0), a.scale(l, l)) : (a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.clearRect(0, 0, this.Ob, this.Rb));
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(l, l);
            a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            v && v.zj && v.fF(this, a);
            c = null !== b ?
            function(c) {
                var d = b;
                if (c.visible && 0 !== c.Fc) {
                    var e = c.pb.o,
                    g = e.length;
                    if (0 !== g) {
                        1 !== c.Fc && (a.globalAlpha = c.Fc);
                        c = c.Bw;
                        c.length = 0;
                        for (var h = k.scale,
                        l = 0; l < g; l++) {
                            var m = e[l];
                            if (ol(m) && !d.contains(m)) {
                                if (m instanceof J) {
                                    var n = m;
                                    n.qc && c.push(n);
                                    if (!1 === n.lh) continue
                                }
                                n = m.$;
                                1 < n.width * h || 1 < n.height * h ? m.Ee(a, k) : ql(m, a)
                            }
                        }
                        a.globalAlpha = 1
                    }
                }
            }: function(b) {
                b.Ee(a, k)
            };
            Lm(this, a);
            h = g.length;
            for (m = 0; m < h; m++) a.setTransform(1, 0, 0, 1, 0, 0),
            a.scale(l, l),
            a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy),
            c(g[m]);
            this.xl ? this.xl.Em(this) && this.Pv() : this.ep = function() {
                return new O(0, 0)
            };
            v && (v.EA || v.zj) && v.DA(a, this, d);
            e ? (this.md.Be(!0), Rl(this)) : this.Me = this.zl = !1
        }
    };
    function Mm(a, b, c, d, e) {
        null === a.Sb && D.k("No div specified");
        var g = a.Lb;
        null === g && D.k("No canvas specified");
        if (!a.Xa.vc) {
            var h = a.md;
            if (a.Me) {
                Km(a);
                var k = a.od;
                D.Xn ? (g.width = g.width, h.Be(!0)) : (h.setTransform(1, 0, 0, 1, 0, 0), h.clearRect(0, 0, a.Ob * k, a.Rb * k));
                h.Fy(!1);
                h.drawImage(a.rz.Ud, 0 < d ? 0 : Math.round( - d), 0 < e ? 0 : Math.round( - e));
                e = a.qb;
                var g = a.Bb,
                l = Math.round(e.x * g) / g,
                m = Math.round(e.y * g) / g;
                d = a.Hc;
                d.reset();
                1 !== g && d.scale(g);
                0 === e.x && 0 === e.y || d.translate( - l, -m);
                h.save();
                h.beginPath();
                e = c.length;
                for (g = 0; g < e; g++) l = c[g],
                0 !== l.width && 0 !== l.height && h.rect(Math.floor(l.x), Math.floor(l.y), Math.ceil(l.width), Math.ceil(l.height));
                h.clip();
                h.setTransform(1, 0, 0, 1, 0, 0);
                h.scale(k, k);
                h.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                v && v.zj && v.fF(a, h);
                c = a.bc.o;
                e = c.length;
                a.Lf(c, e, a);
                Lm(a, h);
                for (g = 0; g < e; g++) rl(c[g], h, a, b);
                h.restore();
                h.Be(!0);
                v && (v.EA || v.zj) && v.DA(h, a, d);
                a.xl ? a.xl.Em(a) && a.Pv() : a.ep = function() {
                    return new O(0, 0)
                };
                a.zl = !1;
                a.Me = !1;
                a.uy()
            }
        }
    }
    function Nm(a, b, c, d, e, g, h, k, l, m) {
        null === a.Sb && D.k("No div specified");
        null === a.Lb && D.k("No canvas specified");
        void 0 === h && (h = null);
        void 0 === k && (k = null);
        void 0 === l && (l = !1);
        void 0 === m && (m = !1);
        Km(a);
        a.md.Be(!0);
        Rl(a);
        a.Iz = !0;
        var n = a.Bb;
        a.Bb = e;
        var p = a.bc.o,
        q = p.length;
        try {
            var r = new B(g.x, g.y, d.width / e, d.height / e),
            s = r.copy();
            s.ix(c);
            fm(a, s);
            Li(a);
            a.Lf(p, q, a, r);
            var u = a.od;
            b.setTransform(1, 0, 0, 1, 0, 0);
            b.scale(u, u);
            b.clearRect(0, 0, d.width, d.height);
            null !== k && "" !== k && (b.fillStyle = k, b.fillRect(0, 0, d.width, d.height));
            var t = D.Of();
            t.reset();
            t.translate(c.left, c.top);
            t.scale(e);
            0 === g.x && 0 === g.y || t.translate( - g.x, -g.y);
            b.setTransform(t.m11, t.m12, t.m21, t.m22, t.dx, t.dy);
            D.He(t);
            Lm(a, b);
            var y;
            if (null !== h) {
                var w = new L(F),
                C = h.j;
                for (C.reset(); C.next();) {
                    var A = C.value; ! 1 === m && "Grid" === A.layer.name || null === A || w.add(A)
                }
                y = function(c) {
                    var d = l;
                    if (c.visible && 0 !== c.Fc && (void 0 === d && (d = !0), d || !c.Tc)) {
                        var d = c.pb.o,
                        e = d.length;
                        if (0 !== e) {
                            1 !== c.Fc && (b.globalAlpha = c.Fc);
                            c = c.Bw;
                            c.length = 0;
                            for (var g = a.scale,
                            h = 0; h < e; h++) {
                                var k = d[h];
                                if (ol(k) && w.contains(k)) {
                                    if (k instanceof J) {
                                        var m = k;
                                        m.qc && c.push(m);
                                        if (!1 === m.lh) continue
                                    }
                                    m = k.$;
                                    1 < m.width * g || 1 < m.height * g ? k.Ee(b, a) : ql(k, b)
                                }
                            }
                            b.globalAlpha = 1
                        }
                    }
                }
            } else if (!l && m) {
                var N = a.Vn.Y,
                H = N.layer;
                y = function(c) {
                    c === H ? N.Ee(b, a) : c.Ee(b, a, l)
                }
            } else y = function(c) {
                c.Ee(b, a, l)
            };
            for (c = 0; c < q; c++) y(p[c]);
            a.Iz = !1;
            a.xl ? a.xl.Em(a) && a.Pv() : a.ep = function() {
                return new O(0, 0)
            }
        } finally {
            a.Bb = n,
            a.md.Be(!0),
            Rl(a),
            a.Lf(p, q, a),
            fm(a)
        }
    }
    E.prototype.getRenderingHint = E.prototype.Gj = function(a) {
        return this.yk[a]
    };
    E.prototype.setRenderingHint = E.prototype.hK = function(a, b) {
        this.yk[a] = b;
        this.Hq()
    };
    E.prototype.resetRenderingHints = E.prototype.yG = function() {
        this.yk = new la;
        this.yk.drawShadows = !0;
        this.yk.textGreeking = !0;
        this.yk.viewportOptimizations = D.QF ? !1 : !0;
        this.yk.temporaryPixelRatio = !0;
        this.yk.pictureRatioOptimization = !0
    };
    function Lm(a, b) {
        var c = a.yk;
        null !== c && (void 0 !== c.imageSmoothingEnabled && b.Fy( !! c.imageSmoothingEnabled), c = c.defaultFont, void 0 !== c && null !== c && (b.font = c))
    }
    E.prototype.getInputOption = E.prototype.pu = function(a) {
        return this.lp[a]
    };
    E.prototype.setInputOption = function(a, b) {
        this.lp[a] = b
    };
    E.prototype.resetInputOptions = E.prototype.xG = function() {
        this.lp = new la;
        this.lp.extraTouchArea = 10;
        this.lp.extraTouchThreshold = 10;
        this.lp.hasGestureZoom = !0
    };
    E.prototype.setProperties = function(a) {
        D.Zu(this, a)
    };
    function Fm(a) {
        if (0 === a.ra.Vh && 0 !== a.sl.count) {
            for (; 0 < a.sl.count;) {
                var b = a.sl;
                a.sl = new ma(J, B);
                for (b = b.j; b.next();) {
                    var c = b.key;
                    oj(c, b.value);
                    c.Re()
                }
            }
            a.qa()
        }
    }
    E.prototype.qa = function(a) {
        void 0 === a && (a = null);
        if (null === a) this.Me = !0,
        this.Se();
        else {
            var b = this.xb;
            null !== a && a.F() && b.Wg(a) && (this.Me = !0, this.Se())
        }
        for (b = this.Cw.j; b.next();) b.value.qa(a)
    };
    E.prototype.JF = function(a, b) {
        if (!0 !== this.Me) {
            this.Me = !0;
            var c = !0 === this.Gj("temporaryPixelRatio");
            if (!0 === this.Gj("viewportOptimizations") && this.yB !== Om && this.IG.Ex(0, 0, 0, 0) && b.width === a.width && b.height === a.height) {
                var d = this.scale,
                e = D.Nf(),
                g = Math.max(a.x, b.x),
                h = Math.max(a.y, b.y),
                k = Math.min(a.x + a.width, b.x + b.width),
                l = Math.min(a.y + a.height, b.y + b.height);
                e.x = g;
                e.y = h;
                e.width = Math.max(0, k - g) * d;
                e.height = Math.max(0, l - h) * d;
                if (0 < e.width && 0 < e.height) {
                    if (!this.ge && (this.Yf = !1, null !== this.Sb)) {
                        this.ge = !0;
                        Fm(this);
                        this.cd.F() || Wl(this, this.Kh());
                        var m = this.Lb;
                        if (null !== m) {
                            var n = this.od,
                            h = this.Ob * n,
                            k = this.Rb * n,
                            g = this.scale * n,
                            d = Math.round(Math.round(b.x * g) - Math.round(a.x * g)),
                            g = Math.round(Math.round(b.y * g) - Math.round(a.y * g)),
                            l = this.rz,
                            p = this.WC;
                            l.width !== h && (l.width = h);
                            l.height !== k && (l.height = k);
                            p.clearRect(0, 0, h, k);
                            var l = 190 * this.od,
                            q = 70 * this.od,
                            r = Math.max(d, 0),
                            s = Math.max(g, 0),
                            u = Math.floor(h - r),
                            t = Math.floor(k - s);
                            p.Fy(!1);
                            p.drawImage(m.Ud, r, s, u, t, 0, 0, u, t);
                            this.xl.Em(this) && p.clearRect(0, 0, l, q);
                            var m = D.tb(),
                            p = D.tb(),
                            t = Math.abs(d),
                            u = Math.abs(g),
                            y = 0 === r ? 0 : h - t,
                            r = D.Fb(y, 0),
                            t = D.Fb(t + y, k);
                            p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            var w = this.Hc;
                            w.reset();
                            w.scale(n, n);
                            1 !== this.Bb && w.scale(this.Bb);
                            n = this.qb; (0 !== n.x || 0 !== n.y) && isFinite(n.x) && isFinite(n.y) && w.translate( - n.x, -n.y);
                            hb(r, w);
                            hb(t, w);
                            m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            y = 0 === s ? 0 : k - u;
                            r.m(0, y);
                            t.m(h, u + y);
                            p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            hb(r, w);
                            hb(t, w);
                            m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            this.xl.Em(this) && (h = 0 < d ? 0 : -d, k = 0 < g ? 0 : -g, r.m(h, k), t.m(l + h, q + k), p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))), hb(r, w), hb(t, w), m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))));
                            D.A(r);
                            D.A(t);
                            dm(this, !1);
                            Mm(this, m, p, d, g);
                            D.Aa(m);
                            D.Aa(p);
                            this.ge = !1
                        }
                    }
                } else this.gg();
                D.Mb(e);
                c && (this.Bk = 1, this.gg(), this.Bk = null, this.uy())
            } else c ? (this.Bk = 1, this.gg(), this.Bk = null, this.uy()) : this.gg()
        }
    };
    function cm(a) { ! 1 === a.Sm && (a.Sm = !0)
    }
    function Rl(a) { ! 1 === a.zl && (a.zl = !0)
    }
    function Km(a) { ! 1 !== a.ds && (a.ds = !1, Pm(a, a.Ob, a.Rb))
    }
    function Pm(a, b, c) {
        var d = a.Lb,
        e = a.od,
        g = b * e,
        e = c * e;
        if (d.width !== g || d.height !== e) d.width = g,
        d.height = e,
        d.style.width = b + "px",
        d.style.height = c + "px",
        a.Me = !0,
        a.md.Be(!0)
    }
    function Pl(a) {
        var b = a.Lb;
        if (null === b) return ! 0;
        var c = a.Sb,
        d = a.Ob,
        e = a.Rb,
        g = a.tE.copy();
        if (!g.F()) return ! 0;
        var h = !1,
        k = a.wl ? a.Rd: 0,
        l = a.lk ? a.Rd: 0,
        m = c.clientWidth || d + k,
        n = c.clientHeight || e + l;
        if (m !== d + k || n !== e + l) a.wl = !1,
        a.lk = !1,
        l = k = 0,
        a.Ob = m,
        a.Rb = n,
        h = a.ds = !0;
        a.Sm = !1;
        var p = a.xb,
        c = a.cd,
        m = c.width,
        n = c.height,
        q = p.width,
        r = p.height,
        s = c.x,
        u = p.x,
        t = c.right,
        y = p.right + k,
        w = c.y,
        C = p.y,
        A = c.bottom,
        p = p.bottom + l,
        N = "1px",
        H = "1px",
        c = a.scale;
        a.yB === xl && m < q + k && n < r + l || (a.TA && a.ye && (N = 1, s + 1 < u && (N = Math.max((u - s) * c + a.Ob, N)), t > y + 1 && (N = Math.max((t - y) * c + a.Ob, N)), q + k + 1 < m && (N = Math.max((m - q + k) * c + a.Ob, N)), N = N.toString() + "px"), a.UA && a.ze && (k = 1, w + 1 < C && (k = Math.max((C - w) * c + a.Rb, k)), A > p + 1 && (k = Math.max((A - p) * c + a.Rb, k)), r + l + 1 < n && (k = Math.max((n - r + l) * c + a.Rb, k)), H = k.toString() + "px"));
        l = "1px" !== N;
        k = "1px" !== H;
        if (! (l && k || !l && !k)) {
            k && (y -= a.Rd);
            l && (p -= a.Rd);
            a.TA && a.ye && (N = 1, s + 1 < u && (N = Math.max((u - s) * c + a.Ob, N)), t > y + 1 && (N = Math.max((t - y) * c + a.Ob, N)), q + 1 < m && (N = Math.max((m - q) * c + a.Ob, N)), N = N.toString() + "px");
            var l = "1px" !== N,
            W = l !== a.lk ? a.Rb - a.Rd: a.Rb;
            a.UA && a.ze && (k = 1, w + 1 < C && (k = Math.max((C - w) * c + W, k)), A > p + 1 && (k = Math.max((A - p) * c + W, k)), r + 1 < n && (k = Math.max((n - r) * c + W, k)), H = k.toString() + "px");
            k = "1px" !== H
        }
        if (a.Kw && l === a.lk && k === a.wl) return d === a.Ob && e === a.Rb || a.gg(),
        !1;
        l !== a.lk && (a.Rb = "1px" === N ? a.Rb + a.Rd: Math.max(a.Rb - a.Rd, 1), h = !0);
        a.lk = l;
        a.lt.style.width = N;
        k !== a.wl && (a.Ob = "1px" === H ? a.Ob + a.Rd: Math.max(a.Ob - a.Rd, 1), h = !0, a.hs && (l = D.P(), k ? (b.style.left = a.Rd + "px", a.position = l.m(a.qb.x + a.Rd / a.scale, a.qb.y)) : (b.style.left = "0px", a.position = l.m(a.qb.x - a.Rd / a.scale, a.qb.y)), D.A(l)));
        a.wl = k;
        a.lt.style.height = H;
        b = a.Ow;
        l = b.scrollLeft;
        a.TA && a.ye && (q + 1 < m ? l = (a.position.x - s) * c: s + 1 < u ? l = b.scrollWidth - b.clientWidth: t > y + 1 && (l = a.position.x * c));
        if (a.hs) switch (a.Vz) {
        case "negative":
            l = -(b.scrollWidth - l - b.clientWidth);
            break;
        case "reverse":
            l = b.scrollWidth - l - b.clientWidth
        }
        b.scrollLeft = l;
        a.UA && a.ze && (r + 1 < n ? b.scrollTop = (a.position.y - w) * c: w + 1 < C ? b.scrollTop = b.scrollHeight - b.clientHeight: A > p + 1 && (b.scrollTop = a.position.y * c));
        h && (a.ds = !0);
        m = a.Ob;
        n = a.Rb;
        b.style.width = m + (a.wl ? a.Rd: 0) + "px";
        b.style.height = n + (a.lk ? a.Rd: 0) + "px";
        a.Xz = !1;
        return d !== m || e !== n || a.Xa.vc ? (p = a.xb, a.Pu(g, p, c, a.scale, h), !1) : !0
    }
    E.prototype.add = E.prototype.add = function(a) {
        D.l(a, F, E, "add:part");
        var b = a.g;
        if (b !== this) {
            null !== b && D.k("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString());
            this.br && (a.El = "Tool");
            var c = a.Jf,
            b = this.jm(c);
            null === b && (b = this.jm(""));
            null === b && D.k('Cannot add a Part when unable find a Layer named "' + c + '" and there is no default Layer');
            a.layer !== b && (c = b.uq(99999999, a, a.g === this), 0 <= c && this.hd(mg, "parts", b, null, a, null, c), b.Tc || this.yc(), a.N(Qm), c = a.by, null !== c && c(a, null, b))
        }
    };
    E.prototype.uq = function(a) {
        if (a instanceof G) {
            if (this.Cp.add(a), a instanceof I) {
                var b = a.Pa;
                null === b ? this.Rl.add(a) : b.en.add(a);
                b = a.Vb;
                null !== b && (b.g = this)
            }
        } else a instanceof J ? this.wp.add(a) : a instanceof da || this.pb.add(a);
        var c = this;
        Rm(a,
        function(a) {
            Sm(c, a)
        }); (a instanceof da || a instanceof I && null !== a.Qb) && a.K();
        b = a.data;
        null !== b && (a instanceof da || (a instanceof J ? this.ck.add(b, a) : this.Ti.add(b, a)), Rm(a,
        function(a) {
            Tm(c, a)
        })); ! 0 !== Im(a) && !0 !== Jm(a) || this.Cg.add(a);
        Um(a, !0, this);
        Vm(a) ? (a.$.F() && this.qa(sl(a, a.$)), this.yc()) : a.isVisible() && a.$.F() && this.qa(sl(a, a.$));
        this.Se()
    };
    E.prototype.rf = function(a) {
        a.Zt();
        if (a instanceof G) {
            if (this.Cp.remove(a), a instanceof I) {
                var b = a.Pa;
                null === b ? this.Rl.remove(a) : b.en.remove(a);
                b = a.Vb;
                null !== b && (b.g = null)
            }
        } else a instanceof J ? this.wp.remove(a) : a instanceof da || this.pb.remove(a);
        var c = this;
        Rm(a,
        function(a) {
            Wm(c, a)
        });
        b = a.data;
        null !== b && (a instanceof da || (a instanceof J ? this.ck.remove(b) : this.Ti.remove(b)), Rm(a,
        function(a) {
            Xm(c, a)
        }));
        this.Cg.remove(a);
        Vm(a) ? (a.$.F() && this.qa(sl(a, a.$)), this.yc()) : a.isVisible() && a.$.F() && this.qa(sl(a, a.$));
        this.Se()
    };
    E.prototype.remove = E.prototype.remove = function(a) {
        D.l(a, F, E, "remove:part");
        Ym(this, a, !0)
    };
    function Ym(a, b, c) {
        var d = b.layer;
        null !== d && d.g === a && (b.hb = !1, b.Xg = !1, b.N(Zm), c && b.Mn(), c = d.rf( - 1, b, !1), 0 <= c && a.hd(ng, "parts", d, b, null, c, null), a = b.by, null !== a && a(b, d, null))
    }
    E.prototype.removeParts = E.prototype.vB = function(a, b) {
        if (D.isArray(a)) for (var c = D.cb(a), d = 0; d < c; d++) {
            var e = D.La(a, d);
            b && !e.canDelete() || this.remove(e)
        } else for (e = new L(F), e.Rc(a), c = e.j; c.next();) e = c.value,
        b && !e.canDelete() || this.remove(e)
    };
    E.prototype.copyParts = E.prototype.hq = function(a, b, c) {
        return this.wb.hq(a, b, c)
    };
    E.prototype.moveParts = E.prototype.moveParts = function(a, b, c) {
        D.l(b, O, E, "moveParts:offset");
        var d = this.kb;
        if (null !== d) {
            d = d.De;
            null === d && (d = new Mh, d.Xc(this));
            var e = new ma(F);
            if (null !== a) a = a.j;
            else {
                for (a = this.Gi; a.next();) Yh(d, e, a.value, c);
                for (a = this.ng; a.next();) Yh(d, e, a.value, c);
                a = this.links
            }
            for (; a.next();) Yh(d, e, a.value, c);
            d.moveParts(e, b, c)
        }
    };
    function $m(a, b, c) {
        D.l(b, Rg, E, "addLayer:layer");
        null !== b.g && b.g !== a && D.k("Cannot share a Layer with another Diagram: " + b + " of " + b.g);
        null === c ? null !== b.g && D.k("Cannot add an existing Layer to this Diagram again: " + b) : (D.l(c, Rg, E, "addLayer:existingLayer"), c.g !== a && D.k("Existing Layer must be in this Diagram: " + c + " not in " + c.g), b === c && D.k("Cannot move a Layer before or after itself: " + b));
        if (b.g !== a) {
            b = b.name;
            a = a.bc;
            c = a.count;
            for (var d = 0; d < c; d++) a.ea(d).name === b && D.k("Cannot add Layer with the name '" + b + "'; a Layer with the same name is already present in this Diagram.")
        }
    }
    E.prototype.addLayer = E.prototype.Pt = function(a) {
        $m(this, a, null);
        a.Xc(this);
        var b = this.bc,
        c = b.count - 1;
        if (!a.Tc) for (; 0 <= c && b.ea(c).Tc;) c--;
        b.Xd(c + 1, a);
        null !== this.ve && this.hd(mg, "layers", this, null, a, null, c + 1);
        this.qa();
        this.yc()
    };
    E.prototype.addLayerBefore = E.prototype.LH = function(a, b) {
        $m(this, a, b);
        a.Xc(this);
        var c = this.bc,
        d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.ve && this.hd(ng, "layers", this, a, null, d, null));
        for (var e = c.count,
        g = 0; g < e; g++) if (c.ea(g) === b) {
            c.Xd(g, a);
            break
        }
        null !== this.ve && this.hd(mg, "layers", this, null, a, null, g);
        this.qa();
        0 > d && this.yc()
    };
    E.prototype.addLayerAfter = function(a, b) {
        $m(this, a, b);
        a.Xc(this);
        var c = this.bc,
        d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.ve && this.hd(ng, "layers", this, a, null, d, null));
        for (var e = c.count,
        g = 0; g < e; g++) if (c.ea(g) === b) {
            c.Xd(g + 1, a);
            break
        }
        null !== this.ve && this.hd(mg, "layers", this, null, a, null, g + 1);
        this.qa();
        0 > d && this.yc()
    };
    E.prototype.removeLayer = function(a) {
        D.l(a, Rg, E, "removeLayer:layer");
        a.g !== this && D.k("Cannot remove a Layer from another Diagram: " + a + " of " + a.g);
        if ("" !== a.name) {
            var b = this.bc,
            c = b.indexOf(a);
            if (b.remove(a)) {
                for (b = a.pb.copy().j; b.next();) {
                    var d = b.value,
                    e = d.Jf;
                    d.Jf = e !== a.name ? e: ""
                }
                null !== this.ve && this.hd(ng, "layers", this, a, null, c, null);
                this.qa();
                this.yc()
            }
        }
    };
    E.prototype.findLayer = E.prototype.jm = function(a) {
        for (var b = this.ao; b.next();) {
            var c = b.value;
            if (c.name === a) return c
        }
        return null
    };
    E.prototype.addModelChangedListener = E.prototype.NH = function(a) {
        D.h(a, "function", E, "addModelChangedListener:listener");
        null === this.wh && (this.wh = new K("function"));
        this.wh.add(a);
        this.ga.An(a)
    };
    E.prototype.removeModelChangedListener = function(a) {
        D.h(a, "function", E, "removeModelChangedListener:listener");
        null !== this.wh && (this.wh.remove(a), 0 === this.wh.count && (this.wh = null));
        this.ga.Su(a)
    };
    E.prototype.addChangedListener = E.prototype.An = function(a) {
        D.h(a, "function", E, "addChangedListener:listener");
        null === this.Oi && (this.Oi = new K("function"));
        this.Oi.add(a)
    };
    E.prototype.removeChangedListener = E.prototype.Su = function(a) {
        D.h(a, "function", E, "removeChangedListener:listener");
        null !== this.Oi && (this.Oi.remove(a), 0 === this.Oi.count && (this.Oi = null))
    };
    E.prototype.qx = function(a) {
        this.Eb || this.ra.EF(a);
        a.Ic !== dg && (this.Fi = !0);
        if (null !== this.Oi) {
            var b = this.Oi,
            c = b.length;
            if (1 === c) b = b.ea(0),
            b(a);
            else if (0 !== c) for (var d = b.lc(), e = 0; e < c; e++) b = d[e],
            b(a)
        }
    };
    E.prototype.raiseChangedEvent = E.prototype.hd = function(a, b, c, d, e, g, h) {
        void 0 === g && (g = null);
        void 0 === h && (h = null);
        var k = new bg;
        k.g = this;
        k.Ic = a;
        k.propertyName = b;
        k.object = c;
        k.oldValue = d;
        k.Sj = g;
        k.newValue = e;
        k.Qj = h;
        this.qx(k)
    };
    E.prototype.raiseChanged = E.prototype.i = function(a, b, c, d, e) {
        this.hd(cg, a, this, b, c, d, e)
    };
    D.w(E, {
        Xa: "animationManager"
    },
    function() {
        return this.mC
    });
    D.w(E, {
        ra: "undoManager"
    },
    function() {
        return this.ve.ra
    });
    D.defineProperty(E, {
        Eb: "skipsUndoManager"
    },
    function() {
        return this.tj
    },
    function(a) {
        D.h(a, "boolean", E, "skipsUndoManager");
        this.tj = a;
        this.ve.tj = a
    });
    D.defineProperty(E, {
        AA: "delaysLayout"
    },
    function() {
        return this.nz
    },
    function(a) {
        this.nz = a
    });
    E.prototype.En = function(a, b) {
        if (null !== a && a.g === this) {
            var c = this.Ue;
            try {
                this.Ue = !0;
                var d = a.Ic,
                e;
                if (d === cg) {
                    var g = a.object,
                    h = a.propertyName,
                    k = a.oa(b);
                    D.Ua(g, h, k);
                    if (g instanceof P) {
                        var l, m = g.Y;
                        null !== m && m.ne()
                    }
                    this.Fi = !0
                } else if (d === mg) {
                    var n = a.object,
                    p = a.Qj,
                    g = a.newValue;
                    if (n instanceof x) if ("number" === typeof p && g instanceof P) {
                        l = g;
                        var q = n;
                        b ? q.rf(p) : q.Xd(p, l);
                        m = n.Y;
                        null !== m && m.ne()
                    } else {
                        if ("number" === typeof p && g instanceof ch) {
                            var r = g,
                            q = n;
                            b ? r.Ie ? q.wG(p) : q.tG(p) : (e = r.Ie ? q.me(r.index) : q.le(r.index), e.gq(r))
                        }
                    } else if (n instanceof Rg) {
                        var s = !0 === a.Sj;
                        if ("number" === typeof p && g instanceof F) {
                            var m = g,
                            u = n;
                            b ? (m.hb = !1, m.Xg = !1, m.ne(), u.rf(s ? p: -1, m, s)) : u.uq(p, m, s)
                        }
                    } else if (n instanceof E) {
                        if ("number" === typeof p && g instanceof Rg) {
                            var t = g;
                            b ? this.bc.jd(p) : (d = t, d.Xc(this), this.bc.Xd(p, d))
                        }
                    } else D.k("unknown ChangedEvent.Insert object: " + a.toString());
                    this.Fi = !0
                } else d === ng ? (n = a.object, p = a.Sj, g = a.oldValue, n instanceof x ? "number" === typeof p && g instanceof P ? (q = n, b ? q.Xd(p, g) : q.rf(p)) : "number" === typeof p && g instanceof ch && (r = g, q = n, b ? (e = r.Ie ? q.me(r.index) : q.le(r.index), e.gq(r)) : r.Ie ? q.wG(p) : q.tG(p)) : n instanceof Rg ? (s = !0 === a.Qj, "number" === typeof p && g instanceof F && (m = g, u = n, b ? u.uq(p, m, s) : (m.hb = !1, m.Xg = !1, m.ne(), u.rf(s ? p: -1, m, s)))) : n instanceof E ? "number" === typeof p && g instanceof Rg && (t = g, b ? (d = t, d.Xc(this), this.bc.Xd(p, d)) : this.bc.jd(p)) : D.k("unknown ChangedEvent.Remove object: " + a.toString()), this.Fi = !0) : d !== dg && D.k("unknown ChangedEvent: " + a.toString())
            } finally {
                this.Ue = c
            }
        }
    };
    E.prototype.startTransaction = E.prototype.$b = function(a) {
        return this.ra.$b(a)
    };
    E.prototype.commitTransaction = E.prototype.Td = function(a) {
        return this.ra.Td(a)
    };
    E.prototype.rollbackTransaction = E.prototype.Kq = function() {
        return this.ra.Kq()
    };
    E.prototype.updateAllTargetBindings = E.prototype.hH = function(a) {
        void 0 === a && (a = "");
        for (var b = this.Gi; b.next();) b.value.Nb(a);
        for (b = this.ng; b.next();) b.value.Nb(a);
        for (b = this.links; b.next();) b.value.Nb(a)
    };
    E.prototype.updateAllRelationshipsFromData = E.prototype.yK = function() {
        for (var a = this.ga,
        b = new L,
        c = a.mg,
        d = 0; d < c.length; d++) {
            var e = c[d];
            b.add(e)
        }
        var g = [];
        this.ng.each(function(a) {
            null === a.data || b.contains(a.data) || g.push(a.data)
        });
        this.Gi.each(function(a) {
            null === a.data || b.contains(a.data) || g.push(a.data)
        });
        g.forEach(function(b) {
            Yg(a, b, !1)
        });
        for (d = 0; d < c.length; d++) {
            var e = c[d],
            h = this.Nh(e);
            null === h && Xg(a, e, !1)
        }
        if (a instanceof Y) {
            for (var k = new L,
            c = a.Yg,
            d = 0; d < c.length; d++) e = c[d],
            k.add(e);
            var l = [];
            this.links.each(function(a) {
                null === a.data || k.contains(a.data) || l.push(a.data)
            });
            l.forEach(function(b) {
                hh(a, b, !1)
            });
            for (d = 0; d < c.length; d++) e = c[d],
            h = this.bg(e),
            null === h && gh(a, e, !1)
        }
        for (d = this.Gi; d.next();) h = d.value,
        h.updateRelationshipsFromData();
        for (d = this.ng; d.next();) d.value.updateRelationshipsFromData();
        for (d = this.links; d.next();) h = d.value,
        h.updateRelationshipsFromData()
    };
    function an(a, b, c) {
        if (a.Zc || a.ge) a.Bb = c,
        c = a.Xa,
        c.vc && nl(c, b, a.Bb);
        else if (a.Zc = !0, null === a.Lb) a.Bb = c;
        else {
            var d = a.xb.copy(),
            e = a.Ob,
            g = a.Rb;
            d.width = a.Ob / b;
            d.height = a.Rb / b;
            var h = a.Fm.x,
            k = a.Fm.y,
            l = a.RE;
            isNaN(h) && (l.Kj() ? l.Ij(tc) ? h = 0 : l.Ij(uc) && (h = e - 1) : h = l.fd() ? l.x * (e - 1) : e / 2);
            isNaN(k) && (l.Kj() ? l.Ij(sc) ? k = 0 : l.Ij(yc) && (k = g - 1) : k = l.fd() ? l.y * (g - 1) : g / 2);
            null !== a.HG && (c = a.HG(a, c));
            c < a.Qh && (c = a.Qh);
            c > a.Ph && (c = a.Ph);
            e = D.Fb(a.qb.x + h / b - h / c, a.qb.y + k / b - k / c);
            a.position = e;
            D.A(e);
            a.Bb = c;
            a.Pu(d, a.xb, b, c, !1);
            a.Zc = !1;
            Tl(a, !1);
            c = a.Xa;
            c.vc && nl(c, b, a.Bb);
            a.qa();
            cm(a)
        }
    }
    E.prototype.Pu = function(a, b, c, d, e) {
        a.O(b) || (void 0 === e && (e = !1), e || cm(this), Rl(this), d = this.Vb, null === d || !d.Zx || this.am !== Nh || e || a.width === b.width && a.height === b.height || d.N(), d = this.gb, !0 === this.Um && d instanceof Hh && (this.U.ha = this.UB(this.U.qe), Ek(d, this)), this.Zc || this.JF(a, b), fm(this), this.Fh.scale = c, this.Fh.position.x = a.x, this.Fh.position.y = a.y, this.Fh.bounds.set(a), this.Fh.isScroll = e, this.Ja("ViewportBoundsChanged", this.Fh, a))
    };
    function fm(a, b) {
        void 0 === b && (b = null);
        var c = a.zd;
        if (null !== c && c.visible) {
            for (var d = D.Cm(), e = 1, g = 1, h = c.xa.o, k = h.length, l = 0; l < k; l++) {
                var m = h[l],
                n = m.interval;
                2 > n || (bn(m.Jb) ? g = g * n / $e(g, n) : e = e * n / $e(e, n))
            }
            h = c.Ox;
            d.m(g * h.width, e * h.height);
            h = g = l = k = 0;
            if (null !== b) k = b.width,
            l = b.height,
            g = b.x,
            h = b.y;
            else {
                e = D.Nf();
                g = a.xb;
                e.m(g.x, g.y, g.width, g.height);
                for (h = a.Cw.j; h.next();) g = h.value.xb,
                g.F() && Ob(e, g.x, g.y, g.width, g.height);
                if (!e.F()) {
                    D.Mb(e);
                    return
                }
                k = e.width;
                l = e.height;
                g = e.x;
                h = e.y;
                D.Mb(e)
            }
            c.width = k + 2 * d.width;
            c.height = l + 2 * d.height;
            e = D.P();
            gb(g, h, 0, 0, d.width, d.height, e);
            e.offset( - d.width, -d.height);
            D.Rk(d);
            c.Y.location = e;
            D.A(e)
        }
    }
    E.prototype.clearSelection = E.prototype.tx = function() {
        var a = 0 < this.selection.count;
        a && this.Ja("ChangingSelection");
        Lh(this);
        a && this.Ja("ChangedSelection")
    };
    function Lh(a) {
        a = a.selection;
        if (0 < a.count) {
            for (var b = a.lc(), c = b.length, d = 0; d < c; d++) b[d].hb = !1;
            a.Ya();
            a.clear();
            a.freeze()
        }
    }
    E.prototype.select = E.prototype.select = function(a) {
        null !== a && (D.l(a, F, E, "select:part"), a.layer.g === this && (!a.hb || 1 < this.selection.count) && (this.Ja("ChangingSelection"), Lh(this), a.hb = !0, this.Ja("ChangedSelection")))
    };
    E.prototype.selectCollection = E.prototype.LG = function(a) {
        this.Ja("ChangingSelection");
        Lh(this);
        if (D.isArray(a)) for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            d instanceof F || D.k("Diagram.selectCollection given something that is not a Part: " + d);
            d.hb = !0
        } else for (a = a.j; a.next();) d = a.value,
        d instanceof F || D.k("Diagram.selectCollection given something that is not a Part: " + d),
        d.hb = !0;
        this.Ja("ChangedSelection")
    };
    E.prototype.clearHighlighteds = E.prototype.WH = function() {
        var a = this.qm;
        if (0 < a.count) {
            for (var b = a.lc(), c = b.length, d = 0; d < c; d++) b[d].Xg = !1;
            a.Ya();
            a.clear();
            a.freeze()
        }
    };
    E.prototype.highlight = function(a) {
        null !== a && a.layer.g === this && (D.l(a, F, E, "highlight:part"), !a.Xg || 1 < this.qm.count) && (this.WH(), a.Xg = !0)
    };
    E.prototype.highlightCollection = function(a) {
        for (var b = (new L(F)).Rc(a), c = this.qm.copy().wy(b).j; c.next();) a = c.value,
        a.Xg = !1;
        for (b = b.j; b.next();) a = b.value,
        a instanceof F || D.k("Diagram.highlightCollection given something that is not a Part: " + a),
        a.Xg = !0
    };
    E.prototype.scroll = E.prototype.scroll = function(a, b, c) {
        void 0 === c && (c = 1);
        var d = "up" === b || "down" === b,
        e = 0;
        if ("pixel" === a) e = c;
        else if ("line" === a) e = c * (d ? this.Yu: this.Xu);
        else if ("page" === a) a = d ? this.xb.height: this.xb.width,
        a *= this.scale,
        0 !== a && (e = Math.max(a - (d ? this.Yu: this.Xu), 0), e *= c);
        else {
            if ("document" === a) {
                e = this.cd;
                d = this.xb;
                c = D.P();
                "up" === b ? this.position = c.m(d.x, e.y) : "left" === b ? this.position = c.m(e.x, d.y) : "down" === b ? this.position = c.m(d.x, e.bottom - d.height) : "right" === b && (this.position = c.m(e.right - d.width, d.y));
                D.A(c);
                return
            }
            D.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: " + a)
        }
        e /= this.scale;
        c = this.position.copy();
        "up" === b ? c.y = this.position.y - e: "down" === b ? c.y = this.position.y + e: "left" === b ? c.x = this.position.x - e: "right" === b ? c.x = this.position.x + e: D.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
        this.position = c
    };
    E.prototype.scrollToRect = E.prototype.dK = function(a) {
        var b = this.xb;
        b.Nk(a) || (a = a.bm, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
    };
    E.prototype.centerRect = E.prototype.VH = function(a) {
        var b = this.xb;
        a = a.bm;
        a.x -= b.width / 2;
        a.y -= b.height / 2;
        this.position = a
    };
    E.prototype.transformDocToView = E.prototype.TB = function(a) {
        var b = this.Hc;
        b.reset();
        1 !== this.Bb && b.scale(this.Bb);
        var c = this.qb; (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate( - c.x, -c.y);
        return a.copy().transform(this.Hc)
    };
    E.prototype.transformViewToDoc = E.prototype.UB = function(a) {
        var b = this.Hc;
        b.reset();
        1 !== this.Bb && b.scale(this.Bb);
        var c = this.qb; (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate( - c.x, -c.y);
        return hb(a.copy(), this.Hc)
    };
    var Nh;
    E.None = Nh = D.s(E, "None", 0);
    var Xl;
    E.Uniform = Xl = D.s(E, "Uniform", 1);
    var Yl;
    E.UniformToFill = Yl = D.s(E, "UniformToFill", 2);
    var Zi;
    E.CycleAll = Zi = D.s(E, "CycleAll", 10);
    var cj;
    E.CycleNotDirected = cj = D.s(E, "CycleNotDirected", 11);
    var ej;
    E.CycleNotDirectedFast = ej = D.s(E, "CycleNotDirectedFast", 12);
    var fj;
    E.CycleNotUndirected = fj = D.s(E, "CycleNotUndirected", 13);
    var $i;
    E.CycleDestinationTree = $i = D.s(E, "CycleDestinationTree", 14);
    var bj;
    E.CycleSourceTree = bj = D.s(E, "CycleSourceTree", 15);
    var xl;
    E.DocumentScroll = xl = D.s(E, "DocumentScroll", 1);
    var Om;
    E.InfiniteScroll = Om = D.s(E, "InfiniteScroll", 2);
    var zl;
    E.TreeParentCollapsed = zl = D.s(E, "TreeParentCollapsed", 21);
    var cn;
    E.AllParentsCollapsed = cn = D.s(E, "AllParentsCollapsed", 22);
    var dn;
    E.AnyParentsCollapsed = dn = D.s(E, "AnyParentsCollapsed", 23);
    D.defineProperty(E, {
        zK: "validCycle"
    },
    function() {
        return this.bx
    },
    function(a) {
        var b = this.bx;
        b !== a && (D.Ca(a, E, E, "validCycle"), this.bx = a, this.i("validCycle", b, a))
    });
    D.w(E, {
        ao: "layers"
    },
    function() {
        return this.bc.j
    });
    D.defineProperty(E, {
        Ff: "isModelReadOnly"
    },
    function() {
        var a = this.ve;
        return null === a ? !1 : a.mb
    },
    function(a) {
        var b = this.ve;
        null !== b && (b.mb = a)
    });
    D.defineProperty(E, {
        mb: "isReadOnly"
    },
    function() {
        return this.aj
    },
    function(a) {
        var b = this.aj;
        b !== a && (D.h(a, "boolean", E, "isReadOnly"), this.aj = a, this.i("isReadOnly", b, a))
    });
    D.defineProperty(E, {
        isEnabled: "isEnabled"
    },
    function() {
        return this.mf
    },
    function(a) {
        var b = this.mf;
        b !== a && (D.h(a, "boolean", E, "isEnabled"), this.mf = a, this.i("isEnabled", b, a))
    });
    D.defineProperty(E, {
        nA: "allowClipboard"
    },
    function() {
        return this.nv
    },
    function(a) {
        var b = this.nv;
        b !== a && (D.h(a, "boolean", E, "allowClipboard"), this.nv = a, this.i("allowClipboard", b, a))
    });
    D.defineProperty(E, {
        Kk: "allowCopy"
    },
    function() {
        return this.cl
    },
    function(a) {
        var b = this.cl;
        b !== a && (D.h(a, "boolean", E, "allowCopy"), this.cl = a, this.i("allowCopy", b, a))
    });
    D.defineProperty(E, {
        Bn: "allowDelete"
    },
    function() {
        return this.dl
    },
    function(a) {
        var b = this.dl;
        b !== a && (D.h(a, "boolean", E, "allowDelete"), this.dl = a, this.i("allowDelete", b, a))
    });
    D.defineProperty(E, {
        Ut: "allowDragOut"
    },
    function() {
        return this.ov
    },
    function(a) {
        var b = this.ov;
        b !== a && (D.h(a, "boolean", E, "allowDragOut"), this.ov = a, this.i("allowDragOut", b, a))
    });
    D.defineProperty(E, {
        EE: "allowDrop"
    },
    function() {
        return this.pv
    },
    function(a) {
        var b = this.pv;
        b !== a && (D.h(a, "boolean", E, "allowDrop"), this.pv = a, this.i("allowDrop", b, a))
    });
    D.defineProperty(E, {
        nx: "allowTextEdit"
    },
    function() {
        return this.ml
    },
    function(a) {
        var b = this.ml;
        b !== a && (D.h(a, "boolean", E, "allowTextEdit"), this.ml = a, this.i("allowTextEdit", b, a))
    });
    D.defineProperty(E, {
        kx: "allowGroup"
    },
    function() {
        return this.el
    },
    function(a) {
        var b = this.el;
        b !== a && (D.h(a, "boolean", E, "allowGroup"), this.el = a, this.i("allowGroup", b, a))
    });
    D.defineProperty(E, {
        ox: "allowUngroup"
    },
    function() {
        return this.nl
    },
    function(a) {
        var b = this.nl;
        b !== a && (D.h(a, "boolean", E, "allowUngroup"), this.nl = a, this.i("allowUngroup", b, a))
    });
    D.defineProperty(E, {
        Zp: "allowInsert"
    },
    function() {
        return this.rv
    },
    function(a) {
        var b = this.rv;
        b !== a && (D.h(a, "boolean", E, "allowInsert"), this.rv = a, this.i("allowInsert", b, a))
    });
    D.defineProperty(E, {
        Vt: "allowLink"
    },
    function() {
        return this.fl
    },
    function(a) {
        var b = this.fl;
        b !== a && (D.h(a, "boolean", E, "allowLink"), this.fl = a, this.i("allowLink", b, a))
    });
    D.defineProperty(E, {
        Cn: "allowRelink"
    },
    function() {
        return this.hl
    },
    function(a) {
        var b = this.hl;
        b !== a && (D.h(a, "boolean", E, "allowRelink"), this.hl = a, this.i("allowRelink", b, a))
    });
    D.defineProperty(E, {
        Yl: "allowMove"
    },
    function() {
        return this.gl
    },
    function(a) {
        var b = this.gl;
        b !== a && (D.h(a, "boolean", E, "allowMove"), this.gl = a, this.i("allowMove", b, a))
    });
    D.defineProperty(E, {
        lx: "allowReshape"
    },
    function() {
        return this.il
    },
    function(a) {
        var b = this.il;
        b !== a && (D.h(a, "boolean", E, "allowReshape"), this.il = a, this.i("allowReshape", b, a))
    });
    D.defineProperty(E, {
        Wt: "allowResize"
    },
    function() {
        return this.jl
    },
    function(a) {
        var b = this.jl;
        b !== a && (D.h(a, "boolean", E, "allowResize"), this.jl = a, this.i("allowResize", b, a))
    });
    D.defineProperty(E, {
        mx: "allowRotate"
    },
    function() {
        return this.kl
    },
    function(a) {
        var b = this.kl;
        b !== a && (D.h(a, "boolean", E, "allowRotate"), this.kl = a, this.i("allowRotate", b, a))
    });
    D.defineProperty(E, {
        Bf: "allowSelect"
    },
    function() {
        return this.ll
    },
    function(a) {
        var b = this.ll;
        b !== a && (D.h(a, "boolean", E, "allowSelect"), this.ll = a, this.i("allowSelect", b, a))
    });
    D.defineProperty(E, {
        FE: "allowUndo"
    },
    function() {
        return this.sv
    },
    function(a) {
        var b = this.sv;
        b !== a && (D.h(a, "boolean", E, "allowUndo"), this.sv = a, this.i("allowUndo", b, a))
    });
    D.defineProperty(E, {
        px: "allowZoom"
    },
    function() {
        return this.uv
    },
    function(a) {
        var b = this.uv;
        b !== a && (D.h(a, "boolean", E, "allowZoom"), this.uv = a, this.i("allowZoom", b, a))
    });
    D.defineProperty(E, {
        UA: "hasVerticalScrollbar"
    },
    function() {
        return this.Yv
    },
    function(a) {
        var b = this.Yv;
        b !== a && (D.h(a, "boolean", E, "hasVerticalScrollbar"), this.Yv = a, cm(this), this.qa(), this.i("hasVerticalScrollbar", b, a), Tl(this, !1))
    });
    D.defineProperty(E, {
        TA: "hasHorizontalScrollbar"
    },
    function() {
        return this.Xv
    },
    function(a) {
        var b = this.Xv;
        b !== a && (D.h(a, "boolean", E, "hasHorizontalScrollbar"), this.Xv = a, cm(this), this.qa(), this.i("hasHorizontalScrollbar", b, a), Tl(this, !1))
    });
    D.defineProperty(E, {
        ye: "allowHorizontalScroll"
    },
    function() {
        return this.qv
    },
    function(a) {
        var b = this.qv;
        b !== a && (D.h(a, "boolean", E, "allowHorizontalScroll"), this.qv = a, this.i("allowHorizontalScroll", b, a), Tl(this, !1))
    });
    D.defineProperty(E, {
        ze: "allowVerticalScroll"
    },
    function() {
        return this.tv
    },
    function(a) {
        var b = this.tv;
        b !== a && (D.h(a, "boolean", E, "allowVerticalScroll"), this.tv = a, this.i("allowVerticalScroll", b, a), Tl(this, !1))
    });
    D.defineProperty(E, {
        Xu: "scrollHorizontalLineChange"
    },
    function() {
        return this.Lw
    },
    function(a) {
        var b = this.Lw;
        b !== a && (D.h(a, "number", E, "scrollHorizontalLineChange"), 0 > a && D.ua(a, ">= 0", E, "scrollHorizontalLineChange"), this.Lw = a, this.i("scrollHorizontalLineChange", b, a))
    });
    D.defineProperty(E, {
        Yu: "scrollVerticalLineChange"
    },
    function() {
        return this.Pw
    },
    function(a) {
        var b = this.Pw;
        b !== a && (D.h(a, "number", E, "scrollVerticalLineChange"), 0 > a && D.ua(a, ">= 0", E, "scrollVerticalLineChange"), this.Pw = a, this.i("scrollVerticalLineChange", b, a))
    });
    D.defineProperty(E, {
        U: "lastInput"
    },
    function() {
        return this.Tb
    },
    function(a) {
        v && D.l(a, Zf, E, "lastInput");
        this.Tb = a
    });
    D.defineProperty(E, {
        Kc: "firstInput"
    },
    function() {
        return this.Zi
    },
    function(a) {
        v && D.l(a, Zf, E, "firstInput");
        this.Zi = a
    });
    D.defineProperty(E, {
        jc: "currentCursor"
    },
    function() {
        return this.Fv
    },
    function(a) {
        "" === a && (a = this.Gr);
        var b = this.Fv;
        if (b !== a) {
            D.h(a, "string", E, "currentCursor");
            var c = this.Lb,
            d = this.Sb;
            null !== c && (this.Fv = a, c.style.cursor = a, d.style.cursor = a, c.style.cursor === b && (c.style.cursor = "-webkit-" + a, d.style.cursor = "-webkit-" + a, c.style.cursor === b && (c.style.cursor = "-moz-" + a, d.style.cursor = "-moz-" + a, c.style.cursor === b && (c.style.cursor = a, d.style.cursor = a))))
        }
    });
    D.defineProperty(E, {
        kL: "defaultCursor"
    },
    function() {
        return this.Gr
    },
    function(a) {
        "" === a && (a = "auto");
        var b = this.Gr;
        b !== a && (D.h(a, "string", E, "defaultCursor"), this.Gr = a, this.i("defaultCursor", b, a))
    });
    D.defineProperty(E, {
        click: "click"
    },
    function() {
        return this.Pi
    },
    function(a) {
        var b = this.Pi;
        b !== a && (null !== a && D.h(a, "function", E, "click"), this.Pi = a, this.i("click", b, a))
    });
    D.defineProperty(E, {
        du: "doubleClick"
    },
    function() {
        return this.Wi
    },
    function(a) {
        var b = this.Wi;
        b !== a && (null !== a && D.h(a, "function", E, "doubleClick"), this.Wi = a, this.i("doubleClick", b, a))
    });
    D.defineProperty(E, {
        uA: "contextClick"
    },
    function() {
        return this.Ri
    },
    function(a) {
        var b = this.Ri;
        b !== a && (null !== a && D.h(a, "function", E, "contextClick"), this.Ri = a, this.i("contextClick", b, a))
    });
    D.defineProperty(E, {
        kB: "mouseOver"
    },
    function() {
        return this.lj
    },
    function(a) {
        var b = this.lj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseOver"), this.lj = a, this.i("mouseOver", b, a))
    });
    D.defineProperty(E, {
        jB: "mouseHover"
    },
    function() {
        return this.kj
    },
    function(a) {
        var b = this.kj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseHover"), this.kj = a, this.i("mouseHover", b, a))
    });
    D.defineProperty(E, {
        iB: "mouseHold"
    },
    function() {
        return this.jj
    },
    function(a) {
        var b = this.jj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseHold"), this.jj = a, this.i("mouseHold", b, a))
    });
    D.defineProperty(E, {
        KJ: "mouseDragOver"
    },
    function() {
        return this.ww
    },
    function(a) {
        var b = this.ww;
        b !== a && (null !== a && D.h(a, "function", E, "mouseDragOver"), this.ww = a, this.i("mouseDragOver", b, a))
    });
    D.defineProperty(E, {
        hB: "mouseDrop"
    },
    function() {
        return this.ij
    },
    function(a) {
        var b = this.ij;
        b !== a && (null !== a && D.h(a, "function", E, "mouseDrop"), this.ij = a, this.i("mouseDrop", b, a))
    });
    D.defineProperty(E, {
        PB: "toolTip"
    },
    function() {
        return this.uj
    },
    function(a) {
        var b = this.uj;
        b !== a && (!v || null === a || a instanceof da || a instanceof ak || D.k("Diagram.toolTip must be an Adornment or HTMLInfo."), this.uj = a, this.i("toolTip", b, a))
    });
    D.defineProperty(E, {
        contextMenu: "contextMenu"
    },
    function() {
        return this.Si
    },
    function(a) {
        var b = this.Si;
        b !== a && (!v || a instanceof da || a instanceof ak || D.k("Diagram.contextMenu must be an Adornment or HTMLInfo."), this.Si = a, this.i("contextMenu", b, a))
    });
    D.defineProperty(E, {
        wb: "commandHandler"
    },
    function() {
        return this.gz
    },
    function(a) {
        var b = this.gz;
        b !== a && (D.l(a, oa, E, "commandHandler"), null !== a.g && D.k("Cannot share CommandHandlers between Diagrams: " + a.toString()), null !== b && b.Xc(null), this.gz = a, a.Xc(this))
    });
    D.defineProperty(E, {
        kb: "toolManager"
    },
    function() {
        return this.fA
    },
    function(a) {
        var b = this.fA;
        b !== a && (D.l(a, Hh, E, "toolManager"), null !== a.g && D.k("Cannot share ToolManagers between Diagrams: " + a.toString()), null !== b && b.Xc(null), this.fA = a, a.Xc(this))
    });
    D.defineProperty(E, {
        cu: "defaultTool"
    },
    function() {
        return this.mz
    },
    function(a) {
        var b = this.mz;
        b !== a && (D.l(a, Sg, E, "defaultTool"), this.mz = a, this.gb === b && (this.gb = a))
    });
    D.defineProperty(E, {
        gb: "currentTool"
    },
    function() {
        return this.jz
    },
    function(a) {
        var b = this.jz;
        null !== b && (b.wa && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
        null === a && (a = this.cu);
        null !== a && (D.l(a, Sg, E, "currentTool"), this.jz = a, a.Xc(this), a.doStart())
    });
    D.w(E, {
        selection: "selection"
    },
    function() {
        return this.Sw
    });
    D.defineProperty(E, {
        BJ: "maxSelectionCount"
    },
    function() {
        return this.rw
    },
    function(a) {
        var b = this.rw;
        if (b !== a) if (D.h(a, "number", E, "maxSelectionCount"), 0 <= a && !isNaN(a)) {
            if (this.rw = a, this.i("maxSelectionCount", b, a), !this.ra.nb && (a = this.selection.count - a, 0 < a)) {
                this.Ja("ChangingSelection");
                for (var b = this.selection.lc(), c = 0; c < a; c++) b[c].hb = !1;
                this.Ja("ChangedSelection")
            }
        } else D.ua(a, ">= 0", E, "maxSelectionCount")
    });
    D.defineProperty(E, {
        MJ: "nodeSelectionAdornmentTemplate"
    },
    function() {
        return this.xw
    },
    function(a) {
        var b = this.xw;
        b !== a && (D.l(a, da, E, "nodeSelectionAdornmentTemplate"), this.xw = a, this.i("nodeSelectionAdornmentTemplate", b, a))
    });
    D.defineProperty(E, {
        TI: "groupSelectionAdornmentTemplate"
    },
    function() {
        return this.Vv
    },
    function(a) {
        var b = this.Vv;
        b !== a && (D.l(a, da, E, "groupSelectionAdornmentTemplate"), this.Vv = a, this.i("groupSelectionAdornmentTemplate", b, a))
    });
    D.defineProperty(E, {
        vJ: "linkSelectionAdornmentTemplate"
    },
    function() {
        return this.mw
    },
    function(a) {
        var b = this.mw;
        b !== a && (D.l(a, da, E, "linkSelectionAdornmentTemplate"), this.mw = a, this.i("linkSelectionAdornmentTemplate", b, a))
    });
    D.w(E, {
        qm: "highlighteds"
    },
    function() {
        return this.Zv
    });
    D.defineProperty(E, {
        Fi: "isModified"
    },
    function() {
        var a = this.ra;
        return a.isEnabled ? null !== a.Cj ? !0 : this.fw && this.sh !== a.Hj: this.fw
    },
    function(a) {
        if (this.fw !== a) {
            D.h(a, "boolean", E, "isModified");
            this.fw = a;
            var b = this.ra; ! a && b.isEnabled && (this.sh = b.Hj);
            a || en(this)
        }
    });
    function en(a) {
        var b = a.Fi;
        a.uE !== b && (a.uE = b, a.Ja("Modified"))
    }
    D.defineProperty(E, {
        ga: "model"
    },
    function() {
        return this.ve
    },
    function(a) {
        var b = this.ve;
        if (b !== a) {
            D.l(a, M, E, "model");
            this.gb.doCancel();
            null !== b && b.ra !== a.ra && b.ra.RF && D.k("Do not replace a Diagram.model while a transaction is in progress.");
            this.Xa.Ii();
            this.tx();
            this.th = !1;
            this.cp = !0;
            this.sh = -2;
            this.Yf = !1;
            var c = this.ge;
            this.ge = !0;
            this.Xa.oo("Model");
            null !== b && (null !== this.wh && this.wh.each(function(a) {
                b.Su(a)
            }), b.Su(this.AD), b instanceof Y && fn(this, b.Yg), fn(this, b.mg));
            this.ve = a;
            a.An(this.zD);
            gn(this, a.mg);
            a instanceof Y && hn(this, a.Yg);
            a.Su(this.zD);
            a.An(this.AD);
            null !== this.wh && this.wh.each(function(b) {
                a.An(b)
            });
            this.ge = c;
            this.Zc || this.qa();
            null !== b && (a.ra.isEnabled = b.ra.isEnabled)
        }
    });
    D.defineProperty(E, {
        ab: null
    },
    function() {
        return this.rD
    },
    function(a) {
        this.rD = a
    });
    D.w(E, {
        hy: null
    },
    function() {
        return this.tH
    });
    function Bl(a, b) {
        if (b.ga === a.ga) {
            var c = b.Ic,
            d = b.propertyName;
            if (c === dg && "S" === d[0]) if ("StartingFirstTransaction" === d) c = a.kb,
            c.lf.each(function(b) {
                b.Xc(a)
            }),
            c.ig.each(function(b) {
                b.Xc(a)
            }),
            c.jg.each(function(b) {
                b.Xc(a)
            }),
            a.ge || a.th || (a.Mv = !0, a.cp && (a.Yf = !0));
            else if ("StartingUndo" === d || "StartingRedo" === d) {
                var e = a.Xa;
                e.sf && !a.Eb && e.Ii();
                a.Ja("ChangingSelection")
            } else "StartedTransaction" === d && (e = a.Xa, e.sf && !a.Eb && e.Ii());
            else if (a.ab) {
                a.ab = !1;
                try {
                    var g = b.wf;
                    if ("" !== g) if (c === cg) {
                        if ("linkFromKey" === g) {
                            var h = b.object,
                            k = a.bg(h);
                            if (null !== k) {
                                var l = b.newValue,
                                m = a.Qe(l);
                                k.aa = m
                            }
                        } else if ("linkToKey" === g) h = b.object,
                        k = a.bg(h),
                        null !== k && (l = b.newValue, m = a.Qe(l), k.da = m);
                        else if ("linkFromPortId" === g) {
                            if (h = b.object, k = a.bg(h), null !== k) {
                                var n = b.newValue;
                                "string" === typeof n && (k.cg = n)
                            }
                        } else if ("linkToPortId" === g) h = b.object,
                        k = a.bg(h),
                        null !== k && (n = b.newValue, "string" === typeof n && (k.jh = n));
                        else if ("nodeGroupKey" === g) {
                            var h = b.object,
                            p = a.Nh(h);
                            if (null !== p) {
                                var q = b.newValue;
                                if (void 0 !== q) {
                                    var r = a.Qe(q);
                                    p.Pa = r instanceof I ? r: null
                                } else p.Pa = null
                            }
                        } else if ("linkLabelKeys" === g) {
                            if (h = b.object, k = a.bg(h), null !== k) {
                                var s = b.oldValue,
                                u = b.newValue;
                                if (D.isArray(s)) for (var t = D.cb(s), y = 0; y < t; y++) {
                                    var w = D.La(s, y),
                                    m = a.Qe(w);
                                    null !== m && (m.zc = null)
                                }
                                if (D.isArray(u)) for (t = D.cb(u), y = 0; y < t; y++) w = D.La(u, y),
                                m = a.Qe(w),
                                null !== m && (m.zc = k)
                            }
                        } else if ("nodeParentKey" === g) {
                            var C = b.object,
                            A = a.Qe(b.newValue),
                            N = a.Ix(C);
                            if (null !== N) {
                                var H = N.Pn();
                                null !== H ? null === A ? a.remove(H) : a.$d ? H.aa = A: H.da = A: jn(a, A, N)
                            }
                        } else if ("parentLinkCategory" === g) {
                            var C = b.object,
                            N = a.Ix(C),
                            W = b.newValue;
                            null !== N && "string" === typeof W && (H = N.Pn(), null !== H && (H.Dd = W))
                        } else if ("nodeCategory" === g) {
                            var h = b.object,
                            fa = a.Nh(h),
                            W = b.newValue;
                            null !== fa && "string" === typeof W && (fa.Dd = W)
                        } else if ("linkCategory" === g) {
                            var h = b.object,
                            S = a.bg(h),
                            W = b.newValue;
                            null !== S && "string" === typeof W && (S.Dd = W)
                        } else if ("nodeDataArray" === g) {
                            var ba = b.oldValue;
                            fn(a, ba);
                            var ia = b.newValue;
                            gn(a, ia)
                        } else "linkDataArray" === g && (ba = b.oldValue, fn(a, ba), ia = b.newValue, hn(a, ia));
                        a.Fi = !0
                    } else c === mg ? (ia = b.newValue, "nodeDataArray" === g && D.Ta(ia) ? kn(a, ia) : "linkDataArray" === g && D.Ta(ia) ? ln(a, ia) : "linkLabelKeys" === g && Wg(ia) && (k = a.bg(b.object), m = a.Qe(ia), null !== k && null !== m && (m.zc = k)), a.Fi = !0) : c === ng ? (ba = b.oldValue, "nodeDataArray" === g && D.Ta(ba) ? mn(a, ba) : "linkDataArray" === g && D.Ta(ba) ? mn(a, ba) : "linkLabelKeys" === g && Wg(ba) && (m = a.Qe(ba), null !== m && (m.zc = null)), a.Fi = !0) : c === dg && ("SourceChanged" === g ? null !== b.object ? Al(a, b.object, b.propertyName) : (a.yK(), a.hH()) : "ModelDisplaced" === g && a.xm());
                    else if (c === cg) {
                        var U = b.propertyName,
                        h = b.object;
                        if (h === a.ga) {
                            if ("nodeKeyProperty" === U || "nodeCategoryProperty" === U || "linkFromKeyProperty" === U || "linkToKeyProperty" === U || "linkFromPortIdProperty" === U || "linkToPortIdProperty" === U || "linkLabelKeysProperty" === U || "nodeIsGroupProperty" === U || "nodeGroupKeyProperty" === U || "nodeParentKeyProperty" === U || "linkCategoryProperty" === U) a.ra.nb || a.xm()
                        } else Al(a, h, U);
                        a.Fi = !0
                    } else if (c === mg || c === ng) nn(a, b),
                    a.Fi = !0;
                    else if (c === dg) {
                        if ("FinishedUndo" === d || "FinishedRedo" === d) a.ra.bj = !0,
                        a.Ja("ChangedSelection"),
                        Li(a),
                        a.ra.bj = !1;
                        e = a.Xa;
                        "RolledBackTransaction" === d && e.Ii();
                        a.Mv = !0;
                        a.gg();
                        0 === a.ra.Vh && $k(e);
                        "CommittedTransaction" === d && a.ra.Kz && (a.sh = Math.min(a.sh, a.ra.Hj - 1));
                        var Ua = b.VF;
                        Ua && (en(a), a.hy.clear()); ! a.Qz && Ua && (a.Qz = !0, D.setTimeout(function() {
                            a.gb.standardMouseOver();
                            a.Qz = !1
                        },
                        10))
                    }
                } finally {
                    a.ab = !0
                }
            }
        }
    }
    function Al(a, b, c) {
        if ("string" === typeof c) {
            var d = a.Nh(b);
            if (null !== d) d.Nb(c),
            a.ga instanceof wg && (d = a.bg(b), null !== d && d.Nb(c));
            else {
                for (var d = null,
                e = a.Wm.j; e.next();) {
                    for (var g = e.value,
                    h = 0; h < g.length; h++) {
                        var k = g[h].DI(b);
                        null !== k && (null === d && (d = D.tb()), d.push(k))
                    }
                    if (null !== d) break
                }
                if (null !== d) {
                    for (e = 0; e < d.length; e++) d[e].Nb(c);
                    D.Aa(d)
                }
            }
            b === a.ga.Yk && a.hH(c)
        }
    }
    D.defineProperty(E, {
        Ue: "skipsModelSourceBindings"
    },
    function() {
        return this.WD
    },
    function(a) {
        this.WD = a
    });
    D.defineProperty(E, {
        cv: null
    },
    function() {
        return this.aA
    },
    function(a) {
        this.aA = a
    });
    function nn(a, b) {
        var c = b.Ic === mg,
        d = c ? b.Qj: b.Sj,
        e = c ? b.newValue: b.oldValue,
        g = a.Wm.oa(b.object);
        if (Array.isArray(g)) for (var h = 0; h < g.length; h++) {
            var k = g[h];
            if (c) on(k, e, d);
            else {
                var l = d;
                if (! (0 > l)) {
                    var m = l;
                    pn(k) && m++;
                    k.rf(m);
                    qn(k, m, l)
                }
            }
        }
    }
    function Tm(a, b) {
        var c = b.cj;
        if (D.isArray(c)) {
            var d = a.Wm.oa(c);
            if (null === d) d = [],
            d.push(b),
            a.Wm.add(c, d);
            else {
                for (c = 0; c < d.length; c++) if (d[c] === b) return;
                d.push(b)
            }
        }
    }
    function Xm(a, b) {
        var c = b.cj;
        if (D.isArray(c)) {
            var d = a.Wm.oa(c);
            if (null !== d) for (var e = 0; e < d.length; e++) if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Wm.remove(c);
                break
            }
        }
    }
    function Sm(a, b) {
        for (var c = b.xa.o,
        d = c.length,
        e = 0; e < d; e++) {
            var g = c[e];
            g instanceof Cl && rn(a, g)
        }
    }
    function rn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var d = b.Ze;
            null !== d && (d.fp instanceof Event && null !== b.$e && b.$e(b, d.fp), !0 === d.ew && (null !== b.wi && b.wi(b, d.Wz), null !== b.g && b.g.Tz.add(b)));
            c = c.src;
            d = a.Ep.oa(c);
            if (null === d) d = [],
            d.push(b),
            a.Ep.add(c, d);
            else {
                for (c = 0; c < d.length; c++) if (d[c] === b) return;
                d.push(b)
            }
        }
    }
    function Wm(a, b) {
        for (var c = b.xa.o,
        d = c.length,
        e = 0; e < d; e++) {
            var g = c[e];
            g instanceof Cl && sn(a, g)
        }
    }
    function sn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var c = c.src,
            d = a.Ep.oa(c);
            if (null !== d) for (var e = 0; e < d.length; e++) if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Ep.remove(c);
                break
            }
        }
    }
    E.prototype.rebuildParts = E.prototype.xm = function() {
        for (var a = this.oB.j; a.next();) {
            var b = a.value,
            c = a.key; (!b.oe() || b instanceof I) && D.k('Invalid node template in Diagram.nodeTemplateMap: template for "' + c + '" must be a Node or a simple Part, not a Group or Link: ' + b)
        }
        for (a = this.SA.j; a.next();) b = a.value,
        c = a.key,
        b instanceof I || D.k('Invalid group template in Diagram.groupTemplateMap: template for "' + c + '" must be a Group, not a normal Node or Link: ' + b);
        for (a = this.bB.j; a.next();) b = a.value,
        c = a.key,
        b instanceof J || D.k('Invalid link template in Diagram.linkTemplateMap: template for "' + c + '" must be a Link, not a normal Node or simple Part: ' + b);
        a = D.tb();
        for (b = this.selection.j; b.next();)(c = b.value.data) && a.push(c);
        for (var b = D.tb(), d = this.qm.j; d.next();)(c = d.value.data) && b.push(c);
        c = D.tb();
        for (d = this.ng.j; d.next();) {
            var e = d.value;
            null !== e.data && (c.push(e.data), c.push(e.location))
        }
        for (d = this.links.j; d.next();) e = d.value,
        null !== e.data && (c.push(e.data), c.push(e.location));
        for (d = this.Gi.j; d.next();) e = d.value,
        null !== e.data && (c.push(e.data), c.push(e.location));
        d = this.ga;
        d instanceof Y && fn(this, d.Yg);
        fn(this, d.mg);
        gn(this, d.mg);
        d instanceof Y && hn(this, d.Yg);
        for (d = 0; d < a.length; d++) e = this.Nh(a[d]),
        null !== e && (e.hb = !0);
        for (d = 0; d < b.length; d++) e = this.Nh(b[d]),
        null !== e && (e.Xg = !0);
        for (d = 0; d < c.length; d += 2) e = this.Nh(c[d]),
        null !== e && (e.location = c[d + 1]);
        D.Aa(a);
        D.Aa(b);
        D.Aa(c)
    };
    function gn(a, b) {
        if (null !== b) {
            for (var c = a.ga,
            d = c instanceof Y,
            e = D.cb(b), g = 0; g < e; g++) {
                var h = D.La(b, g);
                c.ie(h) ? kn(a, h, !1) : d && ln(a, h)
            }
            if (d || c instanceof wg) {
                for (g = 0; g < e; g++) h = D.La(b, g),
                c.ie(h) && tn(a, h);
                if (d) for (c = a.links; c.next();) un(c.value)
            }
            vn(a, !1)
        }
    }
    function kn(a, b, c) {
        if (void 0 !== b && null !== b && !a.ra.nb && !a.Ti.contains(b)) {
            void 0 === c && (c = !0);
            var d = a.OA(b),
            e = wn(a, b, d);
            if (null !== e && (Kh(e), e = e.copy(), null !== e)) {
                var g = a.Ue;
                a.Ue = !0;
                e.Ni = d;
                e.Nd = b;
                a.add(e);
                e.Nd = null;
                e.data = b;
                c && tn(a, b);
                a.Ue = g
            }
        }
    }
    E.prototype.OA = function(a) {
        return this.ga.OA(a)
    };
    var xn = !1,
    yn = !1;
    function wn(a, b, c) {
        var d = !1,
        e = a.ga;
        e instanceof Y && (d = e.ZA(b));
        d ? (b = a.SA.oa(c), null === b && (b = a.SA.oa(""), null === b && (yn || (yn = !0, D.trace('No Group template found for category "' + c + '"'), D.trace("  Using default group template")), b = a.IC))) : (b = a.oB.oa(c), null === b && (b = a.oB.oa(""), null === b && (xn || (xn = !0, D.trace('No Node template found for category "' + c + '"'), D.trace("  Using default node template")), b = a.KC)));
        return b
    }
    function tn(a, b) {
        var c = a.ga;
        if (c instanceof Y || c instanceof wg) {
            var d = c.Cb(b);
            if (void 0 !== d) {
                var e = Zg(c, d),
                g = a.Nh(b);
                if (null !== e && null !== g) {
                    for (e = e.j; e.next();) {
                        var h = e.value;
                        if (c instanceof Y) {
                            var k = c;
                            if (k.ie(h)) {
                                if (g instanceof I && k.Sn(h) === d) {
                                    var l = g,
                                    h = a.Nh(h);
                                    null !== h && (h.Pa = l)
                                }
                            } else {
                                var m = a.bg(h);
                                if (null !== m && g instanceof G && (l = g, k.om(h) === d && (m.aa = l), k.pm(h) === d && (m.da = l), h = k.Sk(h), D.isArray(h))) for (k = 0; k < D.cb(h); k++) if (D.La(h, k) === d) {
                                    l.zc = m;
                                    break
                                }
                            }
                        } else c instanceof wg && (m = c, m.ie(h) && g instanceof G && (l = g, m.Un(h) === d && (h = a.Ix(h), jn(a, l, h))))
                    }
                    ah(c, d)
                }
                c instanceof Y ? (c = c.Sn(b), void 0 !== c && (c = a.Qe(c), c instanceof I && (g.Pa = c))) : c instanceof wg && (c = c.Un(b), void 0 !== c && g instanceof G && (l = g, g = a.Qe(c), jn(a, g, l)))
            }
        }
    }
    function jn(a, b, c) {
        if (null !== b && null !== c) {
            var d = a.kb.bG,
            e = b,
            g = c;
            if (a.$d) for (b = g.Gd; b.next();) {
                if (b.value.da === g) return
            } else for (e = c, g = b, b = e.Gd; b.next();) if (b.value.aa === e) return;
            if (null === d || !aj(d, e, g, null, !0)) if (d = a.Lx(c.data), b = zn(a, d), null !== b && (Kh(b), b = b.copy(), null !== b)) {
                var h = a.Ue;
                a.Ue = !0;
                b.Ni = d;
                b.Nd = c.data;
                b.aa = e;
                b.da = g;
                a.add(b);
                b.Nd = null;
                b.data = c.data;
                a.Ue = h
            }
        }
    }
    function hn(a, b) {
        if (null !== b) {
            for (var c = D.cb(b), d = 0; d < c; d++) {
                var e = D.La(b, d);
                ln(a, e)
            }
            vn(a, !1)
        }
    }
    function ln(a, b) {
        if (void 0 !== b && null !== b && !a.ra.nb && !a.ck.contains(b)) {
            var c = a.Lx(b),
            d = zn(a, c);
            if (null !== d && (Kh(d), d = d.copy(), null !== d)) {
                var e = a.Ue;
                a.Ue = !0;
                d.Ni = c;
                d.Nd = b;
                var c = a.ga,
                g = c.KI(b);
                "" !== g && (d.cg = g);
                g = c.om(b);
                void 0 !== g && (g = a.Qe(g), g instanceof G && (d.aa = g));
                g = c.OI(b);
                "" !== g && (d.jh = g);
                g = c.pm(b);
                void 0 !== g && (g = a.Qe(g), g instanceof G && (d.da = g));
                c = c.Sk(b);
                if (D.isArray(c)) for (var g = D.cb(c), h = 0; h < g; h++) {
                    var k = D.La(c, h),
                    k = a.Qe(k);
                    null !== k && (k.zc = d)
                }
                a.add(d);
                d.Nd = null;
                d.data = b;
                a.Ue = e
            }
        }
    }
    E.prototype.Lx = function(a) {
        var b = this.ga,
        c = "";
        b instanceof Y ? c = b.Lx(a) : b instanceof wg && (c = b.MI(a));
        return c
    };
    var An = !1;
    function zn(a, b) {
        var c = a.bB.oa(b);
        null === c && (c = a.bB.oa(""), null === c && (An || (An = !0, D.trace('No Link template found for category "' + b + '"'), D.trace("  Using default link template")), c = a.JC));
        return c
    }
    function fn(a, b) {
        for (var c = D.cb(b), d = 0; d < c; d++) {
            var e = D.La(b, d);
            mn(a, e)
        }
    }
    function mn(a, b) {
        if (void 0 !== b && null !== b) {
            var c = a.Nh(b);
            if (null !== c) {
                Ym(a, c, !1);
                var d = a.ga;
                if (d instanceof Y && c instanceof G) {
                    var e = d.Cb(c.data);
                    if (void 0 !== e) {
                        for (var g = c.Gd; g.next();) $g(d, e, g.value.data);
                        c.tf && (g = c.zc, null !== g && $g(d, e, g.data));
                        if (c instanceof I) for (c = c.Mc; c.next();) g = c.value.data,
                        d.ie(g) && $g(d, e, g)
                    }
                } else if (d instanceof wg && c instanceof G) {
                    g = a.bg(c.data);
                    if (null !== g) {
                        g.hb = !1;
                        g.Xg = !1;
                        var h = g.layer;
                        if (null !== h) {
                            var k = h.rf( - 1, g, !1);
                            0 <= k && a.hd(ng, "parts", h, g, null, k, null);
                            k = g.by;
                            null !== k && k(g, h, null)
                        }
                    }
                    g = a.$d;
                    for (c = c.Gd; c.next();) h = c.value,
                    h = (g ? h.da: h.aa).data,
                    d.ie(h) && $g(d, e, h)
                }
            }
        }
    }
    E.prototype.findPartForKey = E.prototype.EI = function(a) {
        if (null === a || void 0 === a) return null;
        var b = this.ga.Fe(a);
        return null !== b ? this.Ti.oa(b) : this.ga instanceof Y && (b = this.ga.oq(a), null !== b) ? this.ck.oa(b) : null
    };
    E.prototype.findNodeForKey = E.prototype.Qe = function(a) {
        if (null === a || void 0 === a) return null;
        a = this.ga.Fe(a);
        if (null === a) return null;
        a = this.Ti.oa(a);
        return a instanceof G ? a: null
    };
    E.prototype.findPartForData = E.prototype.Nh = function(a) {
        if (null === a) return null;
        var b = this.Ti.oa(a);
        return null !== b ? b: b = this.ck.oa(a)
    };
    E.prototype.findNodeForData = E.prototype.Ix = function(a) {
        if (null === a) return null;
        a = this.Ti.oa(a);
        return a instanceof G ? a: null
    };
    E.prototype.findLinkForData = E.prototype.bg = function(a) {
        return null === a ? null: this.ck.oa(a)
    };
    E.prototype.findNodesByExample = function(a) {
        for (var b = new L(G), c = this.Cp.j; c.next();) {
            var d = c.value,
            e = d.data;
            if (null !== e) for (var g = 0; g < arguments.length; g++) {
                var h = arguments[g];
                if (D.Ta(h) && Bn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.j
    };
    E.prototype.findLinksByExample = function(a) {
        for (var b = new L(J), c = this.wp.j; c.next();) {
            var d = c.value,
            e = d.data;
            if (null !== e) for (var g = 0; g < arguments.length; g++) {
                var h = arguments[g];
                if (D.Ta(h) && Bn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.j
    };
    function Bn(a, b, c) {
        for (var d in c) {
            var e = b[d],
            g = c[d];
            if (D.isArray(g)) {
                if (!D.isArray(e) || e.length < g.length) return ! 1;
                for (var h = 0; h < e.length; h++) {
                    var k = e[h],
                    l = g[h];
                    if (void 0 !== l && !Cn(a, k, l)) return ! 1
                }
            } else if (!Cn(a, e, g)) return ! 1
        }
        return ! 0
    }
    function Cn(a, b, c) {
        if ("function" === typeof c) {
            if (!c(b)) return ! 1
        } else if (c instanceof RegExp) {
            if (!b || !c.test(b.toString())) return ! 1
        } else if (D.Ta(b) && D.Ta(c)) {
            if (!Bn(a, b, c)) return ! 1
        } else if (b !== c) return ! 1;
        return ! 0
    }
    D.defineProperty(E, {
        $L: "nodeTemplate"
    },
    function() {
        return this.mj.oa("")
    },
    function(a) {
        var b = this.mj.oa("");
        b !== a && (D.l(a, F, E, "nodeTemplate"), this.mj.add("", a), this.i("nodeTemplate", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        oB: "nodeTemplateMap"
    },
    function() {
        return this.mj
    },
    function(a) {
        var b = this.mj;
        b !== a && (D.l(a, ma, E, "nodeTemplateMap"), this.mj = a, this.i("nodeTemplateMap", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        CL: "groupTemplate"
    },
    function() {
        return this.ul.oa("")
    },
    function(a) {
        var b = this.ul.oa("");
        b !== a && (D.l(a, I, E, "groupTemplate"), this.ul.add("", a), this.i("groupTemplate", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        SA: "groupTemplateMap"
    },
    function() {
        return this.ul
    },
    function(a) {
        var b = this.ul;
        b !== a && (D.l(a, ma, E, "groupTemplateMap"), this.ul = a, this.i("groupTemplateMap", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        NL: "linkTemplate"
    },
    function() {
        return this.rk.oa("")
    },
    function(a) {
        var b = this.rk.oa("");
        b !== a && (D.l(a, J, E, "linkTemplate"), this.rk.add("", a), this.i("linkTemplate", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        bB: "linkTemplateMap"
    },
    function() {
        return this.rk
    },
    function(a) {
        var b = this.rk;
        b !== a && (D.l(a, ma, E, "linkTemplateMap"), this.rk = a, this.i("linkTemplateMap", b, a), this.ra.nb || this.xm())
    });
    D.defineProperty(E, {
        iJ: null
    },
    function() {
        return this.Um
    },
    function(a) {
        this.Um = a
    });
    D.defineProperty(E, {
        jf: "isMouseCaptured"
    },
    function() {
        return this.oD
    },
    function(a) {
        var b = this.Lb;
        null !== b && (a ? (this.U.bubbles = !1, b.removeEventListener("mousemove", this.jo, !1), b.removeEventListener("mousedown", this.io, !1), b.removeEventListener("mouseup", this.lo, !1), b.removeEventListener("mousewheel", this.Zg, !1), b.removeEventListener("DOMMouseScroll", this.Zg, !1), b.removeEventListener("mouseout", this.ko, !1), window.addEventListener("mousemove", this.jo, !0), window.addEventListener("mousedown", this.io, !0), window.addEventListener("mouseup", this.lo, !0), window.addEventListener("mousewheel", this.Zg, !0), window.addEventListener("DOMMouseScroll", this.Zg, !0), window.addEventListener("mouseout", this.ko, !0), window.addEventListener("selectstart", this.preventDefault, !1)) : (window.removeEventListener("mousemove", this.jo, !0), window.removeEventListener("mousedown", this.io, !0), window.removeEventListener("mouseup", this.lo, !0), window.removeEventListener("mousewheel", this.Zg, !0), window.removeEventListener("DOMMouseScroll", this.Zg, !0), window.removeEventListener("mouseout", this.ko, !0), window.removeEventListener("selectstart", this.preventDefault, !1), b.addEventListener("mousemove", this.jo, !1), b.addEventListener("mousedown", this.io, !1), b.addEventListener("mouseup", this.lo, !1), b.addEventListener("mousewheel", this.Zg, !1), b.addEventListener("DOMMouseScroll", this.Zg, !1), b.addEventListener("mouseout", this.ko, !1)), this.oD = a)
    });
    D.defineProperty(E, {
        position: "position"
    },
    function() {
        return this.qb
    },
    function(a) {
        var b = this.qb;
        if (!b.O(a)) {
            D.l(a, O, E, "position");
            var c = this.xb.copy();
            a = a.copy();
            if (!this.Zc && null !== this.Lb) {
                this.Zc = !0;
                var d = this.scale;
                Vl(this, a, this.cd, this.Ob / d, this.Rb / d, this.No, !1);
                this.Zc = !1
            }
            this.qb = a.V();
            a = this.Xa;
            a.vc && ml(a, b, this.qb);
            this.Zc || this.Pu(c, this.xb, this.Bb, this.Bb, !1)
        }
    });
    D.defineProperty(E, {
        $I: "initialPosition"
    },
    function() {
        return this.aw
    },
    function(a) {
        this.aw.O(a) || (D.l(a, O, E, "initialPosition"), this.aw = a.V())
    });
    D.defineProperty(E, {
        aJ: "initialScale"
    },
    function() {
        return this.bw
    },
    function(a) {
        this.bw !== a && (D.h(a, "number", E, "initialScale"), this.bw = a)
    });
    D.defineProperty(E, {
        Vn: "grid"
    },
    function() {
        null === this.zd && Ml(this);
        return this.zd
    },
    function(a) {
        var b = this.zd;
        if (b !== a) {
            null === b && (Ml(this), b = this.zd);
            D.l(a, x, E, "grid");
            a.type !== Nl && D.k("Diagram.grid must be a Panel of type Panel.Grid");
            var c = b.Q;
            null !== c && c.remove(b);
            this.zd = a;
            a.name = "GRID";
            null !== c && c.add(a);
            fm(this);
            this.qa();
            this.i("grid", b, a)
        }
    });
    D.w(E, {
        xb: "viewportBounds"
    },
    function() {
        var a = this.tE;
        if (null === this.Lb) return a;
        var b = this.qb,
        c = this.Bb;
        a.m(b.x, b.y, Math.max(this.Ob, 0) / c, Math.max(this.Rb, 0) / c);
        return a
    });
    D.defineProperty(E, {
        rF: "fixedBounds"
    },
    function() {
        return this.Tv
    },
    function(a) {
        var b = this.Tv;
        b.O(a) || (D.l(a, B, E, "fixedBounds"), (v && Infinity === a.width || -Infinity === a.width || Infinity === a.height || -Infinity === a.height) && D.k("fixedBounds width/height must not be Infinity"), this.Tv = a = a.V(), this.yc(), this.i("fixedBounds", b, a))
    });
    D.defineProperty(E, {
        IG: "scrollMargin"
    },
    function() {
        return this.Mw
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : D.l(a, Hb, E, "scrollMargin");
        var b = this.Mw;
        b.O(a) || (this.Mw = a = a.V(), this.yc(), this.i("scrollMargin", b, a))
    });
    D.defineProperty(E, {
        yB: "scrollMode"
    },
    function() {
        return this.Nw
    },
    function(a) {
        var b = this.Nw;
        b !== a && (D.Ca(a, E, E, "scrollMode"), this.Nw = a, a === xl && Tl(this, !1), this.i("scrollMode", b, a))
    });
    D.defineProperty(E, {
        qG: "positionComputation"
    },
    function() {
        return this.Hw
    },
    function(a) {
        var b = this.Hw;
        b !== a && (null !== a && D.h(a, "function", E, "positionComputation"), this.Hw = a, Tl(this, !1), this.i("positionComputation", b, a))
    });
    D.defineProperty(E, {
        HG: "scaleComputation"
    },
    function() {
        return this.Jw
    },
    function(a) {
        var b = this.Jw;
        b !== a && (null !== a && D.h(a, "function", E, "scaleComputation"), this.Jw = a, an(this, this.scale, this.scale), this.i("scaleComputation", b, a))
    });
    D.w(E, {
        cd: "documentBounds"
    },
    function() {
        return this.Nv
    });
    function Wl(a, b) {
        a.mk = !1;
        var c = a.Nv;
        c.O(b) || (b = b.V(), a.Nv = b, Tl(a, !1), a.Ja("DocumentBoundsChanged", null, c.copy()), cm(a))
    }
    D.defineProperty(E, {
        scale: "scale"
    },
    function() {
        return this.Bb
    },
    function(a) {
        var b = this.Bb;
        D.p(a, E, "scale");
        b !== a && an(this, b, a)
    });
    D.defineProperty(E, {
        am: "autoScale"
    },
    function() {
        return this.Im
    },
    function(a) {
        var b = this.Im;
        b !== a && (D.Ca(a, E, E, "autoScale"), this.Im = a, this.i("autoScale", b, a), a !== Nh && Tl(this, !1))
    });
    D.defineProperty(E, {
        FL: "initialAutoScale"
    },
    function() {
        return this.yl
    },
    function(a) {
        var b = this.yl;
        b !== a && (D.Ca(a, E, E, "initialAutoScale"), this.yl = a, this.i("initialAutoScale", b, a))
    });
    D.defineProperty(E, {
        bJ: "initialViewportSpot"
    },
    function() {
        return this.cw
    },
    function(a) {
        var b = this.cw;
        b !== a && (D.l(a, R, E, "initialViewportSpot"), a.fd() || D.k("initialViewportSpot must be a specific Spot: " + a), this.cw = a, this.i("initialViewportSpot", b, a))
    });
    D.defineProperty(E, {
        ZI: "initialDocumentSpot"
    },
    function() {
        return this.$v
    },
    function(a) {
        var b = this.$v;
        b !== a && (D.l(a, R, E, "initialDocumentSpot"), a.fd() || D.k("initialViewportSpot must be a specific Spot: " + a), this.$v = a, this.i("initialDocumentSpot", b, a))
    });
    D.defineProperty(E, {
        Qh: "minScale"
    },
    function() {
        return this.tw
    },
    function(a) {
        D.p(a, E, "minScale");
        var b = this.tw;
        b !== a && (0 < a ? (this.tw = a, this.i("minScale", b, a), a > this.scale && (this.scale = a)) : D.ua(a, "> 0", E, "minScale"))
    });
    D.defineProperty(E, {
        Ph: "maxScale"
    },
    function() {
        return this.qw
    },
    function(a) {
        D.p(a, E, "maxScale");
        var b = this.qw;
        b !== a && (0 < a ? (this.qw = a, this.i("maxScale", b, a), a < this.scale && (this.scale = a)) : D.ua(a, "> 0", E, "maxScale"))
    });
    D.defineProperty(E, {
        Fm: "zoomPoint"
    },
    function() {
        return this.hx
    },
    function(a) {
        this.hx.O(a) || (D.l(a, O, E, "zoomPoint"), this.hx = a = a.V())
    });
    D.defineProperty(E, {
        RE: "contentAlignment"
    },
    function() {
        return this.No
    },
    function(a) {
        var b = this.No;
        b.O(a) || (D.l(a, R, E, "contentAlignment"), this.No = a = a.V(), this.i("contentAlignment", b, a), Tl(this, !1))
    });
    D.defineProperty(E, {
        GL: "initialContentAlignment"
    },
    function() {
        return this.ip
    },
    function(a) {
        var b = this.ip;
        b.O(a) || (D.l(a, R, E, "initialContentAlignment"), this.ip = a = a.V(), this.i("initialContentAlignment", b, a))
    });
    D.defineProperty(E, {
        padding: "padding"
    },
    function() {
        return this.of
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : D.l(a, Hb, E, "padding");
        var b = this.of;
        b.O(a) || (this.of = a = a.V(), this.yc(), this.i("padding", b, a))
    });
    D.w(E, {
        ng: "nodes"
    },
    function() {
        return this.Cp.j
    });
    D.w(E, {
        links: "links"
    },
    function() {
        return this.wp.j
    });
    D.w(E, {
        Gi: "parts"
    },
    function() {
        return this.pb.j
    });
    E.prototype.findTopLevelNodesAndLinks = function() {
        for (var a = new L(F), b = this.Cp.j; b.next();) {
            var c = b.value;
            c.zq && a.add(c)
        }
        for (b = this.wp.j; b.next();) c = b.value,
        c.zq && a.add(c);
        return a.j
    };
    E.prototype.findTopLevelGroups = function() {
        return this.Rl.j
    };
    D.defineProperty(E, {
        Vb: "layout"
    },
    function() {
        return this.te
    },
    function(a) {
        var b = this.te;
        b !== a && (D.l(a, Tg, E, "layout"), null !== b && (b.g = null, b.group = null), this.te = a, a.g = this, a.group = null, this.wv = !0, this.i("layout", b, a), this.Se())
    });
    E.prototype.layoutDiagram = function(a) {
        Li(this);
        a && vn(this, !0);
        gm(this, !1)
    };
    function vn(a, b) {
        for (var c = a.Rl.j; c.next();) Dn(a, c.value, b);
        null !== a.Vb && (b ? a.Vb.Hf = !1 : a.Vb.N())
    }
    function Dn(a, b, c) {
        if (null !== b) {
            for (var d = b.en.j; d.next();) Dn(a, d.value, c);
            null !== b.Vb && (c ? b.Vb.Hf = !1 : b.Vb.N())
        }
    }
    function gm(a, b) {
        if (!a.nz) {
            var c = a.Vb,
            d = a.ab;
            a.ab = !0;
            try {
                var e = a.ra.Vh;
                0 === e && a.$b("Layout");
                var g = a.Xa;
                1 !== a.ra.Vh || g.sf || g.vc || b || g.oo("Layout");
                for (var h = a.Rl.j; h.next();) En(a, h.value, b);
                c.Hf || b && !c.UF && 0 !== e || (c.doLayout(a), Li(a), c.Hf = !0)
            } finally {
                0 === e && a.Td("Layout"),
                a.wv = !c.Hf,
                a.ab = d
            }
        }
    }
    function En(a, b, c) {
        if (null !== b) {
            for (var d = b.en.j; d.next();) En(a, d.value, c);
            d = b.Vb;
            null === d || d.Hf || c && !d.UF || (b.mo = !b.location.F(), d.doLayout(b), b.N(Fn), d.Hf = !0, Gm(a, b))
        }
    }
    D.defineProperty(E, {
        $d: "isTreePathToChildren"
    },
    function() {
        return this.iw
    },
    function(a) {
        var b = this.iw;
        if (b !== a && (D.h(a, "boolean", E, "isTreePathToChildren"), this.iw = a, this.i("isTreePathToChildren", b, a), !this.ra.nb)) for (a = this.ng; a.next();) Gn(a.value)
    });
    E.prototype.findTreeRoots = function() {
        for (var a = new K(G), b = this.ng; b.next();) {
            var c = b.value;
            c.zq && null === c.Pn() && a.add(c)
        }
        return a.j
    };
    D.defineProperty(E, {
        VB: "treeCollapsePolicy"
    },
    function() {
        return this.$w
    },
    function(a) {
        var b = this.$w;
        b !== a && (a !== zl && a !== cn && a !== dn && D.k("Unknown Diagram.treeCollapsePolicy: " + a), this.$w = a, this.i("treeCollapsePolicy", b, a))
    });
    D.defineProperty(E, {
        Oh: null
    },
    function() {
        return this.gD
    },
    function(a) {
        this.gD = a
    });
    function yl(a) {
        function b(a) {
            var b = a.toLowerCase(),
            h = new K("function");
            c.add(a, h);
            c.add(b, h);
            d.add(a, a);
            d.add(b, a)
        }
        var c = new ma("string", K),
        d = new ma("string", "string");
        b("AnimationStarting");
        b("AnimationFinished");
        b("BackgroundSingleClicked");
        b("BackgroundDoubleClicked");
        b("BackgroundContextClicked");
        b("ClipboardChanged");
        b("ClipboardPasted");
        b("DocumentBoundsChanged");
        b("ExternalObjectsDropped");
        b("InitialLayoutCompleted");
        b("LayoutCompleted");
        b("LinkDrawn");
        b("LinkRelinked");
        b("LinkReshaped");
        b("Modified");
        b("ObjectSingleClicked");
        b("ObjectDoubleClicked");
        b("ObjectContextClicked");
        b("PartCreated");
        b("PartResized");
        b("PartRotated");
        b("SelectionMoved");
        b("SelectionCopied");
        b("SelectionDeleting");
        b("SelectionDeleted");
        b("SelectionGrouped");
        b("SelectionUngrouped");
        b("ChangingSelection");
        b("ChangedSelection");
        b("SubGraphCollapsed");
        b("SubGraphExpanded");
        b("TextEdited");
        b("TreeCollapsed");
        b("TreeExpanded");
        b("ViewportBoundsChanged");
        a.pz = c;
        a.oz = d
    }
    function Ga(a, b) {
        var c = a.oz.oa(b);
        return null !== c ? c: a.oz.oa(b.toLowerCase())
    }
    function Hn(a, b) {
        var c = a.pz.oa(b);
        if (null !== c) return c;
        c = a.pz.oa(b.toLowerCase());
        if (null !== c) return c;
        D.k("Unknown DiagramEvent name: " + b);
        return null
    }
    E.prototype.addDiagramListener = E.prototype.mA = function(a, b) {
        D.h(a, "string", E, "addDiagramListener:name");
        D.h(b, "function", E, "addDiagramListener:listener");
        var c = Hn(this, a);
        null !== c && c.add(b)
    };
    E.prototype.removeDiagramListener = E.prototype.uG = function(a, b) {
        D.h(a, "string", E, "removeDiagramListener:name");
        D.h(b, "function", E, "addDiagramListener:listener");
        var c = Hn(this, a);
        null !== c && c.remove(b)
    };
    E.prototype.raiseDiagramEvent = E.prototype.Ja = function(a, b, c) {
        v && D.h(a, "string", E, "raiseDiagramEvent:name");
        var d = Hn(this, a),
        e = new ag;
        e.g = this;
        a = Ga(this, a);
        null !== a && (e.name = a);
        void 0 !== b && (e.LB = b);
        void 0 !== c && (e.qB = c);
        b = d.length;
        if (1 === b) d = d.ea(0),
        d(e);
        else if (0 !== b) for (c = d.lc(), a = 0; a < b; a++) d = c[a],
        d(e);
        return e.cancel
    };
    function Ui(a, b) {
        var c = !1;
        a.xb.Nk(b) && (c = !0);
        c = a.IA(b,
        function(a) {
            return a.Y
        },
        function(a) {
            return a instanceof J
        },
        !0,
        function(a) {
            return a instanceof J
        },
        c);
        if (0 !== c.count) for (c = c.j; c.next();) {
            var d = c.value;
            d.Di && d.fc()
        }
    }
    E.prototype.isUnoccupied = E.prototype.vm = function(a, b) {
        void 0 === b && (b = null);
        return ha(this, !1, null, b).vm(a.x, a.y, a.width, a.height)
    };
    function ha(a, b, c, d) {
        null === a.Qd && (a.Qd = new In);
        if (a.Qd.vq || a.Qd.group !== c || a.Qd.KB !== d) {
            if (null === c) {
                b = a.mk ? Sl(a) : a.cd.copy();
                b.eg(100, 100);
                a.Qd.initialize(b);
                b = D.Nf();
                for (var e = a.ng; e.next();) {
                    var g = e.value,
                    h = g.layer;
                    null !== h && h.visible && !h.Tc && Jn(a, g, d, b)
                }
            } else for (c.$.F() || c.hf(), b = c.$.copy(), b.eg(20, 20), a.Qd.initialize(b), b = D.Nf(), e = c.Mc; e.next();) g = e.value,
            g instanceof G && Jn(a, g, d, b);
            D.Mb(b);
            a.Qd.group = c;
            a.Qd.KB = d;
            a.Qd.vq = !1
        } else b && Kn(a.Qd);
        return a.Qd
    }
    function Jn(a, b, c, d) {
        if (b !== c) if (b.isVisible() && b.qA && !b.tf) {
            c = b.getAvoidableRect(d);
            d = a.Qd.cq;
            b = a.Qd.aq;
            for (var e = c.x + c.width,
            g = c.y + c.height,
            h = c.x; h < e; h += d) {
                for (var k = c.y; k < g; k += b) Ln(a.Qd, h, k);
                Ln(a.Qd, h, g)
            }
            for (k = c.y; k < g; k += b) Ln(a.Qd, e, k);
            Ln(a.Qd, e, g)
        } else if (b instanceof I) for (b = b.Mc; b.next();) e = b.value,
        e instanceof G && Jn(a, e, c, d)
    }
    function Mn(a, b) {
        null === a.Qd || a.Qd.vq || null !== b && (!b.qA || b.tf) || (a.Qd.vq = !0)
    }
    E.prototype.simulatedMouseMove = function(a, b, c) {
        if (null !== Vh) {
            var d = Vh.g;
            c instanceof E || (c = null);
            var e = Wh;
            c !== e && (null !== e && e !== d && null !== e.kb.De && (yi(e), Vh.Sx = !1, e.kb.De.doSimulatedDragLeave()), Wh = c, null !== c && c !== d && null !== c.kb.De && (Ei(), e = c.kb.De, Ai.contains(e) || Ai.add(e), c.kb.De.doSimulatedDragEnter()));
            if (null === c || c === d || !c.EE || c.mb || !c.Zp) return ! 1;
            d = c.kb.De;
            null !== d && (null !== a ? b = c.ep(a) : null === b && (b = new O), c.Tb.ha = b, c.Tb.im = !1, c.Tb.up = !1, d.doSimulatedDragOver());
            return ! 0
        }
        return ! 1
    };
    E.prototype.simulatedMouseUp = function(a, b, c, d) {
        if (null !== Vh) {
            null === d && (d = b);
            b = Wh;
            var e = Vh.g;
            if (d !== b) {
                if (null !== b && b !== e && null !== b.kb.De) return yi(b),
                Vh.Sx = !1,
                b.kb.De.doSimulatedDragLeave(),
                !1;
                Wh = d;
                null !== d && null !== d.kb.De && (Ei(), b = d.kb.De, Ai.contains(b) || Ai.add(b), d.kb.De.doSimulatedDragEnter())
            }
            if (null === d) return Vh.doCancel(),
            !0;
            if (d !== this) return null !== a && (c = d.ep(a)),
            d.Tb.ha = c,
            d.Tb.im = !1,
            d.Tb.up = !0,
            a = d.kb.De,
            null !== a && a.doSimulatedDrop(),
            a = Vh,
            null !== a && (d = a.mayCopy(), a.Pf = d ? "Copy": "Move", a.stopTool()),
            !0
        }
        return ! 1
    };
    D.defineProperty(E, {
        bL: "autoScrollInterval"
    },
    function() {
        return this.jr
    },
    function(a) {
        var b = this.jr;
        D.p(a, E, "scale");
        b !== a && (this.jr = a, this.i("autoScrollInterval", b, a))
    });
    D.defineProperty(E, {
        KE: "autoScrollRegion"
    },
    function() {
        return this.yv
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : D.l(a, Hb, E, "autoScrollRegion");
        var b = this.yv;
        b.O(a) || (this.yv = a = a.V(), this.yc(), this.i("autoScrollRegion", b, a))
    });
    E.prototype.doAutoScroll = E.prototype.CA = function(a) {
        this.xv.assign(a);
        Nn(this, this.xv).Sc(this.position) ? yi(this) : On(this)
    };
    function On(a) { - 1 === a.Io && (a.Io = D.setTimeout(function() {
            if ( - 1 !== a.Io) {
                yi(a);
                var b = a.U.event;
                if (null !== b) {
                    var c = Nn(a, a.xv);
                    c.Sc(a.position) || (a.position = c, a.U.ha = a.UB(a.xv), a.simulatedMouseMove(b, null, b.target.ba) || a.doMouseMove(), a.mk = !0, Wl(a, a.Kh()), a.Me = !0, a.gg(), On(a))
                }
            }
        },
        a.jr))
    }
    function yi(a) { - 1 !== a.Io && (D.clearTimeout(a.Io), a.Io = -1)
    }
    function Nn(a, b) {
        var c = a.position,
        d = a.KE;
        if (0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom) return c;
        var e = a.xb,
        g = a.scale,
        e = D.gh(0, 0, e.width * g, e.height * g),
        h = D.Fb(0, 0);
        if (b.x >= e.x && b.x < e.x + d.left) {
            var k = Math.max(a.Xu, 1),
            k = k | 0;
            h.x -= k;
            b.x < e.x + d.left / 2 && (h.x -= k);
            b.x < e.x + d.left / 4 && (h.x -= 4 * k)
        } else b.x <= e.x + e.width && b.x > e.x + e.width - d.right && (k = Math.max(a.Xu, 1), k |= 0, h.x += k, b.x > e.x + e.width - d.right / 2 && (h.x += k), b.x > e.x + e.width - d.right / 4 && (h.x += 4 * k));
        b.y >= e.y && b.y < e.y + d.top ? (k = Math.max(a.Yu, 1), k |= 0, h.y -= k, b.y < e.y + d.top / 2 && (h.y -= k), b.y < e.y + d.top / 4 && (h.y -= 4 * k)) : b.y <= e.y + e.height && b.y > e.y + e.height - d.bottom && (k = Math.max(a.Yu, 1), k |= 0, h.y += k, b.y > e.y + e.height - d.bottom / 2 && (h.y += k), b.y > e.y + e.height - d.bottom / 4 && (h.y += 4 * k));
        h.Sc(Gd) || (c = new O(c.x + h.x / g, c.y + h.y / g));
        D.Mb(e);
        D.A(h);
        return c
    }
    E.prototype.makeSvg = E.prototype.makeSVG = function(a) {
        void 0 === a && (a = new la);
        a.context = "svg";
        a = Pn(this, a);
        return null !== a ? a.Am: null
    };
    E.prototype.makeImage = function(a) {
        void 0 === a && (a = new la);
        var b = (a.document || document).createElement("img");
        b.src = this.wJ(a);
        return b
    };
    E.prototype.makeImageData = E.prototype.wJ = function(a) {
        void 0 === a && (a = new la);
        var b = Pn(this, a);
        if (null !== b) {
            var c = a.returnType,
            c = void 0 === c ? "string": c.toLowerCase();
            switch (c) {
            case "imagedata":
                return b.Ok.getImageData(0, 0, b.width, b.height);
            case "blob":
                b = b.Ud;
                c = a.callback;
                if ("function" !== typeof c) {
                    D.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');
                    break
                }
                if ("function" === typeof b.toBlob) return b.toBlob(c, a.type, a.details),
                "toBlob";
                if ("function" === typeof b.msToBlob) return c(b.msToBlob()),
                "msToBlob";
                c(null);
                break;
            default:
                return b.toDataURL(a.type, a.details)
            }
        }
        return ""
    };
    var Qn = !1;
    function Pn(a, b) {
        a.Xa.Ii();
        a.gg();
        if (null === a.Lb) return null;
        "object" !== typeof b && D.k("properties argument must be an Object.");
        var c = !1,
        d = b.size || null,
        e = b.scale || null;
        void 0 !== b.scale && isNaN(b.scale) && (e = "NaN");
        var g = b.maxSize;
        void 0 === b.maxSize && (c = !0, g = "svg" === b.context ? new Ca(Infinity, Infinity) : new Ca(2E3, 2E3));
        var h = b.position || null,
        k = b.parts || null,
        l = void 0 === b.padding ? 1 : b.padding,
        m = b.background || null,
        n = b.omitTemporary;
        void 0 === n && (n = !0);
        var p = b.document || document,
        q = b.elementFinished || null,
        r = b.showTemporary;
        void 0 === r && (r = !n);
        n = b.showGrid;
        void 0 === n && (n = r);
        null !== d && isNaN(d.width) && isNaN(d.height) && (d = null);
        "number" === typeof l ? l = new Hb(l) : l instanceof Hb || (l = new Hb(0));
        l.left = Math.max(l.left, 0);
        l.right = Math.max(l.right, 0);
        l.top = Math.max(l.top, 0);
        l.bottom = Math.max(l.bottom, 0);
        a.Yo = !1;
        a.md.Be(!0);
        var s = new ka(null, p),
        u = s.Ok;
        if (! (d || e || k || h)) {
            s.width = a.Ob + Math.ceil(l.left + l.right);
            s.height = a.Rb + Math.ceil(l.top + l.bottom);
            if ("svg" === b.context) return u = new nd(s.Ud, p, q),
            Nm(a, u, l, new Ca(s.width, s.height), a.Bb, a.qb, k, m, r, n),
            a.Yo = !0,
            u;
            Nm(a, u, l, new Ca(s.width, s.height), a.Bb, a.qb, k, m, r, n);
            a.Yo = !0;
            return s
        }
        var t = a.wb.zx,
        y = new O(0, 0),
        w = a.cd.copy();
        w.oK(a.padding);
        if (r) for (var C = !0,
        C = a.bc.o,
        A = C.length,
        N = 0; N < A; N++) {
            var H = C[N];
            if (H.visible && H.Tc) for (var H = H.pb.o,
            W = H.length,
            fa = 0; fa < W; fa++) {
                var S = H[fa];
                S.Ux && S.isVisible() && (S = S.$, S.F() && w.Wh(S))
            }
        }
        y.x = w.x;
        y.y = w.y;
        if (null !== k) {
            var ba, C = !0,
            A = k.j;
            for (A.reset(); A.next();) S = A.value,
            S instanceof F && (H = S.layer, null !== H && !H.visible || null !== H && !r && H.Tc || !S.isVisible() || (S = S.$, S.F() && (C ? (C = !1, ba = S.copy()) : ba.Wh(S))));
            C && (ba = new B(0, 0, 0, 0));
            w.width = ba.width;
            w.height = ba.height;
            y.x = ba.x;
            y.y = ba.y
        }
        null !== h && h.F() && (y = h, e || (e = t));
        C = S = 0;
        null !== l && (S = l.left + l.right, C = l.top + l.bottom);
        N = A = 0;
        null !== d && (A = d.width, N = d.height, isFinite(A) && (A = Math.max(0, A - S)), isFinite(N) && (N = Math.max(0, N - C)));
        ba = h = 0;
        null !== d && null !== e ? ("NaN" === e && (e = t), d.F() ? (h = A, ba = N) : isNaN(N) ? (h = A, ba = w.height * e) : (h = w.width * e, ba = N)) : null !== d ? d.F() ? (e = Math.min(A / w.width, N / w.height), h = A, ba = N) : isNaN(N) ? (e = A / w.width, h = A, ba = w.height * e) : (e = N / w.height, h = w.width * e, ba = N) : null !== e ? "NaN" === e && g.F() ? (e = Math.min((g.width - S) / w.width, (g.height - C) / w.height), e > t ? (e = t, h = w.width, ba = w.height) : (h = g.width, ba = g.height)) : (h = w.width * e, ba = w.height * e) : (e = t, h = w.width, ba = w.height);
        null !== l ? (h += S, ba += C) : l = new Hb(0);
        null !== g && (d = g.width, g = g.height, "svg" !== b.context && c && !Qn && (h > d || ba > g) && (D.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. (" + Math.ceil(h) + "x" + Math.ceil(ba) + " vs 2000x2000) Consider increasing the max size."), Qn = !0), isNaN(d) && (d = 2E3), isNaN(g) && (g = 2E3), isFinite(d) && (h = Math.min(h, d)), isFinite(g) && (ba = Math.min(ba, g)));
        s.width = Math.ceil(h);
        s.height = Math.ceil(ba);
        if ("svg" === b.context) return u = new nd(s.Ud, p, q),
        Nm(a, u, l, new Ca(Math.ceil(h), Math.ceil(ba)), e, y, k, m, r, n),
        a.Yo = !0,
        u;
        Nm(a, u, l, new Ca(Math.ceil(h), Math.ceil(ba)), e, y, k, m, r, n);
        a.Yo = !0;
        return s
    }
    E.inherit = function(a, b) {
        D.h(a, "function", E, "inherit");
        D.h(b, "function", E, "inherit");
        b.BH && D.k("Cannot inherit from " + D.qf(b));
        D.Sa(a, b)
    };
    function Hl() {
        this.cE = null;
        this.DH = "63ad05bbe23a1786468a4c741b6d2";
        this.Xi = this.DH === this._tk ? !0 : null
    }
    function Rn(a) {
        var b = "f",
        c = window[D.Tg("76a715b2f73f148a")][D.Tg("72ba13b5")],
        d = D.Tg;
        if (window[d("7da7")] && window[d("7da7")][d("76a115b6ed251eaf4692")]) {
            a.Xi = !0;
            var e = window[d("7da7")][d("76a115b6ed251eaf4692")],
            e = d(e).split(d("39e9"));
            if (6 > e.length) return;
            var g = d(e[1]).split(".");
            if ("7da71ca0" !== e[4]) return;
            var h = d(D[d("6cae19")]).split(".");
            if (g[0] > h[0] || g[0] === h[0] && g[1] >= h[1]) {
                g = c[d("76ad18b4f73e")];
                for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < g; h++) b += c[h];
                g = b[d("73a612b6fb191d")](d(e[2]));
                0 > g && d(e[2]) !== d("7da71ca0ad381e90") && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                0 > g && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                a.Xi = !(0 <= g && g < b[d("73a612b6fb191d")](d("35")));
                if (!a.Xi) return
            } else return
        }
        g = c[d("76ad18b4f73e")];
        for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < g; h++) b += c[h];
        g = b[d("73a612b6fb191d")](d(D.adym));
        0 > g && d(D.adym) !== d("7da71ca0ad381e90") && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
        a.Xi = !(0 <= g && g < b[d("73a612b6fb191d")](d("35")));
        a.Xi && (b = window.document[d("79ba13b2f7333e8846865a7d00")]("div"), c = d("02cncncn"), "." === c[0] && (c = c[d("69bd14a0f724128a44")](1)), b[d("79a417a0f0181a8946")] = c, window.document[d("78a712aa")] ? (window.document[d("78a712aa")][d("7bb806b6ed32388c4a875b")](b), c = window[d("7dad0290ec3b0b91578e5b40007031bf")](b)[d("7dad0283f1390b81519f4645156528bf")](d("78a704b7e62456904c9b12701b6532a8")), window.document[d("78a712aa")][d("68ad1bbcf533388c4a875b")](b), c && -1 !== c.indexOf(d(D.$H)) && -1 !== c.indexOf(d(D.aI)) && (a.Xi = !1)) : (a.Xi = null, a.Xi = !1))
    }
    Hl.prototype.Em = function(a) {
        a.md.setTransform(a.od, 0, 0, a.od, 0, 0);
        null === this.Xi && Rn(this);
        return 0 < this.Xi && this !== this.cE ? !0 : !1
    };
    Hl.prototype.t = function() {
        this.cE = null
    };
    function Il(a, b) {
        void 0 !== b && null !== b || D.k("Diagram setup requires an argument DIV.");
        null !== a.Sb && D.k("Diagram has already completed setup.");
        "string" === typeof b ? a.Sb = window.document.getElementById(b) : b instanceof HTMLDivElement ? a.Sb = b: D.k("No DIV or DIV id supplied: " + b);
        null === a.Sb && D.k("Invalid DIV id; could not get element with id: " + b);
        void 0 !== a.Sb.ba && D.k("Invalid div id; div already has a Diagram associated with it.");
        "static" === window.getComputedStyle(a.Sb, null).position && (a.Sb.style.position = "relative");
        a.Sb.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
        a.Sb.style["-ms-touch-action"] = "none";
        a.Sb.innerHTML = "";
        a.Sb.ba = a;
        var c = new ka(a);
        c.Ud.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
        void 0 !== c.style && (c.style.position = "absolute", c.style.top = "0px", c.style.left = "0px", "rtl" === window.getComputedStyle(a.Sb, null).getPropertyValue("direction") && (a.hs = !0), c.style.zIndex = "2", c.style.DM = "none", c.style.webkitUserSelect = "none", c.style.MozUserSelect = "none");
        a.Ob = a.Sb.clientWidth || 1;
        a.Rb = a.Sb.clientHeight || 1;
        a.Lb = c;
        a.md = c.Ok;
        var d = a.md;
        a.DD = (window.devicePixelRatio || 1) / (d.webkitBackingStorePixelRatio || d.mozBackingStorePixelRatio || d.msBackingStorePixelRatio || d.oBackingStorePixelRatio || d.backingStorePixelRatio || 1);
        a.od = a.computePixelRatio();
        Pm(a, a.Ob, a.Rb);
        a.Pv = function() {
            return true;
        };
        a.Sb.insertBefore(c.Ud, a.Sb.firstChild);
        c = new ka(null);
        c.width = 1;
        c.height = 1;
        a.rz = c;
        a.WC = c.Ok;
        var c = D.createElement("div"),
        e = D.createElement("div");
        c.style.position = "absolute";
        c.style.overflow = "auto";
        c.style.width = a.Ob + "px";
        c.style.height = a.Rb + "px";
        c.style.zIndex = "1";
        e.style.position = "absolute";
        e.style.width = "1px";
        e.style.height = "1px";
        a.Sb.appendChild(c);
        c.appendChild(e);
        c.onscroll = Ol;
        c.onmousedown = Ql;
        c.ontouchstart = Ql;
        c.ba = a;
        c.zH = !0;
        c.AH = !0;
        a.Ow = c;
        a.lt = e;
        a.uy = D.VE(function() {
            a.Bk = null;
            a.qa()
        },
        300, !1);
        a.$B = D.VE(function() {
            al(a)
        },
        250, !1);
        a.preventDefault = function(a) {
            a.preventDefault();
            return ! 1
        };
        a.jo = function(b) {
            if (a.isEnabled) {
                a.Um = !0;
                var c = a.bd;
                D.Xn && c.Lj ? (b.preventDefault(), b.simulated = !0, a.ut = b) : (a.bd = a.Tb, a.Tb = c, Zl(a, a, b, c, !0), a.simulatedMouseMove(b, null, b.target.ba) || (a.doMouseMove(), a.gb.isBeyondDragSize() && (a.Dl = 0), ga(a, c, b)))
            }
        };
        a.io = function(b) {
            if (a.isEnabled) {
                a.Um = !0;
                var c = a.bd;
                if (D.Xn && null !== a.ut) a.ut = b,
                b.preventDefault();
                else if (D.Xn && 400 > b.timeStamp - a.Ym) b.preventDefault();
                else if (a.Al) b.preventDefault();
                else {
                    a.bd = a.Tb;
                    a.Tb = c;
                    Zl(a, a, b, c, !0);
                    c.im = !0;
                    c.Oe = b.detail;
                    if (D.OF || D.PF) b.timeStamp - a.Ym < a.pE && !a.gb.isBeyondDragSize() ? a.Dl++:a.Dl = 1,
                    a.Ym = b.timeStamp,
                    c.Oe = a.Dl;
                    a.Zi = c; ! 0 === c.Sr.simulated ? (b.preventDefault(), b.simulated = !0) : (Vh = null, a.doMouseDown(), a.Zi = a.Zi.copy(), 1 === b.button ? b.preventDefault() : ga(a, c, b))
                }
            }
        };
        a.lo = function(b) {
            if (a.isEnabled) if (a.Al && 2 === b.button) b.preventDefault();
            else if (a.Al && 0 === b.button && (a.Al = !1), a.Dt) b.preventDefault();
            else {
                a.Um = !0;
                var c = a.bd;
                if (D.Xn) {
                    if (400 > b.timeStamp - a.Ym) {
                        b.preventDefault();
                        return
                    }
                    a.Ym = b.timeStamp
                }
                if (D.Xn && null !== a.ut) a.ut = null,
                b.preventDefault();
                else {
                    a.bd = a.Tb;
                    a.Tb = c;
                    Zl(a, a, b, c, !0);
                    c.up = !0;
                    c.Oe = b.detail;
                    if (D.OF || D.PF) c.Oe = a.Dl;
                    c.bubbles = b.bubbles;
                    b.target.ba && (c.fh = b.target.ba);
                    a.simulatedMouseUp(b, null, new O, c.fh) || (a.doMouseUp(), yi(a), ga(a, c, b))
                }
            }
        };
        a.Zg = function(b) {
            if (a.isEnabled) {
                var c = a.bd;
                a.bd = a.Tb;
                a.Tb = c;
                Zl(a, a, b, c, !0);
                c.bubbles = !0;
                c.hm = void 0 !== b.wheelDelta ? b.wheelDelta: -40 * b.detail;
                a.doMouseWheel();
                ga(a, c, b)
            }
        };
        a.ko = function() {
            if (a.isEnabled) {
                a.Um = !1;
                var b = a.gb;
                b.cancelWaitAfter();
                b instanceof Hh && b.hideToolTip()
            }
        };
        a.SB = function(b) {
            if (a.isEnabled) {
                a.Dt = !1;
                a.Al = !0;
                var c = a.bd;
                a.bd = a.Tb;
                a.Tb = c;
                am(a, b, b.targetTouches[0], c, 1 < b.touches.length);
                a.doMouseDown();
                ga(a, c, b)
            }
        };
        a.RB = function(b) {
            if (a.isEnabled) {
                var c = a.bd;
                a.bd = a.Tb;
                a.Tb = c;
                var d = null;
                0 < b.changedTouches.length ? d = b.changedTouches[0] : 0 < b.targetTouches.length && (d = b.targetTouches[0]);
                bm(a, b, d, c, 1 < b.touches.length);
                a.simulatedMouseMove(d ? d: b, null, c.fh) || a.doMouseMove();
                ga(a, c, b)
            }
        };
        a.QB = function(b) {
            if (a.isEnabled) if (a.Dt) b.preventDefault();
            else {
                var c = a.bd;
                a.bd = a.Tb;
                a.Tb = c;
                if (! (1 < b.touches.length)) {
                    var d = null,
                    e = null;
                    0 < b.changedTouches.length ? e = b.changedTouches[0] : 0 < b.targetTouches.length && (e = b.targetTouches[0]);
                    c.g = a;
                    c.Oe = 1;
                    if (null !== e) {
                        d = window.document.elementFromPoint(e.clientX, e.clientY);
                        null !== d && d.ba instanceof E && d.ba !== a && $l(d.ba, e, c);
                        $l(a, b.changedTouches[0], c);
                        var m = e.screenX,
                        n = e.screenY,
                        p = a.tD;
                        b.timeStamp - a.Ym < a.pE && !(25 < Math.abs(p.x - m) || 25 < Math.abs(p.y - n)) ? a.Dl++:a.Dl = 1;
                        c.Oe = a.Dl;
                        a.Ym = b.timeStamp;
                        a.tD.m(m, n)
                    }
                    c.Jd = 0;
                    c.button = 0;
                    c.buttons = 1;
                    c.im = !1;
                    c.up = !0;
                    c.hm = 0;
                    c.Lc = !1;
                    c.bubbles = !1;
                    c.event = b;
                    c.timestamp = Date.now();
                    c.fh = null === d ? b.target.ba: d.ba ? d.ba: null;
                    c.We = null;
                    a.simulatedMouseUp(e ? e: b, null, new O, c.fh) || a.doMouseUp();
                    ga(a, c, b);
                    a.Al = !1
                }
            }
        };
        a.mG = function(b) {
            if ("touch" === b.pointerType) {
                var c = a.QD;
                void 0 === c[b.pointerId] && (a.Gw++, c[b.pointerId] = b);
                a.pj[0] = null;
                a.pj[1] = null;
                for (var d in c) if (null === a.pj[0]) a.pj[0] = c[d];
                else if (null === a.pj[1]) {
                    a.pj[1] = c[d];
                    break
                }
                a.isEnabled && (a.Dt = !1, a.Al = !0, c = a.bd, a.bd = a.Tb, a.Tb = c, am(a, b, b, c, 1 < a.Gw), a.doMouseDown(), ga(a, c, b))
            }
        };
        a.oG = function(b) {
            if ("touch" === b.pointerType && !(2 > a.Gw)) {
                var c = a.pj;
                c[0].pointerId === b.pointerId && (c[0] = b);
                c[1].pointerId === b.pointerId && (c[1] = b);
                a.isEnabled && (c = a.bd, a.bd = a.Tb, a.Tb = c, bm(a, b, b, c, !0), a.simulatedMouseMove(b, null, c.fh) || (a.doMouseMove(), ga(a, c, b)))
            }
        };
        a.nG = function(b) {
            if ("touch" === b.pointerType) {
                var c = a.QD;
                void 0 !== c[b.pointerId] && (a.Gw--, delete c[b.pointerId], c = a.pj, null !== c[0] && c[0].pointerId === b.pointerId && (c[0] = null), null !== c[1] && c[1].pointerId === b.pointerId && (c[1] = null))
            }
        };
        d.Be(!0);
        Ll(a)
    }
    function Sn(a) {
        1 < arguments.length && D.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");
        E.call(this, a);
        this.Ut = !0;
        this.Yl = !1;
        this.mb = !0;
        this.RE = dc;
        this.Vb = new Tn
    }
    D.Sa(Sn, E);
    D.ja("Palette", Sn);
    function El(a) {
        1 < arguments.length && D.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");
        E.call(this, a);
        this.Xa.isEnabled = !1;
        this.Zc = !0;
        this.xk = null;
        this.Qv = !0;
        this.hK("drawShadows", !1);
        var b = new F,
        c = new z;
        c.stroke = "magenta";
        c.jb = 2;
        c.fill = "transparent";
        c.name = "BOXSHAPE";
        b.$k = !0;
        b.Cy = "BOXSHAPE";
        b.iy = "BOXSHAPE";
        b.DG = "BOXSHAPE";
        b.cursor = "move";
        b.add(c);
        this.Jm = b;
        c = new da;
        c.type = Qj;
        c.Kf = gc;
        var d = new Rj;
        d.Gf = !0;
        c.add(d);
        d = new z;
        d.Gh = gc;
        d.Jb = "Rectangle";
        d.Ea = new Ca(64, 64);
        d.cursor = "se-resize";
        d.alignment = rc;
        c.add(d);
        b.BG = c;
        this.Bn = this.Kk = !1;
        this.Bf = this.Wt = !0;
        this.KE = new Hb(0, 0, 0, 0);
        this.cA = new ka(null);
        this.CH = this.cA.Ok;
        this.kb.De = new Un;
        this.kb.EG = new Vn;
        var e = this;
        this.click = function() {
            var a = e.xk;
            if (null !== a) {
                var b = a.xb,
                c = e.U.ha;
                a.position = new O(c.x - b.width / 2, c.y - b.height / 2)
            }
        };
        this.jG = function() {
            Wn(e)
        };
        this.iG = function() {
            null !== e.xk && (e.yc(), e.qa())
        };
        this.am = Xl;
        this.Zc = !1
    }
    D.Sa(El, E);
    D.ja("Overview", El);
    function Xn(a) {
        a.Zc || a.ge || !1 !== a.Yf || (a.Yf = !0, requestAnimationFrame(function() {
            if (a.Yf && !a.ge && (a.Yf = !1, null !== a.Sb)) {
                a.ge = !0;
                Li(a);
                a.cd.F() || Wl(a, a.Kh());
                null === a.Sb && D.k("No div specified");
                null === a.Lb && D.k("No canvas specified");
                if (a.Me) {
                    var b = a.xk;
                    if (null !== b && !b.Xa.sf && !b.Xa.vc) {
                        var b = a.md,
                        c = a.cA;
                        b.setTransform(1, 0, 0, 1, 0, 0);
                        b.clearRect(0, 0, a.Lb.width, a.Lb.height);
                        b.drawImage(c.Ud, 0, 0);
                        c = a.Hc;
                        c.reset();
                        1 !== a.scale && c.scale(a.scale);
                        0 === a.position.x && 0 === a.position.y || c.translate( - a.position.x, -a.position.y);
                        b.scale(a.od, a.od);
                        b.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
                        for (var c = a.bc.o,
                        d = c.length,
                        e = 0; e < d; e++) c[e].Ee(b, a);
                        a.zl = !1;
                        a.Me = !1
                    }
                }
                a.ge = !1
            }
        }))
    }
    El.prototype.computePixelRatio = function() {
        return 1
    };
    El.prototype.Ee = function() {
        null === this.Sb && D.k("No div specified");
        null === this.Lb && D.k("No canvas specified");
        if (this.Me) {
            var a = this.xk;
            if (null !== a && !a.Xa.sf) {
                Km(this);
                var b = a.Vn; (null !== b && b.visible && isNaN(b.width) || isNaN(b.height)) && fm(a);
                var c = this.Lb,
                b = this.md,
                d = this.cA,
                e = this.CH;
                d.width = c.width;
                d.height = c.height;
                b.Be(!0);
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.clearRect(0, 0, c.width, c.height);
                var g = this.Hc;
                g.reset();
                1 !== this.scale && g.scale(this.scale);
                0 === this.position.x && 0 === this.position.y || g.translate( - this.position.x, -this.position.y);
                b.scale(this.od, this.od);
                b.transform(g.m11, g.m12, g.m21, g.m22, g.dx, g.dy);
                for (var h = this.Qv,
                k = this.xb,
                l = a.bc.o,
                m = l.length,
                a = 0; a < m; a++) {
                    var n = l[a],
                    p = b,
                    q = k,
                    r = h;
                    if (n.visible && 0 !== n.Fc && (void 0 === r && (r = !0), r || !n.Tc)) {
                        1 !== n.Fc && (p.globalAlpha = n.Fc);
                        for (var r = this.scale,
                        n = n.pb.o,
                        s = n.length,
                        u = 0; u < s; u++) {
                            var t = n[u],
                            y = t.$;
                            y.Wg(q) && (1 < y.width * r || 1 < y.height * r ? t.Ee(p, this) : ql(t, p))
                        }
                        p.globalAlpha = 1
                    }
                }
                e.drawImage(c.Ud, 0, 0);
                v && v.zj && (e.fillStyle = "red", e.fillRect(0, d.height / 2, d.width, 4));
                c = this.bc.o;
                d = c.length;
                for (a = 0; a < d; a++) c[a].Ee(b, this);
                v && (v.EA || v.zj) && v.DA(b, this, g);
                this.Me = this.zl = !1
            }
        }
    };
    D.defineProperty(El, {
        pB: "observed"
    },
    function() {
        return this.xk
    },
    function(a) {
        var b = this.xk;
        null !== a && D.l(a, E, El, "observed");
        a instanceof El && D.k("Overview.observed Diagram may not be an Overview itself: " + a);
        b !== a && (null !== b && (this.remove(this.Jh), b.uG("ViewportBoundsChanged", this.jG), b.uG("DocumentBoundsChanged", this.iG), b.Cw.remove(this)), this.xk = a, null !== a && (a.mA("ViewportBoundsChanged", this.jG), a.mA("DocumentBoundsChanged", this.iG), a.Cw.add(this), this.add(this.Jh), Wn(this)), this.yc(), this.i("observed", b, a))
    });
    D.defineProperty(El, {
        Jh: "box"
    },
    function() {
        return this.Jm
    },
    function(a) {
        var b = this.Jm;
        b !== a && (this.Jm = a, this.remove(b), this.add(this.Jm), Wn(this), this.i("box", b, a))
    });
    D.defineProperty(El, {
        zL: "drawsTemporaryLayers"
    },
    function() {
        return this.Qv
    },
    function(a) {
        this.Qv !== a && (this.Qv = a, this.Hq())
    });
    function Wn(a) {
        var b = a.Jh;
        if (null !== b) {
            var c = a.xk;
            if (null !== c) {
                a.Me = !0;
                var c = c.xb,
                d = b.ro,
                e = D.Cm();
                e.m(c.width, c.height);
                d.Ea = e;
                D.Rk(e);
                a = 2 / a.scale;
                d instanceof z && (d.jb = a);
                b.location = new O(c.x - a / 2, c.y - a / 2)
            }
        }
    }
    El.prototype.Kh = function() {
        var a = this.xk;
        return null === a ? Hd: a.cd
    };
    El.prototype.JF = function() { ! 0 !== this.Me && (this.Me = !0, Xn(this))
    };
    El.prototype.Pu = function(a, b, c, d, e) {
        this.Zc || (Rl(this), this.qa(), cm(this), this.yc(), Wn(this), this.Fh.scale = c, this.Fh.position.x = a.x, this.Fh.position.y = a.y, this.Fh.bounds.set(a), this.Fh.isScroll = e, this.Ja("ViewportBoundsChanged", this.Fh, a))
    };
    function Un() {
        Mh.call(this);
        this.Kl = null
    }
    D.Sa(Un, Mh);
    Un.prototype.canStart = function() {
        if (!this.isEnabled) return ! 1;
        var a = this.g;
        if (null === a || !a.Yl || !a.Bf) return ! 1;
        var b = a.pB;
        if (null === b) return ! 1;
        if (null === this.findDraggablePart()) {
            var c = b.xb;
            this.Kl = new O(c.width / 2, c.height / 2);
            a = a.Kc.ha;
            b.position = new O(a.x - this.Kl.x, a.y - this.Kl.y)
        }
        return ! 0
    };
    Un.prototype.doActivate = function() {
        this.Kl = null;
        Mh.prototype.doActivate.call(this)
    };
    Un.prototype.moveParts = function() {
        var a = this.g,
        b = a.pB;
        if (null !== b) {
            var c = a.Jh;
            if (null !== c) {
                if (null === this.Kl) {
                    var d = a.Kc.ha,
                    c = c.location;
                    this.Kl = new O(d.x - c.x, d.y - c.y)
                }
                a = a.U.ha;
                b.position = new O(a.x - this.Kl.x, a.y - this.Kl.y)
            }
        }
    };
    function Vn() {
        Pj.call(this)
    }
    D.Sa(Vn, Pj);
    Vn.prototype.resize = function(a) {
        var b = this.g.pB;
        if (null !== b) {
            var c = b.xb.copy();
            b.position = a.position; (c.width !== a.width || c.height !== a.height) && 0 < a.width && 0 < a.height && (b.scale = Math.min(c.width / a.width, c.height / a.height))
        }
    };
    function Yn() {
        this.lg = this.gd = this.Kd = this.Nc = 0
    }
    function Ba(a) {
        1 < arguments.length && D.k("Brush constructor can take at most one optional argument, the Brush type.");
        D.tc(this);
        this.J = !1;
        void 0 === a ? (this.ca = Ag, this.Lo = "black") : "string" === typeof a ? (this.ca = Ag, v && !Aa(a) && D.k('Color "' + a + '" is not a valid color string for Brush constructor'), this.Lo = a) : (v && D.Ca(a, Ba, Ba, "constructor:type"), this.ca = a, this.Lo = "black");
        var b = this.ca;
        b === Qg ? (this.Op = dc, this.$o = qc) : this.$o = b === Ed ? this.Op = gc: this.Op = bc;
        this.Vw = 0;
        this.Rv = NaN;
        this.rh = this.Fw = this.qh = null;
        this.hz = this.Mo = 0
    }
    D.ja("Brush", Ba);
    var Ag;
    Ba.Solid = Ag = D.s(Ba, "Solid", 0);
    var Qg;
    Ba.Linear = Qg = D.s(Ba, "Linear", 1);
    var Ed;
    Ba.Radial = Ed = D.s(Ba, "Radial", 2);
    var Zn;
    Ba.Pattern = Zn = D.s(Ba, "Pattern", 4);
    var $n;
    Ba.Lab = $n = D.s(Ba, "Lab", 5);
    var ao;
    Ba.HSL = ao = D.s(Ba, "HSL", 6);
    Ba.prototype.copy = function() {
        var a = new Ba;
        a.ca = this.ca;
        a.Lo = this.Lo;
        a.Op = this.Op.V();
        a.$o = this.$o.V();
        a.Vw = this.Vw;
        a.Rv = this.Rv;
        null !== this.qh && (a.qh = this.qh.copy());
        a.Fw = this.Fw;
        return a
    };
    f = Ba.prototype;
    f.Na = function() {
        this.freeze();
        Object.freeze(this);
        return this
    };
    f.freeze = function() {
        this.J = !0;
        null !== this.qh && this.qh.freeze();
        return this
    };
    f.Ya = function() {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        null !== this.qh && this.qh.Ya();
        return this
    };
    f.nc = function(a) {
        a.Ne === Ba ? this.type = a: D.Xj(this, a)
    };
    f.toString = function() {
        var a = "Brush(";
        if (this.type === Ag) a += this.color;
        else if (a = this.type === Qg ? a + "Linear ": this.type === Ed ? a + "Radial ": this.type === Zn ? a + "Pattern ": a + "(unknown) ", a += this.start + " " + this.end, null !== this.Lk) for (var b = this.Lk.j; b.next();) a += " " + b.key + ":" + b.value;
        return a + ")"
    };
    Ba.prototype.addColorStop = Ba.prototype.addColorStop = function(a, b) {
        this.J && D.pa(this); ("number" !== typeof a || !isFinite(a) || 1 < a || 0 > a) && D.ua(a, "0 <= loc <= 1", Ba, "addColorStop:loc");
        D.h(b, "string", Ba, "addColorStop:color");
        v && !Aa(b) && D.k('Color "' + b + '" is not a valid color string for Brush.addColorStop');
        null === this.qh && (this.qh = new ma("number", "string"));
        this.qh.add(a, b);
        this.ca === Ag && (this.type = Qg);
        this.rh = null
    };
    D.defineProperty(Ba, {
        type: "type"
    },
    function() {
        return this.ca
    },
    function(a) {
        this.J && D.pa(this, a);
        D.Ca(a, Ba, Ba, "type");
        this.ca = a;
        this.start.Zd() && (a === Qg ? this.start = dc: a === Ed && (this.start = gc));
        this.end.Zd() && (a === Qg ? this.end = qc: a === Ed && (this.end = gc));
        this.rh = null
    });
    D.defineProperty(Ba, {
        color: "color"
    },
    function() {
        return this.Lo
    },
    function(a) {
        this.J && D.pa(this, a);
        v && !Aa(a) && D.k('Color "' + a + '" is not a valid color string for Brush.color');
        this.Lo = a;
        this.rh = null
    });
    D.defineProperty(Ba, {
        start: "start"
    },
    function() {
        return this.Op
    },
    function(a) {
        this.J && D.pa(this, a);
        D.l(a, R, Ba, "start");
        this.Op = a.V();
        this.rh = null
    });
    D.defineProperty(Ba, {
        end: "end"
    },
    function() {
        return this.$o
    },
    function(a) {
        this.J && D.pa(this, a);
        D.l(a, R, Ba, "end");
        this.$o = a.V();
        this.rh = null
    });
    D.defineProperty(Ba, {
        dv: "startRadius"
    },
    function() {
        return this.Vw
    },
    function(a) {
        this.J && D.pa(this, a);
        D.p(a, Ba, "startRadius");
        0 > a && D.ua(a, ">= zero", Ba, "startRadius");
        this.Vw = a;
        this.rh = null
    });
    D.defineProperty(Ba, {
        eu: "endRadius"
    },
    function() {
        return this.Rv
    },
    function(a) {
        this.J && D.pa(this, a);
        D.p(a, Ba, "endRadius");
        0 > a && D.ua(a, ">= zero", Ba, "endRadius");
        this.Rv = a;
        this.rh = null
    });
    D.defineProperty(Ba, {
        Lk: "colorStops"
    },
    function() {
        return this.qh
    },
    function(a) {
        this.J && D.pa(this, a);
        v && D.l(a, ma, Ba, "colorStops");
        this.qh = a;
        this.rh = null
    });
    D.defineProperty(Ba, {
        pattern: "pattern"
    },
    function() {
        return this.Fw
    },
    function(a) {
        this.J && D.pa(this, a);
        this.Fw = a;
        this.rh = null
    });
    Ba.randomColor = function(a, b) {
        void 0 === a && (a = 128);
        v && (D.p(a, Ba, "randomColor:min"), (0 > a || 255 < a) && D.ua(a, "0 <= min <= 255", Ba, "randomColor:min"));
        void 0 === b && (b = Math.max(a, 255));
        v && (D.p(b, Ba, "randomColor:max"), (b < a || 255 < b) && D.ua(b, "min <= max <= 255", Ba, "randomColor:max"));
        var c = Math.abs(b - a),
        d = Math.floor(a + Math.random() * c).toString(16),
        e = Math.floor(a + Math.random() * c).toString(16),
        c = Math.floor(a + Math.random() * c).toString(16);
        2 > d.length && (d = "0" + d);
        2 > e.length && (e = "0" + e);
        2 > c.length && (c = "0" + c);
        return "#" + d + e + c
    };
    var bo = (new ka(null)).Ok,
    Aa;
    Ba.isValidColor = Aa = function(a) {
        if ("black" === a) return ! 0;
        if ("" === a) return ! 1;
        v && D.h(a, "string", Ba, "isValidColor");
        bo.fillStyle = "#000000";
        var b = bo.fillStyle;
        bo.fillStyle = a;
        if (bo.fillStyle !== b) return ! 0;
        bo.fillStyle = "#FFFFFF";
        b = bo.fillStyle;
        bo.fillStyle = a;
        return bo.fillStyle !== b
    };
    var co = new Yn,
    eo = new Yn,
    fo = new Yn,
    ho = new Yn;
    Ba.lighten = function(a) {
        return io(a)
    };
    Ba.prototype.lightenBy = function(a, b) {
        this.J && D.pa(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a,
        d = void 0 === b ? $n: b;
        if (this.type === Ag) jo(this.color),
        this.color = ko(c, d);
        else if ((this.type === Qg || this.type === Ed) && null !== this.Lk) for (var e = this.Lk.j; e.next();) jo(e.value),
        this.addColorStop(e.key, ko(c, d));
        return this
    };
    var io;
    Ba.lightenBy = io = function(a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? $n: c;
        jo(a);
        return ko(b, c)
    };
    Ba.darken = function(a) {
        return lo(a)
    };
    Ba.prototype.darkenBy = function(a, b) {
        this.J && D.pa(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a,
        d = void 0 === b ? $n: b;
        if (this.type === Ag) jo(this.color),
        this.color = ko( - c, d);
        else if ((this.type === Qg || this.type === Ed) && null !== this.Lk) for (var e = this.Lk.j; e.next();) jo(e.value),
        this.addColorStop(e.key, ko( - c, d));
        return this
    };
    var lo;
    Ba.darkenBy = lo = function(a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? $n: c;
        jo(a);
        return ko( - b, c)
    };
    function ko(a, b) {
        switch (b) {
        case $n:
            var c = 100 * mo(co.Nc),
            d = 100 * mo(co.Kd),
            e = 100 * mo(co.gd);
            fo.Nc = .4124564 * c + .3575761 * d + .1804375 * e;
            fo.Kd = .2126729 * c + .7151522 * d + .072175 * e;
            fo.gd = .0193339 * c + .119192 * d + .9503041 * e;
            fo.lg = co.lg;
            c = no(fo.Nc / oo[0]);
            d = no(fo.Kd / oo[1]);
            e = no(fo.gd / oo[2]);
            ho.Nc = 116 * d - 16;
            ho.Kd = 500 * (c - d);
            ho.gd = 200 * (d - e);
            ho.lg = fo.lg;
            ho.Nc = Math.min(100, Math.max(0, ho.Nc + 100 * a));
            c = (ho.Nc + 16) / 116;
            d = c - ho.gd / 200;
            fo.Nc = oo[0] * po(ho.Kd / 500 + c);
            fo.Kd = oo[1] * (ho.Nc > qo * ro ? Math.pow(c, 3) : ho.Nc / qo);
            fo.gd = oo[2] * po(d);
            fo.lg = ho.lg;
            c = -.969266 * fo.Nc + 1.8760108 * fo.Kd + .041556 * fo.gd;
            d = .0556434 * fo.Nc + -.2040259 * fo.Kd + 1.0572252 * fo.gd;
            co.Nc = 255 * so((3.2404542 * fo.Nc + -1.5371385 * fo.Kd + -.4985314 * fo.gd) / 100);
            co.Kd = 255 * so(c / 100);
            co.gd = 255 * so(d / 100);
            co.lg = fo.lg;
            co.Nc = Math.round(co.Nc);
            255 < co.Nc ? co.Nc = 255 : 0 > co.Nc && (co.Nc = 0);
            co.Kd = Math.round(co.Kd);
            255 < co.Kd ? co.Kd = 255 : 0 > co.Kd && (co.Kd = 0);
            co.gd = Math.round(co.gd);
            255 < co.gd ? co.gd = 255 : 0 > co.gd && (co.gd = 0);
            return "rgba(" + co.Nc + ", " + co.Kd + ", " + co.gd + ", " + co.lg + ")";
        case ao:
            var e = co.Nc / 255,
            g = co.Kd / 255,
            h = co.gd / 255,
            k = Math.max(e, g, h),
            d = Math.min(e, g, h),
            l = k - d,
            d = (k + d) / 2;
            if (0 === l) c = e = 0;
            else {
                switch (k) {
                case e:
                    c = (g - h) / l % 6;
                    break;
                case g:
                    c = (h - e) / l + 2;
                    break;
                case h:
                    c = (e - g) / l + 4
                }
                c *= 60;
                0 > c && (c += 360);
                e = l / (1 - Math.abs(2 * d - 1))
            }
            eo.Nc = Math.round(c);
            eo.Kd = Math.round(100 * e);
            eo.gd = Math.round(100 * d);
            eo.lg = co.lg;
            eo.gd = Math.min(100, Math.max(0, eo.gd + 100 * a));
            return "hsla(" + eo.Nc + ", " + eo.Kd + "%, " + eo.gd + "%, " + eo.lg + ")";
        default:
            return D.k("Unknown color space: " + b),
            "rgba(0, 0, 0, 1)"
        }
    }
    function jo(a) {
        bo.clearRect(0, 0, 1, 1);
        bo.fillStyle = "#000000";
        var b = bo.fillStyle;
        bo.fillStyle = a;
        bo.fillStyle !== b ? (bo.fillRect(0, 0, 1, 1), a = bo.getImageData(0, 0, 1, 1).data, co.Nc = a[0], co.Kd = a[1], co.gd = a[2], co.lg = a[3] / 255) : (bo.fillStyle = "#FFFFFF", b = bo.fillStyle, bo.fillStyle = a, bo.fillStyle === b && v && D.k('Color "' + a + '" is not a valid color string for RGBA color conversion'), co.Nc = 0, co.Kd = 0, co.gd = 0, co.lg = 1)
    }
    function mo(a) {
        a /= 255;
        return.04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
    }
    function so(a) {
        return.0031308 >= a ? 12.92 * a: 1.055 * Math.pow(a, 1 / 2.4) - .055
    }
    var ro = 216 / 24389,
    qo = 24389 / 27,
    oo = [95.047, 100, 108.883];
    function no(a) {
        return a > ro ? Math.pow(a, 1 / 3) : (qo * a + 16) / 116
    }
    function po(a) {
        var b = a * a * a;
        return b > ro ? b: (116 * a - 16) / qo
    }
    function P() {
        D.tc(this);
        this.T = 4225027;
        this.Fc = 1;
        this.Bh = null;
        this.Xb = "";
        this.hc = this.Kb = null;
        this.qb = (new O(NaN, NaN)).freeze();
        this.Ye = me;
        this.li = Zd;
        this.ki = ke;
        this.Hc = new Da;
        this.Li = new Da;
        this.gj = new Da;
        this.Bb = this.Xo = 1;
        this.rg = 0;
        this.Mg = to;
        this.cn = Ud;
        this.Ad = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.ac = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.$c = (new B(0, 0, NaN, NaN)).freeze();
        this.Z = this.Ws = this.Xs = null;
        this.Hm = this.re = Tc;
        this.it = 0;
        this.rj = 1;
        this.qr = 0;
        this.Qi = 1;
        this.yt = null;
        this.mt = -Infinity;
        this.on = 0;
        this.pn = Gd;
        this.qn = nj;
        this.zr = "";
        this.Bc = this.la = null;
        this.Jo = -1;
        this.un = this.ug = this.rl = this.Np = null;
        this.Uz = yj;
        this.kn = null
    }
    D.Ai(P);
    D.ja("GraphObject", P);
    P.prototype.cloneProtected = function(a) {
        a.T = this.T | 6144;
        a.Fc = this.Fc;
        a.Xb = this.Xb;
        a.Kb = this.Kb;
        a.hc = this.hc;
        a.qb.assign(this.qb);
        a.Ye = this.Ye.V();
        a.li = this.li.V();
        a.ki = this.ki.V();
        a.gj = this.gj.copy();
        a.Bb = this.Bb;
        a.rg = this.rg;
        a.Mg = this.Mg;
        a.cn = this.cn.V();
        a.Ad.assign(this.Ad);
        a.ac.assign(this.ac);
        a.$c.assign(this.$c);
        a.Ws = this.Ws;
        null !== this.Z && (a.Z = this.Z.copy());
        a.re = this.re.V();
        a.Hm = this.Hm.V();
        a.it = this.it;
        a.rj = this.rj;
        a.qr = this.qr;
        a.Qi = this.Qi;
        a.yt = this.yt;
        a.mt = this.mt;
        a.on = this.on;
        a.pn = this.pn.V();
        a.qn = this.qn;
        a.zr = this.zr;
        null !== this.la && (a.la = this.la.copy());
        a.Bc = this.Bc;
        a.Jo = this.Jo;
        null !== this.rl && (a.rl = D.cm(this.rl));
        null !== this.ug && (a.ug = this.ug.copy());
        a.un = this.un
    };
    P.prototype.addCopyProperty = P.prototype.KH = function(a) {
        var b = this.rl;
        if (D.isArray(b)) for (var c = 0; c < b.length; c++) {
            if (b[c] === a) return
        } else this.rl = b = [];
        b.push(a)
    };
    P.prototype.Bi = function(a) {
        a.Xs = null;
        a.kn = null;
        a.K()
    };
    P.prototype.clone = function() {
        var a = new this.constructor;
        this.cloneProtected(a);
        if (null !== this.rl) for (var b = 0; b < this.rl.length; b++) {
            var c = this.rl[b];
            a[c] = this[c]
        }
        return a
    };
    P.prototype.copy = function() {
        return this.clone()
    };
    P.prototype.nc = function(a) {
        a.Ne === J ? 0 === a.name.indexOf("Orient") ? this.Oq = a: D.k("Unknown Link enum value for GraphObject.segmentOrientation property: " + a) : a.Ne === P ? this.stretch = a: D.Xj(this, a)
    };
    P.prototype.toString = function() {
        return D.qf(Object.getPrototypeOf(this)) + "#" + D.Fd(this)
    };
    var Sj;
    P.None = Sj = D.s(P, "None", 0);
    var to;
    P.Default = to = D.s(P, "Default", 0);
    var uo;
    P.Vertical = uo = D.s(P, "Vertical", 4);
    var vo;
    P.Horizontal = vo = D.s(P, "Horizontal", 5);
    var rf;
    P.Fill = rf = D.s(P, "Fill", 3);
    var Uj;
    P.Uniform = Uj = D.s(P, "Uniform", 1);
    var Vj;
    P.UniformToFill = Vj = D.s(P, "UniformToFill", 2);
    var wo;
    P.FlipVertical = wo = D.s(P, "FlipVertical", 1);
    var xo;
    P.FlipHorizontal = xo = D.s(P, "FlipHorizontal", 2);
    var yo;
    P.FlipBoth = yo = D.s(P, "FlipBoth", 3);
    function zo(a) {
        null === a.la && (a.la = new Ao)
    }
    P.prototype.Wd = function() {
        if (null === this.Z) {
            var a = new Bo;
            a.jk = bc;
            a.Gk = bc;
            a.hk = 10;
            a.Ek = 10;
            a.gk = Co;
            a.Dk = Co;
            a.ik = 0;
            a.Fk = 0;
            this.Z = a
        }
    };
    function Do(a, b, c, d, e, g, h) {
        var k = .001,
        l = g.length;
        a.moveTo(b, c);
        d -= b;
        k = e - c;
        0 === d && (d = .001);
        e = k / d;
        for (var m = Math.sqrt(d * d + k * k), n = 0, p = !0, q = 0 === h ? !1 : !0;.1 <= m;) {
            if (q) {
                k = g[n++%l];
                for (k -= h; 0 > k;) k += g[n++%l],
                p = !p;
                q = !1
            } else k = g[n++%l];
            k > m && (k = m);
            var r = Math.sqrt(k * k / (1 + e * e));
            0 > d && (r = -r);
            b += r;
            c += e * r;
            p ? a.lineTo(b, c) : a.moveTo(b, c);
            m -= k;
            p = !p
        }
    }
    P.prototype.raiseChangedEvent = P.prototype.hd = function(a, b, c, d, e, g, h) {
        var k = this.Y;
        if (null !== k && (k.po(a, b, c, d, e, g, h), Eo(this) && c === this && a === cg && Fo(this, k, b), c === k && 0 !== (k.T & 16777216) && null !== k.data)) for (a = this.xa.o, c = a.length, d = 0; d < c; d++) e = a[d],
        e instanceof x && Rm(e,
        function(a) {
            null !== a.data && 0 !== (a.T & 16777216) && a.Nb(b)
        })
    };
    function Fo(a, b, c) {
        var d = a.lm();
        if (null !== d) for (var e = a.Bc.j; e.next();) {
            var g = e.value,
            h = null;
            if (null !== g.Vq) {
                h = lh(g, d, a);
                if (null === h) continue;
                g.Jy(a, h, c, null)
            } else if (g.Yx) {
                var k = b.g;
                null === k || k.Ue || g.Jy(a, k.ga.Yk, c, d)
            } else {
                var l = d.data;
                if (null === l) continue;
                k = b.g;
                null === k || k.Ue || g.Jy(a, l, c, d)
            }
            h === a && (k = d.Gx(g.Bm), null !== k && g.iH(k, h, c))
        }
    }
    P.prototype.Gx = function(a) {
        return this.Jo === a ? this: null
    };
    P.prototype.raiseChanged = P.prototype.i = function(a, b, c) {
        this.hd(cg, a, this, b, c)
    };
    function Go(a, b, c, d, e) {
        var g = a.Ad,
        h = a.gj;
        h.reset();
        Ho(a, h, b, c, d, e);
        a.gj = h;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        h.xu() || h.fH(g)
    }
    function Io(a, b, c, d) {
        if (!1 === a.pg) return ! 1;
        d.multiply(a.transform);
        return c ? a.Wg(b, d) : a.Hn(b, d)
    }
    P.prototype.pF = function(a, b, c) {
        if (!1 === this.pg) return ! 1;
        var d = this.Ga;
        b = a.Cf(b);
        var e = !1;
        c && (e = jb(a.x, a.y, 0, 0, 0, d.height) < b || jb(a.x, a.y, 0, d.height, d.width, d.height) < b || jb(a.x, a.y, d.width, d.height, d.width, 0) < b || jb(a.x, a.y, d.width, 0, 0, 0) < b);
        c || (e = jb(a.x, a.y, 0, 0, 0, d.height) < b && jb(a.x, a.y, 0, d.height, d.width, d.height) < b && jb(a.x, a.y, d.width, d.height, d.width, 0) < b && jb(a.x, a.y, d.width, 0, 0, 0) < b);
        return e
    };
    P.prototype.kh = function() {
        return ! 0
    };
    P.prototype.containsPoint = P.prototype.Oa = function(a) {
        v && D.l(a, O, P, "containsPoint:p");
        var b = D.P();
        b.assign(a);
        this.transform.vb(b);
        var c = this.$;
        if (!c.F()) return D.A(b),
        !1;
        var d = this.g;
        if (null !== d && d.Al) {
            var e = d.pu("extraTouchThreshold"),
            g = d.pu("extraTouchArea"),
            h = g / 2,
            k = this.Ga,
            d = this.Fj() * d.scale,
            l = 1 / d;
            if (k.width * d < e && k.height * d < e) return a = Pb(c.x - h * l, c.y - h * l, c.width + g * l, c.height + g * l, b.x, b.y),
            D.A(b),
            a
        }
        if (this instanceof da || this instanceof z ? Pb(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.Oa(b)) return e = !1,
        e = this.ug && !this.ug.Oa(b) ? !1 : null !== this.hc && c.Oa(b) ? !0 : null !== this.Kb && this.$c.Oa(a) ? !0 : this.Mk(a),
        D.A(b),
        e;
        D.A(b);
        return ! 1
    };
    P.prototype.Mk = function(a) {
        var b = this.Ga;
        return Pb(0, 0, b.width, b.height, a.x, a.y)
    };
    P.prototype.containsRect = P.prototype.Nk = function(a) {
        v && D.l(a, B, P, "containsRect:r");
        if (0 === this.angle) return this.$.Nk(a);
        var b = this.Ga,
        b = D.gh(0, 0, b.width, b.height),
        c = this.transform,
        d = !1,
        e = D.Fb(a.x, a.y);
        b.Oa(c.Ci(e)) && (e.m(a.x, a.bottom), b.Oa(c.Ci(e)) && (e.m(a.right, a.bottom), b.Oa(c.Ci(e)) && (e.m(a.right, a.y), b.Oa(c.Ci(e)) && (d = !0))));
        D.A(e);
        D.Mb(b);
        return d
    };
    P.prototype.containedInRect = P.prototype.Hn = function(a, b) {
        v && D.l(a, B, P, "containedInRect:r");
        if (void 0 === b) return a.Nk(this.$);
        var c = this.Ga,
        d = !1,
        e = D.Fb(0, 0);
        a.Oa(b.vb(e)) && (e.m(0, c.height), a.Oa(b.vb(e)) && (e.m(c.width, c.height), a.Oa(b.vb(e)) && (e.m(c.width, 0), a.Oa(b.vb(e)) && (d = !0))));
        D.A(e);
        return d
    };
    P.prototype.intersectsRect = P.prototype.Wg = function(a, b) {
        v && D.l(a, B, P, "intersectsRect:r");
        if (void 0 === b && (b = this.transform, 0 === this.angle)) return a.Wg(this.$);
        var c = this.Ga,
        d = b,
        e = D.Fb(0, 0),
        g = D.Fb(0, c.height),
        h = D.Fb(c.width, c.height),
        k = D.Fb(c.width, 0),
        l = !1;
        if (a.Oa(d.vb(e)) || a.Oa(d.vb(g)) || a.Oa(d.vb(h)) || a.Oa(d.vb(k))) l = !0;
        else {
            var c = D.gh(0, 0, c.width, c.height),
            m = D.Fb(a.x, a.y);
            c.Oa(d.Ci(m)) ? l = !0 : (m.m(a.x, a.bottom), c.Oa(d.Ci(m)) ? l = !0 : (m.m(a.right, a.bottom), c.Oa(d.Ci(m)) ? l = !0 : (m.m(a.right, a.y), c.Oa(d.Ci(m)) && (l = !0))));
            D.A(m);
            D.Mb(c); ! l && (Ve(a, e, g) || Ve(a, g, h) || Ve(a, h, k) || Ve(a, k, e)) && (l = !0)
        }
        D.A(e);
        D.A(g);
        D.A(h);
        D.A(k);
        return l
    };
    P.prototype.getDocumentPoint = P.prototype.eb = function(a, b) {
        void 0 === b && (b = new O);
        if (a instanceof R) {
            a.Zd() && D.k("getDocumentPoint:s Spot must be specific: " + a.toString());
            var c = this.Ga;
            b.m(a.x * c.width + a.offsetX, a.y * c.height + a.offsetY)
        } else b.set(a);
        this.Hh.vb(b);
        return b
    };
    P.prototype.getDocumentAngle = P.prototype.Rn = function() {
        var a;
        a = this.Hh;
        1 === a.m11 && 0 === a.m12 ? a = 0 : (a = 180 * Math.atan2(a.m12, a.m11) / Math.PI, 0 > a && (a += 360));
        return a
    };
    P.prototype.getDocumentScale = P.prototype.Fj = function() {
        if (0 !== (this.T & 4096) === !1) return this.Xo;
        var a = this.Bb;
        return null !== this.Q ? a * this.Q.Fj() : a
    };
    P.prototype.getLocalPoint = P.prototype.uF = function(a, b) {
        void 0 === b && (b = new O);
        b.assign(a);
        this.Hh.Ci(b);
        return b
    };
    P.prototype.getNearestIntersectionPoint = P.prototype.vF = function(a, b, c) {
        return this.Tn(a.x, a.y, b.x, b.y, c)
    };
    f = P.prototype;
    f.Tn = function(a, b, c, d, e) {
        var g = this.transform,
        h = 1 / (g.m11 * g.m22 - g.m12 * g.m21),
        k = g.m22 * h,
        l = -g.m12 * h,
        m = -g.m21 * h,
        n = g.m11 * h,
        p = h * (g.m21 * g.dy - g.m22 * g.dx),
        q = h * (g.m12 * g.dx - g.m11 * g.dy);
        if (null !== this.Zl) return g = this.$,
        Ne(g.left, g.top, g.right, g.bottom, a, b, c, d, e);
        h = a * k + b * m + p;
        a = a * l + b * n + q;
        b = c * k + d * m + p;
        c = c * l + d * n + q;
        e.m(0, 0);
        d = this.Ga;
        c = Ne(0, 0, d.width, d.height, h, a, b, c, e);
        e.transform(g);
        return c
    };
    function Ak(a, b, c, d, e) {
        if (!1 !== Hm(a)) {
            var g = a.margin,
            h = g.right + g.left,
            g = g.top + g.bottom;
            b = Math.max(b - h, 0);
            c = Math.max(c - g, 0);
            e = e || 0;
            d = Math.max((d || 0) - h, 0);
            e = Math.max(e - g, 0);
            var h = a.angle,
            g = 0,
            g = a.Ea,
            k = 0;
            a instanceof z && (k = a.jb);
            90 === h || 270 === h ? (b = isFinite(g.height) ? g.height + k: b, c = isFinite(g.width) ? g.width + k: c) : (b = isFinite(g.width) ? g.width + k: b, c = isFinite(g.height) ? g.height + k: c);
            var g = d || 0,
            k = e || 0,
            l = a instanceof x;
            switch (Jo(a, !0)) {
            case Sj:
                k = g = 0;
                l && (c = b = Infinity);
                break;
            case rf:
                isFinite(b) && b > d && (g = b);
                isFinite(c) && c > e && (k = c);
                break;
            case vo:
                isFinite(b) && b > d && (g = b);
                k = 0;
                l && (c = Infinity);
                break;
            case uo:
                isFinite(c) && c > e && (k = c),
                g = 0,
                l && (b = Infinity)
            }
            var l = a.kf,
            m = a.hg;
            g > l.width && m.width < l.width && (g = l.width);
            k > l.height && m.height < l.height && (k = l.height);
            d = Math.max(g / a.scale, m.width);
            e = Math.max(k / a.scale, m.height);
            l.width < d && (d = Math.min(m.width, d));
            l.height < e && (e = Math.min(m.height, e));
            b = Math.min(l.width, b);
            c = Math.min(l.height, c);
            b = Math.max(d, b);
            c = Math.max(e, c);
            if (90 === h || 270 === h) g = b,
            b = c,
            c = g,
            g = d,
            d = e,
            e = g;
            a.Ad.Ya();
            a.ho(b, c, d, e);
            a.Ad.freeze();
            a.Ad.F() || D.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.Ad.toString());
            em(a, !1)
        }
    }
    f.ho = function() {};
    f.Jj = function() {
        return ! 1
    };
    f.oc = function(a, b, c, d, e) {
        this.$i();
        var g = D.Nf();
        g.assign(this.ac);
        this.ac.Ya();
        if (!1 === Im(this)) {
            var h = this.ac;
            h.x = a;
            h.y = b;
            h.width = c;
            h.height = d
        } else this.yj(a, b, c, d);
        this.ac.freeze();
        this.ug = void 0 === e ? null: e;
        c = !1;
        void 0 !== e ? c = !0 : null !== this.Q && (e = this.Q.$c, d = this.Fa, null !== this.Zl && (d = this.ac), c = b + d.height, d = a + d.width, c = !(0 <= a + .05 && d <= e.width + .05 && 0 <= b + .05 && c <= e.height + .05), this instanceof na && (a = this.$c, this.pw > a.height || this.gi.nf > a.width)) && (c = !0);
        this.T = c ? this.T | 256 : this.T & -257;
        this.ac.F() || D.k("Non-real actualBounds has been set. Object " + this + ", actualBounds: " + this.ac.toString());
        this.my(g, this.ac);
        Ko(this, !1);
        D.Mb(g)
    };
    f.yj = function() {};
    function Lo(a, b, c, d, e) {
        var g = a.$;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        if (!a.Ea.F()) {
            g = a.Ad;
            c = a.margin;
            b = c.right + c.left;
            var h = c.top + c.bottom;
            c = g.width + b;
            g = g.height + h;
            d += b;
            e += h;
            b = Jo(a, !0);
            c === d && g === e && (b = Sj);
            switch (b) {
            case Sj:
                if (c > d || g > e) em(a, !0),
                Ak(a, c > d ? d: c, g > e ? e: g);
                break;
            case rf:
                em(a, !0);
                Ak(a, d, e, 0, 0);
                break;
            case vo:
                em(a, !0);
                Ak(a, d, g, 0, 0);
                break;
            case uo:
                em(a, !0),
                Ak(a, c, e, 0, 0)
            }
        }
    }
    f.my = function(a, b) {
        var c = this.Y;
        null !== c && null !== c.g && (c.ro !== this && c.CG !== this && c.GG !== this || Mo(c, !0), this.qa(), xb(a, b) || (c.rm(), this.yw(c)))
    };
    f.yw = function(a) {
        null !== this.sd && (Mo(a, !0), a instanceof G && No(a, this))
    };
    D.defineProperty(P, {
        Sq: "shadowVisible"
    },
    function() {
        return this.un
    },
    function(a) {
        var b = this.un;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "shadowVisible"), this.un = a, this.qa(), this.i("shadowVisible", b, a))
    });
    P.prototype.Ee = function(a, b) {
        if (this.visible) {
            var c = this.ac;
            if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y)) {
                var d = this.opacity,
                e = 1;
                if (1 !== d) {
                    if (0 === d) return;
                    e = a.globalAlpha;
                    a.globalAlpha = e * d
                }
                if (a instanceof nd) a: {
                    if (this.visible) {
                        var g = null,
                        h = a.$x;
                        if (this instanceof x && (this.type === Oo || this.type === Po)) Qo(this, a, b);
                        else {
                            var k = this.ac;
                            if (0 !== k.width && 0 !== k.height && !isNaN(k.x) && !isNaN(k.y)) {
                                var l = this.transform,
                                m = this.Q;
                                0 !== (this.T & 4096) === !0 && Ro(this);
                                var c = 0 !== (this.T & 256),
                                n = !1;
                                this instanceof na && (a.font = this.font);
                                if (c) {
                                    n = m.kh() ? m.Ga: m.$;
                                    if (null !== this.ug) var p = this.ug,
                                    q = p.x,
                                    r = p.y,
                                    s = p.width,
                                    p = p.height;
                                    else q = Math.max(k.x, n.x),
                                    r = Math.max(k.y, n.y),
                                    s = Math.min(k.right, n.right) - q,
                                    p = Math.min(k.bottom, n.bottom) - r;
                                    if (q > k.width + k.x || k.x > n.width + n.x || r > k.height + k.y || k.y > n.height + n.y) break a;
                                    n = !0;
                                    pd(a, 1, 0, 0, 1, 0, 0);
                                    a.save();
                                    a.beginPath();
                                    a.rect(q, r, s, p);
                                    a.clip()
                                }
                                if (this.Jj()) {
                                    var u = this;
                                    if (!u.isVisible()) break a
                                }
                                a.Mh.Yb = [1, 0, 0, 1, 0, 0];
                                q = !1;
                                this.Jj() && this.Wk && b.Gj("drawShadows") && (r = this.tn, a.JB(r.x * b.scale * b.od, r.y * b.scale * b.od, u.Lg), a.uo(), a.shadowColor = u.sn);
                                u = !1;
                                this.Y && b.Gj("drawShadows") && (u = this.Y.Wk); ! 0 === this.Sq ? (a.uo(), !1 === q && u && (pd(a, 1, 0, 0, 1, 0, 0), a.ib(), q = !0)) : !1 === this.Sq && a.to();
                                null !== this.hc && (So(this, a, this.hc, !0, !0), !1 === q && u && (pd(a, 1, 0, 0, 1, 0, 0), a.ib(), q = !0), this.hc instanceof Ba && this.hc.type === Ed ? (a.beginPath(), a.rect(k.x, k.y, k.width, k.height), a.Ug(this.hc)) : a.fillRect(k.x, k.y, k.width, k.height));
                                this instanceof x ? pd(a, l.m11, l.m12, l.m21, l.m22, l.dx, l.dy) : a.Mh.Yb = [l.m11, l.m12, l.m21, l.m22, l.dx, l.dy];
                                null !== this.Kb && (!1 === q && u && (pd(a, 1, 0, 0, 1, 0, 0), a.ib(), q = !0), s = this.Ga, l = k = 0, r = s.width, s = s.height, p = 0, this instanceof z && (s = this.ob.sb, k = s.x, l = s.y, r = s.width, s = s.height, p = this.Ng), So(this, a, this.Kb, !0, !1), this.Kb instanceof Ba && this.Kb.type === Ed ? (a.beginPath(), a.rect(k - p / 2, l - p / 2, r + p, s + p), a.Ug(this.Kb)) : a.fillRect(k - p / 2, l - p / 2, r + p, s + p));
                                u && (null !== this.Kb || null !== this.hc || null !== m && 0 !== (m.T & 512) || null !== m && (m.type === Kl || m.type === Qj) && m.Vd() !== this) ? (To(this, !0), null === this.Sq && a.to()) : To(this, !1);
                                this.Pk(a, b);
                                u && 0 !== (this.T & 512) === !0 && a.uo();
                                this.Jj() && u && a.to();
                                c && (a.restore(), n && a.Ef.pop());
                                this instanceof x && (g = a.Ef.pop()); ! 0 === q && a.Ef.pop();
                                null !== a.hF && (null === g && (h === a.$x ? (pd(a, 1, 0, 0, 1, 0, 0), g = a.Ef.pop()) : g = a.$x), a.hF(this, g))
                            }
                        }
                    }
                } else {
                    if (this instanceof x && (this.type === Oo || this.type === Po)) {
                        Qo(this, a, b);
                        1 !== d && (a.globalAlpha = e);
                        return
                    }
                    this instanceof J && this.Gu(!1);
                    v && v.zj && v.wI(a, this);
                    g = this.transform;
                    h = this.Q;
                    0 !== (this.T & 4096) === !0 && Ro(this);
                    m = 0 !== (this.T & 256);
                    a.eq && (m = !1);
                    this instanceof na && (a.font = this.font);
                    if (m) {
                        v && v.gF && D.trace("clip" + this.toString());
                        n = h.kh() ? h.Ga: h.$;
                        null !== this.ug ? (q = this.ug, k = q.x, l = q.y, u = q.width, q = q.height) : (k = Math.max(c.x, n.x), l = Math.max(c.y, n.y), u = Math.min(c.right, n.right) - k, q = Math.min(c.bottom, n.bottom) - l);
                        if (k > c.width + c.x || c.x > n.width + n.x || l > c.height + c.y || c.y > n.height + n.y) {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        v && v.gF && v.yI(a, k, l, u, q);
                        a.save();
                        a.beginPath();
                        a.rect(k, l, u, q);
                        a.clip()
                    }
                    if (this.Jj()) {
                        if (!this.isVisible()) {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        this.Wk && b.Gj("drawShadows") && (n = this.tn, a.JB(n.x * b.scale * b.od, n.y * b.scale * b.od, this.Lg), a.uo(), a.shadowColor = this.sn)
                    }
                    n = !1;
                    this.Y && b.Gj("drawShadows") && (n = this.Y.Wk); ! 0 === this.Sq ? a.uo() : !1 === this.Sq && a.to();
                    null !== this.hc && (So(this, a, this.hc, !0, !0), this.hc instanceof Ba && this.hc.type === Ed ? (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.Ug(this.hc)) : a.fillRect(c.x, c.y, c.width, c.height));
                    g.xu() || a.transform(g.m11, g.m12, g.m21, g.m22, g.dx, g.dy);
                    null !== this.Kb && (u = this.Ga, k = c = 0, l = u.width, u = u.height, q = 0, this instanceof z && (u = this.ob.sb, c = u.x, k = u.y, l = u.width, u = u.height, q = this.Ng), So(this, a, this.Kb, !0, !1), this.Kb instanceof Ba && this.Kb.type === Ed ? (a.beginPath(), a.rect(c - q / 2, k - q / 2, l + q, u + q), a.Ug(this.Kb)) : a.fillRect(c - q / 2, k - q / 2, l + q, u + q));
                    v && v.zj && v.xI(a, this);
                    n && (null !== this.Kb || null !== this.hc || null !== h && 0 !== (h.T & 512) || null !== h && (h.type === Kl || h.type === Qj) && h.Vd() !== this) ? (To(this, !0), null === this.Sq && a.to()) : To(this, !1);
                    this.Pk(a, b);
                    n && 0 !== (this.T & 512) === !0 && a.uo();
                    this.Jj() && n && a.to();
                    m ? (a.restore(), this instanceof x ? a.Be(!0) : a.Be(!1)) : g.xu() || (h = 1 / (g.m11 * g.m22 - g.m12 * g.m21), a.transform(g.m22 * h, -g.m12 * h, -g.m21 * h, g.m11 * h, h * (g.m21 * g.dy - g.m22 * g.dx), h * (g.m12 * g.dx - g.m11 * g.dy)))
                }
                1 !== d && (a.globalAlpha = e)
            }
        }
    };
    function Qo(a, b, c) {
        var d = a.ac;
        0 === d.width || 0 === d.height || isNaN(d.x) || isNaN(d.y) || (null !== a.hc && (So(a, b, a.hc, !0, !0), a.hc instanceof Ba && a.hc.type === Ed ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Ug(a.hc)) : b.fillRect(d.x, d.y, d.width, d.height)), null !== a.Kb && (So(a, b, a.Kb, !0, !1), a.Kb instanceof Ba && a.Kb.type === Ed ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Ug(a.Kb)) : b.fillRect(d.x, d.y, d.width, d.height)), a.Pk(b, c))
    }
    P.prototype.Pk = function() {};
    function So(a, b, c, d, e) {
        if (null !== c) {
            var g = 1,
            h = 1;
            if ("string" === typeof c) d ? b.fillStyle = c: b.strokeStyle = c;
            else if (c.type === Ag) d ? b.fillStyle = c.color: b.strokeStyle = c.color;
            else {
                var k, h = a.Ga,
                g = h.width,
                h = h.height;
                if (e) var l = a.$,
                g = l.width,
                h = l.height;
                var m = b instanceof Dd;
                if (m && c.rh && (c.type === Zn || c.Mo === g && c.hz === h)) k = c.rh;
                else {
                    var n = l = 0,
                    p = 0,
                    q = 0,
                    r = 0,
                    s = 0,
                    s = r = 0;
                    e && (l = a.$, g = l.width, h = l.height, r = l.x, s = l.y);
                    l = c.start.x * g + c.start.offsetX;
                    n = c.start.y * h + c.start.offsetY;
                    p = c.end.x * g + c.end.offsetX;
                    q = c.end.y * h + c.end.offsetY;
                    l += r;
                    p += r;
                    n += s;
                    q += s;
                    if (c.type === Qg) k = b.createLinearGradient(l, n, p, q);
                    else if (c.type === Ed) s = isNaN(c.eu) ? Math.max(g, h) / 2 : c.eu,
                    isNaN(c.dv) ? (r = 0, s = Math.max(g, h) / 2) : r = c.dv,
                    k = b.createRadialGradient(l, n, r, p, q, s);
                    else if (c.type === Zn) try {
                        k = b.createPattern(c.pattern, "repeat")
                    } catch(u) {
                        k = null
                    } else D.gc(c.type, "Brush type");
                    if (c.type !== Zn && (e = c.Lk, null !== e)) for (e = e.j; e.next();) k.addColorStop(e.key, e.value);
                    if (m && (c.rh = k, null !== k && (c.Mo = g, c.hz = h), null === k && c.type === Zn && -1 !== c.Mo)) {
                        c.Mo = -1;
                        var t = a.g;
                        null !== t && -1 === c.Mo && D.setTimeout(function() {
                            t.Hq()
                        },
                        600)
                    }
                }
                d ? b.fillStyle = k: b.strokeStyle = k
            }
        }
    }
    P.prototype.isContainedBy = P.prototype.tm = function(a) {
        if (a instanceof x) a: {
            if (this !== a && null !== a) for (var b = this.Q; null !== b;) {
                if (b === a) {
                    a = !0;
                    break a
                }
                b = b.Q
            }
            a = !1
        } else a = !1;
        return a
    };
    P.prototype.isVisibleObject = P.prototype.Nj = function() {
        if (!this.visible) return ! 1;
        var a = this.Q;
        return null !== a ? a.Nj() : !0
    };
    P.prototype.isEnabledObject = P.prototype.vu = function() {
        for (var a = this instanceof x ? this: this.Q; null !== a && a.isEnabled;) a = a.Q;
        return null === a
    };
    D.defineProperty(P, {
        iF: "enabledChanged"
    },
    function() {
        return null !== this.la ? this.la.Qr: null
    },
    function(a) {
        zo(this);
        var b = this.la.Qr;
        b !== a && (null !== a && D.h(a, "function", P, "enabledChanged"), this.la.Qr = a, this.i("enabledChanged", b, a))
    });
    function Ro(a) {
        if (0 !== (a.T & 2048) === !0) {
            var b = a.Hc;
            b.reset();
            if (!a.ac.F() || !a.Ad.F()) {
                Uo(a, !1);
                return
            }
            b.translate(a.ac.x, a.ac.y);
            b.translate( - a.Fa.x, -a.Fa.y);
            var c = a.Ga;
            Ho(a, b, c.x, c.y, c.width, c.height);
            Uo(a, !1);
            Vo(a, !0)
        }
        0 !== (a.T & 4096) === !0 && (b = a.Q, null === b ? (a.Li.set(a.Hc), a.Xo = a.scale, Vo(a, !1)) : null !== b.Hh && (c = a.Li, c.reset(), b.kh() ? c.multiply(b.Li) : null !== b.Q && c.multiply(b.Q.Li), c.multiply(a.Hc), a.Xo = a.scale * b.Xo, Vo(a, !1)))
    }
    function Ho(a, b, c, d, e, g) {
        1 !== a.scale && b.scale(a.scale);
        if (0 !== a.angle) {
            var h = gc;
            a.Jj() && a.Kf.fd() && (h = a.Kf);
            var k = D.P();
            if (a instanceof F && a.uf !== a) for (c = a.uf, d = c.Ga, k.av(d.x, d.y, d.width, d.height, h), c.gj.vb(k), k.offset( - c.Fa.x, -c.Fa.y), h = c.Q; null !== h && h !== a;) h.gj.vb(k),
            k.offset( - h.Fa.x, -h.Fa.y),
            h = h.Q;
            else k.av(c, d, e, g, h);
            b.rotate(a.angle, k.x, k.y);
            D.A(k)
        }
    }
    f = P.prototype;
    f.K = function(a) {
        void 0 === a && (a = !1);
        if (!0 !== Hm(this)) {
            em(this, !0);
            Ko(this, !0);
            var b = this.Q;
            null === b || a || b.K()
        }
    };
    f.xq = function() { ! 0 !== Hm(this) && (em(this, !0), Ko(this, !0))
    };
    function Wo(a) {
        if (!1 === Im(a)) {
            var b = a.Q;
            null !== b ? b.K() : a.Jj() && (b = a.g, null !== b && (b.Cg.add(a), a instanceof G && a.fg(), b.Se()));
            Ko(a, !0)
        }
    }
    f.$i = function() {
        0 !== (this.T & 2048) === !1 && (Uo(this, !0), Vo(this, !0))
    };
    f.XA = function() {
        Vo(this, !0)
    };
    f.qa = function() {
        var a = this.Y;
        null !== a && a.qa()
    };
    function Jo(a, b) {
        var c = a.stretch,
        d = a.Q;
        if (null !== d && d.ca === ea) return Xo(a, d.me(a.Zb), d.le(a.column), b);
        if (null !== d && d.ca === Kl && d.Vd() === a) return Yo(a, rf, b);
        if (c === to) {
            if (null !== d) {
                if (d.ca === Qj && d.Vd() === a) return Yo(a, rf, b);
                c = d.je;
                return c === to ? Yo(a, Sj, b) : Yo(a, c, b)
            }
            return Yo(a, Sj, b)
        }
        return Yo(a, c, b)
    }
    function Xo(a, b, c, d) {
        var e = a.stretch;
        if (e !== to) return Yo(a, e, d);
        var g = e = null;
        switch (b.stretch) {
        case uo:
            g = !0;
            break;
        case rf:
            g = !0
        }
        switch (c.stretch) {
        case vo:
            e = !0;
            break;
        case rf:
            e = !0
        }
        b = a.Q.je;
        null === e && (e = b === vo || b === rf);
        null === g && (g = b === uo || b === rf);
        return ! 0 === e && !0 === g ? Yo(a, rf, d) : !0 === e ? Yo(a, vo, d) : !0 === g ? Yo(a, uo, d) : Yo(a, Sj, d)
    }
    function Yo(a, b, c) {
        if (c) return b;
        if (b === Sj) return Sj;
        c = a.Ea;
        if (c.F()) return Sj;
        a = a.angle;
        if (!isNaN(c.width)) if (90 !== a && 270 !== a) {
            if (b === vo) return Sj;
            if (b === rf) return uo
        } else {
            if (b === uo) return Sj;
            if (b === rf) return vo
        }
        if (!isNaN(c.height)) if (90 !== a && 270 !== a) {
            if (b === uo) return Sj;
            if (b === rf) return vo
        } else {
            if (b === vo) return Sj;
            if (b === rf) return uo
        }
        return b
    }
    D.defineProperty(P, {
        Oq: "segmentOrientation"
    },
    function() {
        return this.qn
    },
    function(a) {
        var b = this.qn;
        b !== a && (v && D.Ca(a, J, P, "segmentOrientation"), this.qn = a, this.K(), this.i("segmentOrientation", b, a), a === nj && (this.angle = 0))
    });
    D.defineProperty(P, {
        Te: "segmentIndex"
    },
    function() {
        return this.mt
    },
    function(a) {
        v && D.h(a, "number", P, "segmentIndex");
        a = Math.round(a);
        var b = this.mt;
        b !== a && (this.mt = a, this.K(), this.i("segmentIndex", b, a))
    });
    D.defineProperty(P, {
        zB: "segmentFraction"
    },
    function() {
        return this.on
    },
    function(a) {
        v && D.h(a, "number", P, "segmentFraction");
        isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
        var b = this.on;
        b !== a && (this.on = a, this.K(), this.i("segmentFraction", b, a))
    });
    D.defineProperty(P, {
        AB: "segmentOffset"
    },
    function() {
        return this.pn
    },
    function(a) {
        var b = this.pn;
        b.O(a) || (v && D.l(a, O, P, "segmentOffset"), this.pn = a = a.V(), this.K(), this.i("segmentOffset", b, a))
    });
    D.defineProperty(P, {
        stretch: "stretch"
    },
    function() {
        return this.Mg
    },
    function(a) {
        var b = this.Mg;
        b !== a && (v && D.Ca(a, P, P, "stretch"), this.Mg = a, this.K(), this.i("stretch", b, a))
    });
    D.defineProperty(P, {
        name: "name"
    },
    function() {
        return this.Xb
    },
    function(a) {
        var b = this.Xb;
        b !== a && (v && D.h(a, "string", P, "name"), this.Xb = a, null !== this.Y && (this.Y.Jl = null), this.i("name", b, a))
    });
    D.defineProperty(P, {
        opacity: "opacity"
    },
    function() {
        return this.Fc
    },
    function(a) {
        var b = this.Fc;
        b !== a && (D.h(a, "number", P, "opacity"), (0 > a || 1 < a) && D.ua(a, "0 <= value <= 1", P, "opacity"), this.Fc = a, this.i("opacity", b, a), a = this.g, b = this.Y, null !== a && null !== b && a.qa(sl(b, b.$)))
    });
    D.defineProperty(P, {
        visible: "visible"
    },
    function() {
        return 0 !== (this.T & 1)
    },
    function(a) {
        var b = 0 !== (this.T & 1);
        b !== a && (v && D.h(a, "boolean", P, "visible"), this.T ^= 1, this.i("visible", b, a), b = this.Q, null !== b ? b.K() : this.Jj() && this.Hd(a), this.qa(), Zo(this))
    });
    D.defineProperty(P, {
        pg: "pickable"
    },
    function() {
        return 0 !== (this.T & 2)
    },
    function(a) {
        var b = 0 !== (this.T & 2);
        b !== a && (v && D.h(a, "boolean", P, "pickable"), this.T ^= 2, this.i("pickable", b, a))
    });
    D.defineProperty(P, {
        GI: "fromLinkableDuplicates"
    },
    function() {
        return 0 !== (this.T & 4)
    },
    function(a) {
        var b = 0 !== (this.T & 4);
        b !== a && (v && D.h(a, "boolean", P, "fromLinkableDuplicates"), this.T ^= 4, this.i("fromLinkableDuplicates", b, a))
    });
    D.defineProperty(P, {
        HI: "fromLinkableSelfNode"
    },
    function() {
        return 0 !== (this.T & 8)
    },
    function(a) {
        var b = 0 !== (this.T & 8);
        b !== a && (v && D.h(a, "boolean", P, "fromLinkableSelfNode"), this.T ^= 8, this.i("fromLinkableSelfNode", b, a))
    });
    D.defineProperty(P, {
        rK: "toLinkableDuplicates"
    },
    function() {
        return 0 !== (this.T & 16)
    },
    function(a) {
        var b = 0 !== (this.T & 16);
        b !== a && (v && D.h(a, "boolean", P, "toLinkableDuplicates"), this.T ^= 16, this.i("toLinkableDuplicates", b, a))
    });
    D.defineProperty(P, {
        sK: "toLinkableSelfNode"
    },
    function() {
        return 0 !== (this.T & 32)
    },
    function(a) {
        var b = 0 !== (this.T & 32);
        b !== a && (v && D.h(a, "boolean", P, "toLinkableSelfNode"), this.T ^= 32, this.i("toLinkableSelfNode", b, a))
    });
    D.defineProperty(P, {
        Gf: "isPanelMain"
    },
    function() {
        return 0 !== (this.T & 64)
    },
    function(a) {
        var b = 0 !== (this.T & 64);
        b !== a && (v && D.h(a, "boolean", P, "isPanelMain"), this.T ^= 64, this.K(), this.i("isPanelMain", b, a))
    });
    D.defineProperty(P, {
        tu: "isActionable"
    },
    function() {
        return 0 !== (this.T & 128)
    },
    function(a) {
        var b = 0 !== (this.T & 128);
        b !== a && (v && D.h(a, "boolean", P, "isActionable"), this.T ^= 128, this.i("isActionable", b, a))
    });
    D.defineProperty(P, {
        Zl: "areaBackground"
    },
    function() {
        return this.hc
    },
    function(a) {
        var b = this.hc;
        b !== a && (v && null !== a && D.Yt(a, "GraphObject.areaBackground"), a instanceof Ba && a.freeze(), this.hc = a, this.qa(), this.i("areaBackground", b, a))
    });
    D.defineProperty(P, {
        background: "background"
    },
    function() {
        return this.Kb
    },
    function(a) {
        var b = this.Kb;
        b !== a && (v && null !== a && D.Yt(a, "GraphObject.background"), a instanceof Ba && a.freeze(), this.Kb = a, this.qa(), this.i("background", b, a))
    });
    function To(a, b) {
        a.T = b ? a.T | 512 : a.T & -513
    }
    function Eo(a) {
        return 0 !== (a.T & 1024)
    }
    function $o(a, b) {
        a.T = b ? a.T | 1024 : a.T & -1025
    }
    function Uo(a, b) {
        a.T = b ? a.T | 2048 : a.T & -2049
    }
    function Vo(a, b) {
        a.T = b ? a.T | 4096 : a.T & -4097
    }
    function Hm(a) {
        return 0 !== (a.T & 8192)
    }
    function em(a, b) {
        a.T = b ? a.T | 8192 : a.T & -8193
    }
    function Im(a) {
        return 0 !== (a.T & 16384)
    }
    function Ko(a, b) {
        a.T = b ? a.T | 16384 : a.T & -16385
    }
    D.w(P, {
        Y: "part"
    },
    function() {
        if (this.Jj()) return this;
        if (null !== this.kn) return this.kn;
        var a;
        for (a = this.Q; a;) {
            if (a instanceof F) return this.kn = a;
            a = a.Q
        }
        return null
    });
    D.w(P, {
        Q: "panel"
    },
    function() {
        return this.Bh
    });
    P.prototype.ym = function(a) {
        this.Bh = a
    };
    D.w(P, {
        layer: "layer"
    },
    function() {
        var a = this.Y;
        return null !== a ? a.layer: null
    },
    {
        configurable: !0
    });
    D.w(P, {
        g: "diagram"
    },
    function() {
        var a = this.Y;
        return null !== a ? a.g: null
    },
    {
        configurable: !0
    });
    D.defineProperty(P, {
        position: "position"
    },
    function() {
        return this.qb
    },
    function(a) {
        v && D.l(a, O, P, "position");
        var b = a.x,
        c = a.y,
        d = this.qb,
        e = d.x,
        g = d.y; (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) ? this.GB() : (a = a.V(), this.FB(a, d) && this.i("position", d, a))
    });
    P.prototype.GB = function() {};
    P.prototype.FB = function(a) {
        this.qb = a;
        Wo(this);
        this.$i();
        return ! 0
    };
    P.prototype.Hy = function(a, b) {
        this.qb.m(a, b);
        this.$i()
    };
    D.w(P, {
        $: "actualBounds"
    },
    function() {
        return this.ac
    });
    D.defineProperty(P, {
        scale: "scale"
    },
    function() {
        return this.Bb
    },
    function(a) {
        var b = this.Bb;
        b !== a && (v && D.p(a, P, "scale"), 0 >= a && D.k("GraphObject.scale for " + this + " must be greater than zero, not: " + a), this.Bb = a, this.$i(), this.K(), this.i("scale", b, a))
    });
    D.defineProperty(P, {
        angle: "angle"
    },
    function() {
        return this.rg
    },
    function(a) {
        var b = this.rg;
        b !== a && (v && D.p(a, P, "angle"), a %= 360, 0 > a && (a += 360), b !== a && (this.rg = a, this.K(), this.$i(), this.i("angle", b, a)))
    });
    D.defineProperty(P, {
        Ea: "desiredSize"
    },
    function() {
        return this.Ye
    },
    function(a) {
        v && D.l(a, Ca, P, "desiredSize");
        var b = a.width,
        c = a.height,
        d = this.Ye,
        e = d.width,
        g = d.height; (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) || (this.Ye = a = a.V(), this.K(), this instanceof z && this.Re(), this.i("desiredSize", d, a), Eo(this) && (a = this.Y, null !== a && (Fo(this, a, "width"), Fo(this, a, "height"))))
    });
    D.defineProperty(P, {
        width: "width"
    },
    function() {
        return this.Ye.width
    },
    function(a) {
        var b = this.Ye.width;
        b === a || isNaN(b) && isNaN(a) || (v && D.h(a, "number", P, "width"), b = this.Ye, this.Ye = a = (new Ca(a, this.Ye.height)).freeze(), this.K(), this instanceof z && this.Re(), this.i("desiredSize", b, a), Eo(this) && (a = this.Y, null !== a && Fo(this, a, "width")))
    });
    D.defineProperty(P, {
        height: "height"
    },
    function() {
        return this.Ye.height
    },
    function(a) {
        var b = this.Ye.height;
        b === a || isNaN(b) && isNaN(a) || (v && D.h(a, "number", P, "height"), b = this.Ye, this.Ye = a = (new Ca(this.Ye.width, a)).freeze(), this.K(), this instanceof z && this.Re(), this.i("desiredSize", b, a), Eo(this) && (a = this.Y, null !== a && Fo(this, a, "height")))
    });
    D.defineProperty(P, {
        hg: "minSize"
    },
    function() {
        return this.li
    },
    function(a) {
        var b = this.li;
        b.O(a) || (v && D.l(a, Ca, P, "minSize"), a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.li = a, this.K(), this.i("minSize", b, a))
    });
    D.defineProperty(P, {
        kf: "maxSize"
    },
    function() {
        return this.ki
    },
    function(a) {
        var b = this.ki;
        b.O(a) || (v && D.l(a, Ca, P, "maxSize"), a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.ki = a, this.K(), this.i("maxSize", b, a))
    });
    D.w(P, {
        Fa: "measuredBounds"
    },
    function() {
        return this.Ad
    });
    D.w(P, {
        Ga: "naturalBounds"
    },
    function() {
        return this.$c
    },
    {
        configurable: !0
    });
    D.defineProperty(P, {
        margin: "margin"
    },
    function() {
        return this.cn
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : v && D.l(a, Hb, P, "margin");
        var b = this.cn;
        b.O(a) || (this.cn = a = a.V(), this.K(), this.i("margin", b, a))
    });
    D.w(P, {
        transform: null
    },
    function() {
        0 !== (this.T & 2048) === !0 && Ro(this);
        return this.Hc
    });
    D.w(P, {
        Hh: null
    },
    function() {
        0 !== (this.T & 4096) === !0 && Ro(this);
        return this.Li
    });
    D.defineProperty(P, {
        alignment: "alignment"
    },
    function() {
        return this.re
    },
    function(a) {
        var b = this.re;
        b.O(a) || (v && D.l(a, R, P, "alignment"), a.Zd() && !a.ed() && D.k("GraphObject.alignment for " + this + " must be a real Spot or Spot.Default, not: " + a), this.re = a = a.V(), Wo(this), this.i("alignment", b, a))
    });
    D.defineProperty(P, {
        column: "column"
    },
    function() {
        return this.qr
    },
    function(a) {
        v && D.p(a, P, "column");
        a = Math.round(a);
        var b = this.qr;
        b !== a && (0 > a && D.ua(a, ">= 0", P, "column"), this.qr = a, this.K(), this.i("column", b, a))
    });
    D.defineProperty(P, {
        cI: "columnSpan"
    },
    function() {
        return this.Qi
    },
    function(a) {
        v && D.h(a, "number", P, "columnSpan");
        a = Math.round(a);
        var b = this.Qi;
        b !== a && (1 > a && D.ua(a, ">= 1", P, "columnSpan"), this.Qi = a, this.K(), this.i("columnSpan", b, a))
    });
    D.defineProperty(P, {
        Zb: "row"
    },
    function() {
        return this.it
    },
    function(a) {
        v && D.p(a, P, "row");
        a = Math.round(a);
        var b = this.it;
        b !== a && (0 > a && D.ua(a, ">= 0", P, "row"), this.it = a, this.K(), this.i("row", b, a))
    });
    D.defineProperty(P, {
        rowSpan: "rowSpan"
    },
    function() {
        return this.rj
    },
    function(a) {
        v && D.h(a, "number", P, "rowSpan");
        a = Math.round(a);
        var b = this.rj;
        b !== a && (1 > a && D.ua(a, ">= 1", P, "rowSpan"), this.rj = a, this.K(), this.i("rowSpan", b, a))
    });
    D.defineProperty(P, {
        Iy: "spanAllocation"
    },
    function() {
        return this.yt
    },
    function(a) {
        var b = this.yt;
        b !== a && (null !== a && D.h(a, "function", P, "spanAllocation"), this.yt = a, this.K(), this.i("spanAllocation", b, a))
    });
    D.defineProperty(P, {
        Gh: "alignmentFocus"
    },
    function() {
        return this.Hm
    },
    function(a) {
        var b = this.Hm;
        b.O(a) || (v && D.l(a, R, P, "alignmentFocus"), !a.Zd() || a.ed() || a.O(bc) && this instanceof G || D.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: " + a), this.Hm = a = a.V(), this.K(), this.i("alignmentFocus", b, a))
    });
    D.defineProperty(P, {
        sd: "portId"
    },
    function() {
        return this.Ws
    },
    function(a) {
        var b = this.Ws;
        if (b !== a) {
            v && null !== a && D.h(a, "string", P, "portId");
            var c = this.Y;
            null === c || c instanceof G || (D.k("Cannot set portID on a Link: " + a), c = null);
            null !== b && null !== c && ap(c, this);
            this.Ws = a;
            if (null !== a && c) {
                c.Uk = !0;
                null === c.xe && bp(c);
                var d = this.sd;
                null !== d && c.xe.add(d, this)
            }
            this.i("portId", b, a)
        }
    });
    function cp(a) {
        var b = a.Y;
        if (b instanceof G && (null !== a.sd || a === b.port)) {
            var c = b.g;
            null === c || c.ra.nb || No(b, a)
        }
    }
    function Zo(a) {
        var b = a.g;
        null === b || b.ra.nb || (a instanceof x ? a instanceof G ? a.fg() : dp(a, a,
        function(a) {
            cp(a)
        }) : cp(a))
    }
    D.defineProperty(P, {
        Hb: "toSpot"
    },
    function() {
        return null !== this.Z ? this.Z.Gk: bc
    },
    function(a) {
        this.Wd();
        var b = this.Z.Gk;
        b.O(a) || (v && D.l(a, R, P, "toSpot"), a = a.V(), this.Z.Gk = a, this.i("toSpot", b, a), cp(this))
    });
    D.defineProperty(P, {
        Dm: "toEndSegmentLength"
    },
    function() {
        return null !== this.Z ? this.Z.Ek: 10
    },
    function(a) {
        this.Wd();
        var b = this.Z.Ek;
        b !== a && (v && D.h(a, "number", P, "toEndSegmentLength"), 0 > a && D.ua(a, ">= 0", P, "toEndSegmentLength"), this.Z.Ek = a, this.i("toEndSegmentLength", b, a), cp(this))
    });
    D.defineProperty(P, {
        fv: "toEndSegmentDirection"
    },
    function() {
        return null !== this.Z ? this.Z.Dk: Co
    },
    function(a) {
        this.Wd();
        var b = this.Z.Dk;
        b !== a && (D.Nn("GraphObject.toEndSegmentDirection", "2.0"), v && D.Ca(a, G, P, "toEndSegmentDirection"), this.Z.Dk = a, this.i("toEndSegmentDirection", b, a), cp(this))
    });
    D.defineProperty(P, {
        gv: "toShortLength"
    },
    function() {
        return null !== this.Z ? this.Z.Fk: 0
    },
    function(a) {
        this.Wd();
        var b = this.Z.Fk;
        b !== a && (v && D.h(a, "number", P, "toShortLength"), this.Z.Fk = a, this.i("toShortLength", b, a), cp(this))
    });
    D.defineProperty(P, {
        $G: "toLinkable"
    },
    function() {
        return null !== this.Z ? this.Z.Ht: null
    },
    function(a) {
        this.Wd();
        var b = this.Z.Ht;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "toLinkable"), this.Z.Ht = a, this.i("toLinkable", b, a))
    });
    D.defineProperty(P, {
        tK: "toMaxLinks"
    },
    function() {
        return null !== this.Z ? this.Z.It: Infinity
    },
    function(a) {
        this.Wd();
        var b = this.Z.It;
        b !== a && (v && D.h(a, "number", P, "toMaxLinks"), 0 > a && D.ua(a, ">= 0", P, "toMaxLinks"), this.Z.It = a, this.i("toMaxLinks", b, a))
    });
    D.defineProperty(P, {
        Gb: "fromSpot"
    },
    function() {
        return null !== this.Z ? this.Z.jk: bc
    },
    function(a) {
        this.Wd();
        var b = this.Z.jk;
        b.O(a) || (v && D.l(a, R, P, "fromSpot"), a = a.V(), this.Z.jk = a, this.i("fromSpot", b, a), cp(this))
    });
    D.defineProperty(P, {
        nm: "fromEndSegmentLength"
    },
    function() {
        return null !== this.Z ? this.Z.hk: 10
    },
    function(a) {
        this.Wd();
        var b = this.Z.hk;
        b !== a && (v && D.h(a, "number", P, "fromEndSegmentLength"), 0 > a && D.ua(a, ">= 0", P, "fromEndSegmentLength"), this.Z.hk = a, this.i("fromEndSegmentLength", b, a), cp(this))
    });
    D.defineProperty(P, {
        nu: "fromEndSegmentDirection"
    },
    function() {
        return null !== this.Z ? this.Z.gk: Co
    },
    function(a) {
        this.Wd();
        var b = this.Z.gk;
        b !== a && (D.Nn("GraphObject.fromEndSegmentDirection", "2.0"), v && D.Ca(a, G, P, "fromEndSegmentDirection"), this.Z.gk = a, this.i("fromEndSegmentDirection", b, a), cp(this))
    });
    D.defineProperty(P, {
        ou: "fromShortLength"
    },
    function() {
        return null !== this.Z ? this.Z.ik: 0
    },
    function(a) {
        this.Wd();
        var b = this.Z.ik;
        b !== a && (v && D.h(a, "number", P, "fromShortLength"), this.Z.ik = a, this.i("fromShortLength", b, a), cp(this))
    });
    D.defineProperty(P, {
        sF: "fromLinkable"
    },
    function() {
        return null !== this.Z ? this.Z.Tr: null
    },
    function(a) {
        this.Wd();
        var b = this.Z.Tr;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "fromLinkable"), this.Z.Tr = a, this.i("fromLinkable", b, a))
    });
    D.defineProperty(P, {
        MA: "fromMaxLinks"
    },
    function() {
        return null !== this.Z ? this.Z.Ur: Infinity
    },
    function(a) {
        this.Wd();
        var b = this.Z.Ur;
        b !== a && (v && D.h(a, "number", P, "fromMaxLinks"), 0 > a && D.ua(a, ">= 0", P, "fromMaxLinks"), this.Z.Ur = a, this.i("fromMaxLinks", b, a))
    });
    D.defineProperty(P, {
        cursor: "cursor"
    },
    function() {
        return this.zr
    },
    function(a) {
        var b = this.zr;
        b !== a && (D.h(a, "string", P, "cursor"), this.zr = a, this.i("cursor", b, a))
    });
    D.defineProperty(P, {
        click: "click"
    },
    function() {
        return null !== this.la ? this.la.Pi: null
    },
    function(a) {
        zo(this);
        var b = this.la.Pi;
        b !== a && (null !== a && D.h(a, "function", P, "click"), this.la.Pi = a, this.i("click", b, a))
    });
    D.defineProperty(P, {
        du: "doubleClick"
    },
    function() {
        return null !== this.la ? this.la.Wi: null
    },
    function(a) {
        zo(this);
        var b = this.la.Wi;
        b !== a && (null !== a && D.h(a, "function", P, "doubleClick"), this.la.Wi = a, this.i("doubleClick", b, a))
    });
    D.defineProperty(P, {
        uA: "contextClick"
    },
    function() {
        return null !== this.la ? this.la.Ri: null
    },
    function(a) {
        zo(this);
        var b = this.la.Ri;
        b !== a && (null !== a && D.h(a, "function", P, "contextClick"), this.la.Ri = a, this.i("contextClick", b, a))
    });
    D.defineProperty(P, {
        Iu: "mouseEnter"
    },
    function() {
        return null !== this.la ? this.la.Hs: null
    },
    function(a) {
        zo(this);
        var b = this.la.Hs;
        b !== a && (null !== a && D.h(a, "function", P, "mouseEnter"), this.la.Hs = a, this.i("mouseEnter", b, a))
    });
    D.defineProperty(P, {
        Ju: "mouseLeave"
    },
    function() {
        return null !== this.la ? this.la.Is: null
    },
    function(a) {
        zo(this);
        var b = this.la.Is;
        b !== a && (null !== a && D.h(a, "function", P, "mouseLeave"), this.la.Is = a, this.i("mouseLeave", b, a))
    });
    D.defineProperty(P, {
        kB: "mouseOver"
    },
    function() {
        return null !== this.la ? this.la.lj: null
    },
    function(a) {
        zo(this);
        var b = this.la.lj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseOver"), this.la.lj = a, this.i("mouseOver", b, a))
    });
    D.defineProperty(P, {
        jB: "mouseHover"
    },
    function() {
        return null !== this.la ? this.la.kj: null
    },
    function(a) {
        zo(this);
        var b = this.la.kj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseHover"), this.la.kj = a, this.i("mouseHover", b, a))
    });
    D.defineProperty(P, {
        iB: "mouseHold"
    },
    function() {
        return null !== this.la ? this.la.jj: null
    },
    function(a) {
        zo(this);
        var b = this.la.jj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseHold"), this.la.jj = a, this.i("mouseHold", b, a))
    });
    D.defineProperty(P, {
        IJ: "mouseDragEnter"
    },
    function() {
        return null !== this.la ? this.la.Fs: null
    },
    function(a) {
        zo(this);
        var b = this.la.Fs;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDragEnter"), this.la.Fs = a, this.i("mouseDragEnter", b, a))
    });
    D.defineProperty(P, {
        JJ: "mouseDragLeave"
    },
    function() {
        return null !== this.la ? this.la.Gs: null
    },
    function(a) {
        zo(this);
        var b = this.la.Gs;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDragLeave"), this.la.Gs = a, this.i("mouseDragLeave", b, a))
    });
    D.defineProperty(P, {
        hB: "mouseDrop"
    },
    function() {
        return null !== this.la ? this.la.ij: null
    },
    function(a) {
        zo(this);
        var b = this.la.ij;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDrop"), this.la.ij = a, this.i("mouseDrop", b, a))
    });
    D.defineProperty(P, {
        yE: "actionDown"
    },
    function() {
        return null !== this.la ? this.la.Zq: null
    },
    function(a) {
        zo(this);
        var b = this.la.Zq;
        b !== a && (null !== a && D.h(a, "function", P, "actionDown"), this.la.Zq = a, this.i("actionDown", b, a))
    });
    D.defineProperty(P, {
        zE: "actionMove"
    },
    function() {
        return null !== this.la ? this.la.$q: null
    },
    function(a) {
        zo(this);
        var b = this.la.$q;
        b !== a && (null !== a && D.h(a, "function", P, "actionMove"), this.la.$q = a, this.i("actionMove", b, a))
    });
    D.defineProperty(P, {
        AE: "actionUp"
    },
    function() {
        return null !== this.la ? this.la.ar: null
    },
    function(a) {
        zo(this);
        var b = this.la.ar;
        b !== a && (null !== a && D.h(a, "function", P, "actionUp"), this.la.ar = a, this.i("actionUp", b, a))
    });
    D.defineProperty(P, {
        xE: "actionCancel"
    },
    function() {
        return null !== this.la ? this.la.Yq: null
    },
    function(a) {
        zo(this);
        var b = this.la.Yq;
        b !== a && (null !== a && D.h(a, "function", P, "actionCancel"), this.la.Yq = a, this.i("actionCancel", b, a))
    });
    D.defineProperty(P, {
        PB: "toolTip"
    },
    function() {
        return null !== this.la ? this.la.uj: null
    },
    function(a) {
        zo(this);
        var b = this.la.uj;
        b !== a && (!v || null === a || a instanceof da || a instanceof ak || D.k("GraphObject.toolTip must be an Adornment or HTMLInfo."), this.la.uj = a, this.i("toolTip", b, a))
    });
    D.defineProperty(P, {
        contextMenu: "contextMenu"
    },
    function() {
        return null !== this.la ? this.la.Si: null
    },
    function(a) {
        zo(this);
        var b = this.la.Si;
        b !== a && (!v || a instanceof da || a instanceof ak || D.k("GraphObject.contextMenu must be an Adornment or HTMLInfo."), this.la.Si = a, this.i("contextMenu", b, a))
    });
    P.prototype.bind = P.prototype.bind = function(a) {
        a.Og = this;
        var b = this.lm();
        null !== b && ep(b) && D.k("Cannot add a Binding to a template that has already been copied: " + a);
        null === this.Bc && (this.Bc = new K(ih));
        this.Bc.add(a)
    };
    P.prototype.findTemplateBinder = P.prototype.lm = function() {
        for (var a = this instanceof x ? this: this.Q; null !== a;) {
            if (null !== a.pl) return a;
            a = a.Q
        }
        return null
    };
    P.prototype.setProperties = function(a) {
        D.Zu(this, a)
    };
    var fp;
    P.make = fp = function(a, b) {
        var c = arguments,
        d = null,
        e = null;
        if ("function" === typeof a) e = a;
        else if ("string" === typeof a) {
            var g = gp.oa(a);
            "function" === typeof g ? (c = D.cm(arguments), d = g(c), D.Ta(d) || D.k('GraphObject.make invoked object builder "' + a + '", but it did not return an Object')) : e = aa[a]
        }
        null === d && (void 0 !== e && null !== e && e.constructor || D.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: " + a), d = new e);
        g = 1;
        if (d instanceof E && 1 < c.length) {
            var h = d,
            e = c[1];
            if ("string" === typeof e || e instanceof HTMLDivElement) Il(h, e),
            g++
        }
        for (; g < c.length; g++) e = c[g],
        void 0 === e ? D.k("Undefined value at argument " + g + " for object being constructed by GraphObject.make: " + d) : hp(d, e);
        return d
    };
    function hp(a, b) {
        if ("string" === typeof b) if (a instanceof na) a.text = b;
        else if (a instanceof z) a.Jb = b;
        else if (a instanceof Cl) a.source = b;
        else if (a instanceof x) {
            var c = Ha(x, b);
            null !== c ? a.type = c: D.k("Unknown Panel type as an argument to GraphObject.make: " + b)
        } else a instanceof Ba ? (c = Ha(Ba, b), null !== c ? a.type = c: D.k("Unknown Brush type as an argument to GraphObject.make: " + b)) : a instanceof bf ? (c = Ha(bf, b), null !== c ? a.type = c: D.k("Unknown Geometry type as an argument to GraphObject.make: " + b)) : a instanceof Xf ? (c = Ha(Xf, b), null !== c ? a.type = c: D.k("Unknown PathSegment type as an argument to GraphObject.make: " + b)) : D.k("Unable to use a string as an argument to GraphObject.make: " + b);
        else if (b instanceof P) c = b,
        a instanceof x || D.k("A GraphObject can only be added to a Panel, not to: " + a),
        a.add(c);
        else if (b instanceof ch) {
            var d = b,
            c = a,
            e;
            d.Ie && c.getRowDefinition ? e = c.getRowDefinition(d.index) : !d.Ie && c.getColumnDefinition ? e = c.getColumnDefinition(d.index) : D.k("A RowColumnDefinition can only be added to a Panel, not to: " + a);
            e.gq(d)
        } else if (b instanceof za)"function" === typeof a.nc ? a.nc(b) : D.Xj(a, b);
        else if (b instanceof ih) a instanceof P ? a.bind(b) : a instanceof ch ? a.bind(b) : D.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + a);
        else if (b instanceof df) a instanceof bf ? a.kc.add(b) : D.k("A PathFigure can only be added to a Geometry, not to: " + a);
        else if (b instanceof Xf) a instanceof df ? a.Db.add(b) : D.k("A PathSegment can only be added to a PathFigure, not to: " + a);
        else if (b instanceof Tg) a instanceof E ? a.Vb = b: a instanceof I ? a.Vb = b: D.k("A Layout can only be assigned to a Diagram or a Group, not to: " + a);
        else if (Array.isArray(b)) for (c = 0; c < b.length; c++) hp(a, b[c]);
        else if ("object" === typeof b && null !== b) if (a instanceof Ba) {
            e = new la;
            for (c in b) d = parseFloat(c),
            isNaN(d) ? e[c] = b[c] : a.addColorStop(d, b[c]);
            D.Zu(a, e)
        } else if (a instanceof ch) {
            void 0 !== b.row ? (e = b.row, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && D.k("Must specify non-negative integer row for RowColumnDefinition " + b + ", not: " + e), a.Ie = !0, a.index = e) : void 0 !== b.column && (e = b.column, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && D.k("Must specify non-negative integer column for RowColumnDefinition " + b + ", not: " + e), a.Ie = !1, a.index = e);
            e = new la;
            for (c in b)"row" !== c && "column" !== c && (e[c] = b[c]);
            D.Zu(a, e)
        } else D.Zu(a, b);
        else D.k('Unknown initializer "' + b + '" for object being constructed by GraphObject.make: ' + a)
    }
    var gp = new ma("string", "function");
    P.getBuilders = function() {
        var a = new ma("string", "function"),
        b;
        for (b in gp) if (b !== b.toLowerCase()) {
            var c = gp[b];
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    var ip;
    P.defineBuilder = ip = function(a, b) {
        D.h(a, "string", P, "defineBuilder:name");
        D.h(b, "function", P, "defineBuilder:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || D.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        gp.add(a, b)
    };
    var jp;
    P.takeBuilderArgument = jp = function(a, b, c) {
        void 0 === c && (c = null);
        var d = a[1];
        if ("function" === typeof c ? c(d) : "string" === typeof d) return a.splice(1, 1),
        d;
        if (void 0 === b) throw Error("no " + ("function" === typeof c ? "satisfactory": "string") + " argument for GraphObject builder " + a[0]);
        return b
    };
    ip("Button",
    function() {
        var a = new Ba(Qg);
        a.addColorStop(0, "white");
        a.addColorStop(1, "lightgray");
        var b = new Ba(Qg);
        b.addColorStop(0, "white");
        b.addColorStop(1, "dodgerblue");
        a = fp(x, Kl, {
            tu: !0,
            iF: function(a, b) {
                var e = a.Ed("ButtonBorder");
                null !== e && (e.fill = b ? a._buttonFillNormal: a._buttonFillDisabled)
            },
            _buttonFillNormal: a,
            _buttonStrokeNormal: "gray",
            _buttonFillOver: b,
            _buttonStrokeOver: "blue",
            _buttonFillDisabled: "darkgray"
        },
        fp(z, {
            name: "ButtonBorder",
            Jb: "Rectangle",
            C: new R(0, 0, 2.761423749153968, 2.761423749153968),
            D: new R(1, 1, -2.761423749153968, -2.761423749153968),
            fill: a,
            stroke: "gray"
        }));
        a.Iu = function(a, b) {
            if (b.vu()) {
                var e = b.Ed("ButtonBorder");
                if (e instanceof z) {
                    var g = b._buttonFillOver;
                    b._buttonFillNormal = e.fill;
                    e.fill = g;
                    g = b._buttonStrokeOver;
                    b._buttonStrokeNormal = e.stroke;
                    e.stroke = g
                }
            }
        };
        a.Ju = function(a, b) {
            if (b.vu()) {
                var e = b.Ed("ButtonBorder");
                e instanceof z && (e.fill = b._buttonFillNormal, e.stroke = b._buttonStrokeNormal)
            }
        };
        return a
    });
    ip("TreeExpanderButton",
    function() {
        var a = fp("Button", {
            _treeExpandedFigure: "MinusLine",
            _treeCollapsedFigure: "PlusLine"
        },
        fp(z, {
            name: "ButtonIcon",
            Jb: "MinusLine",
            Ea: ae
        },
        (new ih("figure", "isTreeExpanded",
        function(a, c) {
            var d = c.Q;
            return a ? d._treeExpandedFigure: d._treeCollapsedFigure
        })).ly()), {
            visible: !1
        },
        (new ih("visible", "isTreeLeaf",
        function(a) {
            return ! a
        })).ly());
        a.click = function(a, c) {
            var d = c.Y;
            d instanceof da && (d = d.Zf);
            if (d instanceof G) {
                var e = d.g;
                if (null !== e) {
                    e = e.wb;
                    if (d.rd) {
                        if (!e.canCollapseTree(d)) return
                    } else if (!e.canExpandTree(d)) return;
                    a.Lc = !0;
                    d.rd ? e.collapseTree(d) : e.expandTree(d)
                }
            }
        };
        return a
    });
    ip("SubGraphExpanderButton",
    function() {
        var a = fp("Button", {
            _subGraphExpandedFigure: "MinusLine",
            _subGraphCollapsedFigure: "PlusLine"
        },
        fp(z, {
            name: "ButtonIcon",
            Jb: "MinusLine",
            Ea: ae
        },
        (new ih("figure", "isSubGraphExpanded",
        function(a, c) {
            var d = c.Q;
            return a ? d._subGraphExpandedFigure: d._subGraphCollapsedFigure
        })).ly()));
        a.click = function(a, c) {
            var d = c.Y;
            d instanceof da && (d = d.Zf);
            if (d instanceof I) {
                var e = d.g;
                if (null !== e) {
                    e = e.wb;
                    if (d.Je) {
                        if (!e.canCollapseSubGraph(d)) return
                    } else if (!e.canExpandSubGraph(d)) return;
                    a.Lc = !0;
                    d.Je ? e.collapseSubGraph(d) : e.expandSubGraph(d)
                }
            }
        };
        return a
    });
    ip("ContextMenuButton",
    function() {
        var a = fp("Button");
        a.stretch = vo;
        var b = a.Ed("ButtonBorder");
        b instanceof z && (b.Jb = "Rectangle", b.C = new R(0, 0, 2, 3), b.D = new R(1, 1, -2, -2));
        return a
    });
    ip("PanelExpanderButton",
    function(a) {
        var b = jp(a, "COLLAPSIBLE"),
        c = fp("Button", {
            _buttonExpandedFigure: "TriangleUp",
            _buttonCollapsedFigure: "TriangleDown"
        },
        fp(z, "TriangleUp", {
            name: "ButtonIcon",
            Ea: new Ca(6, 4)
        },
        (new ih("figure", "visible",
        function(a) {
            return a ? c._buttonExpandedFigure: c._buttonCollapsedFigure
        })).ly(b)));
        a = c.Ed("ButtonBorder");
        a instanceof z && (a.stroke = null, a.fill = "transparent");
        c.click = function(a, c) {
            var g = c.g;
            if (null !== g && !g.mb) {
                var h = c.lm();
                null === h && (h = c.Y);
                null !== h && (h = h.Ed(b), null !== h && (g.$b("Collapse/Expand Panel"), h.visible = !h.visible, g.Td("Collapse/Expand Panel")))
            }
        };
        return c
    });
    ip("CheckBoxButton",
    function(a) {
        var b = jp(a);
        a = fp("Button", {
            "ButtonBorder.fill": "white",
            "ButtonBorder.stroke": "gray",
            width: 14,
            height: 14
        },
        fp(z, {
            name: "ButtonIcon",
            II: "M0 4 L3 9 9 0",
            jb: 2,
            stretch: rf,
            NA: Uj,
            visible: !1
        },
        "" !== b ? (new ih("visible", b)).xJ() : []));
        a.click = function(a, d) {
            var e = a.g;
            if (! (null === e || e.mb || "" !== b && e.ga.mb)) {
                a.Lc = !0;
                var g = d.Ed("ButtonIcon");
                e.$b("checkbox");
                g.visible = !g.visible;
                "function" === typeof d._doClick && d._doClick(a, d);
                e.Td("checkbox")
            }
        };
        return a
    });
    ip("CheckBox",
    function(a) {
        a = jp(a);
        a = fp("CheckBoxButton", a, {
            name: "Button",
            margin: new Hb(0, 1, 0, 0)
        });
        var b = fp(x, "Horizontal", a, {
            tu: !0,
            margin: 1,
            _buttonFillNormal: a._buttonFillNormal,
            _buttonStrokeNormal: a._buttonStrokeNormal,
            _buttonFillOver: a._buttonFillOver,
            _buttonStrokeOver: a._buttonStrokeOver,
            _buttonFillDisabled: a._buttonFillDisabled,
            Iu: a.Iu,
            Ju: a.Ju,
            click: a.click,
            _buttonClick: a.click
        });
        a.Iu = null;
        a.Ju = null;
        a.click = null;
        return b
    });
    function Ao() {
        this.Qr = this.Si = this.uj = this.Yq = this.ar = this.$q = this.Zq = this.ij = this.Gs = this.Fs = this.jj = this.kj = this.lj = this.Is = this.Hs = this.Ri = this.Wi = this.Pi = null
    }
    Ao.prototype.copy = function() {
        var a = new Ao;
        a.Pi = this.Pi;
        a.Wi = this.Wi;
        a.Ri = this.Ri;
        a.Hs = this.Hs;
        a.Is = this.Is;
        a.lj = this.lj;
        a.kj = this.kj;
        a.jj = this.jj;
        a.Fs = this.Fs;
        a.Gs = this.Gs;
        a.ij = this.ij;
        a.Zq = this.Zq;
        a.$q = this.$q;
        a.ar = this.ar;
        a.Yq = this.Yq;
        a.uj = this.uj;
        a.Si = this.Si;
        a.Qr = this.Qr;
        return a
    };
    function x(a) {
        P.call(this);
        void 0 === a ? this.ca = Xj: (D.Ca(a, x, x, "type"), this.ca = a);
        this.xa = new K(P);
        this.of = Ud;
        this.ca === Nl && (this.Yn = !0);
        this.Dr = Tc;
        this.Vi = to;
        this.ca === ea && kp(this);
        this.Xp = Uj;
        this.as = ce;
        this.bs = Gd;
        this.Yr = 0;
        this.Xr = 100;
        this.$r = 10;
        this.Zr = 0;
        this.pl = this.Nd = this.kk = this.Pm = this.Rm = null;
        this.ns = NaN;
        this.Eg = this.cj = null;
        this.qp = "category";
        this.Dg = null;
        this.wj = new B(NaN, NaN, NaN, NaN);
        this.Ck = this.jt = this.wn = null;
        this.$j = ""
    }
    D.Sa(x, P);
    D.Ai(x);
    D.ja("Panel", x);
    function kp(a) {
        a.dk = Ud;
        a.bi = 1;
        a.Ui = null;
        a.Mm = null;
        a.ai = 1;
        a.$h = null;
        a.Lm = null;
        a.he = [];
        a.de = [];
        a.nn = lp;
        a.Km = lp;
        a.vj = 0;
        a.fj = 0
    }
    x.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.ca = this.ca;
        a.of = this.of.V();
        a.Dr = this.Dr.V();
        a.Vi = this.Vi;
        if (a.ca === ea) {
            a.dk = this.dk.V();
            a.bi = this.bi;
            a.Ui = this.Ui;
            a.Mm = this.Mm;
            a.ai = this.ai;
            a.$h = this.$h;
            a.Lm = this.Lm;
            var b = [];
            if (0 < this.he.length) for (var c = this.he,
            d = c.length,
            e = 0; e < d; e++) if (void 0 !== c[e]) {
                var g = c[e].copy();
                g.ym(a);
                b[e] = g
            }
            a.he = b;
            b = [];
            if (0 < this.de.length) for (c = this.de, d = c.length, e = 0; e < d; e++) void 0 !== c[e] && (g = c[e].copy(), g.ym(a), b[e] = g);
            a.de = b;
            a.nn = this.nn;
            a.Km = this.Km;
            a.vj = this.vj;
            a.fj = this.fj
        }
        a.Xp = this.Xp;
        a.as = this.as.V();
        a.bs = this.bs.V();
        a.Yr = this.Yr;
        a.Xr = this.Xr;
        a.$r = this.$r;
        a.Zr = this.Zr;
        a.Rm = this.Rm;
        a.kk = this.kk;
        a.Nd = this.Nd;
        a.pl = this.pl;
        a.ns = this.ns;
        a.cj = this.cj;
        a.Eg = this.Eg;
        a.qp = this.qp;
        a.wj.assign(this.wj);
        a.$j = this.$j;
        null !== this.jt && (a.jt = this.jt)
    };
    x.prototype.Bi = function(a) {
        P.prototype.Bi.call(this, a);
        a.xa = this.xa;
        for (var b = a.xa.o,
        c = b.length,
        d = 0; d < c; d++) b[d].Bh = a;
        a.wn = null
    };
    x.prototype.copy = function() {
        var a = P.prototype.copy.call(this);
        if (null !== a) {
            for (var b = this.xa.o,
            c = b.length,
            d = 0; d < c; d++) {
                var e = b[d].copy(),
                g = a;
                e.ym(g);
                e.kn = null;
                var h = g.xa,
                k = h.count;
                h.Xd(k, e);
                h = g.Y;
                if (null !== h) {
                    h.Jl = null;
                    null !== e.sd && h instanceof G && (h.Uk = !0);
                    var l = g.g;
                    null !== l && l.ra.nb || h.hd(mg, "elements", g, null, e, null, k)
                }
            }
            return a
        }
        return null
    };
    x.prototype.nc = function(a) {
        a.Ne === x ? this.type = a: P.prototype.nc.call(this, a)
    };
    x.prototype.toString = function() {
        return "Panel(" + this.type + ")#" + D.Fd(this)
    };
    var Xj;
    x.Position = Xj = D.s(x, "Position", 0);
    x.Horizontal = D.s(x, "Horizontal", 1);
    var Jl;
    x.Vertical = Jl = D.s(x, "Vertical", 2);
    var Qj;
    x.Spot = Qj = D.s(x, "Spot", 3);
    var Kl;
    x.Auto = Kl = D.s(x, "Auto", 4);
    var ea;
    x.Table = ea = D.s(x, "Table", 5);
    x.Viewbox = D.s(x, "Viewbox", 6);
    var Oo;
    x.TableRow = Oo = D.s(x, "TableRow", 7);
    var Po;
    x.TableColumn = Po = D.s(x, "TableColumn", 8);
    var kj;
    x.Link = kj = D.s(x, "Link", 9);
    var Nl;
    x.Grid = Nl = D.s(x, "Grid", 10);
    var mp;
    x.Graduated = mp = D.s(x, "Graduated", 11);
    D.defineProperty(x, {
        type: "type"
    },
    function() {
        return this.ca
    },
    function(a) {
        var b = this.ca;
        b !== a && (v && D.Ca(a, x, x, "type"), b !== Oo && b !== Po || D.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: " + a), this.ca = a, this.ca === Nl ? this.Yn = !0 : this.ca === ea && kp(this), this.K(), this.i("type", b, a))
    });
    D.w(x, {
        elements: "elements"
    },
    function() {
        return this.xa.j
    });
    D.w(x, {
        Ga: "naturalBounds"
    },
    function() {
        return this.$c
    });
    D.defineProperty(x, {
        padding: "padding"
    },
    function() {
        return this.of
    },
    function(a) {
        "number" === typeof a ? (0 > a && D.ua(a, ">= 0", x, "padding"), a = new Hb(a)) : (D.l(a, Hb, x, "padding"), 0 > a.left && D.ua(a.left, ">= 0", x, "padding:value.left"), 0 > a.right && D.ua(a.right, ">= 0", x, "padding:value.right"), 0 > a.top && D.ua(a.top, ">= 0", x, "padding:value.top"), 0 > a.bottom && D.ua(a.bottom, ">= 0", x, "padding:value.bottom"));
        var b = this.of;
        b.O(a) || (this.of = a = a.V(), this.K(), this.i("padding", b, a))
    });
    D.defineProperty(x, {
        gm: "defaultAlignment"
    },
    function() {
        return this.Dr
    },
    function(a) {
        var b = this.Dr;
        b.O(a) || (v && D.l(a, R, x, "defaultAlignment"), this.Dr = a = a.V(), this.K(), this.i("defaultAlignment", b, a))
    });
    D.defineProperty(x, {
        je: "defaultStretch"
    },
    function() {
        return this.Vi
    },
    function(a) {
        var b = this.Vi;
        b !== a && (D.Ca(a, P, x, "defaultStretch"), this.Vi = a, this.K(), this.i("defaultStretch", b, a))
    });
    D.defineProperty(x, {
        qL: "defaultSeparatorPadding"
    },
    function() {
        return void 0 === this.dk ? Ud: this.dk
    },
    function(a) {
        if (void 0 !== this.dk) {
            "number" === typeof a ? a = new Hb(a) : v && D.l(a, Hb, x, "defaultSeparatorPadding");
            var b = this.dk;
            b.O(a) || (this.dk = a = a.V(), this.K(), this.i("defaultSeparatorPadding", b, a))
        }
    });
    D.defineProperty(x, {
        oL: "defaultRowSeparatorStroke"
    },
    function() {
        return void 0 === this.Ui ? null: this.Ui
    },
    function(a) {
        var b = this.Ui;
        b !== a && (null === a || "string" === typeof a || a instanceof Ba) && (a instanceof Ba && a.freeze(), this.Ui = a, this.qa(), this.i("defaultRowSeparatorStroke", b, a))
    });
    D.defineProperty(x, {
        pL: "defaultRowSeparatorStrokeWidth"
    },
    function() {
        return void 0 === this.bi ? 1 : this.bi
    },
    function(a) {
        if (void 0 !== this.bi) {
            var b = this.bi;
            b !== a && isFinite(a) && 0 <= a && (this.bi = a, this.K(), this.i("defaultRowSeparatorStrokeWidth", b, a))
        }
    });
    D.defineProperty(x, {
        nL: "defaultRowSeparatorDashArray"
    },
    function() {
        return void 0 === this.Mm ? null: this.Mm
    },
    function(a) {
        if (void 0 !== this.Mm) {
            var b = this.Mm;
            if (b !== a) {
                null === a || Array.isArray(a) || D.gc(a, "Array", x, "defaultRowSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length,
                    d = 0,
                    e = 0; e < c; e++) {
                        var g = a[e];
                        "number" === typeof g && 0 <= g && isFinite(g) || D.k("defaultRowSeparatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                        d += g
                    }
                    if (0 === d) {
                        if (null === b) return;
                        a = null
                    }
                }
                this.Mm = a;
                this.qa();
                this.i("defaultRowSeparatorDashArray", b, a)
            }
        }
    });
    D.defineProperty(x, {
        iL: "defaultColumnSeparatorStroke"
    },
    function() {
        return void 0 === this.$h ? null: this.$h
    },
    function(a) {
        if (void 0 !== this.$h) {
            var b = this.$h;
            b !== a && (null === a || "string" === typeof a || a instanceof Ba) && (a instanceof Ba && a.freeze(), this.$h = a, this.qa(), this.i("defaultColumnSeparatorStroke", b, a))
        }
    });
    D.defineProperty(x, {
        jL: "defaultColumnSeparatorStrokeWidth"
    },
    function() {
        return void 0 === this.ai ? 1 : this.ai
    },
    function(a) {
        if (void 0 !== this.ai) {
            var b = this.ai;
            b !== a && isFinite(a) && 0 <= a && (this.ai = a, this.K(), this.i("defaultColumnSeparatorStrokeWidth", b, a))
        }
    });
    D.defineProperty(x, {
        hL: "defaultColumnSeparatorDashArray"
    },
    function() {
        return void 0 === this.Lm ? null: this.Lm
    },
    function(a) {
        if (void 0 !== this.Lm) {
            var b = this.Lm;
            if (b !== a) {
                null === a || Array.isArray(a) || D.gc(a, "Array", x, "defaultColumnSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length,
                    d = 0,
                    e = 0; e < c; e++) {
                        var g = a[e];
                        "number" === typeof g && 0 <= g && isFinite(g) || D.k("defaultColumnSeparatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                        d += g
                    }
                    if (0 === d) {
                        if (null === b) return;
                        a = null
                    }
                }
                this.Lm = a;
                this.qa();
                this.i("defaultColumnSeparatorDashArray", b, a)
            }
        }
    });
    D.defineProperty(x, {
        GM: "viewboxStretch"
    },
    function() {
        return this.Xp
    },
    function(a) {
        var b = this.Xp;
        b !== a && (D.Ca(a, P, x, "viewboxStretch"), this.Xp = a, this.K(), this.i("viewboxStretch", b, a))
    });
    D.defineProperty(x, {
        Ox: "gridCellSize"
    },
    function() {
        return this.as
    },
    function(a) {
        var b = this.as;
        if (!b.O(a)) {
            D.l(a, Ca, x, "gridCellSize");
            a.F() && 0 !== a.width && 0 !== a.height || D.k("Invalid Panel.gridCellSize: " + a);
            this.as = a.V();
            var c = this.g;
            null !== c && this === c.Vn && fm(c);
            this.qa();
            this.i("gridCellSize", b, a)
        }
    });
    D.defineProperty(x, {
        BF: "gridOrigin"
    },
    function() {
        return this.bs
    },
    function(a) {
        var b = this.bs;
        if (!b.O(a)) {
            D.l(a, O, x, "gridOrigin");
            a.F() || D.k("Invalid Panel.gridOrigin: " + a);
            this.bs = a.V();
            var c = this.g;
            null !== c && this === c.Vn && fm(c);
            this.qa();
            this.i("gridOrigin", b, a)
        }
    });
    D.defineProperty(x, {
        Tk: "graduatedMin"
    },
    function() {
        return this.Yr
    },
    function(a) {
        D.p(a, x, "graduatedMin");
        var b = this.Yr;
        b !== a && (this.Yr = a, this.K(), this.i("graduatedMin", b, a), Eo(this) && (a = this.Y, null !== a && Fo(this, a, "graduatedRange")))
    });
    D.defineProperty(x, {
        QA: "graduatedMax"
    },
    function() {
        return this.Xr
    },
    function(a) {
        D.p(a, x, "graduatedMax");
        var b = this.Xr;
        b !== a && (this.Xr = a, this.K(), this.i("graduatedMax", b, a), Eo(this) && (a = this.Y, null !== a && Fo(this, a, "graduatedRange")))
    });
    D.w(x, {
        Nx: "graduatedRange"
    },
    function() {
        return this.QA - this.Tk
    });
    D.defineProperty(x, {
        RA: "graduatedTickUnit"
    },
    function() {
        return this.$r
    },
    function(a) {
        D.p(a, x, "graduatedTickUnit");
        var b = this.$r;
        b !== a && 0 < a && (this.$r = a, this.K(), this.i("graduatedTickUnit", b, a))
    });
    D.defineProperty(x, {
        AF: "graduatedTickBase"
    },
    function() {
        return this.Zr
    },
    function(a) {
        D.p(a, x, "graduatedTickBase");
        var b = this.Zr;
        b !== a && (this.Zr = a, this.K(), this.i("graduatedTickBase", b, a))
    });
    f = x.prototype;
    f.yw = function(a) {
        P.prototype.yw.call(this, a);
        for (var b = this.xa.o,
        c = b.length,
        d = 0; d < c; d++) b[d].yw(a)
    };
    f.Pk = function(a, b) {
        if (this.ca === Nl) {
            var c = this.Fj() * b.scale;
            0 >= c && (c = 1);
            var d = this.Ox,
            e = d.width,
            d = d.height,
            g = this.Ga,
            h = g.width,
            g = g.height,
            k = Math.ceil(h / e),
            l = Math.ceil(g / d),
            m = this.BF;
            a.save();
            a.beginPath();
            a.rect(0, 0, h, g);
            a.clip();
            for (var n = [], p = this.xa.o, q = p.length, r = 0; r < q; r++) {
                var s = p[r],
                u = [];
                n.push(u);
                if (s.visible) for (var s = bn(s.Jb), t = r + 1; t < q; t++) {
                    var y = p[t];
                    y.visible && bn(y.Jb) === s && (y = y.interval, 2 <= y && u.push(y))
                }
            }
            p = this.xa.o;
            q = p.length;
            for (r = 0; r < q; r++) {
                var w = p[r];
                if (w.visible && (u = w.interval, !(2 > e * u * c))) {
                    var s = n[r],
                    t = !1,
                    C = !0,
                    A = w.WG;
                    null !== A && (t = !0, C = a.GA(A, w.Af));
                    if ("LineV" === w.Jb) {
                        a.lineWidth = w.jb;
                        So(this, a, w.stroke, !1, !1);
                        a.beginPath();
                        for (var N = y = Math.floor( - m.x / e); N <= y + k; N++) {
                            var H = N * e + m.x;
                            0 <= H && H < h && Jp(N, u, s) && (t && !C ? Do(a, H, 0, H, g, A, w.Af) : (a.moveTo(H, 0), a.lineTo(H, g)))
                        }
                        a.stroke()
                    } else if ("LineH" === w.Jb) {
                        a.lineWidth = w.jb;
                        So(this, a, w.stroke, !1, !1);
                        a.beginPath();
                        for (N = y = Math.floor( - m.y / d); N <= y + l; N++) H = N * d + m.y,
                        0 <= H && H <= g && Jp(N, u, s) && (t && !C ? Do(a, 0, H, h, H, A, w.Af) : (a.moveTo(0, H), a.lineTo(h, H)));
                        a.stroke()
                    } else if ("BarV" === w.Jb) for (So(this, a, w.fill, !0, !1), w = w.width, isNaN(w) && (w = e), N = y = Math.floor( - m.x / e); N <= y + k; N++) H = N * e + m.x,
                    0 <= H && H < h && Jp(N, u, s) && a.fillRect(H, 0, w, g);
                    else if ("BarH" === w.Jb) for (So(this, a, w.fill, !0, !1), w = w.height, isNaN(w) && (w = d), N = y = Math.floor( - m.y / d); N <= y + l; N++) H = N * d + m.y,
                    0 <= H && H <= g && Jp(N, u, s) && a.fillRect(0, H, h, w);
                    t && a.BA()
                }
            }
            a.restore();
            a.Be(!1)
        } else if (this.ca === mp) {
            e = this.Ga;
            c = e.width;
            e = e.height;
            a.save();
            a.beginPath();
            a.rect( - 1, -1, c + 1, e + 1);
            a.clip();
            c = this.Vd();
            c.Ee(a, b);
            e = this.Fj() * b.scale;
            0 >= e && (e = 1);
            d = c.$;
            h = this.xa.o;
            g = this.Rm;
            k = h.length;
            for (l = 0; l < k; l++) if (q = h[l], m = g[l], n = m.length, q.visible && q !== c && 0 !== m.length) if (q instanceof z) {
                if (! (2 > this.RA * q.interval * e)) for (r = q.Fa, u = q.jb * q.scale, s = q.Gh, s.Zd() && (s = dc), p = 0; p < n; p++) {
                    var t = q,
                    y = m[p][0],
                    N = d,
                    w = m[p][1],
                    C = r,
                    A = u,
                    H = s,
                    W = t.Hc;
                    W.reset();
                    W.translate(y.x + N.x, y.y + N.y);
                    W.rotate(w + t.angle, 0, 0);
                    W.translate( - C.width * H.x + H.offsetX + A / 2, -C.height * H.y + H.offsetY + A / 2);
                    W.scale(t.scale, t.scale);
                    Uo(t, !1);
                    t.Li.set(t.Hc);
                    t.Xo = t.scale;
                    Vo(t, !1);
                    q.Ee(a, b);
                    q.Hc.reset()
                }
            } else if (q instanceof na) for (null === this.Ck && (this.Ck = new na), r = this.Ck, Kp(q, r), p = 0; p < n; p++) y = m[p],
            3 < y.length && (s = y[6], r.Sd = y[2], r.rg = y[3], r.ue = y[4], r.gi = y[5], r.$c = y[8], r.oc(s.x, s.y, s.width, s.height), q = r, u = d, t = y[7], y = y[8], N = q.Hc, N.reset(), N.translate(s.x + u.x, s.y + u.y), N.translate( - t.x, -t.y), Ho(q, N, y.x, y.y, y.width, y.height), Uo(q, !1), q.Li.set(q.Hc), q.Xo = q.scale, Vo(q, !1), r.Ee(a, b));
            a.restore();
            a.Be(!0)
        } else {
            this.ca === ea && (a.lineCap = "butt", Lp(this, a, !0, this.he, !0), Lp(this, a, !1, this.de, !0), Mp(this, a, !0, this.he), Mp(this, a, !1, this.de), Lp(this, a, !0, this.he, !1), Lp(this, a, !1, this.de, !1));
            if (c = this.yq) a.save(),
            v && this.type !== Qj && D.trace("Warning: Panel.isClipping set on non-Spot Panel: " + this.toString());
            e = this.Vd();
            d = this.xa.o;
            h = d.length;
            for (g = 0; g < h; g++) k = d[g],
            c && k === e && (a.eq = !0),
            k.Ee(a, b),
            c && k === e && (a.eq = !1);
            c && (a.restore(), a.Be(!0));
            v && v.AI && this instanceof J && v.zI(a, b, this)
        }
    };
    function Kp(a, b) {
        b.T = a.T | 6144;
        b.Fc = a.Fc;
        b.Kb = a.Kb;
        b.hc = a.hc;
        b.Ye = a.Ye.V();
        b.li = a.li.V();
        b.ki = a.ki.V();
        b.gj = a.gj.copy();
        b.Bb = a.Bb;
        b.rg = a.rg;
        b.Mg = a.Mg;
        b.cn = a.cn.V();
        b.re = a.re.V();
        b.Hm = a.Hm.V();
        b.on = a.on;
        b.pn = a.pn.V();
        b.qn = a.qn;
        null !== a.ug && (b.ug = a.ug.copy());
        b.un = a.un;
        a instanceof na && (b.Sd = a.Sd, b.xc = a.xc, b.xg = a.xg, b.Pl = a.Pl, b.wg = a.wg, b.Tl = a.Tl, b.Vm = a.Vm, b.qk = a.qk, b.pk = a.pk, b.nj = a.nj, b.Ik = a.Ik, b.Om = null, b.si = a.si, b.ti = a.ti, b.vh = a.vh, b.tp = a.tp, b.Bg = a.Bg, b.Ag = a.Ag, b.zg = a.zg, b.Qm = a.Qm)
    }
    function Mp(a, b, c, d) {
        for (var e = d.length,
        g = a.$,
        h = c ? a.me(0) : a.le(0), k = 0; k < e; k++) {
            var l = d[k];
            if (void 0 !== l && l !== h && 0 !== l.Qa) {
                if (c) {
                    if (l.position > g.height) continue
                } else if (l.position > g.width) continue;
                var m = l.Qq;
                isNaN(m) && (m = c ? a.bi: a.ai);
                var n = l.Pq;
                null === n && (n = c ? a.Ui: a.$h);
                0 !== m && null !== n && (So(a, b, n, !1, !1), b.beginPath(), n = l.position + m, c ? n > g.height && (m -= n - g.height) : n > g.width && (m -= n - g.width), l = l.position + m / 2, b.lineWidth = m, n = a.padding, c ? (l += n.top, m = n.left, n = g.width - n.right, b.moveTo(m, l), b.lineTo(n, l)) : (l += n.left, m = n.top, n = g.height - n.bottom, b.moveTo(l, m), b.lineTo(l, n)), b.stroke())
            }
        }
    }
    function Lp(a, b, c, d, e) {
        for (var g = d.length,
        h = a.$,
        k = 0; k < g; k++) {
            var l = d[k];
            if (void 0 !== l && null !== l.background && l.zA !== e && 0 !== l.Qa) {
                var m = c ? h.height: h.width;
                if (! (l.position > m)) {
                    var n = l.ff(),
                    p = l.Qq;
                    isNaN(p) && (p = c ? a.bi: a.ai);
                    var q = l.Pq;
                    null === q && (q = c ? a.Ui: a.$h);
                    null === q && (p = 0);
                    n -= p;
                    p = l.position + p;
                    n += l.Qa;
                    p + n > m && (n = m - p);
                    0 >= n || (m = a.padding, So(a, b, l.background, !0, !1), c ? b.fillRect(m.left, p + m.top, h.width - (m.left + m.right), n) : b.fillRect(p + m.left, m.top, n, h.height - (m.top + m.bottom)))
                }
            }
        }
    }
    function Jp(a, b, c) {
        if (0 !== a % b) return ! 1;
        b = c.length;
        for (var d = 0; d < b; d++) if (0 === a % c[d]) return ! 1;
        return ! 0
    }
    function bn(a) {
        return "LineV" === a || "BarV" === a
    }
    f.Tn = function(a, b, c, d, e) {
        var g = this.kh(),
        h = this.transform,
        k = 1 / (h.m11 * h.m22 - h.m12 * h.m21),
        l = h.m22 * k,
        m = -h.m12 * k,
        n = -h.m21 * k,
        p = h.m11 * k,
        q = k * (h.m21 * h.dy - h.m22 * h.dx),
        r = k * (h.m12 * h.dx - h.m11 * h.dy);
        if (null !== this.Zl) return h = this.$,
        Ne(h.left, h.top, h.right, h.bottom, a, b, c, d, e);
        if (null !== this.background) g = a * l + b * n + q,
        k = a * m + b * p + r,
        a = c * l + d * n + q,
        l = c * m + d * p + r,
        e.m(0, 0),
        c = this.Ga,
        c = Ne(0, 0, c.width, c.height, g, k, a, l, e),
        e.transform(h);
        else {
            g || (l = 1, n = m = 0, p = 1, r = q = 0);
            k = a * l + b * n + q;
            a = a * m + b * p + r;
            l = c * l + d * n + q;
            d = c * m + d * p + r;
            e.m(l, d);
            m = (l - k) * (l - k) + (d - a) * (d - a);
            c = !1;
            p = this.xa.o;
            r = p.length;
            n = D.P();
            q = null;
            b = Infinity;
            var s = null;
            this.yq && (s = D.P(), q = this.Vd(), (c = q.Tn(k, a, l, d, s)) && (b = (k - s.x) * (k - s.x) + (a - s.y) * (a - s.y)));
            for (var u = 0; u < r; u++) {
                var t = p[u];
                t.visible && t !== q && t.Tn(k, a, l, d, n) && (c = !0, t = (k - n.x) * (k - n.x) + (a - n.y) * (a - n.y), t < m && (m = t, e.set(n)))
            }
            this.yq && (b > m && e.set(s), D.A(s));
            D.A(n);
            g && e.transform(h)
        }
        return c
    };
    f.K = function(a) {
        P.prototype.K.call(this, a);
        if (this.ca === Kl || this.ca === kj) a = this.Vd(),
        null !== a && a.K(!0);
        a = this.xa.o;
        for (var b = a.length,
        c = 0; c < b; c++) {
            var d = a[c];
            if (!d.Ea.F()) {
                var e = Jo(d, !1); (d instanceof Rj || d instanceof x || d instanceof na || e !== Sj) && d.K(!0)
            }
        }
    };
    f.xq = function() {
        if (!1 === Hm(this)) {
            em(this, !0);
            Ko(this, !0);
            for (var a = this.xa.o,
            b = a.length,
            c = 0; c < b; c++) a[c].xq()
        }
    };
    f.$i = function() {
        if (0 !== (this.T & 2048) === !1) {
            Uo(this, !0);
            Vo(this, !0);
            for (var a = this.xa.o,
            b = a.length,
            c = 0; c < b; c++) a[c].XA()
        }
    };
    f.XA = function() {
        Vo(this, !0);
        for (var a = this.xa.o,
        b = a.length,
        c = 0; c < b; c++) a[c].XA()
    };
    f.ho = function(a, b, c, d) {
        var e = this.wj;
        e.width = 0;
        e.height = 0;
        var g = this.Ea,
        h = this.hg;
        void 0 === c && (c = h.width, d = h.height);
        c = Math.max(c, h.width);
        d = Math.max(d, h.height);
        var k = this.kf;
        isNaN(g.width) || (a = Math.min(g.width, k.width));
        isNaN(g.height) || (b = Math.min(g.height, k.height));
        a = Math.max(c, a);
        b = Math.max(d, b);
        var l = this.padding;
        a = Math.max(a - l.left - l.right, 0);
        b = Math.max(b - l.top - l.bottom, 0);
        var m = this.xa.o;
        if (0 !== m.length) {
            var n = this.ca.Xb;
            switch (n) {
            case "Position":
                var p = a,
                q = b,
                r = c,
                s = d,
                u = m.length;
                e.x = 0;
                e.y = 0;
                e.width = 0;
                e.height = 0;
                for (var t = Np(this), y = 0; y < u; y++) {
                    var w = m[y];
                    if (w.visible || w === t) {
                        var C = w.margin,
                        A = C.right + C.left,
                        N = C.top + C.bottom;
                        Ak(w, p, q, r, s);
                        var H = w.Fa,
                        W = Math.max(H.width + A, 0),
                        fa = Math.max(H.height + N, 0),
                        S = w.position.x,
                        ba = w.position.y;
                        isFinite(S) || (S = 0);
                        isFinite(ba) || (ba = 0);
                        if (w instanceof z) {
                            var ia = w;
                            if (ia.NF) var U = ia.jb / 2,
                            S = S - U,
                            ba = ba - U
                        }
                        Ob(e, S, ba, W, fa)
                    }
                }
                break;
            case "Vertical":
                for (var Ua = a,
                lb = c,
                ua = m.length,
                Oa = D.tb(), Fa = Np(this), Vb = 0; Vb < ua; Vb++) {
                    var Rb = m[Vb];
                    if (Rb.visible || Rb === Fa) {
                        var de = Jo(Rb, !1);
                        if (de !== Sj && de !== uo) Oa.push(Rb);
                        else {
                            var sd = Rb.margin,
                            vc = sd.right + sd.left,
                            Bg = sd.top + sd.bottom;
                            Ak(Rb, Ua, Infinity, lb, 0);
                            var Ff = Rb.Fa,
                            Za = Math.max(Ff.width + vc, 0),
                            pb = Math.max(Ff.height + Bg, 0);
                            e.width = Math.max(e.width, Za);
                            e.height += pb
                        }
                    }
                }
                var sa = Oa.length;
                if (0 !== sa) {
                    this.Ea.width ? Ua = Math.min(this.Ea.width, this.kf.width) : 0 !== e.width && (Ua = Math.min(e.width, this.kf.width));
                    for (Vb = 0; Vb < sa; Vb++) if (Rb = Oa[Vb], Rb.visible || Rb === Fa) sd = Rb.margin,
                    vc = sd.right + sd.left,
                    Bg = sd.top + sd.bottom,
                    Ak(Rb, Ua, Infinity, lb, 0),
                    Ff = Rb.Fa,
                    Za = Math.max(Ff.width + vc, 0),
                    pb = Math.max(Ff.height + Bg, 0),
                    e.width = Math.max(e.width, Za),
                    e.height += pb;
                    D.Aa(Oa)
                }
                break;
            case "Horizontal":
                for (var pa = b,
                mb = d,
                nb = m.length,
                ib = D.tb(), ve = Np(this), Id = 0; Id < nb; Id++) {
                    var zb = m[Id];
                    if (zb.visible || zb === ve) {
                        var Oe = Jo(zb, !1);
                        if (Oe !== Sj && Oe !== vo) ib.push(zb);
                        else {
                            var jd = zb.margin,
                            eg = jd.right + jd.left,
                            Gf = jd.top + jd.bottom;
                            Ak(zb, Infinity, pa, 0, mb);
                            var Cg = zb.Fa,
                            ob = Math.max(Cg.width + eg, 0),
                            hc = Math.max(Cg.height + Gf, 0);
                            e.width += ob;
                            e.height = Math.max(e.height, hc)
                        }
                    }
                }
                var Zc = ib.length;
                if (0 !== Zc) {
                    this.Ea.height ? pa = Math.min(this.Ea.height, this.kf.height) : 0 !== e.height && (pa = Math.min(e.height, this.kf.height));
                    for (Id = 0; Id < Zc; Id++) if (zb = ib[Id], zb.visible || zb === ve) jd = zb.margin,
                    eg = jd.right + jd.left,
                    Gf = jd.top + jd.bottom,
                    Ak(zb, Infinity, pa, 0, mb),
                    Cg = zb.Fa,
                    ob = Math.max(Cg.width + eg, 0),
                    hc = Math.max(Cg.height + Gf, 0),
                    e.width += ob,
                    e.height = Math.max(e.height, hc);
                    D.Aa(ib)
                }
                break;
            case "Spot":
                a:
                {
                    var fg = a,
                    Cb = b,
                    Sb = c,
                    we = d,
                    Dg = m.length,
                    Jd = this.Vd(),
                    qb = Jd.margin,
                    Nc = 0,
                    Hf = 0,
                    Pe = qb.right + qb.left,
                    Zh = qb.top + qb.bottom;
                    Ak(Jd, fg, Cb, Sb, we);
                    for (var Va = Jd.Fa,
                    eb = Va.width,
                    Ac = Va.height,
                    wc = Math.max(eb + Pe, 0), $c = Math.max(Ac + Zh, 0), oh = this.yq, ab = D.gh( - qb.left, -qb.top, wc, $c), Db = !0, Ab = Np(this), Bc = 0; Bc < Dg; Bc++) {
                        var Eb = m[Bc];
                        if (Eb !== Jd && (Eb.visible || Eb === Ab)) {
                            qb = Eb.margin;
                            Nc = qb.right + qb.left;
                            Hf = qb.top + qb.bottom;
                            Ak(Eb, fg, Cb, 0, 0);
                            var Va = Eb.Fa,
                            wc = Math.max(Va.width + Nc, 0),
                            $c = Math.max(Va.height + Hf, 0),
                            tb = Eb.alignment;
                            tb.ed() && (tb = this.gm);
                            tb.fd() || (tb = gc);
                            var Fb = Eb.Gh;
                            Fb.ed() && (Fb = gc);
                            var ee = null;
                            Eb instanceof x && "" !== Eb.$j && (Eb.oc(0, 0, Va.width, Va.height), ee = Eb.Ed(Eb.$j), ee === Eb && (ee = null));
                            var Ib, Mb;
                            if (null !== ee) {
                                for (var Oc = ee.Ga,
                                $h = ee.margin,
                                Nb = D.Fb(Fb.x * Oc.width + Fb.offsetX - $h.left, Fb.y * Oc.height + Fb.offsetY - $h.top); ee !== Eb;) ee.transform.vb(Nb),
                                ee = ee.Q;
                                Ib = tb.x * eb + tb.offsetX - Nb.x;
                                Mb = tb.y * Ac + tb.offsetY - Nb.y;
                                D.A(Nb)
                            } else Ib = tb.x * eb + tb.offsetX - (Fb.x * Va.width - Fb.offsetX) - qb.left,
                            Mb = tb.y * Ac + tb.offsetY - (Fb.y * Va.height - Fb.offsetY) - qb.top;
                            Db ? (Db = !1, e.x = Ib, e.y = Mb, e.width = wc, e.height = $c) : Ob(e, Ib, Mb, wc, $c)
                        }
                    }
                    Db ? e.assign(ab) : oh ? e.HF(ab.x, ab.y, ab.width, ab.height) : Ob(e, ab.x, ab.y, ab.width, ab.height);
                    D.Mb(ab);
                    var Tb = Jd.stretch;
                    Tb === to && (Tb = Jo(Jd, !1));
                    switch (Tb) {
                    case Sj:
                        break a;
                    case rf:
                        if (!isFinite(fg) && !isFinite(Cb)) break a;
                        break;
                    case vo:
                        if (!isFinite(fg)) break a;
                        break;
                    case uo:
                        if (!isFinite(Cb)) break a
                    }
                    Va = Jd.Fa;
                    eb = Va.width;
                    Ac = Va.height;
                    wc = Math.max(eb + Pe, 0);
                    $c = Math.max(Ac + Zh, 0);
                    qb = Jd.margin;
                    ab = D.gh( - qb.left, -qb.top, wc, $c);
                    for (Bc = 0; Bc < Dg; Bc++) Eb = m[Bc],
                    Eb === Jd || !Eb.visible && Eb !== Ab || (qb = Eb.margin, Nc = qb.right + qb.left, Hf = qb.top + qb.bottom, Va = Eb.Fa, wc = Math.max(Va.width + Nc, 0), $c = Math.max(Va.height + Hf, 0), tb = Eb.alignment, tb.ed() && (tb = this.gm), tb.fd() || (tb = gc), Fb = Eb.Gh, Fb.ed() && (Fb = gc), Db ? (Db = !1, e.x = tb.x * eb + tb.offsetX - (Fb.x * Va.width - Fb.offsetX) - qb.left, e.y = tb.y * Ac + tb.offsetY - (Fb.y * Va.height - Fb.offsetY) - qb.top, e.width = wc, e.height = $c) : Ob(e, tb.x * eb + tb.offsetX - (Fb.x * Va.width - Fb.offsetX) - qb.left, tb.y * Ac + tb.offsetY - (Fb.y * Va.height - Fb.offsetY) - qb.top, wc, $c));
                    Db ? e.assign(ab) : oh ? e.HF(ab.x, ab.y, ab.width, ab.height) : Ob(e, ab.x, ab.y, ab.width, ab.height);
                    D.Mb(ab)
                }
                break;
            case "Auto":
                var Cc = a,
                ad = b,
                td = c,
                Eg = d,
                ai = m.length,
                ub = this.Vd(),
                bd = ub.margin,
                bi = Cc,
                Qe = ad,
                ic = bd.right + bd.left,
                xe = bd.top + bd.bottom;
                Ak(ub, Cc, ad, td, Eg);
                var Zb = ub.Fa,
                Dc = 0,
                ud = null;
                ub instanceof z && (ud = ub, Dc = ud.jb * ud.scale);
                var jc = Math.max(Zb.width + ic, 0),
                Wa = Math.max(Zb.height + xe, 0),
                kc = Op(ub),
                ci = kc.x * jc + kc.offsetX,
                ef = kc.y * Wa + kc.offsetY,
                Kd = Pp(ub),
                fe = Kd.x * jc + Kd.offsetX,
                ph = Kd.y * Wa + Kd.offsetY;
                isFinite(Cc) && (bi = Math.max(Math.abs(ci - fe) - Dc, 0));
                isFinite(ad) && (Qe = Math.max(Math.abs(ef - ph) - Dc, 0));
                var Ld = D.Cm();
                Ld.m(0, 0);
                for (var qh = Np(this), pj = 0; pj < ai; pj++) {
                    var rh = m[pj];
                    if (rh !== ub && (rh.visible || rh === qh)) {
                        var bd = rh.margin,
                        Gk = bd.right + bd.left,
                        Gb = bd.top + bd.bottom;
                        Ak(rh, bi, Qe, 0, 0);
                        Zb = rh.Fa;
                        jc = Math.max(Zb.width + Gk, 0);
                        Wa = Math.max(Zb.height + Gb, 0);
                        Ld.m(Math.max(jc, Ld.width), Math.max(Wa, Ld.height))
                    }
                }
                if (1 === ai) e.width = jc,
                e.height = Wa,
                D.Rk(Ld);
                else {
                    var kc = Op(ub),
                    Kd = Pp(ub),
                    ge = 0,
                    kd = 0;
                    Kd.x !== kc.x && Kd.y !== kc.y && (ge = Ld.width / Math.abs(Kd.x - kc.x), kd = Ld.height / Math.abs(Kd.y - kc.y));
                    D.Rk(Ld);
                    Dc = 0;
                    null !== ud && (Dc = ud.jb * ud.scale, Tj(ud) === Uj && (ge = kd = Math.max(ge, kd)));
                    var ge = ge + (Math.abs(kc.offsetX) + Math.abs(Kd.offsetX) + Dc),
                    kd = kd + (Math.abs(kc.offsetY) + Math.abs(Kd.offsetY) + Dc),
                    Re = ub.stretch;
                    Re === to && (Re = Jo(ub, !1));
                    switch (Re) {
                    case Sj:
                        Eg = td = 0;
                        break;
                    case rf:
                        isFinite(Cc) && (ge = Cc);
                        isFinite(ad) && (kd = ad);
                        break;
                    case vo:
                        isFinite(Cc) && (ge = Cc);
                        Eg = 0;
                        break;
                    case uo:
                        td = 0,
                        isFinite(ad) && (kd = ad)
                    }
                    ub.xq();
                    Ak(ub, ge, kd, td, Eg);
                    e.width = ub.Fa.width + ic;
                    e.height = ub.Fa.height + xe
                }
                break;
            case "Table":
                for (var di = a,
                ei = b,
                qj = c,
                rj = d,
                Jb = m.length,
                sh = D.tb(), th = D.tb(), qa = 0; qa < Jb; qa++) {
                    var ca = m[qa],
                    $b = ca instanceof x ? ca: null;
                    if (null === $b || $b.type !== Oo && $b.type !== Po || !ca.visible) sh.push(ca);
                    else {
                        v && ($b.Ea.F() && D.k($b.toString() + " TableRow/TableColumn Panels cannot set a desiredSize: " + $b.Ea.toString()), $b.hg.O(Zd) || D.k($b.toString() + " TableRow/TableColumn Panels cannot set a minSize: " + $b.hg.toString()), $b.kf.O(ke) || D.k($b.toString() + " TableRow/TableColumn Panels cannot set a maxSize: " + $b.kf.toString()));
                        th.push($b);
                        for (var gg = $b.xa.o,
                        fi = gg.length,
                        lc = 0; lc < fi; lc++) {
                            var gi = gg[lc];
                            $b.type === Oo ? gi.Zb = ca.Zb: $b.type === Po && (gi.column = ca.column);
                            sh.push(gi)
                        }
                    }
                }
                Jb = sh.length;
                0 === Jb && (this.me(0), this.le(0));
                for (var mc = [], qa = 0; qa < Jb; qa++) ca = sh[qa],
                em(ca, !0),
                Ko(ca, !0),
                mc[ca.Zb] || (mc[ca.Zb] = []),
                mc[ca.Zb][ca.column] || (mc[ca.Zb][ca.column] = []),
                mc[ca.Zb][ca.column].push(ca);
                D.Aa(sh);
                for (var ff = D.tb(), Se = D.tb(), gf = D.tb(), ye = {
                    count: 0
                },
                ze = {
                    count: 0
                },
                cd = di, Md = ei, uh = this.he, Jb = uh.length, qa = 0; qa < Jb; qa++) {
                    var $ = uh[qa];
                    void 0 !== $ && ($.Qa = 0)
                }
                uh = this.de;
                Jb = uh.length;
                for (qa = 0; qa < Jb; qa++) $ = uh[qa],
                void 0 !== $ && ($.Qa = 0);
                for (var hf = mc.length,
                hg = 0,
                qa = 0; qa < hf; qa++) mc[qa] && (hg = Math.max(hg, mc[qa].length));
                for (var vh = Math.min(this.vj, hf - 1), wh = Math.min(this.fj, hg - 1), Nd = 0, hf = mc.length, Hk = Np(this), qa = 0; qa < hf; qa++) if (mc[qa]) for (var hg = mc[qa].length, vb = this.me(qa), lc = vb.Qa = 0; lc < hg; lc++) if (mc[qa][lc]) {
                    var Xa = this.le(lc);
                    void 0 === ff[lc] && (Xa.Qa = 0, ff[lc] = !0);
                    for (var hm = mc[qa][lc], Ik = hm.length, sj = 0; sj < Ik; sj++) if (ca = hm[sj], ca.visible || ca === Hk) {
                        var hi = 1 < ca.rj || 1 < ca.Qi;
                        hi && (qa < vh || lc < wh || Se.push(ca));
                        var xc = ca.margin,
                        Ae = xc.right + xc.left,
                        vd = xc.top + xc.bottom,
                        Pc = Xo(ca, vb, Xa, !1),
                        Jk = ca.Ea,
                        im = !isNaN(Jk.height),
                        jm = !isNaN(Jk.width) && im;
                        hi || Pc === Sj || jm || qa < vh || lc < wh || (void 0 !== ye[lc] || Pc !== rf && Pc !== vo || (ye[lc] = -1, ye.count++), void 0 !== ze[qa] || Pc !== rf && Pc !== uo || (ze[qa] = -1, ze.count++), gf.push(ca));
                        Ak(ca, Infinity, Infinity, 0, 0);
                        if (! (qa < vh || lc < wh)) {
                            var If = ca.Fa,
                            Wb = Math.max(If.width + Ae, 0),
                            Od = Math.max(If.height + vd, 0);
                            if (1 === ca.rj && (Pc === Sj || Pc === vo)) {
                                var $ = this.me(qa),
                                Pd = $.ff(),
                                Nd = Math.max(Od - $.Qa, 0);
                                Nd + Pd > Md && (Nd = Math.max(Md - Pd, 0));
                                var Ec = 0 === $.Qa;
                                $.Qa += Nd;
                                Md = Math.max(Md - (Nd + (Ec ? Pd: 0)), 0)
                            }
                            1 !== ca.Qi || Pc !== Sj && Pc !== uo || ($ = this.le(lc), Pd = $.ff(), Nd = Math.max(Wb - $.Qa, 0), Nd + Pd > cd && (Nd = Math.max(cd - Pd, 0)), Ec = 0 === $.Qa, $.Qa += Nd, cd = Math.max(cd - (Nd + (Ec ? Pd: 0)), 0));
                            hi && ca.xq()
                        }
                    }
                }
                D.Aa(ff);
                for (var he = 0,
                wd = 0,
                Jb = this.fq,
                qa = 0; qa < Jb; qa++) {
                    var Fg = this.de[qa];
                    void 0 !== Fg && (he += Fg.Za, 0 !== Fg.Za && (he += Fg.ff()))
                }
                Jb = this.Nq;
                for (qa = 0; qa < Jb; qa++) {
                    var tj = this.he[qa];
                    void 0 !== tj && (wd += tj.Za, 0 !== tj.Za && (wd += tj.ff()))
                }
                for (var cd = Math.max(di - he, 0), xh = Md = Math.max(ei - wd, 0), yh = cd, Jb = gf.length, qa = 0; qa < Jb; qa++) {
                    var ca = gf[qa],
                    vb = this.me(ca.Zb),
                    Xa = this.le(ca.column),
                    ii = ca.Fa,
                    xc = ca.margin,
                    Ae = xc.right + xc.left,
                    vd = xc.top + xc.bottom;
                    ye[ca.column] = 0 === Xa.Qa && void 0 !== ye[ca.column] ? Math.max(ii.width + Ae, ye[ca.column]) : null;
                    ze[ca.Zb] = 0 === vb.Qa && void 0 !== ze[ca.Zb] ? Math.max(ii.height + vd, ze[ca.Zb]) : null
                }
                var ji = 0,
                ig = 0,
                nc;
                for (nc in ze)"count" !== nc && (ji += ze[nc]);
                for (nc in ye)"count" !== nc && (ig += ye[nc]);
                for (var Ya = D.Cm(), qa = 0; qa < Jb; qa++) if (ca = gf[qa], ca.visible || ca === Hk) {
                    var vb = this.me(ca.Zb),
                    Xa = this.le(ca.column),
                    Qd = 0;
                    isFinite(Xa.width) ? Qd = Xa.width: (Qd = isFinite(cd) && null !== ye[ca.column] ? 0 === ig ? Xa.Qa + cd: ye[ca.column] / ig * yh: null !== ye[ca.column] ? cd: Xa.Qa || cd, Qd = Math.max(0, Qd - Xa.ff()));
                    var Rd = 0;
                    isFinite(vb.height) ? Rd = vb.height: (Rd = isFinite(Md) && null !== ze[ca.Zb] ? 0 === ji ? vb.Qa + Md: ze[ca.Zb] / ji * xh: null !== ze[ca.Zb] ? Md: vb.Qa || Md, Rd = Math.max(0, Rd - vb.ff()));
                    Ya.m(Math.max(Xa.Pj, Math.min(Qd, Xa.vf)), Math.max(vb.Pj, Math.min(Rd, vb.vf)));
                    Pc = Xo(ca, vb, Xa, !1);
                    switch (Pc) {
                    case vo:
                        Ya.height = Math.max(Ya.height, vb.Qa + Md);
                        break;
                    case uo:
                        Ya.width = Math.max(Ya.width, Xa.Qa + cd)
                    }
                    xc = ca.margin;
                    Ae = xc.right + xc.left;
                    vd = xc.top + xc.bottom;
                    ca.xq();
                    Ak(ca, Ya.width, Ya.height, Xa.Pj, vb.Pj);
                    If = ca.Fa;
                    Wb = Math.max(If.width + Ae, 0);
                    Od = Math.max(If.height + vd, 0);
                    isFinite(cd) && (Wb = Math.min(Wb, Ya.width));
                    isFinite(Md) && (Od = Math.min(Od, Ya.height));
                    var jf = 0,
                    jf = vb.Qa;
                    vb.Qa = Math.max(vb.Qa, Od);
                    Nd = vb.Qa - jf;
                    Md = Math.max(Md - Nd, 0);
                    jf = Xa.Qa;
                    Xa.Qa = Math.max(Xa.Qa, Wb);
                    Nd = Xa.Qa - jf;
                    cd = Math.max(cd - Nd, 0)
                }
                D.Aa(gf);
                for (var Jf = D.Cm(), Jb = Se.length, qa = 0; qa < Jb; qa++) if (ca = Se[qa], ca.visible || ca === Hk) {
                    vb = this.me(ca.Zb);
                    Xa = this.le(ca.column);
                    Ya.m(Math.max(Xa.Pj, Math.min(di, Xa.vf)), Math.max(vb.Pj, Math.min(ei, vb.vf)));
                    Pc = Xo(ca, vb, Xa, !1);
                    switch (Pc) {
                    case rf:
                        0 !== Xa.Qa && (Ya.width = Math.min(Ya.width, Xa.Qa));
                        0 !== vb.Qa && (Ya.height = Math.min(Ya.height, vb.Qa));
                        break;
                    case vo:
                        0 !== Xa.Qa && (Ya.width = Math.min(Ya.width, Xa.Qa));
                        break;
                    case uo:
                        0 !== vb.Qa && (Ya.height = Math.min(Ya.height, vb.Qa))
                    }
                    isFinite(Xa.width) && (Ya.width = Xa.width);
                    isFinite(vb.height) && (Ya.height = vb.height);
                    Jf.m(0, 0);
                    for (var rb = 1; rb < ca.rj && !(ca.Zb + rb >= this.Nq); rb++) $ = this.me(ca.Zb + rb),
                    Jf.height += Math.max($.Pj, isNaN($.pf) ? $.vf: Math.min($.pf, $.vf));
                    for (rb = 1; rb < ca.Qi && !(ca.column + rb >= this.fq); rb++) $ = this.le(ca.column + rb),
                    Jf.width += Math.max($.Pj, isNaN($.pf) ? $.vf: Math.min($.pf, $.vf));
                    Ya.width += Jf.width;
                    Ya.height += Jf.height;
                    xc = ca.margin;
                    Ae = xc.right + xc.left;
                    vd = xc.top + xc.bottom;
                    Ak(ca, Ya.width, Ya.height, qj, rj);
                    for (var If = ca.Fa,
                    Wb = Math.max(If.width + Ae, 0), Od = Math.max(If.height + vd, 0), kf = 0, rb = 0; rb < ca.rj && !(ca.Zb + rb >= this.Nq); rb++) $ = this.me(ca.Zb + rb),
                    kf += $.total || 0;
                    if (kf < Od) {
                        var ld = Od - kf,
                        Gg = Od - kf;
                        if (null !== ca.Iy) for (var lf = ca.Iy,
                        rb = 0; rb < ca.rj && !(0 >= ld) && !(ca.Zb + rb >= this.Nq); rb++) {
                            var $ = this.me(ca.Zb + rb),
                            Fc = $.Za || 0,
                            Kf = lf(ca, $, Gg);
                            v && "number" !== typeof Kf && D.k(ca + " spanAllocation does not return a number: " + Kf);
                            $.Qa = Math.min($.vf, Fc + Kf);
                            $.Za !== Fc && (ld -= $.Za - Fc)
                        }
                        for (; 0 < ld;) {
                            Fc = $.Za || 0;
                            isNaN($.height) && $.vf > Fc && ($.Qa = Math.min($.vf, Fc + ld), $.Za !== Fc && (ld -= $.Za - Fc));
                            if (0 === $.index) break;
                            $ = this.me($.index - 1)
                        }
                    }
                    for (var Te = 0,
                    rb = 0; rb < ca.Qi && !(ca.column + rb >= this.fq); rb++) $ = this.le(ca.column + rb),
                    Te += $.total || 0;
                    if (Te < Wb) {
                        ld = Wb - Te;
                        Gg = Wb - Te;
                        if (null !== ca.Iy) for (lf = ca.Iy, rb = 0; rb < ca.Qi && !(0 >= ld) && !(ca.column + rb >= this.fq); rb++) $ = this.le(ca.column + rb),
                        Fc = $.Za || 0,
                        Kf = lf(ca, $, Gg),
                        v && "number" !== typeof Kf && D.k(ca + " spanAllocation does not return a number: " + Kf),
                        $.Qa = Math.min($.vf, Fc + Kf),
                        $.Za !== Fc && (ld -= $.Za - Fc);
                        for (; 0 < ld;) {
                            Fc = $.Za || 0;
                            isNaN($.width) && $.vf > Fc && ($.Qa = Math.min($.vf, Fc + ld), $.Za !== Fc && (ld -= $.Za - Fc));
                            if (0 === $.index) break;
                            $ = this.le($.index - 1)
                        }
                    }
                }
                D.Aa(Se);
                D.Rk(Jf);
                D.Rk(Ya);
                for (var Hg = 0,
                Ig = 0,
                Pc = Jo(this, !0), uj = this.Ea, Kk = this.kf, Be = wd = he = 0, dd = 0, Jb = this.fq, qa = 0; qa < Jb; qa++) void 0 !== this.de[qa] && ($ = this.le(qa), isFinite($.width) ? (Be += $.width, Be += $.ff()) : Qp($) === Rp ? (Be += $.Za, Be += $.ff()) : 0 !== $.Za && (he += $.Za, he += $.ff()));
                var Hg = isFinite(uj.width) ? Math.min(uj.width, Kk.width) : Pc !== Sj && isFinite(di) ? di: he,
                Hg = Math.max(Hg, this.hg.width),
                Hg = Math.max(Hg - Be, 0),
                Lk = Math.max(Hg / he, 1);
                isFinite(Lk) || (Lk = 1);
                for (qa = 0; qa < Jb; qa++) void 0 !== this.de[qa] && ($ = this.le(qa), isFinite($.width) || Qp($) === Rp || ($.Qa = $.Za * Lk), $.position = e.width, 0 !== $.Za && (e.width += $.Za, e.width += $.ff()));
                Jb = this.Nq;
                for (qa = 0; qa < Jb; qa++) void 0 !== this.he[qa] && ($ = this.me(qa), isFinite($.height) ? (dd += $.height, dd += $.ff()) : Qp($) === Rp ? (dd += $.Za, dd += $.ff()) : 0 !== $.Za && (wd += $.Za, 0 !== $.Za && (wd += $.ff())));
                var Ig = isFinite(uj.height) ? Math.min(uj.height, Kk.height) : Pc !== Sj && isFinite(ei) ? ei: wd,
                Ig = Math.max(Ig, this.hg.height),
                Ig = Math.max(Ig - dd, 0),
                zh = Math.max(Ig / wd, 1);
                isFinite(zh) || (zh = 1);
                for (qa = 0; qa < Jb; qa++) void 0 !== this.he[qa] && ($ = this.me(qa), isFinite($.height) || Qp($) === Rp || ($.Qa = $.Za * zh), $.position = e.height, 0 !== $.Za && (e.height += $.Za, 0 !== $.Za && (e.height += $.ff())));
                Jb = th.length;
                for (qa = 0; qa < Jb; qa++) {
                    var md = th[qa];
                    md.type === Oo ? (Qd = e.width, $ = this.me(md.Zb), Rd = $.Qa) : ($ = this.le(md.column), Qd = $.Qa, Rd = e.height);
                    md.Ad.m(0, 0, Qd, Rd);
                    em(md, !1);
                    mc[md.Zb] || (mc[md.Zb] = []);
                    mc[md.Zb][md.column] || (mc[md.Zb][md.column] = []);
                    mc[md.Zb][md.column].push(md)
                }
                D.Aa(th);
                this.jt = mc;
                break;
            case "Viewbox":
                var vj = a,
                lm = b,
                mt = c,
                nt = d;
                1 < m.length && D.k("Viewbox Panel cannot contain more than one GraphObject.");
                var mf = m[0];
                mf.Bb = 1;
                mf.xq();
                Ak(mf, Infinity, Infinity, mt, nt);
                var Mk = mf.Fa,
                mm = mf.margin,
                ot = mm.right + mm.left,
                pt = mm.top + mm.bottom;
                if (isFinite(vj) || isFinite(lm)) {
                    var hw = mf.scale,
                    nm = Mk.width,
                    om = Mk.height,
                    qt = Math.max(vj - ot, 0),
                    rt = Math.max(lm - pt, 0),
                    Nk = 1;
                    this.Xp === Uj ? 0 !== nm && 0 !== om && (Nk = Math.min(qt / nm, rt / om)) : 0 !== nm && 0 !== om && (Nk = Math.max(qt / nm, rt / om));
                    0 === Nk && (Nk = 1E-4);
                    mf.Bb *= Nk;
                    hw !== mf.scale && (em(mf, !0), Ak(mf, Infinity, Infinity, mt, nt))
                }
                Mk = mf.Fa;
                e.width = isFinite(vj) ? vj: Math.max(Mk.width + ot, 0);
                e.height = isFinite(lm) ? lm: Math.max(Mk.height + pt, 0);
                break;
            case "Link":
                var st = m.length;
                if (this instanceof da || this instanceof J) {
                    var li = null;
                    this instanceof J && (li = this);
                    this instanceof da && (li = this.Zf);
                    if (li instanceof J) {
                        var Ok = li;
                        if (0 === st) {
                            var pm = this.Ga;
                            wb(pm, 0, 0);
                            var Ce = this.Fa;
                            Ce.m(0, 0, 0, 0)
                        } else {
                            var qm = this instanceof da ? null: li.path,
                            Jg = li.qo,
                            nf = this.wj;
                            nf.assign(Jg);
                            nf.x = 0;
                            nf.y = 0;
                            var Ah = Ok.points,
                            mi = li.ta;
                            this.Gu(!1);
                            var tt = Jg.width,
                            ut = Jg.height;
                            this.hj.m(Jg.x, Jg.y);
                            null === this.ph && (this.ph = new K(B));
                            this.ph.clear();
                            null !== qm && (Sp(qm, tt, ut, this), Ce = qm.Fa, nf.Wh(Ce), this.ph.add(Ce));
                            for (var Kg = D.Of(), Pk = D.P(), Lg = D.P(), np = 0; np < st; np++) {
                                var ac = m[np];
                                if (ac !== qm) if (ac.Gf && ac instanceof z) Sp(ac, tt, ut, this),
                                Ce = ac.Fa,
                                nf.Wh(Ce),
                                this.ph.add(Ce);
                                else if (2 > mi) Ak(ac, Infinity, Infinity),
                                Ce = ac.Fa,
                                nf.Wh(Ce),
                                this.ph.add(Ce);
                                else {
                                    var xd = ac.Te,
                                    wt = ac.zB,
                                    op = ac.Gh;
                                    op.Zd() && (op = gc);
                                    var jg = ac.Oq,
                                    iw = ac.AB,
                                    Qk = 0,
                                    Rk = 0,
                                    rm = 0;
                                    if (xd < -mi || xd >= mi) {
                                        var xt = Ok.eG,
                                        Lf = Ok.dG;
                                        jg !== nj && (rm = Ok.computeAngle(ac, jg, Lf), ac.rg = rm);
                                        Qk = xt.x - Jg.x;
                                        Rk = xt.y - Jg.y
                                    } else {
                                        var Sd, of;
                                        if (0 <= xd) Sd = Ah.ea(xd),
                                        of = xd < mi - 1 ? Ah.ea(xd + 1) : Sd;
                                        else {
                                            var ni = mi + xd;
                                            Sd = Ah.ea(ni);
                                            of = 0 < ni ? Ah.ea(ni - 1) : Sd
                                        }
                                        if (Sd.Sc(of)) {
                                            var oi, pi;
                                            0 <= xd ? (oi = 0 < xd ? Ah.ea(xd - 1) : Sd, pi = xd < mi - 2 ? Ah.ea(xd + 2) : of) : (oi = ni < mi - 1 ? Ah.ea(ni + 1) : Sd, pi = 1 < ni ? Ah.ea(ni - 2) : of);
                                            var yt = oi.Cf(Sd),
                                            zt = of.Cf(pi),
                                            Lf = yt > zt + 10 ? 0 <= xd ? oi.Jc(Sd) : Sd.Jc(oi) : zt > yt + 10 ? 0 <= xd ? of.Jc(pi) : pi.Jc(of) : 0 <= xd ? oi.Jc(pi) : pi.Jc(oi)
                                        } else Lf = 0 <= xd ? Sd.Jc(of) : of.Jc(Sd);
                                        jg !== nj && (rm = Ok.computeAngle(ac, jg, Lf), ac.rg = rm);
                                        Qk = Sd.x + (of.x - Sd.x) * wt - Jg.x;
                                        Rk = Sd.y + (of.y - Sd.y) * wt - Jg.y
                                    }
                                    Ak(ac, Infinity, Infinity);
                                    var Ce = ac.Fa,
                                    pm = ac.Ga,
                                    Sk = 0;
                                    ac instanceof z && (Sk = ac.jb);
                                    var qi = pm.width + Sk,
                                    wj = pm.height + Sk;
                                    Kg.reset();
                                    Kg.translate( - Ce.x, -Ce.y);
                                    Kg.scale(ac.scale, ac.scale);
                                    Kg.rotate(jg === nj ? ac.angle: Lf, qi / 2, wj / 2);
                                    jg !== Tp && jg !== Up || Kg.rotate(90, qi / 2, wj / 2);
                                    jg !== Vp && jg !== Wp || Kg.rotate( - 90, qi / 2, wj / 2);
                                    jg === Xp && (45 < Lf && 135 > Lf || 225 < Lf && 315 > Lf) && Kg.rotate( - Lf, qi / 2, wj / 2);
                                    var Bj = new B(0, 0, qi, wj);
                                    Pk.so(Bj, op);
                                    Kg.vb(Pk);
                                    var jw = -Pk.x + Sk / 2,
                                    kw = -Pk.y + Sk / 2;
                                    Lg.assign(iw);
                                    isNaN(Lg.x) && (Lg.x = 0 <= xd ? qi / 2 + 3 : -(qi / 2 + 3));
                                    isNaN(Lg.y) && (Lg.y = -(wj / 2 + 3));
                                    Lg.rotate(Lf);
                                    Qk += Lg.x;
                                    Rk += Lg.y;
                                    Bj.set(Ce);
                                    Bj.x = Qk + jw;
                                    Bj.y = Rk + kw;
                                    this.ph.add(Bj);
                                    nf.Wh(Bj)
                                }
                            }
                            if (this instanceof J) for (var At = this.If; At.next();) Ak(At.value, Infinity, Infinity);
                            this.wj = nf;
                            var pp = this.hj;
                            pp.m(pp.x + nf.x, pp.y + nf.y);
                            wb(e, nf.width || 0, nf.height || 0);
                            D.He(Kg);
                            D.A(Pk);
                            D.A(Lg)
                        }
                    }
                }
                break;
            case "Grid":
                break;
            case "Graduated":
                var lw = a,
                mw = b,
                nw = c,
                ow = d,
                Mg = this.Vd();
                this.Pm = [];
                var Cj = Mg.margin,
                pw = Cj.right + Cj.left,
                qw = Cj.top + Cj.bottom;
                Ak(Mg, lw, mw, nw, ow);
                var Bt = Mg.Fa,
                rw = Bt.height,
                sw = Math.max(Bt.width + pw, 0),
                tw = Math.max(rw + qw, 0),
                Ct = new B( - Cj.left, -Cj.top, sw, tw);
                this.Pm.push(Ct);
                e.assign(Ct);
                for (var Uk = Mg.Df,
                Dt = Mg.jb,
                qp = Uk.JA,
                Dj = Uk.Kx,
                ri = Uk.KA,
                uw = qp.length,
                rp = 0,
                sp = 0,
                Ej = D.tb(), tp = 0; tp < uw; tp++) {
                    for (var up = qp[tp], Et = [], sp = rp = 0, vw = up.length, Fj = 0; Fj < vw; Fj += 2) {
                        var Ft = up[Fj],
                        Gt = up[Fj + 1];
                        if (0 !== Fj) {
                            var yd = 180 * Math.atan2(Gt - sp, Ft - rp) / Math.PI;
                            0 > yd && (yd += 360);
                            Et.push(yd)
                        }
                        rp = Ft;
                        sp = Gt
                    }
                    Ej.push(Et)
                }
                var Ht;
                if (null === this.kk) {
                    for (var It = [], vp = this.xa.o, Jt = vp.length, wp = 0; wp < Jt; wp++) {
                        var Vk = vp[wp],
                        Kt = [];
                        It.push(Kt);
                        if (Vk.visible) for (var ww = Vk.interval,
                        xp = 0; xp < Jt; xp++) {
                            var Wk = vp[xp];
                            if (Wk.visible && Vk !== Wk && !(Vk instanceof z && !(Wk instanceof z) || Vk instanceof na && !(Wk instanceof na))) {
                                var Lt = Wk.interval;
                                Lt > ww && Kt.push(Lt)
                            }
                        }
                    }
                    this.kk = It
                }
                Ht = this.kk;
                var Mt = this.xa.o,
                xw = Mt.length,
                Bh = 0,
                Nt = 0,
                Ot = ri;
                this.Rm = [];
                for (var sm = [], tm = 0; tm < xw; tm++) {
                    var Ch = Mt[tm],
                    sm = [];
                    if (Ch.visible && Ch !== Mg) {
                        var Pt = Ch.interval,
                        Qt = this.RA;
                        if (! (2 > Qt * Pt * ri / this.Nx)) {
                            var ie = this.AF,
                            Rt = Ht[tm],
                            si = Dj[0][0],
                            Mf = 0,
                            zd = 0,
                            Nt = ri * Ch.zF - 1E-4,
                            Ot = ri * Ch.xF + 1E-4,
                            Gj = Qt * Pt;
                            if (ie < this.Tk) var ti = (this.Tk - ie) / Gj,
                            ti = 0 === ti % 1 ? ti: Math.floor(ti + 1),
                            ie = ie + ti * Gj;
                            else ie > this.Tk + Gj && (ti = Math.floor((ie - this.Tk) / Gj), ie -= ti * Gj);
                            for (; ie <= this.QA;) {
                                var yp;
                                a: {
                                    for (var yw = Rt.length,
                                    zp = 0; zp < yw; zp++) if (yb((ie - this.AF) % (Rt[zp] * this.RA), 0)) {
                                        yp = !1;
                                        break a
                                    }
                                    yp = !0
                                }
                                if (yp && (Bh = (ie - this.Tk) * ri / this.Nx, Bh > ri && (Bh = ri), Nt <= Bh && Bh <= Ot)) {
                                    for (var yd = Ej[Mf][zd], Hj = Dj[Mf][zd]; Mf < Dj.length;) {
                                        for (; Bh > si && zd < Dj[Mf].length - 1;) zd++,
                                        yd = Ej[Mf][zd],
                                        Hj = Dj[Mf][zd],
                                        si += Hj;
                                        if (Bh <= si) break;
                                        Mf++;
                                        zd = 0;
                                        yd = Ej[Mf][zd];
                                        Hj = Dj[Mf][zd];
                                        si += Hj
                                    }
                                    var Td = qp[Mf],
                                    St = Td[2 * zd],
                                    Tt = Td[2 * zd + 1],
                                    um = (Bh - (si - Hj)) / Hj,
                                    Ap = new O(St + (Td[2 * zd + 2] - St) * um + Dt / 2 - Uk.sb.x, Tt + (Td[2 * zd + 3] - Tt) * um + Dt / 2 - Uk.sb.y);
                                    Ap.scale(Mg.scale, Mg.scale);
                                    var kg = yd,
                                    Ij = Ej[Mf];
                                    1E-4 > um ? 0 < zd ? kg = Ij[zd - 1] : yb(Td[0], Td[Td.length - 2]) && yb(Td[1], Td[Td.length - 1]) && (kg = Ij[Ij.length - 1]) : .9999 < um && (zd + 1 < Ij.length ? kg = Ij[zd + 1] : yb(Td[0], Td[Td.length - 2]) && yb(Td[1], Td[Td.length - 1]) && (kg = Ij[0]));
                                    yd !== kg && (180 < Math.abs(yd - kg) && (yd < kg ? yd += 360 : kg += 360), yd = (yd + kg) / 2 % 360);
                                    if (Ch instanceof na) {
                                        var vm = "",
                                        vm = null !== Ch.yF ? Ch.yF(ie) : ( + ie.toFixed(2)).toString();
                                        v && D.h(vm, "string");
                                        "" !== vm && sm.push([Ap, yd, vm])
                                    } else sm.push([Ap, yd])
                                }
                                ie += Gj
                            }
                        }
                    }
                    this.Rm.push(sm)
                }
                D.Aa(Ej);
                for (var zw = this.Rm,
                Aw = m.length,
                wm = 0; wm < Aw; wm++) {
                    var ui = m[wm],
                    Bp = zw[wm];
                    if (ui.visible && ui !== Mg && 0 !== Bp.length) {
                        if (ui instanceof z) {
                            var Dh = ui,
                            Ut = Bp,
                            Bw = e,
                            Cp = Dh.Gh;
                            Cp.Zd() && (Cp = dc);
                            var Cw = Dh.angle;
                            Dh.rg = 0;
                            Ak(Dh, Infinity, Infinity);
                            Dh.rg = Cw;
                            var Vt = Dh.Fa,
                            Dp = Vt.width,
                            Ep = Vt.height,
                            Wt = D.gh(0, 0, Dp, Ep),
                            je = D.P();
                            je.so(Wt, Cp);
                            D.Mb(Wt);
                            for (var xm = -je.x,
                            ym = -je.y,
                            vi = new B,
                            Dw = Ut.length,
                            zm = 0; zm < Dw; zm++) for (var Fp = Ut[zm], Xt = Fp[0].x, Yt = Fp[0].y, Zt = Fp[1], Am = 0; 4 > Am; Am++) {
                                switch (Am) {
                                case 0:
                                    je.m(xm, ym);
                                    break;
                                case 1:
                                    je.m(xm + Dp, ym);
                                    break;
                                case 2:
                                    je.m(xm, ym + Ep);
                                    break;
                                case 3:
                                    je.m(xm + Dp, ym + Ep)
                                }
                                je.rotate(Zt + Dh.angle);
                                je.offset(Xt, Yt);
                                0 === zm && 0 === Am ? vi.m(je.x, je.y, 0, 0) : vi.Ki(je);
                                je.offset( - Xt, -Yt);
                                je.rotate( - Zt - Dh.angle)
                            }
                            D.A(je);
                            this.Pm.push(vi);
                            Ob(Bw, vi.x, vi.y, vi.width, vi.height)
                        } else if (ui instanceof na) {
                            var Xk = ui,
                            $t = Bp,
                            Ew = e;
                            null === this.Ck && (this.Ck = new na);
                            var Nf = this.Ck;
                            Kp(Xk, Nf);
                            var Gp = Xk.Gh;
                            Gp.Zd() && (Gp = dc);
                            for (var Eh = Xk.Oq,
                            Fw = Xk.AB,
                            wi = null,
                            Bm = 0,
                            Cm = 0,
                            Ng = 0,
                            Hp = 0,
                            Gw = $t.length,
                            Dm = 0; Dm < Gw; Dm++) {
                                var lg = $t[Dm],
                                Bm = lg[0].x,
                                Cm = lg[0].y,
                                Ng = lg[1];
                                Eh !== nj && (Hp = Xk.computeAngle(Eh, Ng), Nf.rg = Hp);
                                Nf.text = lg[2];
                                Ak(Nf, Infinity, Infinity);
                                var Fh = Nf.Fa,
                                Jj = Nf.Ga,
                                Kj = Jj.width,
                                Lj = Jj.height,
                                Og = D.Of();
                                Og.reset();
                                Og.translate( - Fh.x, -Fh.y);
                                Og.scale(Nf.scale, Nf.scale);
                                Og.rotate(Eh === nj ? Nf.angle: Ng, Kj / 2, Lj / 2);
                                Eh !== Tp && Eh !== Up || Og.rotate(90, Kj / 2, Lj / 2);
                                Eh !== Vp && Eh !== Wp || Og.rotate( - 90, Kj / 2, Lj / 2);
                                Eh === Xp && (45 < Ng && 135 > Ng || 225 < Ng && 315 > Ng) && Og.rotate( - Ng, Kj / 2, Lj / 2);
                                var au = D.gh(0, 0, Kj, Lj),
                                Yk = D.P();
                                Yk.so(au, Gp);
                                Og.vb(Yk);
                                var Hw = -Yk.x,
                                Iw = -Yk.y,
                                Pg = D.P();
                                Pg.assign(Fw);
                                isNaN(Pg.x) && (Pg.x = Kj / 2 + 3);
                                isNaN(Pg.y) && (Pg.y = -(Lj / 2 + 3));
                                Pg.rotate(Ng);
                                var Bm = Bm + (Pg.x + Hw),
                                Cm = Cm + (Pg.y + Iw),
                                Ip = new B(Bm, Cm, Fh.width, Fh.height),
                                Jw = new B(Fh.x, Fh.y, Fh.width, Fh.height),
                                Kw = new B(Jj.x, Jj.y, Jj.width, Jj.height),
                                bu = new Yp;
                                bu.gq(Nf.gi);
                                lg.push(Hp);
                                lg.push(Nf.ue);
                                lg.push(bu);
                                lg.push(Ip);
                                lg.push(Jw);
                                lg.push(Kw);
                                0 === Dm ? wi = Ip.copy() : wi.Wh(Ip);
                                D.A(Pg);
                                D.A(Yk);
                                D.Mb(au);
                                D.He(Og)
                            }
                            this.Pm.push(wi);
                            Ob(Ew, wi.x, wi.y, wi.width, wi.height)
                        }
                        em(ui, !1)
                    }
                }
                break;
            case "TableRow":
            case "TableColumn":
                D.k(this.toString() + " is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
                break;
            default:
                D.k("Unknown panel type: " + n)
            }
        }
        var pf = e.width,
        qf = e.height,
        Em = this.padding,
        Lw = Em.top + Em.bottom,
        pf = pf + (Em.left + Em.right),
        qf = qf + Lw;
        isFinite(g.width) && (pf = g.width);
        isFinite(g.height) && (qf = g.height);
        pf = Math.min(k.width, pf);
        qf = Math.min(k.height, qf);
        pf = Math.max(h.width, pf);
        qf = Math.max(h.height, qf);
        pf = Math.max(c, pf);
        qf = Math.max(d, qf);
        e.width = pf;
        e.height = qf;
        wb(this.$c, pf, qf);
        Go(this, 0, 0, pf, qf)
    };
    x.prototype.findMainElement = x.prototype.Vd = function() {
        if (null === this.wn) {
            var a = this.xa.o,
            b = a.length;
            if (0 === b) return null;
            for (var c = 0; c < b; c++) {
                var d = a[c];
                if (!0 === d.Gf) return this.wn = d
            }
            this.wn = a[0]
        }
        return this.wn
    };
    function Np(a) {
        return null !== a.Y ? a.Y.uf: null
    }
    x.prototype.yj = function(a, b, c, d) {
        var e = this.wj,
        g = this.xa.o,
        h = D.gh(0, 0, 0, 0);
        if (0 === g.length) {
            var k = this.$;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d
        } else {
            if (!this.Ea.F()) {
                var l = Jo(this, !0),
                m = this.Ad,
                n = m.width,
                p = m.height,
                q = this.margin,
                r = q.left + q.right,
                s = q.top + q.bottom;
                n === c && p === d && (l = Sj);
                switch (l) {
                case Sj:
                    if (n > c || p > d) this.K(),
                    Ak(this, n > c ? c: n, p > d ? d: p);
                    break;
                case rf:
                    this.K(!0);
                    Ak(this, c + r, d + s, 0, 0);
                    break;
                case vo:
                    this.K(!0);
                    Ak(this, c + r, p + s, 0, 0);
                    break;
                case uo:
                    this.K(!0),
                    Ak(this, n + r, d + s, 0, 0)
                }
            }
            k = this.$;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d;
            var u = this.ca.Xb;
            switch (u) {
            case "Position":
                for (var t = g.length,
                y = e.x - this.padding.left,
                w = e.y - this.padding.top,
                C = 0; C < t; C++) {
                    var A = g[C],
                    N = A.Fa,
                    H = A.margin,
                    W = A.position.x,
                    fa = A.position.y;
                    h.x = isNaN(W) ? -y: W - y;
                    h.y = isNaN(fa) ? -w: fa - w;
                    if (A instanceof z) {
                        var S = A;
                        if (S.NF) {
                            var ba = S.jb / 2;
                            h.x -= ba;
                            h.y -= ba
                        }
                    }
                    h.x += H.left;
                    h.y += H.top;
                    h.width = N.width;
                    h.height = N.height;
                    A.visible && A.oc(h.x, h.y, h.width, h.height)
                }
                break;
            case "Vertical":
                for (var ia = g.length,
                U = this.padding.left,
                Ua = this.TF,
                lb = Ua ? e.height: this.padding.top, ua = 0; ua < ia; ua++) {
                    var Oa = U,
                    Fa = g[ua];
                    if (Fa.visible) {
                        var Vb = Fa.Fa,
                        Rb = Fa.margin,
                        de = Rb.left + Rb.right,
                        sd = U + this.padding.right,
                        vc = Vb.width,
                        Bg = Jo(Fa, !1);
                        if (isNaN(Fa.Ea.width) && Bg === rf || Bg === vo) vc = Math.max(e.width - de - sd, 0);
                        var Ff = vc + de + sd,
                        Za = Fa.alignment;
                        Za.ed() && (Za = this.gm);
                        Za.fd() || (Za = gc);
                        Ua && (lb -= Vb.height + Rb.bottom + Rb.top);
                        Fa.oc(Oa + Za.offsetX + Rb.left + (e.width * Za.x - Ff * Za.x), lb + Za.offsetY + Rb.top, vc, Vb.height);
                        Ua || (lb += Vb.height + Rb.bottom + Rb.top)
                    }
                }
                break;
            case "Horizontal":
                for (var pb = g.length,
                sa = this.padding.top,
                pa = this.TF,
                mb = pa ? e.width: this.padding.left, nb = 0; nb < pb; nb++) {
                    var ib = sa,
                    ve = g[nb];
                    if (ve.visible) {
                        var Id = ve.Fa,
                        zb = ve.margin,
                        Oe = zb.top + zb.bottom,
                        jd = sa + this.padding.bottom,
                        eg = Id.height,
                        Gf = Jo(ve, !1);
                        if (isNaN(ve.Ea.height) && Gf === rf || Gf === uo) eg = Math.max(e.height - Oe - jd, 0);
                        var Cg = eg + Oe + jd,
                        ob = ve.alignment;
                        ob.ed() && (ob = this.gm);
                        ob.fd() || (ob = gc);
                        pa && (mb -= Id.width + zb.left + zb.right);
                        ve.oc(mb + ob.offsetX + zb.left, ib + ob.offsetY + zb.top + (e.height * ob.y - Cg * ob.y), Id.width, eg);
                        pa || (mb += Id.width + zb.left + zb.right)
                    }
                }
                break;
            case "Spot":
                var hc = g.length,
                Zc = this.Vd(),
                fg = Zc.Fa,
                Cb = fg.width,
                Sb = fg.height,
                we = this.padding,
                Dg = we.left,
                Jd = we.top;
                h.x = Dg - e.x;
                h.y = Jd - e.y;
                Zc.oc(h.x, h.y, Cb, Sb);
                for (var qb = 0; qb < hc; qb++) {
                    var Nc = g[qb];
                    if (Nc !== Zc) {
                        var Hf = Nc.Fa,
                        Pe = Hf.width,
                        Zh = Hf.height,
                        Va = Nc.alignment;
                        Va.ed() && (Va = this.gm);
                        Va.fd() || (Va = gc);
                        var eb = Nc.Gh;
                        eb.ed() && (eb = gc);
                        var Ac = null;
                        Nc instanceof x && "" !== Nc.$j && (Ac = Nc.Ed(Nc.$j), Ac === Nc && (Ac = null));
                        if (null !== Ac) {
                            for (var wc = Ac.Ga,
                            $c = D.Fb(eb.x * wc.width + eb.offsetX, eb.y * wc.height + eb.offsetY); Ac !== Nc;) Ac.transform.vb($c),
                            Ac = Ac.Q;
                            h.x = Va.x * Cb + Va.offsetX - $c.x;
                            h.y = Va.y * Sb + Va.offsetY - $c.y;
                            D.A($c)
                        } else h.x = Va.x * Cb + Va.offsetX - (eb.x * Pe - eb.offsetX),
                        h.y = Va.y * Sb + Va.offsetY - (eb.y * Zh - eb.offsetY);
                        h.x -= e.x;
                        h.y -= e.y;
                        Nc.visible && Nc.oc(Dg + h.x, Jd + h.y, Pe, Zh)
                    }
                }
                break;
            case "Auto":
                var oh = g.length,
                ab = this.Vd(),
                Db = ab.Fa,
                Ab = D.Nf();
                Ab.m(0, 0, 1, 1);
                var Bc = ab.margin,
                Eb = Bc.left,
                tb = Bc.top,
                Fb = this.padding,
                ee = Fb.left,
                Ib = Fb.top;
                h.x = Eb;
                h.y = tb;
                h.width = Db.width;
                h.height = Db.height;
                ab.oc(ee + h.x, Ib + h.y, h.width, h.height);
                var Mb = Op(ab),
                Oc = Pp(ab),
                $h = 0 + Mb.y * Db.height + Mb.offsetY,
                Nb = 0 + Oc.x * Db.width + Oc.offsetX,
                Tb = 0 + Oc.y * Db.height + Oc.offsetY;
                Ab.x = 0 + Mb.x * Db.width + Mb.offsetX;
                Ab.y = $h;
                Ob(Ab, Nb, Tb, 0, 0);
                Ab.x += Eb + ee;
                Ab.y += tb + Ib;
                for (var Cc = 0; Cc < oh; Cc++) {
                    var ad = g[Cc];
                    if (ad !== ab) {
                        var td = ad.Fa,
                        Bc = ad.margin,
                        Eg = Math.max(td.width + Bc.right + Bc.left, 0),
                        ai = Math.max(td.height + Bc.top + Bc.bottom, 0),
                        ub = ad.alignment;
                        ub.ed() && (ub = this.gm);
                        ub.fd() || (ub = gc);
                        h.x = Ab.width * ub.x + ub.offsetX - Eg * ub.x + Bc.left + Ab.x;
                        h.y = Ab.height * ub.y + ub.offsetY - ai * ub.y + Bc.top + Ab.y;
                        h.width = Ab.width;
                        h.height = Ab.height;
                        ad.visible && (Pb(Ab.x, Ab.y, Ab.width, Ab.height, h.x, h.y, td.width, td.height) ? ad.oc(h.x, h.y, td.width, td.height) : ad.oc(h.x, h.y, td.width, td.height, new B(Ab.x, Ab.y, Ab.width, Ab.height)))
                    }
                }
                D.Mb(Ab);
                break;
            case "Table":
                for (var bd = g.length,
                bi = this.padding,
                Qe = bi.left,
                ic = bi.top,
                xe = this.jt,
                Zb = 0,
                Dc = 0,
                ud = xe.length,
                jc = 0,
                Wa = 0; Wa < ud; Wa++) xe[Wa] && (jc = Math.max(jc, xe[Wa].length));
                for (var kc = Math.min(this.vj, ud - 1); kc !== ud && (void 0 === this.he[kc] || 0 === this.he[kc].Za);) kc++;
                for (var kc = Math.min(kc, ud - 1), ci = -this.he[kc].qb, ef = Math.min(this.fj, jc - 1); ef !== jc && (void 0 === this.de[ef] || 0 === this.de[ef].Za);) ef++;
                for (var ef = Math.min(ef, jc - 1), Kd = -this.de[ef].qb, fe = D.Cm(), Wa = 0; Wa < ud; Wa++) if (xe[Wa]) {
                    var jc = xe[Wa].length,
                    ph = this.me(Wa),
                    Dc = ph.qb + ci + ic;
                    0 !== ph.Za && (Dc += ph.PE());
                    for (var Ld = 0; Ld < jc; Ld++) if (xe[Wa][Ld]) {
                        var qh = this.le(Ld),
                        Zb = qh.qb + Kd + Qe;
                        0 !== qh.Za && (Zb += qh.PE());
                        for (var pj = xe[Wa][Ld], rh = pj.length, Gk = 0; Gk < rh; Gk++) {
                            var Gb = pj[Gk],
                            ge = Gb.Fa,
                            kd = Gb instanceof x ? Gb: null;
                            if (null === kd || kd.type !== Oo && kd.type !== Po) {
                                fe.m(0, 0);
                                for (var Re = 1; Re < Gb.rowSpan && !(Wa + Re >= this.Nq); Re++) {
                                    var di = this.me(Wa + Re);
                                    fe.height += di.total
                                }
                                for (Re = 1; Re < Gb.cI && !(Ld + Re >= this.fq); Re++) {
                                    var ei = this.le(Ld + Re);
                                    fe.width += ei.total
                                }
                                var qj = qh.Za + fe.width,
                                rj = ph.Za + fe.height;
                                h.x = Zb;
                                h.y = Dc;
                                h.width = qj;
                                h.height = rj;
                                var Jb = Zb,
                                sh = Dc,
                                th = qj,
                                qa = rj;
                                Zb + qj > e.width && (th = Math.max(e.width - Zb, 0));
                                Dc + rj > e.height && (qa = Math.max(e.height - Dc, 0));
                                var ca = Gb.alignment,
                                $b = 0,
                                gg = 0,
                                fi = 0,
                                lc = 0;
                                if (ca.ed()) {
                                    ca = this.gm;
                                    ca.fd() || (ca = gc);
                                    var $b = ca.x,
                                    gg = ca.y,
                                    fi = ca.offsetX,
                                    lc = ca.offsetY,
                                    gi = qh.alignment,
                                    mc = ph.alignment;
                                    gi.fd() && ($b = gi.x, fi = gi.offsetX);
                                    mc.fd() && (gg = mc.y, lc = mc.offsetY)
                                } else $b = ca.x,
                                gg = ca.y,
                                fi = ca.offsetX,
                                lc = ca.offsetY;
                                if (isNaN($b) || isNaN(gg)) gg = $b = .5,
                                lc = fi = 0;
                                var ff = ge.width,
                                Se = ge.height,
                                gf = Gb.margin,
                                ye = gf.left + gf.right,
                                ze = gf.top + gf.bottom,
                                cd = Xo(Gb, ph, qh, !1); ! isNaN(Gb.Ea.width) || cd !== rf && cd !== vo || (ff = Math.max(qj - ye, 0)); ! isNaN(Gb.Ea.height) || cd !== rf && cd !== uo || (Se = Math.max(rj - ze, 0));
                                var Md = Gb.kf,
                                uh = Gb.hg,
                                ff = Math.min(Md.width, ff),
                                Se = Math.min(Md.height, Se),
                                ff = Math.max(uh.width, ff),
                                Se = Math.max(uh.height, Se),
                                $ = Se + ze;
                                h.x += h.width * $b - (ff + ye) * $b + fi + gf.left;
                                h.y += h.height * gg - $ * gg + lc + gf.top;
                                Gb.visible && (Pb(Jb, sh, th, qa, h.x, h.y, ge.width, ge.height) ? Gb.oc(h.x, h.y, ff, Se) : Gb.oc(h.x, h.y, ff, Se, new B(Jb, sh, th, qa)))
                            } else {
                                Gb.$i();
                                Gb.ac.Ya();
                                var hf = Gb.ac;
                                hf.x = kd.type === Oo ? Qe: Zb;
                                hf.y = kd.type === Po ? ic: Dc;
                                hf.width = ge.width;
                                hf.height = ge.height;
                                Gb.ac.freeze();
                                Ko(Gb, !1)
                            }
                        }
                    }
                }
                D.Rk(fe);
                for (Wa = 0; Wa < bd; Wa++) Gb = g[Wa],
                kd = Gb instanceof x ? Gb: null,
                null === kd || kd.type !== Oo && kd.type !== Po || (hf = Gb.ac, Gb.$c.Ya(), Gb.$c.m(0, 0, hf.width, hf.height), Gb.$c.freeze());
                break;
            case "Viewbox":
                var hg = g[0],
                vh = hg.Fa,
                wh = hg.margin,
                Nd = wh.top + wh.bottom,
                Hk = Math.max(vh.width + (wh.right + wh.left), 0),
                vb = Math.max(vh.height + Nd, 0),
                Xa = hg.alignment;
                Xa.ed() && (Xa = this.gm);
                Xa.fd() || (Xa = gc);
                h.x = e.width * Xa.x - Hk * Xa.x + Xa.offsetX;
                h.y = e.height * Xa.y - vb * Xa.y + Xa.offsetY;
                h.width = vh.width;
                h.height = vh.height;
                hg.oc(h.x, h.y, h.width, h.height);
                break;
            case "Link":
                var hm = g.length;
                if (this instanceof da || this instanceof J) {
                    var Ik = null;
                    this instanceof J && (Ik = this);
                    this instanceof da && (Ik = this.Zf);
                    var sj = Ik,
                    hi = this instanceof da ? null: sj.path;
                    if (null !== this.ph) {
                        var xc = this.ph.o,
                        Ae = 0;
                        if (null !== hi && Ae < this.ph.count) {
                            var vd = xc[Ae];
                            Ae++;
                            hi.oc(vd.x - this.wj.x, vd.y - this.wj.y, vd.width, vd.height)
                        }
                        for (var Pc = 0; Pc < hm; Pc++) {
                            var Jk = g[Pc];
                            Jk !== hi && Ae < this.ph.count && (vd = xc[Ae], Ae++, Jk.oc(vd.x - this.wj.x, vd.y - this.wj.y, vd.width, vd.height))
                        }
                    }
                    var im = sj.points,
                    jm = im.count;
                    if (2 <= jm && this instanceof J) for (var If = this.If; If.next();) {
                        var Wb = If.value,
                        Od = jm,
                        Pd = im,
                        Ec = Wb.Te,
                        he = Wb.zB,
                        wd = Wb.Gh,
                        Fg = Wb.Oq,
                        tj = Wb.AB,
                        xh = 0,
                        yh = 0,
                        ii = 0;
                        if (Ec < -Od || Ec >= Od) {
                            var ji = this.eG,
                            ig = this.dG;
                            Fg !== nj && (ii = this.computeAngle(Wb, Fg, ig), Wb.angle = ii);
                            xh = ji.x;
                            yh = ji.y
                        } else {
                            var nc = void 0,
                            Ya = void 0;
                            if (0 <= Ec) nc = Pd.o[Ec],
                            Ya = Ec < Od - 1 ? Pd.o[Ec + 1] : nc;
                            else var Qd = Od + Ec,
                            nc = Pd.o[Qd],
                            Ya = 0 < Qd ? Pd.o[Qd - 1] : nc;
                            if (nc.Sc(Ya)) {
                                var Rd = void 0,
                                jf = void 0;
                                0 <= Ec ? (Rd = 0 < Ec ? Pd.o[Ec - 1] : nc, jf = Ec < Od - 2 ? Pd.o[Ec + 2] : Ya) : (Rd = Qd < Od - 1 ? Pd.o[Qd + 1] : nc, jf = 1 < Qd ? Pd.o[Qd - 2] : Ya);
                                var Jf = Rd.Cf(nc),
                                rb = Ya.Cf(jf),
                                ig = Jf > rb + 10 ? 0 <= Ec ? Rd.Jc(nc) : nc.Jc(Rd) : rb > Jf + 10 ? 0 <= Ec ? Ya.Jc(jf) : jf.Jc(Ya) : 0 <= Ec ? Rd.Jc(jf) : jf.Jc(Rd)
                            } else ig = 0 <= Ec ? nc.Jc(Ya) : Ya.Jc(nc);
                            Fg !== nj && (ii = this.computeAngle(Wb, Fg, ig), Wb.angle = ii);
                            xh = nc.x + (Ya.x - nc.x) * he;
                            yh = nc.y + (Ya.y - nc.y) * he
                        }
                        if (wd.O(bc)) Wb.location = new O(xh, yh);
                        else {
                            wd.Zd() && (wd = gc);
                            var kf = D.Of();
                            kf.reset();
                            kf.scale(Wb.scale, Wb.scale);
                            kf.rotate(Wb.angle, 0, 0);
                            var ld = Wb.Ga,
                            Gg = D.gh(0, 0, ld.width, ld.height),
                            lf = D.P();
                            lf.so(Gg, wd);
                            kf.vb(lf);
                            var Fc = -lf.x,
                            Kf = -lf.y,
                            Te = tj.copy();
                            isNaN(Te.x) && (Te.x = 0 <= Ec ? lf.x + 3 : -(lf.x + 3));
                            isNaN(Te.y) && (Te.y = -(lf.y + 3));
                            Te.rotate(ig);
                            xh += Te.x;
                            yh += Te.y;
                            kf.fH(Gg);
                            var Fc = Fc + Gg.x,
                            Kf = Kf + Gg.y,
                            Hg = D.Fb(xh + Fc, yh + Kf);
                            Wb.move(Hg);
                            D.A(Hg);
                            D.A(lf);
                            D.Mb(Gg);
                            D.He(kf)
                        }
                    }
                    this.Gu(!1)
                }
                break;
            case "Grid":
                break;
            case "Graduated":
                if (null !== this.Pm) {
                    var Ig = this.Vd(),
                    uj = this.Rm,
                    Kk = this.Pm,
                    Be = 0,
                    dd = Kk[Be];
                    Be++;
                    Ig.oc(dd.x - e.x, dd.y - e.y, dd.width, dd.height);
                    for (var Lk = g.length,
                    zh = 0; zh < Lk; zh++) {
                        var md = g[zh],
                        vj = uj[zh];
                        md.visible && md !== Ig && 0 !== vj.length && (dd = Kk[Be], Be++, md.oc(dd.x - e.x, dd.y - e.y, dd.width, dd.height))
                    }
                    this.Pm = null
                }
                break;
            case "TableRow":
            case "TableColumn":
                D.k(this.toString() + " is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
                break;
            default:
                D.k("Unknown panel type: " + u)
            }
            D.Mb(h)
        }
    };
    x.prototype.Mk = function(a) {
        var b = this.Ga,
        c = Np(this);
        if (Pb(0, 0, b.width, b.height, a.x, a.y)) {
            for (var b = this.xa.o,
            d = b.length,
            e = D.Fb(0, 0); d--;) {
                var g = b[d];
                if (g.visible || g === c) if (hb(e.set(a), g.transform), g.Oa(e)) return D.A(e),
                !0
            }
            D.A(e);
            return null === this.Kb && null === this.hc ? !1 : !0
        }
        return ! 1
    };
    x.prototype.Gx = function(a) {
        if (this.Jo === a) return this;
        for (var b = this.xa.o,
        c = b.length,
        d = 0; d < c; d++) {
            var e = b[d].Gx(a);
            if (null !== e) return e
        }
        return null
    };
    function dp(a, b, c) {
        c(a, b);
        if (b instanceof x) {
            b = b.xa.o;
            for (var d = b.length,
            e = 0; e < d; e++) dp(a, b[e], c)
        }
    }
    function Rm(a, b) {
        Zp(a, a, b)
    }
    function Zp(a, b, c) {
        c(b);
        b = b.xa.o;
        for (var d = b.length,
        e = 0; e < d; e++) {
            var g = b[e];
            g instanceof x && Zp(a, g, c)
        }
    }
    x.prototype.walkVisualTree = x.prototype.AK = function(a) {
        $p(this, this, a)
    };
    function $p(a, b, c) {
        c(b);
        if (b instanceof x) {
            b = b.xa.o;
            for (var d = b.length,
            e = 0; e < d; e++) $p(a, b[e], c)
        }
    }
    x.prototype.findInVisualTree = x.prototype.gu = function(a) {
        return aq(this, this, a)
    };
    function aq(a, b, c) {
        if (c(b)) return b;
        if (b instanceof x) {
            b = b.xa.o;
            for (var d = b.length,
            e = 0; e < d; e++) {
                var g = aq(a, b[e], c);
                if (null !== g) return g
            }
        }
        return null
    }
    x.prototype.findObject = x.prototype.Ed = function(a) {
        if (this.name === a) return this;
        for (var b = this.xa.o,
        c = b.length,
        d = 0; d < c; d++) {
            var e = b[d];
            if (e.name === a) return e;
            if (e instanceof x) if (null === e.cj && null === e.Eg) {
                if (e = e.Ed(a), null !== e) return e
            } else if (pn(e) && (e = e.xa.first(), null !== e && (e = e.Ed(a), null !== e))) return e
        }
        return null
    };
    function bq(a) {
        a = a.xa.o;
        for (var b = a.length,
        c = 0,
        d = 0; d < b; d++) {
            var e = a[d];
            if (e instanceof x) c = Math.max(c, bq(e));
            else if (e instanceof z) {
                a: {
                    if (null !== !e.Xf) switch (e.ap) {
                    case "None":
                    case "Square":
                    case "Ellipse":
                    case "Circle":
                    case "LineH":
                    case "LineV":
                    case "FramedRectangle":
                    case "RoundedRectangle":
                    case "Line1":
                    case "Line2":
                    case "Border":
                    case "Cube1":
                    case "Cube2":
                    case "Junction":
                    case "Cylinder1":
                    case "Cylinder2":
                    case "Cylinder3":
                    case "Cylinder4":
                    case "PlusLine":
                    case "XLine":
                    case "ThinCross":
                    case "ThickCross":
                        e = 0;
                        break a
                    }
                    e = e.Ng / 2 * e.vn * e.Fj()
                }
                c = Math.max(c, e)
            }
        }
        return c
    }
    f = x.prototype;
    f.kh = function() {
        return ! (this.type === Oo || this.type === Po)
    };
    f.Ge = function(a, b, c) {
        if (!1 === this.pg) return null;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (Im(this)) return null;
        var d = this.Ga,
        e = 1 / this.Fj(),
        g = this.kh(),
        h = g ? a: hb(D.Fb(a.x, a.y), this.transform),
        k = this.g,
        l = 10,
        m = 5;
        null !== k && (l = k.pu("extraTouchArea"), m = l / 2);
        if (Pb( - (m * e), -(m * e), d.width + l * e, d.height + l * e, h.x, h.y)) {
            if (!this.Yn) {
                var e = this.xa.o,
                n = e.length,
                k = D.P(),
                m = (l = this.yq) ? this.Vd() : null;
                if (l && (m.kh() ? hb(k.set(a), m.transform) : k.set(a), !m.Oa(k))) return D.A(k),
                g || D.A(h),
                null;
                for (var p = Np(this); n--;) {
                    var q = e[n];
                    if (q.visible || q === p) if (q.kh() ? hb(k.set(a), q.transform) : k.set(a), !l || q !== m) {
                        var r = null;
                        q instanceof x ? r = q.Ge(k, b, c) : !0 === q.pg && q.Oa(k) && (r = q);
                        if (null !== r && (null !== b && (r = b(r)), null !== r && (null === c || c(r)))) return D.A(k),
                        g || D.A(h),
                        r
                    }
                }
                D.A(k)
            }
            if (null === this.background && null === this.Zl) return g || D.A(h),
            null;
            a = Pb(0, 0, d.width, d.height, h.x, h.y) ? this: null;
            g || D.A(h);
            return a
        }
        g || D.A(h);
        return null
    };
    f.hu = function(a, b, c, d) {
        if (!1 === this.pg) return ! 1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new K(P));
        var e = this.Ga,
        g = this.kh(),
        h = g ? a: hb(D.Fb(a.x, a.y), this.transform);
        if (Pb(0, 0, e.width, e.height, h.x, h.y)) {
            if (!this.Yn) {
                for (var e = this.xa.o,
                k = e.length,
                l = D.P(), m = Np(this); k--;) {
                    var n = e[k];
                    if (n.visible || n === m) {
                        n.kh() ? hb(l.set(a), n.transform) : l.set(a);
                        var p = n,
                        n = n instanceof x ? n: null; (null !== n ? n.hu(l, b, c, d) : p.Oa(l)) && !1 !== p.pg && (null !== b && (p = b(p)), null === p || null !== c && !c(p) || d.add(p))
                    }
                }
                D.A(l)
            }
            g || D.A(h);
            return null !== this.background || null !== this.Zl
        }
        g || D.A(h);
        return ! 1
    };
    f.Qk = function(a, b, c, d, e, g) {
        if (!1 === this.pg) return ! 1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = g;
        void 0 === g && (h = D.Of(), h.reset());
        h.multiply(this.transform);
        if (this.Hn(a, h)) return cq(this, b, c, e),
        void 0 === g && D.He(h),
        !0;
        if (this.Wg(a, h)) {
            if (!this.Yn) for (var k = Np(this), l = this.xa.o, m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === k) {
                    var p = n.$,
                    q = this.Ga;
                    if (! (p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = n;
                        n = n instanceof x ? n: null;
                        q = D.Of();
                        q.set(h);
                        if (null !== n ? n.Qk(a, b, c, d, e, q) : Io(p, a, d, q)) null !== b && (p = b(p)),
                        null === p || null !== c && !c(p) || e.add(p);
                        D.He(q)
                    }
                }
            }
            void 0 === g && D.He(h);
            return d
        }
        void 0 === g && D.He(h);
        return ! 1
    };
    function cq(a, b, c, d) {
        for (var e = a.xa.o,
        g = e.length; g--;) {
            var h = e[g];
            if (h.visible) {
                var k = h.$,
                l = a.Ga;
                k.x > l.width || k.y > l.height || 0 > k.x + k.width || 0 > k.y + k.height || (h instanceof x && cq(h, b, c, d), null !== b && (h = b(h)), null === h || null !== c && !c(h) || d.add(h))
            }
        }
    }
    f.On = function(a, b, c, d, e, g) {
        if (!1 === this.pg) return ! 1;
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        var h = this.Ga,
        k = this.kh(),
        l = k ? a: hb(D.Fb(a.x, a.y), this.transform),
        m = k ? b: hb(D.Fb(b.x, b.y), this.transform),
        n = l.Cf(m),
        p = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height || jb(l.x, l.y, 0, 0, 0, h.height) < n || jb(l.x, l.y, 0, h.height, h.width, h.height) < n || jb(l.x, l.y, h.width, h.height, h.width, 0) < n || jb(l.x, l.y, h.width, 0, 0, 0) < n,
        h = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height && jb(l.x, l.y, 0, 0, 0, h.height) < n && jb(l.x, l.y, 0, h.height, h.width, h.height) < n && jb(l.x, l.y, h.width, h.height, h.width, 0) < n && jb(l.x, l.y, h.width, 0, 0, 0) < n;
        k || (D.A(l), D.A(m));
        if (p) {
            if (!this.Yn) {
                for (var k = D.P(), l = D.P(), m = Np(this), n = this.xa.o, q = n.length; q--;) {
                    var r = n[q];
                    if (r.visible || r === m) {
                        var s = r.$,
                        u = this.Ga;
                        s.x > u.width || s.y > u.height || 0 > s.x + s.width || 0 > s.y + s.height || (r.kh() ? (s = r.transform, hb(k.set(a), s), hb(l.set(b), s)) : (k.set(a), l.set(b)), s = r, r = r instanceof x ? r: null, null !== r ? !r.On(k, l, c, d, e, g) : !s.pF(k, l, e)) || (null !== c && (s = c(s)), null === s || null !== d && !d(s) || g.add(s))
                    }
                }
                D.A(k);
                D.A(l)
            }
            return e ? p: h
        }
        return ! 1
    };
    function Op(a) {
        var b = null;
        a instanceof z && (b = a.C, b === Tc && (b = null), a = a.Df, null !== a && null === b && (b = a.C));
        null === b && (b = cc);
        return b
    }
    function Pp(a) {
        var b = null;
        a instanceof z && (b = a.D, b === Tc && (b = null), a = a.Df, null !== a && null === b && (b = a.D));
        null === b && (b = rc);
        return b
    }
    x.prototype.add = x.prototype.add = function(a) {
        D.l(a, P, x, "add:element");
        this.Xd(this.xa.count, a)
    };
    x.prototype.elt = x.prototype.ea = function(a) {
        return this.xa.ea(a)
    };
    x.prototype.insertAt = x.prototype.Xd = function(a, b) {
        b instanceof F && D.k("Cannot add a Part to a Panel: " + b);
        if (this === b || this.tm(b)) this === b && D.k("Cannot make a Panel contain itself: " + this.toString()),
        D.k("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
        var c = b.Q;
        null !== c && c !== this && D.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " + this.toString());
        this.ca !== Nl || b instanceof z || D.k("Can only add Shapes to a Grid Panel, not: " + b);
        this.ca !== mp || b instanceof z || b instanceof na || D.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: " + b);
        b.ym(this);
        b.kn = null;
        if (null !== this.Xk) {
            var d = b.data;
            null !== d && "object" === typeof d && (null === this.Dg && (this.Dg = new ma(Object, x)), this.Dg.add(d, b))
        }
        var e = this.xa,
        d = -1;
        if (c === this) {
            for (var g = -1,
            h = this.xa.o,
            k = h.length,
            l = 0; l < k; l++) if (h[l] === b) {
                g = l;
                break
            }
            if ( - 1 !== g) {
                if (g === a || g + 1 >= e.count && a >= e.count) return;
                e.jd(g);
                d = g
            } else D.k("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
        }
        if (0 > a || a > e.count) a = e.count;
        e.Xd(a, b);
        this.K();
        b.K();
        null !== b.sd ? this.Uk = !0 : b instanceof x && !0 === b.Uk && (this.Uk = !0);
        this.kk = null;
        c = this.Y;
        null !== c && (c.Jl = null, c.tk = NaN, this.Uk && c instanceof G && (c.Uk = !0), c.Uk && c instanceof G && (c.xe = null), e = this.g, null !== e && e.ra.nb || ( - 1 !== d && c.hd(ng, "elements", this, b, null, d, null), c.hd(mg, "elements", this, null, b, null, a), this.vu() || dq(this, b, !1)))
    };
    D.defineProperty(x, {
        Uk: null
    },
    function() {
        return 0 !== (this.T & 8388608)
    },
    function(a) {
        0 !== (this.T & 8388608) !== a && (this.T ^= 8388608)
    });
    function eq(a, b) {
        a.T = b ? a.T | 16777216 : a.T & -16777217
    }
    x.prototype.remove = x.prototype.remove = function(a) {
        D.l(a, P, x, "remove:element");
        for (var b = this.xa.o,
        c = b.length,
        d = -1,
        e = 0; e < c; e++) if (b[e] === a) {
            d = e;
            break
        } - 1 !== d && this.rf(d)
    };
    x.prototype.removeAt = x.prototype.jd = function(a) {
        v && D.p(a, x, "removeAt:idx");
        0 <= a && this.rf(a)
    };
    x.prototype.rf = function(a) {
        var b = this.xa,
        c = b.ea(a);
        c.kn = null;
        c.ym(null);
        if (null !== this.Dg) {
            var d = c.data;
            "object" === typeof d && this.Dg.remove(d)
        }
        b.jd(a);
        em(this, !1);
        this.K();
        this.wn === c && (this.wn = null);
        this.kk = null;
        b = this.Y;
        null !== b && (b.Jl = null, b.tk = NaN, b.ne(), d = this.g, null !== d && d.ra.nb || b.hd(ng, "elements", this, c, null, a, null))
    };
    D.w(x, {
        Nq: "rowCount"
    },
    function() {
        return void 0 === this.he ? 0 : this.he.length
    });
    x.prototype.getRowDefinition = x.prototype.me = function(a) {
        v && D.p(a, x, "getRowDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "getRowDefinition:idx");
        a = Math.round(a);
        var b = this.he;
        if (void 0 === b[a]) {
            var c = new ch;
            c.ym(this);
            c.Ie = !0;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    x.prototype.removeRowDefinition = x.prototype.wG = function(a) {
        v && D.p(a, x, "removeRowDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "removeRowDefinition:idx");
        a = Math.round(a);
        var b = this.he;
        this.hd(ng, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.K()
    };
    D.w(x, {
        fq: "columnCount"
    },
    function() {
        return void 0 === this.de ? 0 : this.de.length
    });
    x.prototype.getColumnDefinition = x.prototype.le = function(a) {
        v && D.p(a, x, "getColumnDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "getColumnDefinition:idx");
        a = Math.round(a);
        var b = this.de;
        if (void 0 === b[a]) {
            var c = new ch;
            c.ym(this);
            c.Ie = !1;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    x.prototype.removeColumnDefinition = x.prototype.tG = function(a) {
        v && D.p(a, x, "removeColumnDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "removeColumnDefinition:idx");
        a = Math.round(a);
        var b = this.de;
        this.hd(ng, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.K()
    };
    D.defineProperty(x, {
        cK: "rowSizing"
    },
    function() {
        return void 0 === this.nn ? lp: this.nn
    },
    function(a) {
        if (void 0 !== this.nn) {
            var b = this.nn;
            b !== a && (a !== lp && a !== Rp && D.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.nn = a, this.K(), this.i("rowSizing", b, a))
        }
    });
    D.defineProperty(x, {
        bI: "columnSizing"
    },
    function() {
        return void 0 === this.Km ? lp: this.Km
    },
    function(a) {
        if (void 0 !== this.Km) {
            var b = this.Km;
            b !== a && (a !== lp && a !== Rp && D.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.Km = a, this.K(), this.i("columnSizing", b, a))
        }
    });
    D.defineProperty(x, {
        cH: "topIndex"
    },
    function() {
        return void 0 === this.vj ? 0 : this.vj
    },
    function(a) {
        if (void 0 !== this.vj) {
            var b = this.vj;
            b !== a && ((!isFinite(a) || 0 > a) && D.k("Panel.topIndex must be greater than zero and a real number, not: " + a), this.vj = a, this.K(), this.i("topIndex", b, a))
        }
    });
    D.defineProperty(x, {
        $F: "leftIndex"
    },
    function() {
        return void 0 === this.fj ? 0 : this.fj
    },
    function(a) {
        if (void 0 !== this.fj) {
            var b = this.fj;
            b !== a && ((!isFinite(a) || 0 > a) && D.k("Panel.leftIndex must be greater than zero and a real number, not: " + a), this.fj = a, this.K(), this.i("leftIndex", b, a))
        }
    });
    x.prototype.findRowForLocalY = function(a) {
        if (0 > a) return - 1;
        if (this.type !== ea) return NaN;
        for (var b = 0,
        c = this.he,
        d = c.length,
        e = this.vj; e < d; e++) {
            var g = c[e];
            if (void 0 !== g && (b += g.total, a < b)) return e
        }
        return - 1
    };
    x.prototype.findColumnForLocalX = function(a) {
        if (0 > a) return - 1;
        if (this.type !== ea) return NaN;
        for (var b = 0,
        c = this.de,
        d = c.length,
        e = this.fj; e < d; e++) {
            var g = c[e];
            if (void 0 !== g && (b += g.total, a < b)) return e
        }
        return - 1
    };
    x.prototype.graduatedPointForValue = function(a, b) {
        void 0 === b && (b = new O(NaN, NaN));
        if (this.type !== mp) return b.m(NaN, NaN),
        b;
        a = Math.min(Math.max(a, this.Tk), this.QA);
        var c = (a - this.Tk) / this.Nx,
        d = this.Vd();
        d.Df.NI(c, b);
        c = D.Of();
        c.set(d.transform);
        b.transform(c);
        D.He(c);
        return b
    };
    x.prototype.graduatedValueForPoint = function(a) {
        if (this.type !== mp) return NaN;
        var b = this.Vd(),
        c = b.Df,
        d = D.Of();
        d.set(b.transform);
        d.Qx();
        a.transform(d);
        D.He(d);
        return c.JI(a) * this.Nx + this.Tk
    };
    D.defineProperty(x, {
        data: "data"
    },
    function() {
        return this.Nd
    },
    function(a) {
        var b = this.Nd;
        if (b !== a) {
            var c = this instanceof F && !(this instanceof da);
            c && D.h(a, "object", x, "data");
            Kh(this);
            this.Nd = a;
            var d = this.g;
            null !== d && (c ? this instanceof J ? (null !== b && d.ck.remove(b), null !== a && d.ck.add(a, this)) : this instanceof F && (null !== b && d.Ti.remove(b), null !== a && d.Ti.add(a, this)) : (c = this.Q, null !== c && null !== c.Dg && (null !== b && c.Dg.remove(b), null !== a && c.Dg.add(a, this))));
            this.i("data", b, a);
            null !== d && d.ra.nb || null !== a && this.Nb()
        }
    });
    D.defineProperty(x, {
        Au: "itemIndex"
    },
    function() {
        return this.ns
    },
    function(a) {
        var b = this.ns;
        b !== a && (this.ns = a, this.i("itemIndex", b, a))
    });
    function ep(a) {
        a = a.pl;
        return null !== a && a.J
    }
    function Kh(a) {
        var b = a.pl;
        if (null === b) null !== a.data && D.k("Template cannot have .data be non-null: " + a),
        a.pl = b = new K(ih);
        else if (b.J) return;
        var c = new K(P);
        eq(a, !1);
        dp(a, a,
        function(a, d) {
            var e = d.Bc;
            if (null !== e) for ($o(d, !1), e = e.j; e.next();) {
                var g = e.value;
                g.mode === kh && $o(d, !0);
                var h = g.Vq;
                null !== h && ("/" === h && eq(a, !0), h = lh(g, a, d), null !== h && (c.add(h), null === h.Np && (h.Np = new K(ih)), h.Np.add(g)));
                b.add(g)
            }
            if (d instanceof x && d.type === ea) {
                if (0 < d.he.length) for (e = d.he, g = e.length, h = 0; h < g; h++) {
                    var k = e[h];
                    if (void 0 !== k && null !== k.Bc) for (var l = k.Bc.j; l.next();) {
                        var t = l.value;
                        t.Og = k;
                        t.Et = 2;
                        t.Up = k.index;
                        b.add(t)
                    }
                }
                if (0 < d.de.length) for (e = d.de, g = e.length, h = 0; h < g; h++) if (k = e[h], void 0 !== k && null !== k.Bc) for (l = k.Bc.j; l.next();) t = l.value,
                t.Og = k,
                t.Et = 1,
                t.Up = k.index,
                b.add(t)
            }
        });
        for (var d = c.j; d.next();) {
            var e = d.value;
            if (null !== e.Np) {
                $o(e, !0);
                for (var g = e.Np.j; g.next();) {
                    var h = g.value;
                    null === e.Bc && (e.Bc = new K(ih));
                    e.Bc.add(h)
                }
            }
            e.Np = null
        }
        for (d = b.j; d.next();) if (e = d.value, g = e.Og, null !== g) {
            e.Og = null;
            var k = e.ev,
            l = k.indexOf(".");
            0 < l && g instanceof x && (h = k.substring(0, l), k = k.substr(l + 1), l = g.Ed(h), null !== l ? (g = l, e.ev = k) : D.trace('Warning: unable to find GraphObject named "' + h + '" for Binding: ' + e.toString()));
            g instanceof ch ? (e.Bm = D.Fd(g.Q), g.Q.Jo = e.Bm) : (e.Bm = D.Fd(g), g.Jo = e.Bm)
        }
        b.freeze();
        a instanceof F && (a.oe() && a.hf(), v && !fq && dp(a, a,
        function(a, c) {
            if (c instanceof x && (c.type === Kl || c.type === Qj || c.type === mp) && 1 >= c.elements.count && !(c instanceof F)) {
                if (1 === c.elements.count) {
                    var d = null !== c.Xk;
                    if (!d) for (var e = b.j; e.next();) if ("itemArray" === e.value.ev) {
                        d = !0;
                        break
                    }
                }
                d || (D.trace("Auto, Spot, or Graduated Panel should not have zero or one elements: " + c.toString() + " in " + a.toString()), fq = !0)
            }
        }))
    }
    var fq = !1;
    x.prototype.copyTemplate = function() {
        var a = this.copy();
        a.AK(function(a) {
            a instanceof x && (a.pl = null, a.Nd = null);
            var c = a.Bc;
            null !== c && (a.Bc = null, c.each(function(c) {
                a.bind(c.copy())
            }))
        });
        return a
    };
    x.prototype.updateTargetBindings = x.prototype.Nb = function(a) {
        var b = this.pl;
        if (null !== b) for (void 0 === a && (a = ""), b = b.j; b.next();) {
            var c = b.value,
            d = c.TG;
            if ("" === a || "" === d || d === a) if (d = c.ev, null !== c.gI || "" !== d) {
                var d = this.data,
                e = c.Vq;
                if (null !== e) d = "" === e ? this: "/" === e ? this: "." === e ? this: ".." === e ? this: this.Ed(e);
                else {
                    var g = this.g;
                    null !== g && c.Yx && (d = g.ga.Yk)
                }
                if (null === d) v && D.trace("Binding error: missing GraphObject named " + e + " in " + this.toString());
                else {
                    var g = this,
                    h = c.Bm;
                    if ( - 1 !== h) {
                        if (g = this.Gx(h), null === g) continue
                    } else null !== c.Og && (g = c.Og);
                    "/" === e ? d = g.Y: "." === e ? d = g: ".." === e && (d = g.Q);
                    e = c.Et;
                    if (0 !== e) {
                        if (! (g instanceof x)) continue;
                        h = g;
                        1 === e ? g = h.le(c.Up) : 2 === e && (g = h.me(c.Up))
                    }
                    void 0 !== g && c.iH(g, d)
                }
            }
        }
    };
    D.defineProperty(x, {
        Xk: "itemArray"
    },
    function() {
        return this.cj
    },
    function(a) {
        var b = this.cj;
        if (b !== a) {
            v && null !== a && !D.isArray(a) && D.k("Panel.itemArray must be an Array-like object or null, not: " + a);
            var c = this.g;
            null !== c && null !== b && Xm(c, this);
            this.cj = a;
            null !== c && null !== a && Tm(c, this);
            this.i("itemArray", b, a);
            null !== c && c.ra.nb || this.uB()
        }
    });
    function pn(a) {
        return a.type === Qj || a.type === Kl || a.type === kj || a.type === ea && 0 < a.xa.length && (a = a.xa.ea(0), a.Gf && a instanceof x && (a.type === Oo || a.type === Po)) ? !0 : !1
    }
    x.prototype.rebuildItemElements = x.prototype.uB = function() {
        var a = 0;
        for (pn(this) && (a = 1); this.xa.length > a;) this.rf(this.xa.length - 1);
        a = this.Xk;
        if (null !== a) for (var b = D.cb(a), c = 0; c < b; c++) on(this, D.La(a, c), c)
    };
    x.prototype.findItemPanelForData = x.prototype.DI = function(a) {
        if (void 0 === a || null === a || null === this.Dg) return null;
        D.h(a, "object", x, "findItemPanelForData");
        return this.Dg.oa(a)
    };
    function on(a, b, c) {
        if (! (void 0 === b || null === b || 0 > c)) {
            var d;
            d = gq(a, b);
            var e = a.mJ,
            g = null;
            null !== e && (g = e.oa(d));
            null === g && (hq || (hq = !0, D.trace('No item template Panel found for category "' + d + '" on ' + a), D.trace("  Using default item template."), d = new x, e = new na, e.bind(new ih("text", "", ja)), d.add(e), iq = d), g = iq);
            d = g;
            null !== d && (Kh(d), d = d.copy(), 0 !== (d.T & 16777216) && (e = a.lm(), null !== e && eq(e, !0)), "object" === typeof b && (null === a.Dg && (a.Dg = new ma(Object, x)), a.Dg.add(b, d)), e = c, pn(a) && e++, a.Xd(e, d), d.Nd = b, qn(a, e, c), d.Nd = null, d.data = b)
        }
    }
    function qn(a, b, c) {
        for (a = a.xa; b < a.length;) {
            var d = a.ea(b);
            if (d instanceof x) {
                var e = b,
                g = c;
                d.type === Oo ? d.Zb = e: d.type === Po && (d.column = e);
                d.Au = g
            }
            b++;
            c++
        }
    }
    D.defineProperty(x, {
        LL: "itemTemplate"
    },
    function() {
        return null === this.Eg ? null: this.Eg.oa("")
    },
    function(a) {
        if (null === this.Eg) {
            if (null === a) return;
            this.Eg = new ma("string", x)
        }
        var b = this.Eg.oa("");
        b !== a && (D.l(a, x, x, "itemTemplate"), (a instanceof F || a.Gf) && D.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: " + a), this.Eg.add("", a), this.i("itemTemplate", b, a), a = this.g, null !== a && a.ra.nb || this.uB())
    });
    D.defineProperty(x, {
        mJ: "itemTemplateMap"
    },
    function() {
        return this.Eg
    },
    function(a) {
        var b = this.Eg;
        if (b !== a) {
            D.l(a, ma, x, "itemTemplateMap");
            for (var c = a.j; c.next();) {
                var d = c.value; (d instanceof F || d.Gf) && D.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: " + d)
            }
            this.Eg = a;
            this.i("itemTemplateMap", b, a);
            a = this.g;
            null !== a && a.ra.nb || this.uB()
        }
    });
    D.defineProperty(x, {
        WF: "itemCategoryProperty"
    },
    function() {
        return this.qp
    },
    function(a) {
        var b = this.qp;
        b !== a && ("string" !== typeof a && "function" !== typeof a && D.gc(a, "string or function", x, "itemCategoryProperty"), this.qp = a, this.i("itemCategoryProperty", b, a))
    });
    function gq(a, b) {
        if (null === b) return "";
        var c = a.qp,
        d = "";
        if ("function" === typeof c) d = c(b);
        else if ("string" === typeof c && "object" === typeof b) {
            if ("" === c) return "";
            d = D.ub(b, c)
        } else return "";
        if (void 0 === d) return "";
        if ("string" === typeof d) return d;
        D.k("Panel.getCategoryForItemData found a non-string category for " + b + ": " + d);
        return ""
    }
    var hq = !1,
    iq = null;
    D.defineProperty(x, {
        Yn: "isAtomic"
    },
    function() {
        return 0 !== (this.T & 1048576)
    },
    function(a) {
        var b = 0 !== (this.T & 1048576);
        b !== a && (D.h(a, "boolean", x, "isAtomic"), this.T ^= 1048576, this.i("isAtomic", b, a))
    });
    D.defineProperty(x, {
        yq: "isClipping"
    },
    function() {
        return 0 !== (this.T & 2097152)
    },
    function(a) {
        var b = 0 !== (this.T & 2097152);
        b !== a && (D.h(a, "boolean", x, "isClipping"), this.T ^= 2097152, this.K(), this.i("isClipping", b, a))
    });
    D.defineProperty(x, {
        TF: "isOpposite"
    },
    function() {
        return 0 !== (this.T & 33554432)
    },
    function(a) {
        var b = 0 !== (this.T & 33554432);
        b !== a && (D.h(a, "boolean", x, "isOpposite"), this.T ^= 33554432, this.K(), this.i("isOpposite", b, a))
    });
    D.defineProperty(x, {
        isEnabled: "isEnabled"
    },
    function() {
        return 0 !== (this.T & 4194304)
    },
    function(a) {
        var b = 0 !== (this.T & 4194304);
        if (b !== a) {
            D.h(a, "boolean", x, "isEnabled");
            var c = null === this.Q || this.Q.vu();
            this.T ^= 4194304;
            this.i("isEnabled", b, a);
            b = this.g;
            null !== b && b.ra.nb || c && dq(this, this, a)
        }
    });
    function dq(a, b, c) {
        var d = b.iF;
        null !== d && d(b, c);
        if (b instanceof x) {
            b = b.xa.o;
            for (var d = b.length,
            e = 0; e < d; e++) {
                var g = b[e];
                c && g instanceof x && !g.isEnabled || dq(a, g, c)
            }
        }
    }
    D.defineProperty(x, {
        EK: "alignmentFocusName"
    },
    function() {
        return this.$j
    },
    function(a) {
        var b = this.$j;
        b !== a && (v && D.h(a, "string", x, "alignmentFocusName"), this.$j = a, this.K(), this.i("alignmentFocusName", b, a))
    });
    function ch() {
        D.tc(this);
        this.Bh = null;
        this.hw = !0;
        this.Cc = 0;
        this.pf = NaN;
        this.vk = 0;
        this.uk = Infinity;
        this.re = Tc;
        this.qb = this.Za = 0;
        this.Bc = null;
        this.vt = jq;
        this.Mg = to;
        this.qt = this.zk = null;
        this.rt = NaN;
        this.Kb = this.ni = null;
        this.yr = !1
    }
    D.ja("RowColumnDefinition", ch);
    ch.prototype.copy = function() {
        var a = new ch;
        a.hw = this.hw;
        a.Cc = this.Cc;
        a.pf = this.pf;
        a.vk = this.vk;
        a.uk = this.uk;
        a.re = this.re;
        a.Za = this.Za;
        a.qb = this.qb;
        a.Mg = this.Mg;
        a.vt = this.vt;
        a.zk = null === this.zk ? null: this.zk.V();
        a.qt = this.qt;
        a.rt = this.rt;
        a.ni = null;
        null !== this.ni && (a.ni = D.cm(this.ni));
        a.Kb = this.Kb;
        a.yr = this.yr;
        a.Bc = this.Bc;
        return a
    };
    ch.prototype.gq = function(a) {
        D.l(a, ch, ch, "copyFrom:pd");
        a.Ie ? this.height = a.height: this.width = a.width;
        this.Pj = a.Pj;
        this.vf = a.vf;
        this.alignment = a.alignment;
        this.stretch = a.stretch;
        this.bv = a.bv;
        this.zk = null === a.zk ? null: a.zk.V();
        this.Pq = a.Pq;
        this.Qq = a.Qq;
        this.ni = null;
        a.ni && (this.ni = D.cm(a.ni));
        this.background = a.background;
        this.zA = a.zA;
        this.Bc = a.Bc
    };
    ch.prototype.nc = function(a) {
        a.Ne === ch ? this.bv = a: D.Xj(this, a)
    };
    ch.prototype.toString = function() {
        return "RowColumnDefinition " + (this.Ie ? "(Row ": "(Column ") + this.index + ") #" + D.Fd(this)
    };
    var jq;
    ch.Default = jq = D.s(ch, "Default", 0);
    var Rp;
    ch.None = Rp = D.s(ch, "None", 1);
    var lp;
    ch.ProportionalExtra = lp = D.s(ch, "ProportionalExtra", 2);
    ch.prototype.ym = function(a) {
        this.Bh = a
    };
    ch.prototype.computeEffectiveSpacingTop = ch.prototype.PE = function() {
        var a = 0;
        if (0 !== this.index) {
            var b = this.Bh,
            c = this.Pq;
            null === c && null !== b && (c = this.Ie ? b.Ui: b.$h);
            null !== c && (a = this.Qq, isNaN(a) && (a = null !== b ? this.Ie ? b.bi: b.ai: 0))
        }
        b = this.NG;
        if (null === b) if (b = this.Bh, null !== b) b = b.dk;
        else return a;
        return a + (this.Ie ? b.top: b.left)
    };
    ch.prototype.computeEffectiveSpacing = ch.prototype.ff = function() {
        var a = 0;
        if (0 !== this.index) {
            var b = this.Bh,
            c = this.Pq;
            null === c && null !== b && (c = this.Ie ? b.Ui: b.$h);
            null !== c && (a = this.Qq, isNaN(a) && (a = null !== b ? this.Ie ? b.bi: b.ai: 0))
        }
        b = this.NG;
        if (null === b) if (b = this.Bh, null !== b) b = b.dk;
        else return a;
        return a + (this.Ie ? b.top + b.bottom: b.left + b.right)
    };
    ch.prototype.pd = function(a, b, c, d, e) {
        var g = this.Bh;
        if (null !== g && (g.hd(cg, a, this, b, c, d, e), null !== this.Bc && (b = g.g, null !== b && !b.Ue && (g = g.lm(), null !== g && (b = g.data, null !== b))))) for (c = this.Bc.j; c.next();) c.value.Jy(this, b, a, g)
    };
    D.w(ch, {
        Q: "panel"
    },
    function() {
        return this.Bh
    });
    D.defineProperty(ch, {
        Ie: "isRow"
    },
    function() {
        return this.hw
    },
    function(a) {
        this.hw = a
    });
    D.defineProperty(ch, {
        index: "index"
    },
    function() {
        return this.Cc
    },
    function(a) {
        this.Cc = a
    });
    D.defineProperty(ch, {
        height: "height"
    },
    function() {
        return this.pf
    },
    function(a) {
        var b = this.pf;
        b !== a && (v && D.h(a, "number", ch, "height"), 0 > a && D.ua(a, ">= 0", ch, "height"), this.pf = a, this.Qa = this.Za, null !== this.Q && this.Q.K(), this.pd("height", b, a))
    });
    D.defineProperty(ch, {
        width: "width"
    },
    function() {
        return this.pf
    },
    function(a) {
        var b = this.pf;
        b !== a && (v && D.h(a, "number", ch, "width"), 0 > a && D.ua(a, ">= 0", ch, "width"), this.pf = a, this.Qa = this.Za, null !== this.Q && this.Q.K(), this.pd("width", b, a))
    });
    D.defineProperty(ch, {
        Pj: "minimum"
    },
    function() {
        return this.vk
    },
    function(a) {
        var b = this.vk;
        b !== a && (v && D.h(a, "number", ch, "minimum"), (0 > a || !isFinite(a)) && D.ua(a, ">= 0", ch, "minimum"), this.vk = a, this.Qa = this.Za, null !== this.Q && this.Q.K(), this.pd("minimum", b, a))
    });
    D.defineProperty(ch, {
        vf: "maximum"
    },
    function() {
        return this.uk
    },
    function(a) {
        var b = this.uk;
        b !== a && (v && D.h(a, "number", ch, "maximum"), 0 > a && D.ua(a, ">= 0", ch, "maximum"), this.uk = a, this.Qa = this.Za, null !== this.Q && this.Q.K(), this.pd("maximum", b, a))
    });
    D.defineProperty(ch, {
        alignment: "alignment"
    },
    function() {
        return this.re
    },
    function(a) {
        var b = this.re;
        b.O(a) || (v && D.l(a, R, ch, "alignment"), this.re = a.V(), null !== this.Q && this.Q.K(), this.pd("alignment", b, a))
    });
    D.defineProperty(ch, {
        stretch: "stretch"
    },
    function() {
        return this.Mg
    },
    function(a) {
        var b = this.Mg;
        b !== a && (v && D.Ca(a, P, ch, "stretch"), this.Mg = a, null !== this.Q && this.Q.K(), this.pd("stretch", b, a))
    });
    D.defineProperty(ch, {
        NG: "separatorPadding"
    },
    function() {
        return this.zk
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : null !== a && v && D.l(a, Hb, ch, "separatorPadding");
        var b = this.zk;
        null !== a && null !== b && b.O(a) || (null !== a && (a = a.V()), this.zk = a, null !== this.Q && this.Q.K(), this.pd("separatorPadding", b, a))
    });
    D.defineProperty(ch, {
        Pq: "separatorStroke"
    },
    function() {
        return this.qt
    },
    function(a) {
        var b = this.qt;
        b !== a && (null === a || "string" === typeof a || a instanceof Ba) && (a instanceof Ba && a.freeze(), this.qt = a, null !== this.Q && this.Q.K(), this.pd("separatorStroke", b, a))
    });
    D.defineProperty(ch, {
        Qq: "separatorStrokeWidth"
    },
    function() {
        return this.rt
    },
    function(a) {
        var b = this.rt;
        b !== a && (this.rt = a, null !== this.Q && this.Q.K(), this.pd("separatorStrokeWidth", b, a))
    });
    D.defineProperty(ch, {
        rM: "separatorDashArray"
    },
    function() {
        return this.ni
    },
    function(a) {
        var b = this.ni;
        if (b !== a) {
            null === a || Array.isArray(a) || D.gc(a, "Array", ch, "separatorDashArray:value");
            if (null !== a) {
                for (var c = a.length,
                d = 0,
                e = 0; e < c; e++) {
                    var g = a[e];
                    "number" === typeof g && 0 <= g && isFinite(g) || D.k("separatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                    d += g
                }
                if (0 === d) {
                    if (null === b) return;
                    a = null
                }
            }
            this.ni = a;
            null !== this.Q && this.Q.qa();
            this.pd("separatorDashArray", b, a)
        }
    });
    D.defineProperty(ch, {
        background: "background"
    },
    function() {
        return this.Kb
    },
    function(a) {
        var b = this.Kb;
        b !== a && (null === a || "string" === typeof a || a instanceof Ba) && (a instanceof Ba && a.freeze(), this.Kb = a, null !== this.Q && this.Q.qa(), this.pd("background", b, a))
    });
    D.defineProperty(ch, {
        zA: "coversSeparators"
    },
    function() {
        return this.yr
    },
    function(a) {
        var b = this.yr;
        b !== a && (D.h(a, "boolean", ch, "coversSeparators"), this.yr = a, null !== this.Q && this.Q.qa(), this.pd("coversSeparators", b, a))
    });
    D.defineProperty(ch, {
        bv: "sizing"
    },
    function() {
        return this.vt
    },
    function(a) {
        var b = this.vt;
        b !== a && (v && D.Ca(a, ch, ch, "sizing"), this.vt = a, null !== this.Q && this.Q.K(), this.pd("sizing", b, a))
    });
    function Qp(a) {
        if (a.bv === jq) {
            var b = a.Bh;
            return a.Ie ? b.cK: b.bI
        }
        return a.bv
    }
    D.defineProperty(ch, {
        Qa: "actual"
    },
    function() {
        return this.Za
    },
    function(a) {
        this.Za = isNaN(this.pf) ? Math.max(Math.min(this.uk, a), this.vk) : Math.max(Math.min(this.uk, this.pf), this.vk)
    });
    D.defineProperty(ch, {
        total: "total"
    },
    function() {
        return this.Za + this.ff()
    },
    function(a) {
        this.Za = isNaN(this.pf) ? Math.max(Math.min(this.uk, a), this.vk) : Math.max(Math.min(this.uk, this.pf), this.vk);
        this.Za = Math.max(0, this.Za - this.ff())
    });
    D.defineProperty(ch, {
        position: "position"
    },
    function() {
        return this.qb
    },
    function(a) {
        this.qb = a
    });
    ch.prototype.bind = ch.prototype.bind = function(a) {
        a.Og = this;
        var b = this.Q;
        if (null !== b) {
            var c = b.lm();
            null !== c && ep(c) && D.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a + " on " + b)
        }
        null === this.Bc && (this.Bc = new K(ih));
        this.Bc.add(a)
    };
    function z() {
        P.call(this);
        this.Xf = this.ob = null;
        this.ap = "None";
        this.Wr = to;
        this.xc = this.Od = "black";
        this.Ng = 1;
        this.Qp = "butt";
        this.Sp = "miter";
        this.vn = 10;
        this.Rp = null;
        this.Af = 0;
        this.vi = this.ui = Tc;
        this.Ts = this.Ss = NaN;
        this.es = !1;
        this.Vs = null;
        this.dp = this.Wp = "None";
        this.Bg = 1;
        this.Ag = 0;
        this.zg = 1
    }
    D.Sa(z, P);
    D.ja("Shape", z);
    z.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.ob = this.ob;
        a.ap = this.ap;
        a.Wr = this.Wr;
        a.Xf = this.Xf;
        a.Od = this.Od;
        a.xc = this.xc;
        a.Ng = this.Ng;
        a.Qp = this.Qp;
        a.Sp = this.Sp;
        a.vn = this.vn;
        null !== this.Rp && (a.Rp = D.cm(this.Rp));
        a.Af = this.Af;
        a.ui = this.ui.V();
        a.vi = this.vi.V();
        a.Ss = this.Ss;
        a.Ts = this.Ts;
        a.es = this.es;
        a.Vs = this.Vs;
        a.Wp = this.Wp;
        a.dp = this.dp;
        a.Bg = this.Bg;
        a.Ag = this.Ag;
        a.zg = this.zg
    };
    z.prototype.nc = function(a) {
        a === Sj || a === Uj || a === Vj || a === to ? this.NA = a: P.prototype.nc.call(this, a)
    };
    z.prototype.toString = function() {
        return "Shape(" + ("None" !== this.Jb ? this.Jb: "None" !== this.Wq ? this.Wq: this.LA) + ")#" + D.Fd(this)
    };
    function kq(a, b, c, d) {
        var e = c.length;
        if (! (4 > e)) {
            for (var g = d.Fa,
            h = Math.max(1, g.width), g = g.height, k = c[0], l = c[1], m = 0, n = 0, p = 0, q = 0, r = 0, s = 0, u = q = 0, t = D.tb(), y = 2; y < e; y += 2) m = c[y],
            n = c[y + 1],
            p = m - k,
            q = n - l,
            0 === p && (p = .001),
            r = q / p,
            s = Math.atan2(q, p),
            q = Math.sqrt(p * p + q * q),
            t.push([p, s, r, q]),
            u += q,
            k = m,
            l = n;
            k = c[0];
            l = c[1];
            p = d.Fa.width;
            d instanceof z && (p -= d.jb);
            1 > p && (p = 1);
            for (var e = c = p,
            m = h / 2,
            n = 0 === m ? !1 : !0, y = 0, q = t[y], p = q[0], s = q[1], r = q[2], q = q[3], w = 0;.1 <= u;) {
                0 === w && (n ? (e = c, e -= m, u -= m, n = !1) : e = c, 0 === e && (e = 1));
                if (e > u) {
                    D.Aa(t);
                    return
                }
                e > q ? (w = e - q, e = q) : w = 0;
                var C = Math.sqrt(e * e / (1 + r * r));
                0 > p && (C = -C);
                k += C;
                l += r * C;
                a.translate(k, l);
                a.rotate(s);
                a.translate( - (h / 2), -(g / 2));
                0 === w && d.Pk(a, b);
                a.translate(h / 2, g / 2);
                a.rotate( - s);
                a.translate( - k, -l);
                u -= e;
                q -= e;
                if (0 !== w) {
                    y++;
                    if (y === t.length) {
                        D.Aa(t);
                        return
                    }
                    q = t[y];
                    p = q[0];
                    s = q[1];
                    r = q[2];
                    q = q[3];
                    e = w
                }
            }
            D.Aa(t)
        }
    }
    z.prototype.Pk = function(a, b) {
        if (null !== this.xc || null !== this.Od) {
            null !== this.Od && So(this, a, this.Od, !0, !1);
            null !== this.xc && So(this, a, this.xc, !1, !1);
            var c = this.Ng;
            if (0 === c) {
                var d = this.Y;
                d instanceof da && d.type === kj && "Selection" === d.Dd && d.zb instanceof z && d.Zf.Vd() === d.zb && (c = d.zb.jb)
            }
            a.lineWidth = c;
            a.lineJoin = this.Sp;
            a.lineCap = this.Qp;
            a.miterLimit = this.vn;
            var e = !1;
            this.Y && b.Gj("drawShadows") && (e = this.Y.Wk);
            var g = !0;
            null !== this.xc && null === this.Od && (g = !1);
            var d = !1,
            h = !0,
            k = this.WG;
            null !== k && (d = !0, h = a.GA(k, this.Af));
            var l = this.ob;
            if (null !== l) {
                if (l.ca === sf) a.beginPath(),
                d && !h ? Do(a, l.wc, l.Gc, l.Ab, l.Ib, k, this.Af) : (a.moveTo(l.wc, l.Gc), a.lineTo(l.Ab, l.Ib)),
                null !== this.Od && a.Ug(this.Od),
                0 !== c && null !== this.xc && a.Vj();
                else if (l.ca === tf) {
                    var m = l.wc,
                    n = l.Gc,
                    p = l.Ab,
                    q = l.Ib,
                    l = Math.min(m, p),
                    r = Math.min(n, q),
                    m = Math.abs(p - m),
                    n = Math.abs(q - n);
                    null !== this.Od && (a.beginPath(), a.rect(l, r, m, n), a.Ug(this.Od));
                    if (null !== this.xc) {
                        var s = p = 0,
                        u = 0;
                        g && e && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0);
                        d && !h ? (h = D.tb(), h.push(l), h.push(r), h.push(l + m), h.push(r), h.push(l + m), h.push(r + n), h.push(l), h.push(r + n), h.push(l), h.push(r), a.beginPath(), lq(a, h, k, this.Af), a.Vj(), D.Aa(h)) : 0 !== c && (a.beginPath(), a.rect(l, r, m, n), a.Vj());
                        g && e && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u)
                    }
                } else if (l.ca === uf) m = l.wc,
                n = l.Gc,
                p = l.Ab,
                q = l.Ib,
                l = Math.abs(p - m) / 2,
                r = Math.abs(q - n) / 2,
                m = Math.min(m, p) + l,
                n = Math.min(n, q) + r,
                a.beginPath(),
                a.moveTo(m, n - r),
                a.bezierCurveTo(m + Fd * l, n - r, m + l, n - Fd * r, m + l, n),
                a.bezierCurveTo(m + l, n + Fd * r, m + Fd * l, n + r, m, n + r),
                a.bezierCurveTo(m - Fd * l, n + r, m - l, n + Fd * r, m - l, n),
                a.bezierCurveTo(m - l, n - Fd * r, m - Fd * l, n - r, m, n - r),
                a.closePath(),
                null !== this.Od && a.Ug(this.Od),
                d && !h && (h = D.tb(), Fe(m, n - r, m + Fd * l, n - r, m + l, n - Fd * r, m + l, n, .5, h), Fe(m + l, n, m + l, n + Fd * r, m + Fd * l, n + r, m, n + r, .5, h), Fe(m, n + r, m - Fd * l, n + r, m - l, n + Fd * r, m - l, n, .5, h), Fe(m - l, n, m - l, n - Fd * r, m - Fd * l, n - r, m, n - r, .5, h), a.beginPath(), lq(a, h, k, this.Af), D.Aa(h)),
                0 !== c && null !== this.xc && (g && e ? (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0, a.Vj(), a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u) : a.Vj());
                else if (l.ca === cf) {
                    r = l.fk;
                    n = r.length;
                    for (q = 0; q < n; q++) {
                        m = r.o[q];
                        a.beginPath();
                        a.moveTo(m.ma, m.ka);
                        for (var p = m.Db.o,
                        s = p.length,
                        t = null,
                        u = 0; u < s; u++) {
                            var y = p[u];
                            switch (y.ca) {
                            case Ef:
                                a.moveTo(y.H, y.I);
                                break;
                            case wf:
                                a.lineTo(y.H, y.I);
                                break;
                            case Of:
                                a.bezierCurveTo(y.Pd, y.df, y.Ch, y.Kg, y.Ab, y.Ib);
                                break;
                            case Pf:
                                a.quadraticCurveTo(y.Pd, y.df, y.Ab, y.Ib);
                                break;
                            case Qf:
                                if (y.radiusX === y.radiusY) t = Math.PI / 180,
                                a.arc(y.Pd, y.df, y.radiusX, y.Le * t, (y.Le + y.xf) * t, 0 > y.xf);
                                else {
                                    var t = Sf(y, m),
                                    w = t.length;
                                    if (0 === w) {
                                        a.lineTo(y.na, y.va);
                                        break
                                    }
                                    for (var C = 0; C < w; C++) {
                                        var A = t[C];
                                        0 === C && a.lineTo(A[0], A[1]);
                                        a.bezierCurveTo(A[2], A[3], A[4], A[5], A[6], A[7])
                                    }
                                }
                                break;
                            case Rf:
                                C = w = 0;
                                if (null !== t && t.type === Qf) {
                                    t = Sf(t, m);
                                    A = t.length;
                                    if (0 === A) {
                                        a.lineTo(y.na, y.va);
                                        break
                                    }
                                    t = t[A - 1] || null;
                                    null !== t && (w = t[6], C = t[7])
                                } else w = null !== t ? t.H: m.ma,
                                C = null !== t ? t.I: m.ka;
                                t = Tf(y, m, w, C);
                                w = t.length;
                                if (0 === w) {
                                    a.lineTo(y.na, y.va);
                                    break
                                }
                                for (C = 0; C < w; C++) A = t[C],
                                a.bezierCurveTo(A[2], A[3], A[4], A[5], A[6], A[7]);
                                break;
                            default:
                                D.k("Segment not of valid type: " + y.ca)
                            }
                            y.ei && a.closePath();
                            t = y
                        }
                        e ? (u = s = p = 0, m.np ? (!0 === m.Tm && null !== this.Od ? (a.Ug(this.Od), g = !0) : g = !1, 0 !== c && null !== this.xc && (g && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), d && !h || a.Vj(), g && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (g && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), !0 === m.Tm && null !== this.Od && a.Ug(this.Od), 0 !== c && null !== this.xc && (d && !h || a.Vj()), g && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (!0 === m.Tm && null !== this.Od && a.Ug(this.Od), 0 === c || null === this.xc || d && !h || a.Vj())
                    }
                    if (d && !h) for (c = g, g = l.fk, h = g.length, l = 0; l < h; l++) {
                        r = g.o[l];
                        a.beginPath();
                        n = D.tb();
                        n.push(r.ma);
                        n.push(r.ka);
                        q = r.ma;
                        m = r.ka;
                        p = q;
                        s = m;
                        u = r.Db.o;
                        y = u.length;
                        for (t = 0; t < y; t++) {
                            w = u[t];
                            switch (w.ca) {
                            case Ef:
                                lq(a, n, k, this.Af);
                                n.length = 0;
                                n.push(w.H);
                                n.push(w.I);
                                q = w.H;
                                m = w.I;
                                p = q;
                                s = m;
                                break;
                            case wf:
                                n.push(w.H);
                                n.push(w.I);
                                q = w.H;
                                m = w.I;
                                break;
                            case Of:
                                Fe(q, m, w.Pd, w.df, w.Ch, w.Kg, w.Ab, w.Ib, .5, n);
                                q = w.H;
                                m = w.I;
                                break;
                            case Pf:
                                Je(q, m, w.Pd, w.df, w.Ab, w.Ib, .5, n);
                                q = w.H;
                                m = w.I;
                                break;
                            case Qf:
                                C = Sf(w, r);
                                A = C.length;
                                if (0 === A) {
                                    n.push(w.na);
                                    n.push(w.va);
                                    q = w.na;
                                    m = w.va;
                                    break
                                }
                                for (var N = 0; N < A; N++) {
                                    var H = C[N];
                                    Fe(q, m, H[2], H[3], H[4], H[5], H[6], H[7], .5, n);
                                    q = H[6];
                                    m = H[7]
                                }
                                break;
                            case Rf:
                                C = Tf(w, r, q, m);
                                A = C.length;
                                if (0 === A) {
                                    n.push(w.na);
                                    n.push(w.va);
                                    q = w.na;
                                    m = w.va;
                                    break
                                }
                                for (N = 0; N < A; N++) H = C[N],
                                Fe(q, m, H[2], H[3], H[4], H[5], H[6], H[7], .5, n),
                                q = H[6],
                                m = H[7];
                                break;
                            default:
                                D.k("Segment not of valid type: " + w.ca)
                            }
                            w.ei && (n.push(p), n.push(s), lq(a, n, k, this.Af))
                        }
                        lq(a, n, k, this.Af);
                        D.Aa(n);
                        null !== this.xc && (q = n = r = 0, c && e && (r = a.shadowOffsetX, n = a.shadowOffsetY, q = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.Vj(), c && e && (a.shadowOffsetX = r, a.shadowOffsetY = n, a.shadowBlur = q))
                    }
                }
                d && a.BA();
                if (null !== this.oy) {
                    d = this.oy;
                    Ak(d, Infinity, Infinity);
                    k = d.Fa;
                    d.oc(0, 0, k.width, k.height);
                    c = this.Df;
                    a.save();
                    a.beginPath();
                    k = D.tb();
                    if (c.type === sf) k.push(c.ma),
                    k.push(c.ka),
                    k.push(c.H),
                    k.push(c.I),
                    kq(a, b, k, d);
                    else if (c.type === cf) for (h = c.kc.j; h.next();) {
                        l = h.value;
                        k.length = 0;
                        k.push(l.ma);
                        k.push(l.ka);
                        g = l.ma;
                        r = l.ka;
                        n = g;
                        q = r;
                        m = l.Db.o;
                        p = m.length;
                        for (s = 0; s < p; s++) {
                            u = m[s];
                            switch (u.ca) {
                            case Ef:
                                kq(a, b, k, d);
                                k.length = 0;
                                k.push(u.H);
                                k.push(u.I);
                                g = u.H;
                                r = u.I;
                                n = g;
                                q = r;
                                break;
                            case wf:
                                k.push(u.H);
                                k.push(u.I);
                                g = u.H;
                                r = u.I;
                                break;
                            case Of:
                                Fe(g, r, u.Pd, u.df, u.Ch, u.Kg, u.Ab, u.Ib, .5, k);
                                g = u.H;
                                r = u.I;
                                break;
                            case Pf:
                                Je(g, r, u.Pd, u.df, u.Ab, u.Ib, .5, k);
                                g = u.H;
                                r = u.I;
                                break;
                            case Qf:
                                c = Sf(u, l);
                                e = c.length;
                                if (0 === e) {
                                    k.push(u.na);
                                    k.push(u.va);
                                    g = u.na;
                                    r = u.va;
                                    break
                                }
                                for (y = 0; y < e; y++) t = c[y],
                                Fe(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k),
                                g = t[6],
                                r = t[7];
                                break;
                            case Rf:
                                c = Tf(u, l, g, r);
                                e = c.length;
                                if (0 === e) {
                                    k.push(u.na);
                                    k.push(u.va);
                                    g = u.na;
                                    r = u.va;
                                    break
                                }
                                for (y = 0; y < e; y++) t = c[y],
                                Fe(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k),
                                g = t[6],
                                r = t[7];
                                break;
                            default:
                                D.k("Segment not of valid type: " + u.ca)
                            }
                            u.ei && (k.push(n), k.push(q), kq(a, b, k, d))
                        }
                        kq(a, b, k, d)
                    } else if (c.type === tf) k.push(c.ma),
                    k.push(c.ka),
                    k.push(c.H),
                    k.push(c.ka),
                    k.push(c.H),
                    k.push(c.I),
                    k.push(c.ma),
                    k.push(c.I),
                    k.push(c.ma),
                    k.push(c.ka),
                    kq(a, b, k, d);
                    else if (c.type === uf) {
                        h = new df;
                        h.ma = c.H;
                        h.ka = (c.ka + c.I) / 2;
                        g = new Xf(Qf);
                        g.Le = 0;
                        g.xf = 360;
                        g.na = (c.ma + c.H) / 2;
                        g.va = (c.ka + c.I) / 2;
                        g.radiusX = Math.abs(c.ma - c.H) / 2;
                        g.radiusY = Math.abs(c.ka - c.I) / 2;
                        h.add(g);
                        c = Sf(g, h);
                        e = c.length;
                        if (0 === e) k.push(g.na),
                        k.push(g.va);
                        else for (g = h.ma, r = h.ka, y = 0; y < e; y++) t = c[y],
                        Fe(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k),
                        g = t[6],
                        r = t[7];
                        kq(a, b, k, d)
                    }
                    D.Aa(k);
                    a.restore();
                    a.Be(!1)
                }
            }
        }
    };
    function lq(a, b, c, d) {
        var e = b.length;
        if (! (4 > e)) {
            var g = .001,
            h = c.length,
            k = b[0],
            l = b[1];
            if (4 === e) Do(a, k, l, b[2], b[3], c, d);
            else {
                a.moveTo(k, l);
                for (var m = g = 0,
                n = 0,
                p = 0,
                q = 0,
                r = p = 0,
                s = D.tb(), u = 2; u < e; u += 2) g = b[u],
                m = b[u + 1],
                n = g - k,
                p = m - l,
                0 === n && (n = .001),
                q = p / n,
                p = Math.sqrt(n * n + p * p),
                s.push([n, q, p]),
                r += p,
                k = g,
                l = m;
                k = b[0];
                l = b[1];
                b = 0;
                for (var e = !0,
                g = c[b % h], m = 0 !== d, u = 0, p = s[u], n = p[0], q = p[1], p = p[2], t = 0;.1 <= r;) {
                    0 === t && (g = c[b % h], b++, m && (d %= g, g -= d, m = !1));
                    g > r && (g = r);
                    g > p ? (t = g - p, g = p) : t = 0;
                    var y = Math.sqrt(g * g / (1 + q * q));
                    0 > n && (y = -y);
                    k += y;
                    l += q * y;
                    e ? a.lineTo(k, l) : a.moveTo(k, l);
                    r -= g;
                    p -= g;
                    if (0 !== t) {
                        u++;
                        if (u === s.length) {
                            D.Aa(s);
                            return
                        }
                        p = s[u];
                        n = p[0];
                        q = p[1];
                        p = p[2];
                        g = t
                    } else e = !e
                }
                D.Aa(s)
            }
        }
    }
    z.prototype.getDocumentPoint = z.prototype.eb = function(a, b) {
        void 0 === b && (b = new O);
        if (a instanceof R) {
            a.Zd() && D.k("getDocumentPoint Spot must be a real, specific Spot, not: " + a.toString());
            var c = this.Ga,
            d = this.jb;
            b.m(a.x * (c.width + d) - d / 2 + c.x + a.offsetX, a.y * (c.height + d) - d / 2 + c.y + a.offsetY)
        } else b.set(a);
        this.Hh.vb(b);
        return b
    };
    z.prototype.Mk = function(a, b) {
        var c = this.Df;
        if (null === c || null === this.fill && null === this.stroke) return ! 1;
        var d = c.sb,
        e = this.jb / 2;
        c.type !== sf || b || (e += 2);
        var g = D.Nf();
        g.assign(d);
        g.eg(e + 2, e + 2);
        if (!g.Oa(a)) return D.Mb(g),
        !1;
        d = e + 1E-4;
        if (c.type === sf) {
            if (null === this.stroke) return ! 1;
            d = (c.H - c.ma) * (a.x - c.ma) + (c.I - c.ka) * (a.y - c.ka);
            if (0 > (c.ma - c.H) * (a.x - c.H) + (c.ka - c.I) * (a.y - c.I) || 0 > d) return ! 1;
            D.Mb(g);
            return ue(c.ma, c.ka, c.H, c.I, e, a.x, a.y)
        }
        if (c.type === tf) {
            var h = c.ma,
            k = c.ka,
            l = c.H,
            m = c.I;
            g.x = Math.min(h, l);
            g.y = Math.min(k, m);
            g.width = Math.abs(l - h);
            g.height = Math.abs(m - k);
            if (null === this.fill) {
                g.eg( - d, -d);
                if (g.Oa(a)) return D.Mb(g),
                !1;
                g.eg(d, d)
            }
            null !== this.stroke && g.eg(e, e);
            e = g.Oa(a);
            D.Mb(g);
            return e
        }
        if (c.type === uf) {
            var h = c.ma,
            k = c.ka,
            l = c.H,
            m = c.I,
            c = Math.min(h, l),
            n = Math.min(k, m),
            h = Math.abs(l - h) / 2,
            k = Math.abs(m - k) / 2,
            c = a.x - (c + h),
            n = a.y - (n + k);
            if (null === this.fill) {
                h -= d;
                k -= d;
                if (0 >= h || 0 >= k || 1 >= c * c / (h * h) + n * n / (k * k)) return D.Mb(g),
                !1;
                h += d;
                k += d
            }
            null !== this.stroke && (h += e, k += e);
            D.Mb(g);
            return 0 >= h || 0 >= k ? !1 : 1 >= c * c / (h * h) + n * n / (k * k)
        }
        if (c.type === cf) return D.Mb(g),
        null === this.fill ? Vf(c, a.x, a.y, e) : c.Oa(a, e, 1 < this.jb, b);
        D.k("Unknown Geometry type: " + c.type);
        return ! 1
    };
    z.prototype.ho = function(a, b, c, d) {
        var e = this.Ea,
        g = this.Ng;
        a = Math.max(a, 0);
        b = Math.max(b, 0);
        var h;
        if (null !== this.Xf) h = this.Df.sb;
        else {
            var k = this.Jb,
            l = qe[k];
            if (void 0 === l) {
                var m = mq[k];
                "string" === typeof m && (m = mq[m]);
                "function" === typeof m ? (l = m(null, 100, 100), qe[k] = l) : D.k("Unsupported Figure: " + k)
            }
            h = l.sb
        }
        var k = h.width,
        l = h.height,
        m = h.width,
        n = h.height;
        switch (Jo(this, !0)) {
        case Sj:
            d = c = 0;
            break;
        case rf:
            m = Math.max(a - g, 0);
            n = Math.max(b - g, 0);
            break;
        case vo:
            m = Math.max(a - g, 0);
            d = 0;
            break;
        case uo:
            c = 0,
            n = Math.max(b - g, 0)
        }
        isFinite(e.width) && (m = e.width);
        isFinite(e.height) && (n = e.height);
        e = this.kf;
        h = this.hg;
        c = Math.max(c, h.width) - g;
        d = Math.max(d, h.height) - g;
        m = Math.min(e.width, m);
        n = Math.min(e.height, n);
        m = isFinite(m) ? Math.max(c, m) : Math.max(k, c);
        n = isFinite(n) ? Math.max(d, n) : Math.max(l, d);
        c = Tj(this);
        switch (c) {
        case Sj:
            break;
        case rf:
            k = m;
            l = n;
            break;
        case Uj:
            c = Math.min(m / k, n / l);
            isFinite(c) || (c = 1);
            k *= c;
            l *= c;
            break;
        default:
            D.k(c + " is not a valid geometryStretch.")
        }
        null !== this.Xf ? (k = Math.max(k, .01), l = Math.max(l, .01), h = null !== this.Xf ? this.Xf: this.ob, e = k, d = l, c = h.copy(), h = h.sb, e /= h.width, d /= h.height, isFinite(e) || (e = 1), isFinite(d) || (d = 1), 1 === e && 1 === d || c.scale(e, d), v && c.freeze(), this.ob = c) : null !== this.ob && yb(this.ob.mp, a - g) && yb(this.ob.kp, b - g) || (this.ob = z.makeGeometry(this, k, l));
        h = this.ob.sb;
        Infinity === a || Infinity === b ? Go(this, h.x - g / 2, h.y - g / 2, 0 === a && 0 === k ? 0 : h.width + g, 0 === b && 0 === l ? 0 : h.height + g) : Go(this, -(g / 2), -(g / 2), m + g, n + g)
    };
    function Sp(a, b, c, d) {
        if (!1 !== Hm(a)) {
            a.Ad.Ya();
            var e = a.Ng;
            0 === e && d instanceof da && d.type === kj && d.zb instanceof z && (e = d.zb.jb);
            e *= a.Bb;
            d instanceof J && null !== d.ob ? (b = d.ob.sb, Go(a, b.x - e / 2, b.y - e / 2, b.width + e, b.height + e)) : Go(a, -(e / 2), -(e / 2), b + e, c + e);
            a.Ad.freeze();
            a.Ad.F() || D.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.Ad.toString());
            em(a, !1)
        }
    }
    function Tj(a) {
        var b = a.NA;
        return null !== a.Xf ? b === to ? rf: b: b === to ? qe[a.Jb].je: b
    }
    z.prototype.yj = function(a, b, c, d) {
        Lo(this, a, b, c, d)
    };
    z.prototype.getNearestIntersectionPoint = z.prototype.vF = function(a, b, c) {
        return this.Tn(a.x, a.y, b.x, b.y, c)
    };
    z.prototype.Tn = function(a, b, c, d, e) {
        var g = this.transform,
        h = 1 / (g.m11 * g.m22 - g.m12 * g.m21),
        k = g.m22 * h,
        l = -g.m12 * h,
        m = -g.m21 * h,
        n = g.m11 * h,
        p = h * (g.m21 * g.dy - g.m22 * g.dx),
        q = h * (g.m12 * g.dx - g.m11 * g.dy),
        g = a * k + b * m + p,
        h = a * l + b * n + q,
        k = c * k + d * m + p,
        l = c * l + d * n + q,
        m = this.jb / 2,
        p = this.ob;
        null === p && (Ak(this, Infinity, Infinity), p = this.ob);
        q = p.sb;
        n = !1;
        if (p.type === sf) if (1.5 >= this.jb) n = Me(p.wc, p.Gc, p.Ab, p.Ib, g, h, k, l, e);
        else {
            var r = 0,
            s = 0;
            p.wc === p.Ab ? (r = m, s = 0) : (b = (p.Ib - p.Gc) / (p.Ab - p.wc), s = m / Math.sqrt(1 + b * b), r = s * b);
            d = D.tb();
            b = new O;
            Me(p.wc + r, p.Gc + s, p.Ab + r, p.Ib + s, g, h, k, l, b) && d.push(b);
            b = new O;
            Me(p.wc - r, p.Gc - s, p.Ab - r, p.Ib - s, g, h, k, l, b) && d.push(b);
            b = new O;
            Me(p.wc + r, p.Gc + s, p.wc - r, p.Gc - s, g, h, k, l, b) && d.push(b);
            b = new O;
            Me(p.Ab + r, p.Ib + s, p.Ab - r, p.Ib - s, g, h, k, l, b) && d.push(b);
            b = d.length;
            if (0 === b) return D.Aa(d),
            !1;
            n = !0;
            s = Infinity;
            for (r = 0; r < b; r++) {
                var k = d[r],
                u = (k.x - g) * (k.x - g) + (k.y - h) * (k.y - h);
                u < s && (s = u, e.x = k.x, e.y = k.y)
            }
            D.Aa(d)
        } else if (p.type === tf) b = q.x - m,
        n = Ne(b, q.y - m, q.x + q.width + m, q.y + q.height + m, g, h, k, l, e);
        else if (p.type === uf) a: if (b = q.copy().eg(m, m), 0 === b.width) n = Me(b.x, b.y, b.x, b.y + b.height, g, h, k, l, e);
        else if (0 === b.height) n = Me(b.x, b.y, b.x + b.width, b.y, g, h, k, l, e);
        else {
            a = b.width / 2;
            var t = b.height / 2;
            d = b.x + a;
            b = b.y + t;
            c = 9999;
            g !== k && (c = (h - l) / (g - k));
            if (9999 > Math.abs(c)) {
                n = h - b - c * (g - d);
                if (0 > a * a * c * c + t * t - n * n) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(a * a * c * c + t * t - n * n);
                k = ( - (a * a * c * n) + a * t * m) / (t * t + a * a * c * c) + d;
                a = ( - (a * a * c * n) - a * t * m) / (t * t + a * a * c * c) + d;
                l = c * (k - d) + n + b;
                b = c * (a - d) + n + b;
                d = Math.abs((g - k) * (g - k)) + Math.abs((h - l) * (h - l));
                h = Math.abs((g - a) * (g - a)) + Math.abs((h - b) * (h - b));
                d < h ? (e.x = k, e.y = l) : (e.x = a, e.y = b)
            } else {
                k = t * t;
                l = g - d;
                k -= k / (a * a) * l * l;
                if (0 > k) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(k);
                l = b + m;
                b -= m;
                d = Math.abs(l - h);
                h = Math.abs(b - h);
                d < h ? (e.x = g, e.y = l) : (e.x = g, e.y = b)
            }
            n = !0
        } else if (p.type === cf) {
            var y = 0,
            w = 0,
            C = u = 0,
            q = D.P(),
            r = k - g,
            s = l - h,
            s = r * r + s * s;
            e.x = k;
            e.y = l;
            for (r = 0; r < p.kc.count; r++) for (var A = p.kc.o[r], N = A.Db, y = A.ma, w = A.ka, H = y, W = w, fa = 0; fa < N.count; fa++) {
                var S = N.o[fa],
                ba = S.type,
                u = S.H,
                C = S.I,
                ia = !1;
                switch (ba) {
                case Ef:
                    H = u;
                    W = C;
                    break;
                case wf:
                    ia = nq(y, w, u, C, g, h, k, l, q);
                    break;
                case Of:
                    var ia = S.Ac,
                    ba = S.Wc,
                    U = S.Rh,
                    Ua = S.Sh,
                    ia = Ke(y, w, ia, ba, U, Ua, u, C, g, h, k, l, .5, q);
                    break;
                case Pf:
                    ia = (y + 2 * S.Ac) / 3;
                    ba = (w + 2 * S.Wc) / 3;
                    U = (2 * S.Ac + u) / 3;
                    Ua = (2 * S.Ac + u) / 3;
                    ia = Ke(y, w, ia, ba, U, Ua, u, C, g, h, k, l, .5, q);
                    break;
                case Qf:
                case Rf:
                    ba = S.type === Qf ? Sf(S, A) : Tf(S, A, y, w);
                    U = ba.length;
                    if (0 === U) {
                        ia = nq(y, w, S.na, S.va, g, h, k, l, q);
                        break
                    }
                    for (C = 0; C < U; C++) t = ba[C],
                    0 === C && nq(y, w, t[0], t[1], g, h, k, l, q) && (u = oq(g, h, q, s, e), u < s && (s = u, n = !0)),
                    Ke(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], g, h, k, l, .5, q) && (u = oq(g, h, q, s, e), u < s && (s = u, n = !0));
                    u = t[6];
                    C = t[7];
                    break;
                default:
                    D.k("Unknown Segment type: " + ba)
                }
                y = u;
                w = C;
                ia && (u = oq(g, h, q, s, e), u < s && (s = u, n = !0));
                S.Rx && (u = H, C = W, nq(y, w, u, C, g, h, k, l, q) && (u = oq(g, h, q, s, e), u < s && (s = u, n = !0)))
            }
            g = c - a;
            h = d - b;
            b = Math.sqrt(g * g + h * h);
            0 !== b && (g /= b, h /= b);
            e.x -= g * m;
            e.y -= h * m;
            D.A(q)
        } else D.k("Unknown Geometry type: " + p.type);
        if (!n) return ! 1;
        this.transform.vb(e);
        return ! 0
    };
    function oq(a, b, c, d, e) {
        a = c.x - a;
        b = c.y - b;
        b = a * a + b * b;
        return b < d ? (e.x = c.x, e.y = c.y, b) : d
    }
    function nq(a, b, c, d, e, g, h, k, l) {
        var m = !1,
        n = (e - h) * (b - d) - (g - k) * (a - c);
        if (0 === n) return ! 1;
        l.x = ((e * k - g * h) * (a - c) - (e - h) * (a * d - b * c)) / n;
        l.y = ((e * k - g * h) * (b - d) - (g - k) * (a * d - b * c)) / n; (a > c ? a - c: c - a) < (b > d ? b - d: d - b) ? (e = b < d ? b: d, a = b < d ? d: b, (l.y > e || yb(l.y, e)) && (l.y < a || yb(l.y, a)) && (m = !0)) : (e = a < c ? a: c, a = a < c ? c: a, (l.x > e || yb(l.x, e)) && (l.x < a || yb(l.x, a)) && (m = !0));
        return m
    }
    z.prototype.containedInRect = z.prototype.Hn = function(a, b) {
        if (void 0 === b) return a.Nk(this.$);
        var c = this.ob;
        null === c && (Ak(this, Infinity, Infinity), c = this.ob);
        var c = c.sb,
        d = this.jb / 2,
        e = !1,
        g = D.P();
        g.m(c.x - d, c.y - d);
        a.Oa(b.vb(g)) && (g.m(c.x - d, c.bottom + d), a.Oa(b.vb(g)) && (g.m(c.right + d, c.bottom + d), a.Oa(b.vb(g)) && (g.m(c.right + d, c.y - d), a.Oa(b.vb(g)) && (e = !0))));
        D.A(g);
        return e
    };
    z.prototype.intersectsRect = z.prototype.Wg = function(a, b) {
        if (this.Hn(a, b) || void 0 === b && (b = this.transform, a.Nk(this.$))) return ! 0;
        var c = D.Of();
        c.set(b);
        c.Qx();
        var d = a.left,
        e = a.right,
        g = a.top,
        h = a.bottom,
        k = D.P();
        k.m(d, g);
        c.vb(k);
        if (this.Mk(k, !0)) return D.A(k),
        !0;
        k.m(e, g);
        c.vb(k);
        if (this.Mk(k, !0)) return D.A(k),
        !0;
        k.m(d, h);
        c.vb(k);
        if (this.Mk(k, !0)) return D.A(k),
        !0;
        k.m(e, h);
        c.vb(k);
        if (this.Mk(k, !0)) return D.A(k),
        !0;
        var l = D.P(),
        m = D.P();
        c.set(b);
        c.lB(this.transform);
        c.Qx();
        l.x = e;
        l.y = g;
        l.transform(c);
        k.x = d;
        k.y = g;
        k.transform(c);
        var n = !1;
        pq(this, k, l, m) ? n = !0 : (k.x = e, k.y = h, k.transform(c), pq(this, k, l, m) ? n = !0 : (l.x = d, l.y = h, l.transform(c), pq(this, k, l, m) ? n = !0 : (k.x = d, k.y = g, k.transform(c), pq(this, k, l, m) && (n = !0))));
        D.A(k);
        D.He(c);
        D.A(l);
        D.A(m);
        return n
    };
    function pq(a, b, c, d) {
        if (!a.vF(b, c, d)) return ! 1;
        a = b.x;
        b = b.y;
        var e = c.x;
        c = c.y;
        var g = d.x;
        d = d.y;
        if (a === e) {
            var h = 0;
            a = 0;
            b < c ? (h = b, a = c) : (h = c, a = b);
            return d >= h && d <= a
        }
        a < e ? (h = a, a = e) : h = e;
        return g >= h && g <= a
    }
    z.prototype.pF = function(a, b, c) {
        function d(a, b) {
            for (var c = a.length,
            d = 0; d < c; d += 2) if (b.mq(a[d], a[d + 1]) > e) return ! 0;
            return ! 1
        }
        if (c && null !== this.fill && this.Mk(a, !0)) return ! 0;
        var e = a.Cf(b);
        b = e;
        1.5 < this.jb && (e = this.jb / 2 + Math.sqrt(e), e *= e);
        var g = this.ob;
        if (null === g && (Ak(this, Infinity, Infinity), g = this.ob, null === g)) return ! 1;
        if (!c) {
            var h = g.sb,
            k = h.x,
            l = h.y,
            m = h.x + h.width,
            h = h.y + h.height;
            if (kb(a.x, a.y, k, l) <= e && kb(a.x, a.y, m, l) <= e && kb(a.x, a.y, k, h) <= e && kb(a.x, a.y, m, h) <= e) return ! 0
        }
        k = g.wc;
        l = g.Gc;
        m = g.Ab;
        h = g.Ib;
        if (g.type === sf) {
            if (c = jb(a.x, a.y, k, l, m, h), g = (k - m) * (a.x - m) + (l - h) * (a.y - h), c <= (0 <= (m - k) * (a.x - k) + (h - l) * (a.y - l) && 0 <= g ? e: b)) return ! 0
        } else {
            if (g.type === tf) return b = !1,
            c && (b = jb(a.x, a.y, k, l, k, h) <= e || jb(a.x, a.y, k, l, m, l) <= e || jb(a.x, a.y, m, l, m, h) <= e || jb(a.x, a.y, k, h, m, h) <= e),
            b;
            if (g.type === uf) {
                b = a.x - (k + m) / 2;
                var g = a.y - (l + h) / 2,
                n = Math.abs(m - k) / 2,
                p = Math.abs(h - l) / 2;
                if (0 === n || 0 === p) return c = jb(a.x, a.y, k, l, m, h),
                c <= e ? !0 : !1;
                if (c) {
                    if (a = af(n, p, b, g), a * a <= e) return ! 0
                } else return kb(b, g, -n, 0) >= e || kb(b, g, 0, -p) >= e || kb(b, g, 0, p) >= e || kb(b, g, n, 0) >= e ? !1 : !0
            } else if (g.type === cf) {
                h = g.sb;
                k = h.x;
                l = h.y;
                m = h.x + h.width;
                h = h.y + h.height;
                if (a.x > m && a.x < k && a.y > h && a.y < l && jb(a.x, a.y, k, l, k, h) > e && jb(a.x, a.y, k, l, m, l) > e && jb(a.x, a.y, m, h, k, h) > e && jb(a.x, a.y, m, h, m, l) > e) return ! 1;
                b = Math.sqrt(e);
                if (c) {
                    if (null === this.fill ? Vf(g, a.x, a.y, b) : g.Oa(a, b, !0)) return ! 0
                } else {
                    c = g.kc;
                    for (b = 0; b < c.count; b++) {
                        k = c.o[b];
                        n = k.ma;
                        p = k.ka;
                        if (a.mq(n, p) > e) return ! 1;
                        l = k.Db.o;
                        m = l.length;
                        for (h = 0; h < m; h++) {
                            var q = l[h];
                            switch (q.type) {
                            case Ef:
                            case wf:
                                n = q.H;
                                p = q.I;
                                if (a.mq(n, p) > e) return ! 1;
                                break;
                            case Of:
                                g = D.tb();
                                Fe(n, p, q.Ac, q.Wc, q.Rh, q.Sh, q.H, q.I, .8, g);
                                n = d(g, a);
                                D.Aa(g);
                                if (n) return ! 1;
                                n = q.H;
                                p = q.I;
                                if (a.mq(n, p) > e) return ! 1;
                                break;
                            case Pf:
                                g = D.tb();
                                Je(n, p, q.Ac, q.Wc, q.H, q.I, .8, g);
                                n = d(g, a);
                                D.Aa(g);
                                if (n) return ! 1;
                                n = q.H;
                                p = q.I;
                                if (a.mq(n, p) > e) return ! 1;
                                break;
                            case Qf:
                            case Rf:
                                var r = q.type === Qf ? Sf(q, k) : Tf(q, k, n, p),
                                s = r.length;
                                if (0 === s) {
                                    n = q.na;
                                    p = q.va;
                                    if (a.mq(n, p) > e) return ! 1;
                                    break
                                }
                                q = null;
                                g = D.tb();
                                for (b = 0; b < s; b++) if (q = r[b], g.length = 0, Fe(q[0], q[1], q[2], q[3], q[4], q[5], q[6], q[7], .8, g), d(g, a)) return D.Aa(g),
                                !1;
                                D.Aa(g);
                                null !== q && (n = q[6], p = q[7]);
                                break;
                            default:
                                D.k("Unknown Segment type: " + q.type)
                            }
                        }
                    }
                    return ! 0
                }
            }
        }
        return ! 1
    };
    D.defineProperty(z, {
        Df: "geometry"
    },
    function() {
        return null !== this.ob ? this.ob: this.Xf
    },
    function(a) {
        var b = this.ob;
        if (b !== a) {
            null !== a ? (v && D.l(a, bf, z, "geometry"), this.Xf = this.ob = a.freeze()) : this.Xf = this.ob = null;
            var c = this.Y;
            null !== c && (c.tk = NaN);
            this.K();
            this.i("geometry", b, a);
            Eo(this) && (a = this.Y, null !== a && Fo(this, a, "geometryString"))
        }
    });
    D.defineProperty(z, {
        II: "geometryString"
    },
    function() {
        return null === this.Df ? "": this.Df.toString()
    },
    function(a) {
        a = yf(a);
        var b = a.normalize();
        this.Df = a;
        this.position = a = D.Fb( - b.x, -b.y);
        D.A(a)
    });
    D.defineProperty(z, {
        NF: "isGeometryPositioned"
    },
    function() {
        return this.es
    },
    function(a) {
        v && D.h(a, "boolean", z, "isGeometryPositioned");
        var b = this.es;
        b !== a && (this.es = a, this.K(), this.i("isGeometryPositioned", b, a))
    });
    z.prototype.Re = function() {
        this.ob = null
    };
    D.defineProperty(z, {
        fill: "fill"
    },
    function() {
        return this.Od
    },
    function(a) {
        var b = this.Od;
        b !== a && (v && null !== a && D.Yt(a, "Shape.fill"), a instanceof Ba && a.freeze(), this.Od = a, this.qa(), this.i("fill", b, a))
    });
    D.defineProperty(z, {
        stroke: "stroke"
    },
    function() {
        return this.xc
    },
    function(a) {
        var b = this.xc;
        b !== a && (v && null !== a && D.Yt(a, "Shape.stroke"), a instanceof Ba && a.freeze(), this.xc = a, this.qa(), this.i("stroke", b, a))
    });
    D.defineProperty(z, {
        jb: "strokeWidth"
    },
    function() {
        return this.Ng
    },
    function(a) {
        var b = this.Ng;
        if (b !== a) if (v && D.p(a, z, "strokeWidth"), 0 <= a) {
            this.Ng = a;
            this.K();
            var c = this.Y;
            null !== c && (c.tk = NaN);
            this.i("strokeWidth", b, a)
        } else D.ua(a, "value >= 0", z, "strokeWidth:value")
    });
    D.defineProperty(z, {
        wM: "strokeCap"
    },
    function() {
        return this.Qp
    },
    function(a) {
        var b = this.Qp;
        b !== a && ("string" !== typeof a || "butt" !== a && "round" !== a && "square" !== a ? D.ua(a, '"butt", "round", or "square"', z, "strokeCap") : (this.Qp = a, this.qa(), this.i("strokeCap", b, a)))
    });
    D.defineProperty(z, {
        yM: "strokeJoin"
    },
    function() {
        return this.Sp
    },
    function(a) {
        var b = this.Sp;
        b !== a && ("string" !== typeof a || "miter" !== a && "bevel" !== a && "round" !== a ? D.ua(a, '"miter", "bevel", or "round"', z, "strokeJoin") : (this.Sp = a, this.qa(), this.i("strokeJoin", b, a)))
    });
    D.defineProperty(z, {
        zM: "strokeMiterLimit"
    },
    function() {
        return this.vn
    },
    function(a) {
        var b = this.vn;
        if (b !== a) if (v && D.p(a, z, "strokeMiterLimit"), 1 <= a) {
            this.vn = a;
            this.qa();
            var c = this.Y;
            null !== c && (c.tk = NaN);
            this.i("strokeMiterLimit", b, a)
        } else D.ua(a, "value >= 1", z, "strokeWidth:value")
    });
    D.defineProperty(z, {
        WG: "strokeDashArray"
    },
    function() {
        return this.Rp
    },
    function(a) {
        var b = this.Rp;
        if (b !== a) {
            null === a || Array.isArray(a) || D.gc(a, "Array", z, "strokeDashArray:value");
            if (null !== a) {
                for (var c = a.length,
                d = 0,
                e = 0; e < c; e++) {
                    var g = a[e];
                    "number" === typeof g && 0 <= g && isFinite(g) || D.k("strokeDashArray:value " + g + " at index " + e + " must be a positive number or zero.");
                    d += g
                }
                if (0 === d) {
                    if (null === b) return;
                    a = null
                }
            }
            this.Rp = a;
            this.qa();
            this.i("strokeDashArray", b, a)
        }
    });
    D.defineProperty(z, {
        xM: "strokeDashOffset"
    },
    function() {
        return this.Af
    },
    function(a) {
        var b = this.Af;
        b !== a && (v && D.p(a, z, "strokeDashOffset"), 0 <= a && (this.Af = a, this.qa(), this.i("strokeDashOffset", b, a)))
    });
    D.defineProperty(z, {
        Jb: "figure"
    },
    function() {
        return this.ap
    },
    function(a) {
        var b = this.ap;
        if (b !== a) {
            v && D.h(a, "string", z, "figure");
            var c = mq[a];
            "function" === typeof c ? c = a: (c = mq[a.toLowerCase()]) || D.k("Unknown Shape.figure: " + a);
            b !== c && (a = this.Y, null !== a && (a.tk = NaN), this.ap = c, this.Xf = null, this.Re(), this.K(), this.i("figure", b, c))
        }
    });
    D.defineProperty(z, {
        Wq: "toArrow"
    },
    function() {
        return this.Wp
    },
    function(a) {
        var b = this.Wp; ! 0 === a ? a = "Standard": !1 === a && (a = "");
        if (b !== a) {
            v && D.h(a, "string", z, "toArrow");
            var c = qq(a);
            null === c ? D.k("Unknown Shape.toArrow: " + a) : b !== c && (this.Wp = c, this.Xf = null, this.Re(), this.K(), rq(this), this.i("toArrow", b, c))
        }
    });
    D.defineProperty(z, {
        LA: "fromArrow"
    },
    function() {
        return this.dp
    },
    function(a) {
        var b = this.dp; ! 0 === a ? a = "Standard": !1 === a && (a = "");
        if (b !== a) {
            v && D.h(a, "string", z, "fromArrow");
            var c = qq(a);
            null === c ? D.k("Unknown Shape.fromArrow: " + a) : b !== c && (this.dp = c, this.Xf = null, this.Re(), this.K(), rq(this), this.i("fromArrow", b, c))
        }
    });
    function rq(a) {
        var b = a.g;
        null !== b && b.ra.nb || (a.Oq = sq, "None" !== a.Wp ? (a.Te = -1, a.Gh = fd) : "None" !== a.dp && (a.Te = 0, a.Gh = new R(1 - fd.x, fd.y)))
    }
    D.defineProperty(z, {
        C: "spot1"
    },
    function() {
        return this.ui
    },
    function(a) {
        D.l(a, R, z, "spot1");
        var b = this.ui;
        b.O(a) || (this.ui = a = a.V(), this.K(), this.i("spot1", b, a))
    });
    D.defineProperty(z, {
        D: "spot2"
    },
    function() {
        return this.vi
    },
    function(a) {
        D.l(a, R, z, "spot2");
        var b = this.vi;
        b.O(a) || (this.vi = a = a.V(), this.K(), this.i("spot2", b, a))
    });
    D.defineProperty(z, {
        Oc: "parameter1"
    },
    function() {
        return this.Ss
    },
    function(a) {
        var b = this.Ss;
        b !== a && (this.Ss = a, this.Re(), this.K(), this.i("parameter1", b, a))
    });
    D.defineProperty(z, {
        Qu: "parameter2"
    },
    function() {
        return this.Ts
    },
    function(a) {
        var b = this.Ts;
        b !== a && (this.Ts = a, this.Re(), this.K(), this.i("parameter2", b, a))
    });
    D.w(z, {
        Ga: "naturalBounds"
    },
    function() {
        if (null !== this.ob) return this.$c.assign(this.ob.sb),
        this.$c;
        var a = this.Ea;
        return new B(0, 0, a.width, a.height)
    });
    D.defineProperty(z, {
        oy: "pathPattern"
    },
    function() {
        return this.Vs
    },
    function(a) {
        var b = this.Vs;
        b !== a && (v && D.l(a, P, z, "pathPattern"), this.Vs = a, this.qa(), this.i("pathPattern", b, a))
    });
    D.defineProperty(z, {
        lM: "pathObject"
    },
    function() {
        return this.oy
    },
    function(a) {
        this.oy = a
    });
    D.defineProperty(z, {
        NA: "geometryStretch"
    },
    function() {
        return this.Wr
    },
    function(a) {
        var b = this.Wr;
        b !== a && (D.Ca(a, P, z, "geometryStretch"), this.Wr = a, this.i("geometryStretch", b, a))
    });
    D.defineProperty(z, {
        interval: "interval"
    },
    function() {
        return this.Bg
    },
    function(a) {
        var b = this.Bg;
        v && D.p(a, z, "interval");
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.Bg = a;
            var c = this.g;
            null !== c && this.Q === c.Vn && fm(c);
            this.K();
            c = this.Q;
            null !== c && c.type === mp && (c.kk = null);
            this.i("interval", b, a)
        }
    });
    D.defineProperty(z, {
        zF: "graduatedStart"
    },
    function() {
        return this.Ag
    },
    function(a) {
        var b = this.Ag;
        v && D.p(a, z, "graduatedStart");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Ag = a, this.K(), this.i("graduatedStart", b, a))
    });
    D.defineProperty(z, {
        xF: "graduatedEnd"
    },
    function() {
        return this.zg
    },
    function(a) {
        var b = this.zg;
        v && D.p(a, z, "graduatedEnd");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.zg = a, this.K(), this.i("graduatedEnd", b, a))
    });
    z.makeGeometry = function(a, b, c) {
        var d = null;
        if ("None" !== a.Wq) d = re[a.Wq];
        else if ("None" !== a.LA) d = re[a.LA];
        else {
            var e = mq[a.Jb];
            "string" === typeof e && (e = mq[e]);
            void 0 === e && D.k("Unknown Shape.figure: " + a.Jb);
            d = e(a, b, c);
            d.mp = b;
            d.kp = c
        }
        null === d && (e = mq.Rectangle, "function" === typeof e && (d = e(a, b, c)));
        return d
    };
    z.getFigureGenerators = function() {
        var a = new ma("string", "function"),
        b;
        for (b in mq) if (b !== b.toLowerCase()) {
            var c = mq[b];
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    z.defineFigureGenerator = function(a, b) {
        D.h(a, "string", z, "defineFigureGenerator:name");
        "string" === typeof b ? "" !== b && mq[b] || D.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: " + b) : D.h(b, "function", z, "defineFigureGenerator:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || D.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        mq[a] = b;
        mq[c] = a
    };
    z.getArrowheadGeometries = function() {
        var a = new ma("string", bf),
        b;
        for (b in tq) if (void 0 === re[b]) {
            var c = yf(tq[b], !1);
            re[b] = c;
            c = b.toLowerCase();
            c !== b && (re[c] = b)
        }
        for (b in re) b !== b.toLowerCase() && (c = re[b], c instanceof bf && a.add(b, c));
        a.freeze();
        return a
    };
    z.defineArrowheadGeometry = function(a, b) {
        D.h(a, "string", z, "defineArrowheadGeometry:name");
        var c = null;
        "string" === typeof b ? (D.h(b, "string", z, "defineArrowheadGeometry:pathstr"), c = yf(b, !1)) : (D.l(b, bf, z, "defineArrowheadGeometry:pathstr"), c = b);
        var d = a.toLowerCase();
        "" !== a && "none" !== d && a !== d || D.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: " + a);
        re[a] = c;
        re[d] = a
    };
    function na() {
        P.call(this);
        this.Sd = "";
        this.xc = "black";
        this.xg = "13px sans-serif";
        this.Pl = "start";
        this.wg = Sj;
        this.Tl = Wc;
        this.Vm = !0;
        this.pk = this.qk = !1;
        this.nj = uq;
        this.Ik = vq;
        this.pw = this.ue = 0;
        this.Om = this.Mz = this.Nz = null;
        this.gi = new Yp;
        this.Pr = !1;
        this.$e = this.or = this.Ft = this.Ql = this.Gt = null;
        this.ti = this.si = 0;
        this.vh = Infinity;
        this.tp = 0;
        this.Bg = 1;
        this.Ag = 0;
        this.zg = 1;
        this.Qm = null
    }
    D.Sa(na, P);
    D.ja("TextBlock", na);
    var wq = /[ \u200b\u00ad]/;
    na.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.Sd = this.Sd;
        a.xc = this.xc;
        a.xg = this.xg;
        a.Pl = this.Pl;
        a.wg = this.wg;
        a.Tl = this.Tl;
        a.Vm = this.Vm;
        a.qk = this.qk;
        a.pk = this.pk;
        a.nj = this.nj;
        a.Ik = this.Ik;
        a.ue = this.ue;
        a.pw = this.pw;
        a.Nz = this.Nz;
        a.Mz = this.Mz;
        a.Om = this.Om;
        a.gi.gq(this.gi);
        a.Pr = this.Pr;
        a.Gt = this.Gt;
        a.Ql = this.Ql;
        a.Ft = this.Ft;
        a.or = this.or;
        a.$e = this.$e;
        a.si = this.si;
        a.ti = this.ti;
        a.vh = this.vh;
        a.tp = this.tp;
        a.Bg = this.Bg;
        a.Ag = this.Ag;
        a.zg = this.zg;
        a.Qm = this.Qm
    };
    na.prototype.nc = function(a) {
        a.Ne === na ? this.kH = a: P.prototype.nc.call(this, a)
    };
    na.prototype.toString = function() {
        return 22 < this.Sd.length ? 'TextBlock("' + this.Sd.substring(0, 20) + '"...)': 'TextBlock("' + this.Sd + '")'
    };
    var xq = new la,
    yq = 0,
    zq = new la,
    Aq = 0,
    Bq = "...",
    Cq = "",
    Dq = (new ka(null)).Ok;
    na.getEllipsis = function() {
        return Bq
    };
    na.setEllipsis = function(a) {
        Bq = a;
        zq = new la;
        Aq = 0
    };
    var Eq;
    na.None = Eq = D.s(na, "None", 0);
    var Fq;
    na.WrapFit = Fq = D.s(na, "WrapFit", 1);
    var vq;
    na.WrapDesiredSize = vq = D.s(na, "WrapDesiredSize", 2);
    var uq;
    na.OverflowClip = uq = D.s(na, "OverflowClip", 0);
    var Gq;
    na.OverflowEllipsis = Gq = D.s(na, "OverflowEllipsis", 1);
    na.prototype.K = function() {
        P.prototype.K.call(this);
        this.Mz = this.Nz = null
    };
    D.defineProperty(na, {
        font: "font"
    },
    function() {
        return this.xg
    },
    function(a) {
        var b = this.xg;
        b !== a && (v && (D.h(a, "string", na, "font"), Hq(a) || D.k('Not a valid font: "' + a + '"')), this.xg = a, this.Om = null, this.K(), this.i("font", b, a))
    });
    var Hq;
    na.isValidFont = Hq = function(a) {
        var b = Dq.font;
        if (a === b || "10px sans-serif" === a) return ! 0;
        Dq.font = "10px sans-serif";
        var c;
        Dq.font = a;
        var d = Dq.font;
        if ("10px sans-serif" !== d) return Dq.font = b,
        !0;
        Dq.font = "19px serif";
        c = Dq.font;
        Dq.font = a;
        d = Dq.font;
        Dq.font = b;
        return d !== c
    };
    D.defineProperty(na, {
        text: "text"
    },
    function() {
        return this.Sd
    },
    function(a) {
        var b = this.Sd;
        a = null !== a && void 0 !== a ? a.toString() : "";
        b !== a && (this.Sd = a, this.K(), this.i("text", b, a))
    });
    D.defineProperty(na, {
        textAlign: "textAlign"
    },
    function() {
        return this.Pl
    },
    function(a) {
        var b = this.Pl;
        b !== a && (v && D.h(a, "string", na, "textAlign"), "start" === a || "end" === a || "left" === a || "right" === a || "center" === a ? (this.Pl = a, this.qa(), this.i("textAlign", b, a)) : D.ua(a, '"start", "end", "left", "right", or "center"', na, "textAlign"))
    });
    D.defineProperty(na, {
        ku: "flip"
    },
    function() {
        return this.wg
    },
    function(a) {
        var b = this.wg;
        b !== a && (D.Ca(a, P, na, "flip"), this.wg = a, this.qa(), this.i("flip", b, a))
    });
    D.defineProperty(na, {
        EM: "verticalAlignment"
    },
    function() {
        return this.Tl
    },
    function(a) {
        var b = this.Tl;
        b.O(a) || (v && D.l(a, R, na, "verticalAlignment"), a.Zd() && D.k("TextBlock.verticalAlignment for " + this + " must be a real Spot, not:" + a), this.Tl = a = a.V(), Wo(this), this.i("verticalAlignment", b, a))
    });
    D.w(na, {
        Ga: "naturalBounds"
    },
    function() {
        if (!this.$c.F()) {
            var a = Iq(this, this.Sd, this.gi, 999999).width,
            b = Jq(this, a, this.gi),
            c = this.Ea;
            isNaN(c.width) || (a = c.width);
            isNaN(c.height) || (b = c.height);
            wb(this.$c, a, b)
        }
        return this.$c
    });
    D.defineProperty(na, {
        Xx: "isMultiline"
    },
    function() {
        return this.Vm
    },
    function(a) {
        var b = this.Vm;
        b !== a && (v && D.h(a, "boolean", na, "isMultiline"), this.Vm = a, this.K(), this.i("isMultiline", b, a))
    });
    D.defineProperty(na, {
        KL: "isUnderline"
    },
    function() {
        return this.qk
    },
    function(a) {
        var b = this.qk;
        b !== a && (v && D.h(a, "boolean", na, "isUnderline"), this.qk = a, this.qa(), this.i("isUnderline", b, a))
    });
    D.defineProperty(na, {
        JL: "isStrikethrough"
    },
    function() {
        return this.pk
    },
    function(a) {
        var b = this.pk;
        b !== a && (v && D.h(a, "boolean", na, "isStrikethrough"), this.pk = a, this.qa(), this.i("isStrikethrough", b, a))
    });
    D.defineProperty(na, {
        kH: "wrap"
    },
    function() {
        return this.Ik
    },
    function(a) {
        var b = this.Ik;
        b !== a && (v && D.Ca(a, na, na, "wrap"), this.Ik = a, this.K(), this.i("wrap", b, a))
    });
    D.defineProperty(na, {
        overflow: "overflow"
    },
    function() {
        return this.nj
    },
    function(a) {
        var b = this.nj;
        b !== a && (v && D.Ca(a, na, na, "overflow"), this.nj = a, this.K(), this.i("overflow", b, a))
    });
    D.defineProperty(na, {
        stroke: "stroke"
    },
    function() {
        return this.xc
    },
    function(a) {
        var b = this.xc;
        b !== a && (v && null !== a && D.Yt(a, "TextBlock.stroke"), a instanceof Ba && a.freeze(), this.xc = a, this.qa(), this.i("stroke", b, a))
    });
    D.w(na, {
        rJ: "lineCount"
    },
    function() {
        return this.ue
    });
    D.defineProperty(na, {
        FA: "editable"
    },
    function() {
        return this.Pr
    },
    function(a) {
        var b = this.Pr;
        b !== a && (v && D.h(a, "boolean", na, "editable"), this.Pr = a, this.i("editable", b, a))
    });
    D.defineProperty(na, {
        ZG: "textEditor"
    },
    function() {
        return this.Gt
    },
    function(a) {
        var b = this.Gt;
        b !== a && (!v || a instanceof HTMLElement || a instanceof ak || D.k("TextEditingTool.defaultTextEditor must be an HTMLElement or HTMLInfo."), this.Gt = a, this.i("textEditor", b, a))
    });
    D.defineProperty(na, {
        HA: "errorFunction"
    },
    function() {
        return this.$e
    },
    function(a) {
        var b = this.$e;
        b !== a && (null !== a && D.h(a, "function", na, "errorFunction"), this.$e = a, this.i("errorFunction", b, a))
    });
    D.defineProperty(na, {
        interval: "interval"
    },
    function() {
        return this.Bg
    },
    function(a) {
        var b = this.Bg;
        v && D.p(a, na, "interval");
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.Bg = a;
            this.K();
            var c = this.Q;
            null !== c && c.type === mp && (c.kk = null);
            this.i("interval", b, a)
        }
    });
    D.defineProperty(na, {
        zF: "graduatedStart"
    },
    function() {
        return this.Ag
    },
    function(a) {
        var b = this.Ag;
        v && D.p(a, na, "graduatedStart");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Ag = a, this.K(), this.i("graduatedStart", b, a))
    });
    D.defineProperty(na, {
        xF: "graduatedEnd"
    },
    function() {
        return this.zg
    },
    function(a) {
        var b = this.zg;
        v && D.p(a, na, "graduatedEnd");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.zg = a, this.K(), this.i("graduatedEnd", b, a))
    });
    D.defineProperty(na, {
        yF: "graduatedFunction"
    },
    function() {
        return this.Qm
    },
    function(a) {
        var b = this.Qm;
        b !== a && (null !== a && D.h(a, "function", na, "graduatedFunction"), this.Qm = a, this.K(), this.i("graduatedFunction", b, a))
    });
    na.prototype.Pk = function(a, b) {
        if (null !== this.xc && 0 !== this.Sd.length && null !== this.xg) {
            var c = this.Ga.width,
            d = this.Ga.height,
            e = Kq(this),
            g = a.textAlign = this.Pl,
            h = b.hs;
            "start" === g && (g = h ? "right": "left");
            "end" === g && (g = h ? "left": "right");
            So(this, a, this.xc, !0, !1); (this.qk || this.pk) && So(this, a, this.xc, !1, !1);
            var k = 0,
            h = !1,
            l = D.Fb(0, 0);
            this.Hh.vb(l);
            var m = D.Fb(0, e);
            this.Hh.vb(m);
            var n = l.Cf(m);
            D.A(l);
            D.A(m);
            l = b.scale;
            8 > n * l * l && (h = !0);
            b.md !== a && (h = !1); ! 1 === b.Gj("textGreeking") && (h = !1);
            n = this.si;
            l = this.ti;
            switch (this.ku) {
            case xo:
                a.translate(c, 0);
                a.scale( - 1, 1);
                break;
            case wo:
                a.translate(0, d);
                a.scale(1, -1);
                break;
            case yo:
                a.translate(c, d),
                a.scale( - 1, -1)
            }
            var m = this.ue,
            p = (n + e + l) * m;
            d > p && (k = this.Tl, k = k.y * d - k.y * p + k.offsetY);
            for (var p = this.gi,
            q = 0; q < m; q++) {
                var r = p.yf[q],
                s = p.Xe[q];
                r > c && (r = c);
                var k = k + n,
                u = s,
                s = a,
                t = k,
                y = c,
                w = e,
                C = g,
                A = 0;
                h ? ("left" === C ? A = 0 : "right" === C ? A = y - r: "center" === C && (A = (y - r) / 2), s.fillRect(0 + A, t + .25 * w, r, 1)) : ("left" === C ? A = 0 : "right" === C ? A = y: "center" === C && (A = y / 2), s.fillText(u, 0 + A, t + w - .25 * w), u = w / 20 | 0, 0 === u && (u = 1), "right" === C ? A -= r: "center" === C && (A -= r / 2), this.qk && (s.beginPath(), s.lineWidth = u, s.moveTo(0 + A, t + w - .2 * w), s.lineTo(0 + A + r, t + w - .2 * w), s.stroke()), this.pk && (s.beginPath(), s.lineWidth = u, t = t + w - w / 2.2 | 0, 0 !== u % 2 && (t += .5), s.moveTo(0 + A, t), s.lineTo(0 + A + r, t), s.stroke()));
                k += e + l
            }
            switch (this.ku) {
            case xo:
                a.scale( - 1, 1);
                a.translate( - c, 0);
                break;
            case wo:
                a.scale(1, -1);
                a.translate(0, -d);
                break;
            case yo:
                a.scale( - 1, -1),
                a.translate( - c, -d)
            }
        }
    };
    na.prototype.computeAngle = function(a, b) {
        var c = 0;
        switch (a) {
        default:
        case nj:
            c = 0;
            break;
        case sq:
            c = b;
            break;
        case Tp:
            c = b + 90;
            break;
        case Vp:
            c = b - 90;
            break;
        case Lq:
            c = b + 180;
            break;
        case Mq:
            c = Ye(b);
            90 < c && 270 > c && (c -= 180);
            break;
        case Up:
            c = Ye(b + 90);
            90 < c && 270 > c && (c -= 180);
            break;
        case Wp:
            c = Ye(b - 90);
            90 < c && 270 > c && (c -= 180);
            break;
        case Xp:
            c = Ye(b);
            if (45 < c && 135 > c || 225 < c && 315 > c) return 0;
            90 < c && 270 > c && (c -= 180)
        }
        return Ye(c)
    };
    na.prototype.ho = function(a, b, c, d) {
        this.tp = a;
        var e = this.gi;
        e.reset();
        var g = 0,
        h = 0;
        if (isNaN(this.Ea.width)) {
            g = this.Sd.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
            if (0 === g.length) g = 0;
            else if (this.Xx) {
                for (var k = h = 0,
                l = !1; ! l;) {
                    var m = g.indexOf("\n", k); - 1 === m && (m = g.length, l = !0);
                    k = Nq(g.substr(k, m - k).replace(/^\s+|\s+$/g, ""), this.xg);
                    k > h && (h = k);
                    k = m + 1
                }
                g = h
            } else h = g.indexOf("\n", 0),
            0 <= h && (g = g.substr(0, h)),
            g = k = Nq(g, this.xg);
            g = Math.min(g, a / this.scale);
            g = Math.max(8, g)
        } else g = this.Ea.width;
        null !== this.Q && (g = Math.min(g, this.Q.kf.width), g = Math.max(g, this.Q.hg.width));
        h = Jq(this, g, e);
        m = h = isNaN(this.Ea.height) ? Math.min(h, b / this.scale) : this.Ea.height;
        if (0 !== e.nf && 1 !== e.Xe.length && this.nj === Gq && (b = this.xg, l = this.nj === Gq ? Oq(b) : 0, k = this.si + this.ti, k = Math.max(0, Kq(this) + k), m = Math.min(this.zJ - 1, Math.max(Math.floor(m / k + .01) - 1, 0)), !(m + 1 >= e.Xe.length))) {
            k = e.Xe[m];
            for (a = Math.max(1, a - l); Nq(k, b) > a && 1 < k.length;) k = k.substr(0, k.length - 1);
            k += Bq;
            a = Nq(k, b);
            e.Xe[m] = k;
            e.Xe = e.Xe.slice(0, m + 1);
            e.yf[m] = a;
            e.yf = e.yf.slice(0, m + 1);
            e.xj = e.Xe.length;
            e.nf = Math.max(e.nf, a);
            this.ue = e.xj
        }
        if (this.kH === Fq || isNaN(this.Ea.width)) g = e.nf,
        isNaN(this.Ea.width) && (g = Math.max(8, g));
        g = Math.max(c, g);
        h = Math.max(d, h);
        wb(this.$c, g, h);
        Go(this, 0, 0, g, h)
    };
    na.prototype.yj = function(a, b, c, d) {
        Lo(this, a, b, c, d)
    };
    function Iq(a, b, c, d) {
        b = b.replace(/^\s+|\s+$/g, "");
        var e = 0,
        g = 0,
        h = 0,
        k = a.xg,
        g = a.si + a.ti,
        l = Math.max(0, Kq(a) + g),
        h = a.nj === Gq ? Oq(k) : 0;
        if (a.ue >= a.vh) return new Ca(0, l);
        if (a.Ik === Eq) {
            c.xj = 1;
            g = Nq(b, k);
            if (0 === h || g <= d) return c.nf = g,
            c.yf.push(c.nf),
            c.Xe.push(b),
            new Ca(g, l);
            var m = Pq(b);
            b = b.substr(m.length);
            for (var n = Pq(b), g = Nq(m + n, k); 0 < n.length && g <= d;) m += n,
            b = b.substr(n.length),
            n = Pq(b),
            g = Nq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m += n.replace(/^\s+|\s+$/g, "");
            for (d = Math.max(1, d - h); Nq(m, k) > d && 1 < m.length;) m = m.substr(0, m.length - 1);
            m += Bq;
            h = Nq(m, k);
            c.yf.push(h);
            c.nf = h;
            c.Xe.push(m);
            return new Ca(h, l)
        }
        var p = 0;
        0 === b.length && (p = 1, c.yf.push(0), c.Xe.push(b));
        for (; 0 < b.length;) {
            m = Pq(b);
            for (b = b.substr(m.length); Nq(m, k) > d;) {
                n = 1;
                g = Nq(m.substr(0, n), k);
                for (h = 0; g <= d;) n++,
                h = g,
                g = Nq(m.substr(0, n), k);
                1 === n ? (c.yf[a.ue + p] = g, e = Math.max(e, g)) : (c.yf[a.ue + p] = h, e = Math.max(e, h));
                n--;
                1 > n && (n = 1);
                c.Xe[a.ue + p] = m.substr(0, n);
                p++;
                m = m.substr(n);
                if (a.ue + p > a.vh) break
            }
            n = Pq(b);
            for (g = Nq(m + n, k); 0 < n.length && g <= d;) m += n,
            b = b.substr(n.length),
            n = Pq(b),
            g = Nq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m = m.replace(/^\s+|\s+$/g, "");
            if ("" !== m && ("\u00ad" === m[m.length - 1] && (m = m.substring(0, m.length - 1) + "\u2010"), 0 === n.length ? (c.yf.push(g), e = Math.max(e, g)) : (h = Nq(m, k), c.yf.push(h), e = Math.max(e, h)), c.Xe.push(m), p++, a.ue + p > a.vh)) break
        }
        c.xj = Math.min(a.vh, p);
        c.nf = Math.max(c.nf, e);
        return new Ca(c.nf, l * c.xj)
    }
    function Pq(a) {
        for (var b = a.length,
        c = 0; c < b && !wq.test(a.charAt(c));) c++;
        for (; c < b && wq.test(a.charAt(c));) c++;
        return c >= b ? a: a.substr(0, c)
    }
    function Nq(a, b) {
        Cq !== b && (Cq = Dq.font = b);
        return Dq.measureText(a).width
    }
    function Kq(a) {
        if (null !== a.Om) return a.Om;
        var b = a.xg;
        Cq !== b && (Cq = Dq.font = b);
        var c = 0;
        void 0 !== xq[b] && 5E3 > yq ? c = xq[b] : (c = 1.3 * Dq.measureText("M").width, xq[b] = c, yq++);
        return a.Om = c
    }
    function Oq(a) {
        Cq !== a && (Cq = Dq.font = a);
        var b = 0;
        void 0 !== zq[a] && 5E3 > Aq ? b = zq[a] : (b = Dq.measureText(Bq).width, zq[a] = b, Aq++);
        return b
    }
    function Jq(a, b, c) {
        var d = a.Sd.replace(/\r\n/g, "\n").replace(/\r/g, "\n"),
        e = a.si + a.ti,
        e = Math.max(0, Kq(a) + e);
        if (0 === d.length) return c.nf = 0,
        a.ue = 1,
        e;
        if (!a.Xx) {
            var g = d.indexOf("\n", 0);
            0 <= g && (d = d.substr(0, g))
        }
        for (var g = 0,
        h = a.ue = 0,
        k = -1,
        l = !1; ! l;) k = d.indexOf("\n", h),
        -1 === k && (k = d.length, l = !0),
        h <= k && (h = d.substr(h, k - h), a.Ik !== Eq ? (c.xj = 0, h = Iq(a, h, c, b), g += h.height, a.ue += c.xj) : (Iq(a, h, c, b), g += e, a.ue++), a.ue === a.vh && (l = !0)),
        h = k + 1;
        return a.pw = g
    }
    D.defineProperty(na, {
        NB: "textValidation"
    },
    function() {
        return this.Ql
    },
    function(a) {
        var b = this.Ql;
        b !== a && (null !== a && D.h(a, "function", na, "textValidation"), this.Ql = a, this.i("textValidation", b, a))
    });
    D.defineProperty(na, {
        YG: "textEdited"
    },
    function() {
        return this.Ft
    },
    function(a) {
        var b = this.Ft;
        b !== a && (null !== a && D.h(a, "function", na, "textEdited"), this.Ft = a, this.i("textEdited", b, a))
    });
    D.defineProperty(na, {
        tM: "spacingAbove"
    },
    function() {
        return this.si
    },
    function(a) {
        var b = this.si;
        b !== a && (v && D.h(a, "number", na, "spacingAbove"), this.si = a, this.i("spacingAbove", b, a))
    });
    D.defineProperty(na, {
        uM: "spacingBelow"
    },
    function() {
        return this.ti
    },
    function(a) {
        var b = this.ti;
        b !== a && (v && D.h(a, "number", na, "spacingBelow"), this.ti = a, this.i("spacingBelow", b, a))
    });
    D.defineProperty(na, {
        zJ: "maxLines"
    },
    function() {
        return this.vh
    },
    function(a) {
        var b = this.vh;
        b !== a && (v && D.h(a, "number", na, "maxLines"), a = Math.floor(a), 0 >= a && D.ua(a, "> 0", na, "maxLines"), this.vh = a, this.i("maxLines", b, a), this.K())
    });
    D.w(na, {
        UL: "metrics"
    },
    function() {
        return this.gi
    });
    D.defineProperty(na, {
        cL: "choices"
    },
    function() {
        return this.or
    },
    function(a) {
        var b = this.or;
        b !== a && (null === a || Array.isArray(a) || D.gc(a, "Array", na, "choices:value"), this.or = a, this.i("choices", b, a))
    });
    function Yp() {
        this.nf = this.xj = 0;
        this.yf = [];
        this.Xe = []
    }
    Yp.prototype.reset = function() {
        this.nf = this.xj = 0;
        this.yf = [];
        this.Xe = []
    };
    Yp.prototype.gq = function(a) {
        this.xj = a.xj;
        this.nf = a.nf;
        this.yf = D.cm(a.yf);
        this.Xe = D.cm(a.Xe)
    };
    D.w(Yp, {
        $K: "arrSize"
    },
    function() {
        return this.yf
    });
    D.w(Yp, {
        aL: "arrText"
    },
    function() {
        return this.Xe
    });
    D.w(Yp, {
        TL: "maxLineWidth"
    },
    function() {
        return this.nf
    });
    function Cl() {
        P.call(this);
        this.Ze = null;
        this.xt = "";
        this.Ak = ne;
        this.hp = rf;
        this.wi = this.$e = null;
        this.gp = gc;
        this.wg = Sj;
        this.Tp = null;
        this.Hz = !1;
        this.bp = !0;
        this.nw = !1;
        this.Lp = null
    }
    D.Sa(Cl, P);
    D.ja("Picture", Cl);
    Cl.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.element = this.Ze;
        a.xt = this.xt;
        a.Ak = this.Ak.V();
        a.hp = this.hp;
        a.wg = this.wg;
        a.$e = this.$e;
        a.wi = this.wi;
        a.gp = this.gp.V();
        a.bp = this.bp;
        a.Lp = this.Lp
    };
    Cl.prototype.nc = function(a) {
        a === Sj || a === Uj || a === Vj ? this.YI = a: P.prototype.nc.call(this, a)
    };
    Cl.prototype.toString = function() {
        return "Picture(" + this.source + ")#" + D.Fd(this)
    };
    var Qq = new la,
    Rq = 0,
    wl = [];
    function Sq() {
        var a = wl;
        if (0 === a.length) for (var b = window.document.getElementsByTagName("canvas"), c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            e.parentElement && e.parentElement.ba && a.push(e.parentElement.ba)
        }
        return a
    }
    var Tq;
    Cl.clearCache = Tq = function(a) {
        void 0 === a && (a = "");
        D.h(a, "string", Cl, "clearCache:url");
        "" !== a ? Qq[a] && (delete Qq[a], Rq--) : (Qq = new la, Rq = 0)
    };
    D.defineProperty(Cl, {
        element: "element"
    },
    function() {
        return this.Ze
    },
    function(a) {
        var b = this.Ze;
        if (b !== a) {
            null === a || a instanceof HTMLImageElement || a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement || D.k("Picture.element must be an instance of Image, Canvas, or Video, not: " + a);
            this.Hz = a instanceof HTMLCanvasElement;
            this.Ze = a;
            if (null !== a) if (a instanceof HTMLCanvasElement || !0 === a.complete) a.fp instanceof Event && null !== this.$e && this.$e(this, a.fp),
            !0 === a.ew && null !== this.wi && this.wi(this, a.Wz),
            a.ew = !0,
            this.Ea.F() || (em(this, !1), this.K());
            else {
                var c = this;
                a.bD || (a.addEventListener("load",
                function(b) {
                    Uq(a, b);
                    c.Ea.F() || (em(c, !1), c.K())
                }), a.addEventListener("error",
                function(b) {
                    Vq(a, b)
                }), a.bD = !0)
            }
            this.i("element", b, a);
            this.qa()
        }
    });
    D.defineProperty(Cl, {
        source: "source"
    },
    function() {
        return this.xt
    },
    function(a) {
        var b = this.xt;
        if (b !== a) {
            D.h(a, "string", Cl, "source");
            this.xt = a;
            var c = Qq,
            d = this.g;
            if (void 0 !== c[a]) var e = c[a].$p[0].source;
            else {
                30 < Rq && (Tq(), c = Qq);
                var e = D.createElement("img"),
                g = this;
                e.addEventListener("load",
                function(a) {
                    Uq(e, a);
                    g.Ea.F() || (em(g, !1), g.K())
                });
                e.addEventListener("error",
                function(a) {
                    Vq(e, a)
                });
                e.bD = !0;
                var h = this.Lp;
                null !== h && (e.crossOrigin = h(this));
                e.src = a;
                c[a] = new Wq(e);
                Rq++
            }
            null !== d && sn(d, this);
            this.element = e;
            null !== d && rn(d, this);
            this.K();
            this.qa();
            this.i("source", b, a)
        }
    });
    function Uq(a, b) {
        a.ew = !0;
        a.fp = !1;
        for (var c = null,
        d = Sq(), e = d.length, g = 0; g < e; g++) {
            var h = d[g],
            k = h.Ep.oa(a.src);
            if (null !== k) for (e = k.length, g = 0; g < e; g++) c = k[g],
            h.Tz.add(c),
            h.Se(),
            null === a.Wz && (a.Wz = b, null !== c.wi && c.wi(c, b))
        }
    }
    function Vq(a, b) {
        a.fp = b;
        for (var c = null,
        d = Sq(), e = d.length, g = 0; g < e; g++) if (c = d[g].Ep.oa(a.src), null !== c) {
            for (var e = c.length,
            h = D.tb(), g = 0; g < e; g++) h.push(c[g]);
            for (g = 0; g < e; g++) c = h[g],
            null !== c.$e && c.$e(c, b);
            D.Aa(h)
        }
    }
    D.defineProperty(Cl, {
        sM: "sourceCrossOrigin"
    },
    function() {
        return this.Lp
    },
    function(a) {
        if (this.Lp !== a && (null !== a && D.h(a, "function", Cl, "sourceCrossOrigin"), this.Lp = a, null !== this.element)) {
            var b = this.element.src;
            null === a && "string" === typeof b ? this.element.crossOrigin = null: null !== a && (this.element.crossOrigin = a(this));
            this.element.src = b
        }
    });
    D.defineProperty(Cl, {
        Uj: "sourceRect"
    },
    function() {
        return this.Ak
    },
    function(a) {
        var b = this.Ak;
        b.O(a) || (D.l(a, B, Cl, "sourceRect"), this.Ak = a = a.V(), this.qa(), this.i("sourceRect", b, a))
    });
    D.defineProperty(Cl, {
        YI: "imageStretch"
    },
    function() {
        return this.hp
    },
    function(a) {
        var b = this.hp;
        b !== a && (D.Ca(a, P, Cl, "imageStretch"), this.hp = a, this.qa(), this.i("imageStretch", b, a))
    });
    D.defineProperty(Cl, {
        ku: "flip"
    },
    function() {
        return this.wg
    },
    function(a) {
        var b = this.wg;
        b !== a && (D.Ca(a, P, Cl, "flip"), this.wg = a, this.qa(), this.i("flip", b, a))
    });
    D.defineProperty(Cl, {
        DL: "imageAlignment"
    },
    function() {
        return this.gp
    },
    function(a) {
        D.l(a, R, Cl, "imageAlignment");
        var b = this.gp;
        b.O(a) || (this.gp = a = a.V(), this.K(), this.i("imageAlignment", b, a))
    });
    D.defineProperty(Cl, {
        HA: "errorFunction"
    },
    function() {
        return this.$e
    },
    function(a) {
        var b = this.$e;
        b !== a && (null !== a && D.h(a, "function", Cl, "errorFunction"), this.$e = a, this.i("errorFunction", b, a))
    });
    D.defineProperty(Cl, {
        CM: "successFunction"
    },
    function() {
        return this.wi
    },
    function(a) {
        var b = this.wi;
        b !== a && (null !== a && D.h(a, "function", Cl, "successFunction"), this.wi = a, this.i("successFunction", b, a))
    });
    Cl.prototype.Pk = function(a, b) {
        var c = this.Ze;
        if (null !== c) {
            var d = c.src;
            null !== d && "" !== d || D.k('Element has no source ("src") attribute: ' + c);
            if (! (c.fp instanceof Event) && !0 === c.ew) {
                var d = this.Ga,
                e = 0,
                g = 0,
                h = this.Hz,
                k = h ? +c.width: c.naturalWidth,
                h = h ? +c.height: c.naturalHeight;
                void 0 === k && c.videoWidth && (k = c.videoWidth);
                void 0 === h && c.videoHeight && (h = c.videoHeight);
                k = k || d.width;
                h = h || d.height;
                if (0 !== k && 0 !== h) {
                    var l = k,
                    m = h;
                    this.Uj.F() && (e = this.Ak.x, g = this.Ak.y, k = this.Ak.width, h = this.Ak.height);
                    var n = k,
                    p = h,
                    q = this.hp,
                    r = this.gp;
                    switch (q) {
                    case Sj:
                        if (this.Uj.F()) break;
                        n >= d.width && (e = e + r.offsetX + (n * r.x - d.width * r.x));
                        p >= d.height && (g = g + r.offsetY + (p * r.y - d.height * r.y));
                        k = Math.min(d.width, n);
                        h = Math.min(d.height, p);
                        break;
                    case rf:
                        n = d.width;
                        p = d.height;
                        break;
                    case Uj:
                    case Vj:
                        var s = 0;
                        q === Uj ? (s = Math.min(d.height / p, d.width / n), n *= s, p *= s) : q === Vj && (s = Math.max(d.height / p, d.width / n), n *= s, p *= s, n >= d.width && (e = (e + r.offsetX + (n * r.x - d.width * r.x) / n) * k), p >= d.height && (g = (g + r.offsetY + (p * r.y - d.height * r.y) / p) * h), k *= 1 / (n / d.width), h *= 1 / (p / d.height), n = d.width, p = d.height)
                    }
                    var q = this.Fj() * b.scale,
                    u = k * h / (n * q * p * q),
                    s = Qq[this.source],
                    q = null;
                    if (void 0 !== s && 16 < u) {
                        2 > s.$p.length && (Xq(s, 4, l, m), Xq(s, 16, l, m));
                        for (var l = s.$p,
                        m = l.length,
                        q = l[0], t = 0; t < m; t++) if (l[t].Gq * l[t].Gq < u) q = l[t];
                        else break
                    }
                    if (!b.Yo) {
                        if (null === this.Tp) if (null === this.Ze) this.Tp = !1;
                        else {
                            l = (new ka(null)).Ok;
                            l.drawImage(this.Ze, 0, 0);
                            try {
                                l.getImageData(0, 0, 1, 1).data[3] && (this.Tp = !1),
                                this.Tp = !1
                            } catch(y) {
                                this.Tp = !0
                            }
                        }
                        if (this.Tp) return
                    }
                    l = 0;
                    n < d.width && (l = r.offsetX + (d.width * r.x - n * r.x));
                    m = 0;
                    p < d.height && (m = r.offsetY + (d.height * r.y - p * r.y));
                    switch (this.ku) {
                    case xo:
                        a.translate(Math.min(d.width, n), 0);
                        a.scale( - 1, 1);
                        break;
                    case wo:
                        a.translate(0, Math.min(d.height, p));
                        a.scale(1, -1);
                        break;
                    case yo:
                        a.translate(Math.min(d.width, n), Math.min(d.height, p)),
                        a.scale( - 1, -1)
                    }
                    if (b.Gj("pictureRatioOptimization") && !b.Iz && void 0 !== s && null !== q && 1 !== q.Gq) {
                        a.save();
                        s = q.Gq;
                        try {
                            a.drawImage(q.source, e / s, g / s, Math.min(q.source.width, k / s), Math.min(q.source.height, h / s), l, m, Math.min(d.width, n), Math.min(d.height, p))
                        } catch(w) {
                            v && this.bp && D.trace(w.toString()),
                            this.bp = !1
                        }
                        a.restore()
                    } else try {
                        a.drawImage(c, e, g, k, h, l, m, Math.min(d.width, n), Math.min(d.height, p))
                    } catch(C) {
                        v && this.bp && D.trace(C.toString()),
                        this.bp = !1
                    }
                    switch (this.ku) {
                    case xo:
                        a.scale( - 1, 1);
                        a.translate( - Math.min(d.width, n), 0);
                        break;
                    case wo:
                        a.scale(1, -1);
                        a.translate(0, -Math.min(d.height, p));
                        break;
                    case yo:
                        a.scale( - 1, -1),
                        a.translate( - Math.min(d.width, n), -Math.min(d.height, p))
                    }
                }
            }
        }
    };
    D.w(Cl, {
        Ga: "naturalBounds"
    },
    function() {
        return this.$c
    });
    Cl.prototype.ho = function(a, b, c, d) {
        var e = this.Ea,
        g = Jo(this, !0),
        h = this.Ze,
        k = this.Hz;
        if (k || !this.nw && h && h.complete) this.nw = !0;
        null === h && (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        isFinite(e.width) || g === rf || g === vo ? (isFinite(a) || (a = this.Uj.F() ? this.Uj.width: k ? +h.width: h.naturalWidth), c = 0) : null !== h && !1 !== this.nw && (a = this.Uj.F() ? this.Uj.width: k ? +h.width: h.naturalWidth);
        isFinite(e.height) || g === rf || g === uo ? (isFinite(b) || (b = this.Uj.F() ? this.Uj.height: k ? +h.height: h.naturalHeight), d = 0) : null !== h && !1 !== this.nw && (b = this.Uj.F() ? this.Uj.height: k ? +h.height: h.naturalHeight);
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        e = this.kf;
        g = this.hg;
        c = Math.max(c, g.width);
        d = Math.max(d, g.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        null === h || h.complete || (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        wb(this.$c, a, b);
        Go(this, 0, 0, a, b)
    };
    Cl.prototype.yj = function(a, b, c, d) {
        Lo(this, a, b, c, d)
    };
    function Wq(a) {
        this.$p = [new Yq(a, 1)]
    }
    function Xq(a, b, c, d) {
        var e = new ka(null),
        g = e.Ok,
        h = 1 / b;
        e.width = c / b;
        e.height = d / b;
        b = new Yq(e.Ud, b);
        c = a.$p[a.$p.length - 1];
        g.setTransform(h * c.Gq, 0, 0, h * c.Gq, 0, 0);
        g.drawImage(c.source, 0, 0);
        a.$p.push(b)
    }
    function Yq(a, b) {
        this.source = a;
        this.Gq = b
    }
    function Ea() {
        this.q = new bf;
        this.cc = null
    }
    f = Ea.prototype;
    f.reset = function() {
        this.q = new bf;
        this.cc = null
    };
    function T(a, b, c, d, e, g) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        void 0 !== e && !0 === e ? (null === a.cc && D.k("Need to call beginFigure first"), d = new Xf(Ef), d.H = b, d.I = c, a.cc.Db.add(d)) : (a.cc = new df, a.cc.ma = b, a.cc.ka = c, a.cc.wu = d, a.q.kc.add(a.cc));
        void 0 !== g && (a.cc.np = g)
    }
    function X(a) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.cc && D.k("Need to call beginFigure first");
        var b = a.cc.Db.length;
        0 < b && a.cc.Db.ea(b - 1).close()
    }
    function Bf(a) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.cc && D.k("Need to call beginFigure first");
        0 < a.cc.Db.length && (a.cc.wu = !0)
    }
    f.ib = function(a) {
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.cc && D.k("Need to call beginFigure first");
        this.cc.Wk = a
    };
    f.moveTo = function(a, b, c) {
        void 0 === c && (c = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.cc && D.k("Need to call beginFigure first");
        var d = new Xf(Ef);
        d.H = a;
        d.I = b;
        c && d.close();
        this.cc.Db.add(d)
    };
    f.lineTo = function(a, b, c) {
        void 0 === c && (c = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.cc && D.k("Need to call beginFigure first");
        var d = new Xf(wf);
        d.H = a;
        d.I = b;
        c && d.close();
        this.cc.Db.add(d)
    };
    function V(a, b, c, d, e, g, h, k) {
        void 0 === k && (k = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.cc && D.k("Need to call beginFigure first");
        var l = new Xf(Of);
        l.Ac = b;
        l.Wc = c;
        l.Rh = d;
        l.Sh = e;
        l.H = g;
        l.I = h;
        k && l.close();
        a.cc.Db.add(l)
    }
    function zf(a, b, c, d, e) {
        var g;
        void 0 === g && (g = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.cc && D.k("Need to call beginFigure first");
        var h = new Xf(Pf);
        h.Ac = b;
        h.Wc = c;
        h.H = d;
        h.I = e;
        g && h.close();
        a.cc.Db.add(h)
    }
    f.arcTo = function(a, b, c, d, e, g, h) {
        void 0 === g && (g = 0);
        void 0 === h && (h = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.cc && D.k("Need to call beginFigure first");
        var k = new Xf(Qf);
        k.Le = a;
        k.xf = b;
        k.na = c;
        k.va = d;
        k.radiusX = e;
        k.radiusY = 0 !== g ? g: e;
        h && k.close();
        this.cc.Db.add(k)
    };
    function Af(a, b, c, d, e, g, h, k) {
        var l;
        void 0 === l && (l = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.cc && D.k("Need to call beginFigure first");
        b = new Xf(Rf, h, k, b, c, d, e, g);
        l && b.close();
        a.cc.Db.add(b)
    }
    function Zq(a) {
        a = $q(a);
        var b = D.tb();
        b[0] = a[0];
        for (var c = 1,
        d = 1; d < a.length;) b[c] = a[d],
        b[c + 1] = a[d],
        b[c + 2] = a[d + 1],
        d += 2,
        c += 3;
        D.Aa(a);
        return b
    }
    function $q(a) {
        var b = ar(a),
        c = D.tb(),
        d = Math.floor(b.length / 2),
        e = b.length - 1;
        a = 0 === a % 2 ? 2 : 1;
        for (var g = 0; g < e; g++) {
            var h = b[g],
            k = b[g + 1],
            l = b[(d + g - 1) % e],
            m = b[(d + g + a) % e];
            c[2 * g] = h;
            c[2 * g + 1] = Ue(h.x, h.y, l.x, l.y, k.x, k.y, m.x, m.y, new O)
        }
        c[c.length] = c[0];
        D.Aa(b);
        return c
    }
    function ar(a) {
        for (var b = D.tb(), c = 1.5 * Math.PI, d = 0, e = 0; e < a; e++) d = 2 * Math.PI / a * e + c,
        b[e] = new O(.5 + .5 * Math.cos(d), .5 + .5 * Math.sin(d));
        b.push(b[0]);
        return b
    }
    var mq = {
        None: "Rectangle",
        Rectangle: function(a, b, c) {
            a = new bf;
            a.type = tf;
            a.ma = 0;
            a.ka = 0;
            a.H = b;
            a.I = c;
            return a
        },
        Square: function(a, b, c) {
            a = new bf;
            a.je = Uj;
            a.type = tf;
            a.ma = 0;
            a.ka = 0;
            a.H = Math.min(b, c);
            a.I = Math.min(b, c);
            return a
        },
        Ellipse: function(a, b, c) {
            a = new bf;
            a.type = uf;
            a.ma = 0;
            a.ka = 0;
            a.H = b;
            a.I = c;
            a.C = oe;
            a.D = pe;
            return a
        },
        Circle: function(a, b, c) {
            a = new bf;
            a.je = Uj;
            a.type = uf;
            a.ma = 0;
            a.ka = 0;
            a.H = Math.min(b, c);
            a.I = Math.min(b, c);
            a.C = oe;
            a.D = pe;
            return a
        },
        Connector: "Ellipse",
        TriangleRight: function(a, b, c) {
            a = new bf;
            var d = new df,
            e = new Xf;
            e.H = b;
            e.I = .5 * c;
            d.Db.add(e);
            b = new Xf;
            b.H = 0;
            b.I = c;
            d.Db.add(b.close());
            a.kc.add(d);
            a.C = new R(0, .25);
            a.D = new R(.5, .75);
            return a
        },
        TriangleDown: function(a, b, c) {
            a = new bf;
            var d = new df,
            e = new Xf;
            e.H = b;
            e.I = 0;
            d.Db.add(e);
            e = new Xf;
            e.H = .5 * b;
            e.I = c;
            d.Db.add(e.close());
            a.kc.add(d);
            a.C = new R(.25, 0);
            a.D = new R(.75, .5);
            return a
        },
        TriangleLeft: function(a, b, c) {
            a = new bf;
            var d = new df;
            d.ma = b;
            d.ka = c;
            var e = new Xf;
            e.H = 0;
            e.I = .5 * c;
            d.Db.add(e);
            c = new Xf;
            c.H = b;
            c.I = 0;
            d.Db.add(c.close());
            a.kc.add(d);
            a.C = new R(.5, .25);
            a.D = new R(1, .75);
            return a
        },
        TriangleUp: function(a, b, c) {
            a = new bf;
            var d = new df;
            d.ma = b;
            d.ka = c;
            var e = new Xf;
            e.H = 0;
            e.I = c;
            d.Db.add(e);
            c = new Xf;
            c.H = .5 * b;
            c.I = 0;
            d.Db.add(c.close());
            a.kc.add(d);
            a.C = new R(.25, .5);
            a.D = new R(.75, 1);
            return a
        },
        Line1: function(a, b, c) {
            a = new bf;
            a.type = sf;
            a.ma = 0;
            a.ka = 0;
            a.H = b;
            a.I = c;
            return a
        },
        Line2: function(a, b, c) {
            a = new bf;
            a.type = sf;
            a.ma = b;
            a.ka = 0;
            a.H = 0;
            a.I = c;
            return a
        },
        MinusLine: "LineH",
        LineH: function(a, b, c) {
            a = new bf;
            a.type = sf;
            a.ma = 0;
            a.ka = c / 2;
            a.H = b;
            a.I = c / 2;
            return a
        },
        LineV: function(a, b, c) {
            a = new bf;
            a.type = sf;
            a.ma = b / 2;
            a.ka = 0;
            a.H = b / 2;
            a.I = c;
            return a
        },
        BarH: "Rectangle",
        BarV: "Rectangle",
        Curve1: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            V(a, Fd * b, 0, 1 * b, (1 - Fd) * c, b, c);
            b = a.q;
            D.u(a);
            return b
        },
        Curve2: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            V(a, 0, Fd * c, (1 - Fd) * b, c, b, c);
            b = a.q;
            D.u(a);
            return b
        },
        Curve3: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            V(a, 1 * b, Fd * c, Fd * b, 1 * c, 0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Curve4: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            V(a, (1 - Fd) * b, 0, 0, (1 - Fd) * c, 0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Alternative: "Triangle",
        Merge: "Triangle",
        Triangle: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(1 * b, 1 * c, !0);
            b = a.q;
            b.C = new R(.25, .5);
            b.D = new R(.75, 1);
            D.u(a);
            return b
        },
        Decision: "Diamond",
        Diamond: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(0, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, .5 * c, !0);
            b = a.q;
            b.C = new R(.25, .25);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        Pentagon: function(a, b, c) {
            var d = ar(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 5 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.2, .22);
            b.D = new R(.8, .9);
            D.u(a);
            return b
        },
        DataTransmission: "Hexagon",
        Hexagon: function(a, b, c) {
            var d = ar(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 6 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.07, .25);
            b.D = new R(.93, .75);
            D.u(a);
            return b
        },
        Heptagon: function(a, b, c) {
            var d = ar(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 7 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.2, .15);
            b.D = new R(.8, .85);
            D.u(a);
            return b
        },
        Octagon: function(a, b, c) {
            var d = ar(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 8 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.15, .15);
            b.D = new R(.85, .85);
            D.u(a);
            return b
        },
        Nonagon: function(a, b, c) {
            var d = ar(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 9 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.17, .13);
            b.D = new R(.82, .82);
            D.u(a);
            return b
        },
        Decagon: function(a, b, c) {
            var d = ar(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.16, .16);
            b.D = new R(.84, .84);
            D.u(a);
            return b
        },
        Dodecagon: function(a, b, c) {
            var d = ar(12);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.16, .16);
            b.D = new R(.84, .84);
            D.u(a);
            return b
        },
        FivePointedStar: function(a, b, c) {
            var d = $q(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.312, .383);
            b.D = new R(.693, .765);
            D.u(a);
            return b
        },
        SixPointedStar: function(a, b, c) {
            var d = $q(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.17, .251);
            b.D = new R(.833, .755);
            D.u(a);
            return b
        },
        SevenPointedStar: function(a, b, c) {
            var d = $q(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 14 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.363, .361);
            b.D = new R(.641, .709);
            D.u(a);
            return b
        },
        EightPointedStar: function(a, b, c) {
            var d = $q(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 16 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.252, .255);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        NinePointedStar: function(a, b, c) {
            var d = $q(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 18 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.355, .361);
            b.D = new R(.645, .651);
            D.u(a);
            return b
        },
        TenPointedStar: function(a, b, c) {
            var d = $q(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 20 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.281, .261);
            b.D = new R(.723, .748);
            D.u(a);
            return b
        },
        FivePointedBurst: function(a, b, c) {
            var d = Zq(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.312, .383);
            b.D = new R(.693, .765);
            D.u(a);
            return b
        },
        SixPointedBurst: function(a, b, c) {
            var d = Zq(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.17, .251);
            b.D = new R(.833, .755);
            D.u(a);
            return b
        },
        SevenPointedBurst: function(a, b, c) {
            var d = Zq(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.363, .361);
            b.D = new R(.641, .709);
            D.u(a);
            return b
        },
        EightPointedBurst: function(a, b, c) {
            var d = Zq(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.252, .255);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        NinePointedBurst: function(a, b, c) {
            var d = Zq(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.355, .361);
            b.D = new R(.645, .651);
            D.u(a);
            return b
        },
        TenPointedBurst: function(a, b, c) {
            var d = Zq(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3) V(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.Aa(d);
            X(a);
            b = a.q;
            b.C = new R(.281, .261);
            b.D = new R(.723, .748);
            D.u(a);
            return b
        },
        Cloud: function(a, b, c) {
            a = D.v();
            T(a, .08034461 * b, .1944299 * c, !0);
            V(a, -.09239631 * b, .07836421 * c, .1406031 * b, -.0542823 * c, .2008615 * b, .05349299 * c);
            V(a, .2450511 * b, -.00697547 * c, .3776197 * b, -.01112067 * c, .4338609 * b, .074219 * c);
            V(a, .4539471 * b, 0, .6066018 * b, -.02526587 * c, .6558228 * b, .07004196 * c);
            V(a, .6914277 * b, -.01904177 * c, .8921095 * b, -.01220843 * c, .8921095 * b, .08370865 * c);
            V(a, 1.036446 * b, .04105738 * c, 1.020377 * b, .3022052 * c, .9147671 * b, .3194596 * c);
            V(a, 1.04448 * b, .360238 * c, .992256 * b, .5219009 * c, .9082935 * b, .562044 * c);
            V(a, 1.032337 * b, .5771781 * c, 1.018411 * b, .8120651 * c, .9212406 * b, .8217117 * c);
            V(a, 1.028411 * b, .9571472 * c, .8556702 * b, 1.052487 * c, .7592566 * b, .9156953 * c);
            V(a, .7431877 * b, 1.009325 * c, .5624123 * b, 1.021761 * c, .5101666 * b, .9310455 * c);
            V(a, .4820677 * b, 1.031761 * c, .3030112 * b, 1.002796 * c, .2609328 * b, .9344623 * c);
            V(a, .2329994 * b, 1.01518 * c, .03213784 * b, 1.01518 * c, .08034461 * b, .870098 * c);
            V(a, -.02812061 * b, .9032597 * c, -.01205169 * b, .6835638 * c, .06829292 * b, .6545475 * c);
            V(a, -.01812061 * b, .6089503 * c, -.00606892 * b, .4555777 * c, .06427569 * b, .4265613 * c);
            V(a, -.01606892 * b, .3892545 * c, -.01205169 * b, .1944299 * c, .08034461 * b, .1944299 * c);
            X(a);
            b = a.q;
            b.C = new R(.1, .1);
            b.D = new R(.9, .9);
            D.u(a);
            return b
        },
        Gate: "Crescent",
        Crescent: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            V(a, 1 * b, 0, 1 * b, 1 * c, 0, 1 * c);
            V(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            X(a);
            b = a.q;
            b.C = new R(.511, .19);
            b.D = new R(.776, .76);
            D.u(a);
            return b
        },
        FramedRectangle: function(a, b, c) {
            var d = D.v(),
            e = a ? a.Oc: NaN;
            a = a ? a.Qu: NaN;
            isNaN(e) && (e = .1);
            isNaN(a) && (a = .1);
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c, !0);
            T(d, e * b, a * c, !1, !0);
            d.lineTo(e * b, (1 - a) * c);
            d.lineTo((1 - e) * b, (1 - a) * c);
            d.lineTo((1 - e) * b, a * c, !0);
            b = d.q;
            b.C = new R(e, a);
            b.D = new R(1 - e, 1 - a);
            D.u(d);
            return b
        },
        Delay: "HalfEllipse",
        HalfEllipse: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            V(a, Fd * b, 0, 1 * b, (.5 - Fd / 2) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + Fd / 2) * c, Fd * b, 1 * c, 0, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .2);
            b.D = new R(.75, .8);
            D.u(a);
            return b
        },
        Heart: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 1 * c, !0);
            V(a, .1 * b, .8 * c, 0, .5 * c, 0 * b, .3 * c);
            V(a, 0 * b, 0, .45 * b, 0, .5 * b, .3 * c);
            V(a, .55 * b, 0, 1 * b, 0, 1 * b, .3 * c);
            V(a, b, .5 * c, .9 * b, .8 * c, .5 * b, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(.15, .29);
            b.D = new R(.86, .68);
            D.u(a);
            return b
        },
        Spade: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(.51 * b, .01 * c);
            V(a, .6 * b, .2 * c, b, .25 * c, b, .5 * c);
            V(a, b, .8 * c, .6 * b, .8 * c, .55 * b, .7 * c);
            V(a, .5 * b, .75 * c, .55 * b, .95 * c, .75 * b, c);
            a.lineTo(.25 * b, c);
            V(a, .45 * b, .95 * c, .5 * b, .75 * c, .45 * b, .7 * c);
            V(a, .4 * b, .8 * c, 0, .8 * c, 0, .5 * c);
            V(a, 0, .25 * c, .4 * b, .2 * c, .49 * b, .01 * c);
            X(a);
            b = a.q;
            b.C = new R(.19, .26);
            b.D = new R(.8, .68);
            D.u(a);
            return b
        },
        Club: function(a, b, c) {
            a = D.v();
            T(a, .4 * b, .6 * c, !0);
            V(a, .5 * b, .75 * c, .45 * b, .95 * c, .15 * b, 1 * c);
            a.lineTo(.85 * b, c);
            V(a, .55 * b, .95 * c, .5 * b, .75 * c, .6 * b, .6 * c);
            var d = .2,
            e = .3,
            g = 0,
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e + .05) * b, (.5 - h + g - .02) * c, .65 * b, .36771243 * c);
            d = .2;
            e = 0;
            g = -.3;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, .35 * b, .36771243 * c);
            d = .2;
            e = -.3;
            g = 0;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            V(a, (.5 + d + e - .05) * b, (.5 - h + g - .02) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, .4 * b, .6 * c);
            X(a);
            b = a.q;
            b.C = new R(.06, .39);
            b.D = new R(.93, .58);
            D.u(a);
            return b
        },
        Ring: function(a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, b, .5 * c, !0);
            V(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            V(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            V(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            V(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            T(a, .5 * b, .1 * c, !0, !0);
            V(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            V(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            V(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            V(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            b = a.q;
            b.C = new R(.146, .146);
            b.D = new R(.853, .853);
            b.je = Uj;
            D.u(a);
            return b
        },
        YinYang: function(a, b, c) {
            var d = .5;
            a = D.v();
            d = .5;
            T(a, .5 * b, 0, !0);
            a.arcTo(270, 180, .5 * b, .5 * b, .5 * b);
            V(a, 1 * b, d * c, 0, d * c, d * b, 0, !0);
            var d = .1,
            e = .25;
            T(a, (.5 + d) * b, e * c, !0, !0);
            a.arcTo(0, -360, .5 * b, c * e, d * b);
            X(a);
            T(a, .5 * b, 0, !1);
            a.arcTo(270, -180, .5 * b, .5 * b, .5 * b);
            a.ib(!1);
            e = .75;
            T(a, (.5 + d) * b, e * c, !0);
            a.arcTo(0, 360, .5 * b, c * e, d * b);
            X(a);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        Peace: function(a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, b, .5 * c, !0);
            V(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            V(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            V(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            V(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            T(a, .5 * b, .1 * c, !0, !0);
            V(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            V(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            V(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            V(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            var d = .07,
            e = 0,
            g = -.707 * .11,
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            d = .07;
            e = -.707 * .11;
            g = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            d = .07;
            e = .707 * .11;
            g = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            b = a.q;
            b.C = new R(.146, .146);
            b.D = new R(.853, .853);
            b.je = Uj;
            D.u(a);
            return b
        },
        NotAllowed: function(a, b, c) {
            var d = .5 * Fd,
            e = .5;
            a = D.v();
            T(a, .5 * b, (.5 - e) * c, !0);
            V(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            V(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            V(a, (.5 + e) * b, (.5 - d) * c, (.5 + d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            var e = .4,
            d = .4 * Fd,
            g = D.P(),
            h = D.P(),
            k = D.P(),
            l = D.P();
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .42, g, h, k, l, l);
            var m = D.P(),
            n = D.P(),
            p = D.P();
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .58, l, l, p, m, n);
            var q = D.P(),
            r = D.P(),
            s = D.P();
            Ge(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .42, q, r, s, l, l);
            var u = D.P(),
            t = D.P(),
            y = D.P();
            Ge(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .58, l, l, y, u, t);
            T(a, y.x * b, y.y * c, !0, !0);
            V(a, u.x * b, u.y * c, t.x * b, t.y * c, (.5 - e) * b, .5 * c);
            V(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            V(a, g.x * b, g.y * c, h.x * b, h.y * c, k.x * b, k.y * c);
            a.lineTo(y.x * b, y.y * c);
            X(a);
            T(a, s.x * b, s.y * c, !0, !0);
            a.lineTo(p.x * b, p.y * c);
            V(a, m.x * b, m.y * c, n.x * b, n.y * c, (.5 + e) * b, .5 * c);
            V(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, q.x * b, q.y * c, r.x * b, r.y * c, s.x * b, s.y * c);
            X(a);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            D.A(n);
            D.A(p);
            D.A(q);
            D.A(r);
            D.A(s);
            D.A(u);
            D.A(t);
            D.A(y);
            b = a.q;
            D.u(a);
            b.je = Uj;
            return b
        },
        Fragile: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.25 * b, 0);
            a.lineTo(.2 * b, .15 * c);
            a.lineTo(.3 * b, .25 * c);
            a.lineTo(.29 * b, .33 * c);
            a.lineTo(.35 * b, .25 * c);
            a.lineTo(.3 * b, .15 * c);
            a.lineTo(.4 * b, 0);
            a.lineTo(1 * b, 0);
            V(a, 1 * b, .25 * c, .75 * b, .5 * c, .55 * b, .5 * c);
            a.lineTo(.55 * b, .9 * c);
            a.lineTo(.7 * b, .9 * c);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .9 * c);
            a.lineTo(.45 * b, .9 * c);
            a.lineTo(.45 * b, .5 * c);
            V(a, .25 * b, .5 * c, 0, .25 * c, 0, 0);
            X(a);
            b = a.q;
            b.C = new R(.25, 0);
            b.D = new R(.75, .4);
            D.u(a);
            return b
        },
        HourGlass: function(a, b, c) {
            a = D.v();
            T(a, .65 * b, .5 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.35 * b, .5 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        Lightning: function(a, b, c) {
            a = D.v();
            T(a, 0 * b, .55 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(.25 * b, .45 * c);
            a.lineTo(.9 * b, .48 * c);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.65 * b, .55 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        Parallelogram1: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            b = d.q;
            b.C = new R(a, 0);
            b.D = new R(1 - a, 1);
            D.u(d);
            return b
        },
        Input: "Output",
        Output: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(.1 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(.1, 0);
            b.D = new R(.9, 1);
            D.u(a);
            return b
        },
        Parallelogram2: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            b = d.q;
            b.C = new R(a, 0);
            b.D = new R(1 - a, 1);
            D.u(d);
            return b
        },
        ThickCross: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, (.5 - a / 2) * b, 0, !0);
            d.lineTo((.5 + a / 2) * b, 0);
            d.lineTo((.5 + a / 2) * b, (.5 - a / 2) * c);
            d.lineTo(1 * b, (.5 - a / 2) * c);
            d.lineTo(1 * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, (.5 + a / 2) * c);
            d.lineTo(0, (.5 + a / 2) * c);
            d.lineTo(0, (.5 - a / 2) * c);
            d.lineTo((.5 - a / 2) * b, (.5 - a / 2) * c);
            X(d);
            b = d.q;
            b.C = new R(.5 - a / 2, .5 - a / 2);
            b.D = new R(.5 + a / 2, .5 + a / 2);
            D.u(d);
            return b
        },
        ThickX: function(a, b, c) {
            a = .25 / Math.SQRT2;
            var d = D.v();
            T(d, .3 * b, 0, !0);
            d.lineTo(.5 * b, .2 * c);
            d.lineTo(.7 * b, 0);
            d.lineTo(1 * b, .3 * c);
            d.lineTo(.8 * b, .5 * c);
            d.lineTo(1 * b, .7 * c);
            d.lineTo(.7 * b, 1 * c);
            d.lineTo(.5 * b, .8 * c);
            d.lineTo(.3 * b, 1 * c);
            d.lineTo(0, .7 * c);
            d.lineTo(.2 * b, .5 * c);
            d.lineTo(0, .3 * c);
            X(d);
            b = d.q;
            b.C = new R(.5 - a, .5 - a);
            b.D = new R(.5 + a, .5 + a);
            D.u(d);
            return b
        },
        ThinCross: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = .1);
            a = D.v();
            T(a, (.5 - d / 2) * b, 0, !0);
            a.lineTo((.5 + d / 2) * b, 0);
            a.lineTo((.5 + d / 2) * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, (.5 + d / 2) * c);
            a.lineTo(0, (.5 + d / 2) * c);
            a.lineTo(0, (.5 - d / 2) * c);
            a.lineTo((.5 - d / 2) * b, (.5 - d / 2) * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        ThinX: function(a, b, c) {
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.5 * b, .4 * c);
            a.lineTo(.9 * b, 0);
            a.lineTo(1 * b, .1 * c);
            a.lineTo(.6 * b, .5 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            a.lineTo(0, .9 * c);
            a.lineTo(.4 * b, .5 * c);
            a.lineTo(0, .1 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        RightTriangle: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .5);
            b.D = new R(.5, 1);
            D.u(a);
            return b
        },
        RoundedIBeam: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            V(a, .5 * b, .25 * c, .5 * b, .75 * c, 1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            V(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        RoundedRectangle: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = d * Fd;
            var e = D.v();
            T(e, d, 0, !0);
            e.lineTo(b - d, 0);
            V(e, b - a, 0, b, a, b, d);
            e.lineTo(b, c - d);
            V(e, b, c - a, b - a, c, b - d, c);
            e.lineTo(d, c);
            V(e, a, c, 0, c - a, 0, c - d);
            e.lineTo(0, d);
            V(e, 0, a, a, 0, d, 0);
            X(e);
            b = e.q;
            1 < a ? (b.C = new R(0, 0, a, a), b.D = new R(1, 1, -a, -a)) : (b.C = cc, b.D = rc);
            D.u(e);
            return b
        },
        Border: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = D.v();
            T(a, d, 0, !0);
            a.lineTo(b - d, 0);
            V(a, b - 0, 0, b, 0, b, d);
            a.lineTo(b, c - d);
            V(a, b, c - 0, b - 0, c, b - d, c);
            a.lineTo(d, c);
            V(a, 0, c, 0, c - 0, 0, c - d);
            a.lineTo(0, d);
            V(a, 0, 0, 0, 0, d, 0);
            X(a);
            b = a.q;
            b.C = cc;
            b.D = rc;
            D.u(a);
            return b
        },
        SquareIBeam: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, d * c);
            a.lineTo((.5 + d / 2) * b, d * c);
            a.lineTo((.5 + d / 2) * b, (1 - d) * c);
            a.lineTo(1 * b, (1 - d) * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, d * c);
            a.lineTo(0, d * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        Trapezoid: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .2);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            b = d.q;
            b.C = new R(a, 0);
            b.D = new R(1 - a, 1);
            D.u(d);
            return b
        },
        ManualLoop: "ManualOperation",
        ManualOperation: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = 0);
            a = D.v();
            T(a, d, 0, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(.1, 0);
            b.D = new R(.9, 1);
            D.u(a);
            return b
        },
        GenderMale: function(a, b, c) {
            a = D.v();
            var d = .4 * Fd,
            e = .4,
            g = D.P(),
            h = D.P(),
            k = D.P(),
            l = D.P();
            T(a, (.5 - e) * b, .5 * c, !0);
            V(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .44, k, l, h, g, g);
            V(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            var m = D.Fb(h.x, h.y);
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .56, g, g, h, k, l);
            var n = D.Fb(h.x, h.y);
            a.lineTo((.1 * m.x + .855) * b, .1 * m.y * c);
            a.lineTo(.85 * b, .1 * m.y * c);
            a.lineTo(.85 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, (.1 * n.y + .05 * .9) * c);
            a.lineTo(n.x * b, n.y * c);
            V(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            V(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            e = .35;
            d = .35 * Fd;
            T(a, .5 * b, (.5 - e) * c, !0, !0);
            V(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            V(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            V(a, (.5 + e) * b, (.5 - d) * c, (.5 + d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            T(a, (.5 - e) * b, .5 * c, !0);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            D.A(n);
            b = a.q;
            b.C = new R(.202, .257);
            b.D = new R(.692, .839);
            b.je = Uj;
            D.u(a);
            return b
        },
        GenderFemale: function(a, b, c) {
            a = D.v();
            var d = .375,
            e = 0,
            g = -.125,
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.525 + e) * b, (.5 + d + g) * c, !0);
            V(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            V(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.475 + e) * b, (.5 + d + g) * c);
            a.lineTo(.475 * b, .85 * c);
            a.lineTo(.425 * b, .85 * c);
            a.lineTo(.425 * b, .9 * c);
            a.lineTo(.475 * b, .9 * c);
            a.lineTo(.475 * b, 1 * c);
            a.lineTo(.525 * b, 1 * c);
            a.lineTo(.525 * b, .9 * c);
            a.lineTo(.575 * b, .9 * c);
            a.lineTo(.575 * b, .85 * c);
            a.lineTo(.525 * b, .85 * c);
            X(a);
            d = .325;
            e = 0;
            g = -.125;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0, !0);
            V(a, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            V(a, (.5 - h + e) * b, (.5 + d + g) * c, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            V(a, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            V(a, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            T(a, (.525 + e) * b, (.5 + d + g) * c, !0);
            b = a.q;
            b.C = new R(.232, .136);
            b.D = new R(.782, .611);
            b.je = Uj;
            D.u(a);
            return b
        },
        PlusLine: function(a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        XLine: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        AsteriskLine: function(a, b, c) {
            a = D.v();
            var d = .2 / Math.SQRT2;
            T(a, d * b, (1 - d) * c, !1);
            a.lineTo((1 - d) * b, d * c);
            a.moveTo(d * b, d * c);
            a.lineTo((1 - d) * b, (1 - d) * c);
            a.moveTo(0 * b, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        CircleLine: function(a, b, c) {
            var d = .5 * Fd;
            a = D.v();
            T(a, 1 * b, .5 * c, !1);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.C = new R(.146, .146);
            b.D = new R(.853, .853);
            b.je = Uj;
            D.u(a);
            return b
        },
        Pie: function(a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, (.5 * Math.SQRT2 / 2 + .5) * b, (.5 - .5 * Math.SQRT2 / 2) * c, !0);
            V(a, .7 * b, 0 * c, .5 * b, 0 * c, .5 * b, 0 * c);
            V(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            V(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 + d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            a.lineTo(.5 * b, .5 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        PiePiece: function(a, b, c) {
            var d = Fd / Math.SQRT2 * .5,
            e = Math.SQRT2 / 2,
            g = 1 - Math.SQRT2 / 2;
            a = D.v();
            T(a, b, c, !0);
            V(a, b, (1 - d) * c, (e + d) * b, (g + d) * c, e * b, g * c);
            a.lineTo(0, c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        StopSign: function(a, b, c) {
            a = 1 / (Math.SQRT2 + 2);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, a * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(a * b, 1 * c);
            d.lineTo(0, (1 - a) * c);
            d.lineTo(0, a * c);
            X(d);
            b = d.q;
            b.C = new R(a / 2, a / 2);
            b.D = new R(1 - a / 2, 1 - a / 2);
            D.u(d);
            return b
        },
        LogicImplies: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            b = a.q;
            b.C = cc;
            b.D = new R(.8, .5);
            D.u(a);
            return b
        },
        LogicIff: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(d * b, 0);
            a.lineTo(0, .5 * c);
            a.lineTo(d * b, c);
            b = a.q;
            b.C = new R(.2, 0);
            b.D = new R(.8, .5);
            D.u(a);
            return b
        },
        LogicNot: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        LogicAnd: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new R(.25, .5);
            b.D = new R(.75, 1);
            D.u(a);
            return b
        },
        LogicOr: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            b = a.q;
            b.C = new R(.219, 0);
            b.D = new R(.78, .409);
            D.u(a);
            return b
        },
        LogicXor: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            var d = .5 * Fd;
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        LogicTruth: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        LogicFalsity: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 1 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            b = a.q;
            D.u(a);
            return b
        },
        LogicThereExists: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        LogicForAll: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.75 * b, .5 * c);
            b = a.q;
            b.C = new R(.25, 0);
            b.D = new R(.75, .5);
            D.u(a);
            return b
        },
        LogicIsDefinedAs: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(0, c);
            a.lineTo(b, c);
            b = a.q;
            b.C = new R(.01, .01);
            b.D = new R(.99, .49);
            D.u(a);
            return b
        },
        LogicIntersect: function(a, b, c) {
            var d = .5 * Fd;
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new R(0, .5);
            b.D = rc;
            D.u(a);
            return b
        },
        LogicUnion: function(a, b, c) {
            var d = .5 * Fd;
            a = D.v();
            T(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            a.lineTo(0, 0);
            b = a.q;
            b.C = cc;
            b.D = new R(1, .5);
            D.u(a);
            return b
        },
        Arrow: function(a, b, c) {
            var d = a ? a.Oc: NaN,
            e = a ? a.Qu: NaN;
            isNaN(d) && (d = .3);
            isNaN(e) && (e = .3);
            a = D.v();
            T(a, 0, (.5 - e / 2) * c, !0);
            a.lineTo((1 - d) * b, (.5 - e / 2) * c);
            a.lineTo((1 - d) * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, 1 * c);
            a.lineTo((1 - d) * b, (.5 + e / 2) * c);
            a.lineTo(0, (.5 + e / 2) * c);
            X(a);
            b = a.q;
            b.C = new R(0, .5 - e / 2);
            d = Ue(0, .5 + e / 2, 1, .5 + e / 2, 1 - d, 1, 1, .5, D.P());
            b.D = new R(d.x, d.y);
            D.A(d);
            D.u(a);
            return b
        },
        ISOProcess: "Chevron",
        Chevron: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        DoubleArrow: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.3 * b, .214 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .786 * c);
            a.lineTo(0, 1 * c);
            X(a);
            T(a, .3 * b, .214 * c, !1);
            a.lineTo(.3 * b, .786 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        DoubleEndArrow: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.3 * b, .7 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(0, .5 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.3 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            X(a);
            b = a.q;
            c = Ue(0, .5, .3, 0, 0, .3, .3, .3, D.P());
            b.C = new R(c.x, c.y);
            c = Ue(.7, 1, 1, .5, .7, .7, 1, .7, c);
            b.D = new R(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        },
        IBeamArrow: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.2 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.2 * b, 0);
            a.lineTo(.2 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            X(a);
            b = a.q;
            b.C = new R(0, .3);
            c = Ue(.7, 1, 1, .5, .7, .7, 1, .7, D.P());
            b.D = new R(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        },
        Pointer: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, 0);
            X(a);
            b = a.q;
            b.C = new R(.2, .35);
            c = Ue(.2, .65, 1, .65, 0, 1, 1, .5, D.P());
            b.D = new R(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        },
        RoundedPointer: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            V(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            X(a);
            b = a.q;
            b.C = new R(.4, .35);
            c = Ue(.2, .65, 1, .65, 0, 1, 1, .5, D.P());
            b.D = new R(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        },
        SplitEndArrow: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(0, .7 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            X(a);
            b = a.q;
            b.C = new R(.2, .3);
            c = Ue(.7, 1, 1, .5, .7, .7, 1, .7, D.P());
            b.D = new R(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        },
        MessageToUser: "SquareArrow",
        SquareArrow: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.7 * b, 0);
            X(a);
            b = a.q;
            b.C = cc;
            b.D = new R(.7, 1);
            D.u(a);
            return b
        },
        Cone1: function(a, b, c) {
            var d = .5 * Fd,
            e = .1 * Fd;
            a = D.v();
            T(a, 0, .9 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .9 * c);
            V(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            X(a);
            b = a.q;
            b.C = new R(.25, .5);
            b.D = new R(.75, .97);
            D.u(a);
            return b
        },
        Cone2: function(a, b, c) {
            a = D.v();
            T(a, 0, .9 * c, !0);
            V(a, (1 - .85 / .9) * b, 1 * c, .85 / .9 * b, 1 * c, 1 * b, .9 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(0, .9 * c);
            X(a);
            T(a, 0, .9 * c, !1);
            V(a, (1 - .85 / .9) * b, .8 * c, .85 / .9 * b, .8 * c, 1 * b, .9 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .5);
            b.D = new R(.75, .82);
            D.u(a);
            return b
        },
        Cube1: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 1 * c, !0);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(.5 * b, 0 * c);
            a.lineTo(0 * b, .15 * c);
            a.lineTo(0 * b, .85 * c);
            X(a);
            T(a, .5 * b, 1 * c, !1);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(0, .15 * c);
            a.moveTo(.5 * b, .3 * c);
            a.lineTo(1 * b, .15 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .3);
            b.D = new R(.5, .85);
            D.u(a);
            return b
        },
        Cube2: function(a, b, c) {
            a = D.v();
            T(a, 0, .3 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(.7 * b, c);
            a.lineTo(1 * b, .7 * c);
            a.lineTo(1 * b, 0 * c);
            a.lineTo(.3 * b, 0 * c);
            X(a);
            T(a, 0, .3 * c, !1);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(1 * b, 0 * c);
            a.moveTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .3);
            b.D = new R(.7, 1);
            D.u(a);
            return b
        },
        MagneticData: "Cylinder1",
        Cylinder1: function(a, b, c) {
            var d = .5 * Fd,
            e = .1 * Fd;
            a = D.v();
            T(a, 0, .1 * c, !0);
            V(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(b, .9 * c);
            V(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            T(a, 0, .1 * c, !1);
            V(a, 0, (.1 + e) * c, (.5 - d) * b, .2 * c, .5 * b, .2 * c);
            V(a, (.5 + d) * b, .2 * c, 1 * b, (.1 + e) * c, 1 * b, .1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .2);
            b.D = new R(1, .9);
            D.u(a);
            return b
        },
        Cylinder2: function(a, b, c) {
            var d = .5 * Fd,
            e = .1 * Fd;
            a = D.v();
            T(a, 0, .9 * c, !0);
            a.lineTo(0, .1 * c);
            V(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(1 * b, .9 * c);
            V(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            T(a, 0, .9 * c, !1);
            V(a, 0, (.9 - e) * c, (.5 - d) * b, .8 * c, .5 * b, .8 * c);
            V(a, (.5 + d) * b, .8 * c, 1 * b, (.9 - e) * c, 1 * b, .9 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .1);
            b.D = new R(1, .8);
            D.u(a);
            return b
        },
        Cylinder3: function(a, b, c) {
            var d = .1 * Fd,
            e = .5 * Fd;
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            V(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            V(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            V(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            T(a, .1 * b, 0, !1);
            V(a, (.1 + d) * b, 0, .2 * b, (.5 - e) * c, .2 * b, .5 * c);
            V(a, .2 * b, (.5 + e) * c, (.1 + d) * b, 1 * c, .1 * b, 1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.2, 0);
            b.D = new R(.9, 1);
            D.u(a);
            return b
        },
        DirectData: "Cylinder4",
        Cylinder4: function(a, b, c) {
            var d = .1 * Fd,
            e = .5 * Fd;
            a = D.v();
            T(a, .9 * b, 0, !0);
            V(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            V(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            V(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            a.lineTo(.9 * b, 0);
            T(a, .9 * b, 0, !1);
            V(a, (.9 - d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            V(a, .8 * b, (.5 + e) * c, (.9 - d) * b, 1 * c, .9 * b, 1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.1, 0);
            b.D = new R(.8, 1);
            D.u(a);
            return b
        },
        Prism1: function(a, b, c) {
            a = D.v();
            T(a, .25 * b, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(b, .5 * c);
            a.lineTo(.5 * b, c);
            a.lineTo(0, c);
            X(a);
            T(a, .25 * b, .25 * c, !1);
            a.lineTo(.5 * b, c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.408, .172);
            b.D = new R(.833, .662);
            D.u(a);
            return b
        },
        Prism2: function(a, b, c) {
            a = D.v();
            T(a, 0, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            X(a);
            T(a, 0, c, !1);
            a.lineTo(.25 * b, .5 * c);
            a.lineTo(b, .25 * c);
            a.moveTo(0, .25 * c);
            a.lineTo(.25 * b, .5 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .5);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        Pyramid1: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(b, .75 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .75 * c);
            X(a);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .367);
            b.D = new R(.75, .875);
            D.u(a);
            return b
        },
        Pyramid2: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(b, .85 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .85 * c);
            X(a);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(0, .85 * c);
            a.moveTo(.5 * b, .7 * c);
            a.lineTo(1 * b, .85 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .367);
            b.D = new R(.75, .875);
            D.u(a);
            return b
        },
        Actor: function(a, b, c) {
            var d = .2 * Fd,
            e = .1 * Fd,
            g = .5,
            h = .1;
            a = D.v();
            T(a, g * b, (h + .1) * c, !0);
            V(a, (g - d) * b, (h + .1) * c, (g - .2) * b, (h + e) * c, (g - .2) * b, h * c);
            V(a, (g - .2) * b, (h - e) * c, (g - d) * b, (h - .1) * c, g * b, (h - .1) * c);
            V(a, (g + d) * b, (h - .1) * c, (g + .2) * b, (h - e) * c, (g + .2) * b, h * c);
            V(a, (g + .2) * b, (h + e) * c, (g + d) * b, (h + .1) * c, g * b, (h + .1) * c);
            d = .05;
            e = Fd * d;
            T(a, .5 * b, .2 * c, !0);
            a.lineTo(.95 * b, .2 * c);
            g = .95;
            h = .25;
            V(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            a.lineTo(1 * b, .6 * c);
            a.lineTo(.85 * b, .6 * c);
            a.lineTo(.85 * b, .35 * c);
            d = .025;
            e = Fd * d;
            g = .825;
            h = .35;
            V(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c, g * b, (h - d) * c);
            V(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.55 * b, 1 * c);
            a.lineTo(.55 * b, .7 * c);
            d = .05;
            e = Fd * d;
            g = .5;
            h = .7;
            V(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c, g * b, (h - d) * c);
            V(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.45 * b, 1 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.2 * b, .35 * c);
            d = .025;
            e = Fd * d;
            g = .175;
            h = .35;
            V(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c, g * b, (h - d) * c);
            V(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.15 * b, .6 * c);
            a.lineTo(0 * b, .6 * c);
            a.lineTo(0 * b, .25 * c);
            d = .05;
            e = Fd * d;
            g = .05;
            h = .25;
            V(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            a.lineTo(.5 * b, .2 * c);
            b = a.q;
            b.C = new R(.2, .2);
            b.D = new R(.8, .65);
            D.u(a);
            return b
        },
        Card: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, 0 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(0 * b, .2 * c);
            a.lineTo(.2 * b, 0 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .2);
            b.D = rc;
            D.u(a);
            return b
        },
        Collate: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, .5 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            T(a, .5 * b, .5 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            b = a.q;
            b.C = new R(.25, 0);
            b.D = new R(.75, .25);
            D.u(a);
            return b
        },
        CreateRequest: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            T(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(0, a);
            b.D = new R(1, 1 - a);
            D.u(d);
            return b
        },
        Database: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd,
            e = .1 * Fd;
            T(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            V(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            V(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            T(a, 1 * b, .1 * c, !1);
            V(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            V(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            V(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            V(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.moveTo(1 * b, .3 * c);
            V(a, 1 * b, (.3 + e) * c, (.5 + d) * b, .4 * c, .5 * b, .4 * c);
            V(a, (.5 - d) * b, .4 * c, 0, (.3 + e) * c, 0, .3 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .4);
            b.D = new R(1, .9);
            D.u(a);
            return b
        },
        StoredData: "DataStorage",
        DataStorage: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            V(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            V(a, .25 * b, .9 * c, .25 * b, .1 * c, 0, 0);
            X(a);
            b = a.q;
            b.C = new R(.226, 0);
            b.D = new R(.81, 1);
            D.u(a);
            return b
        },
        DiskStorage: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd,
            e = .1 * Fd;
            T(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            V(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            V(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            T(a, 1 * b, .1 * c, !1);
            V(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            V(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            V(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            V(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .3);
            b.D = new R(1, .9);
            D.u(a);
            return b
        },
        Display: function(a, b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            a.lineTo(.75 * b, 0);
            V(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(.25 * b, 1 * c);
            a.lineTo(0, .5 * c);
            X(a);
            b = a.q;
            b.C = new R(.25, 0);
            b.D = new R(.75, 1);
            D.u(a);
            return b
        },
        DividedEvent: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) ? a = .2 : .15 > a && (a = .15);
            var d = D.v(),
            e = .2 * Fd;
            T(d, 0, .2 * c, !0);
            V(d, 0, (.2 - e) * c, (.2 - e) * b, 0, .2 * b, 0);
            d.lineTo(.8 * b, 0);
            V(d, (.8 + e) * b, 0, 1 * b, (.2 - e) * c, 1 * b, .2 * c);
            d.lineTo(1 * b, .8 * c);
            V(d, 1 * b, (.8 + e) * c, (.8 + e) * b, 1 * c, .8 * b, 1 * c);
            d.lineTo(.2 * b, 1 * c);
            V(d, (.2 - e) * b, 1 * c, 0, (.8 + e) * c, 0, .8 * c);
            d.lineTo(0, .2 * c);
            T(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(0, a);
            b.D = new R(1, 1 - a);
            D.u(d);
            return b
        },
        DividedProcess: function(a, b, c) {
            a = a ? a.Oc: NaN;
            if (isNaN(a) || .1 > a) a = .1;
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            T(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(0, a);
            b.D = rc;
            D.u(d);
            return b
        },
        Document: function(a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            V(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            X(a);
            b = a.q;
            b.C = cc;
            b.D = new R(1, .6);
            D.u(a);
            return b
        },
        ExternalOrganization: function(a, b, c) {
            a = a ? a.Oc: NaN;
            if (isNaN(a) || .2 > a) a = .2;
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            T(d, a * b, 0, !1);
            d.lineTo(0, a * c);
            d.moveTo(1 * b, a * c);
            d.lineTo((1 - a) * b, 0);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(a * b, 1 * c);
            d.moveTo((1 - a) * b, 1 * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(a / 2, a / 2);
            b.D = new R(1 - a / 2, 1 - a / 2);
            D.u(d);
            return b
        },
        ExternalProcess: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            X(a);
            T(a, .1 * b, .4 * c, !1);
            a.lineTo(.1 * b, .6 * c);
            a.moveTo(.9 * b, .6 * c);
            a.lineTo(.9 * b, .4 * c);
            a.moveTo(.6 * b, .1 * c);
            a.lineTo(.4 * b, .1 * c);
            a.moveTo(.4 * b, .9 * c);
            a.lineTo(.6 * b, .9 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .25);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        File: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            X(a);
            T(a, .75 * b, 0, !1);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .25 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .25);
            b.D = rc;
            D.u(a);
            return b
        },
        Interrupt: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 1 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 0);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(.5, .75);
            D.u(a);
            return b
        },
        InternalStorage: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            a = a ? a.Qu: NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .1);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            X(e);
            T(e, d * b, 0, !1);
            e.lineTo(d * b, 1 * c);
            e.moveTo(0, a * c);
            e.lineTo(1 * b, a * c);
            e.ib(!1);
            b = e.q;
            b.C = new R(d, a);
            b.D = rc;
            D.u(e);
            return b
        },
        Junction: function(a, b, c) {
            a = D.v();
            var d = 1 / Math.SQRT2,
            e = (1 - 1 / Math.SQRT2) / 2,
            g = .5 * Fd;
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + g) * c, (.5 + g) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - g) * b, 1 * c, 0, (.5 + g) * c, 0, .5 * c);
            V(a, 0, (.5 - g) * c, (.5 - g) * b, 0, .5 * b, 0);
            V(a, (.5 + g) * b, 0, 1 * b, (.5 - g) * c, 1 * b, .5 * c);
            T(a, (e + d) * b, (e + d) * c, !1);
            a.lineTo(e * b, e * c);
            a.moveTo(e * b, (e + d) * c);
            a.lineTo((e + d) * b, e * c);
            a.ib(!1);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        LinedDocument: function(a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            V(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            X(a);
            T(a, .1 * b, 0, !1);
            a.lineTo(.1 * b, .75 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.1, 0);
            b.D = new R(1, .6);
            D.u(a);
            return b
        },
        LoopLimit: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(0, .25 * c);
            a.lineTo(.25 * b, 0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .25);
            b.D = rc;
            D.u(a);
            return b
        },
        SequentialData: "MagneticTape",
        MagneticTape: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, .5 * b, 1 * c, !0);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .6 * b, .9 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            b.C = new R(.15, .15);
            b.D = new R(.85, .8);
            D.u(a);
            return b
        },
        ManualInput: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .25 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .25);
            b.D = rc;
            D.u(a);
            return b
        },
        MessageFromUser: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .7);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(a * b, .5 * c);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            b = d.q;
            b.C = cc;
            b.D = new R(a, 1);
            D.u(d);
            return b
        },
        MicroformProcessing: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(.5 * b, a * c);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.5 * b, (1 - a) * c);
            d.lineTo(0, 1 * c);
            X(d);
            b = d.q;
            b.C = new R(0, a);
            b.D = new R(1, 1 - a);
            D.u(d);
            return b
        },
        MicroformRecording: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(1, .75);
            D.u(a);
            return b
        },
        MultiDocument: function(a, b, c) {
            c /= .8;
            a = D.v();
            T(a, b, 0, !0);
            a.lineTo(b, .5 * c);
            V(a, .96 * b, .47 * c, .93 * b, .45 * c, .9 * b, .44 * c);
            a.lineTo(.9 * b, .6 * c);
            V(a, .86 * b, .57 * c, .83 * b, .55 * c, .8 * b, .54 * c);
            a.lineTo(.8 * b, .7 * c);
            V(a, .4 * b, .4 * c, .4 * b, 1 * c, 0, .7 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            a.lineTo(.1 * b, .1 * c);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            X(a);
            T(a, .1 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .54 * c);
            a.moveTo(.2 * b, .1 * c);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .44 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(.8, .77);
            D.u(a);
            return b
        },
        MultiProcess: function(a, b, c) {
            a = D.v();
            T(a, .1 * b, .1 * c, !0);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.9 * b, .8 * c);
            a.lineTo(.9 * b, .9 * c);
            a.lineTo(.8 * b, .9 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            X(a);
            T(a, .2 * b, .1 * c, !1);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .8 * c);
            a.moveTo(.1 * b, .2 * c);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .9 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(0, .2);
            b.D = new R(.8, 1);
            D.u(a);
            return b
        },
        OfflineStorage: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = 1 - a,
            e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo(.5 * b, 1 * c);
            X(e);
            T(e, .5 * a * b, a * c, !1);
            e.lineTo((1 - .5 * a) * b, a * c);
            e.ib(!1);
            b = e.q;
            b.C = new R(d / 4 + .5 * a, a);
            b.D = new R(3 * d / 4 + .5 * a, a + .5 * d);
            D.u(e);
            return b
        },
        OffPageConnector: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            X(a);
            b = a.q;
            b.C = cc;
            b.D = new R(.75, 1);
            D.u(a);
            return b
        },
        Or: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(0, .5 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.ib(!1);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        PaperTape: function(a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, .3 * c);
            V(a, .5 * b, .6 * c, .5 * b, 0, 1 * b, .3 * c);
            a.lineTo(1 * b, .7 * c);
            V(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .49);
            b.D = new R(1, .75);
            D.u(a);
            return b
        },
        PrimitiveFromCall: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            a = a ? a.Qu: NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo((1 - a) * b, .5 * c);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            X(e);
            b = e.q;
            b.C = new R(d, 0);
            b.D = new R(1 - a, 1);
            D.u(e);
            return b
        },
        PrimitiveToCall: function(a, b, c) {
            var d = a ? a.Oc: NaN;
            a = a ? a.Qu: NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo((1 - a) * b, 0);
            e.lineTo(1 * b, .5 * c);
            e.lineTo((1 - a) * b, 1 * c);
            e.lineTo(0, 1 * c);
            X(e);
            b = e.q;
            b.C = new R(d, 0);
            b.D = new R(1 - a, 1);
            D.u(e);
            return b
        },
        Subroutine: "Procedure",
        Procedure: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            T(d, (1 - a) * b, 0, !1);
            d.lineTo((1 - a) * b, 1 * c);
            d.moveTo(a * b, 0);
            d.lineTo(a * b, 1 * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(a, 0);
            b.D = new R(1 - a, 1);
            D.u(d);
            return b
        },
        Process: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            X(d);
            T(d, a * b, 0, !1);
            d.lineTo(a * b, 1 * c);
            d.ib(!1);
            b = d.q;
            b.C = new R(a, 0);
            b.D = rc;
            D.u(d);
            return b
        },
        Sort: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            X(a);
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, .25);
            b.D = new R(.75, .5);
            D.u(a);
            return b
        },
        Start: function(a, b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            T(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            T(a, .25 * b, 0, !1);
            a.lineTo(.25 * b, 1 * c);
            a.moveTo(.75 * b, 0);
            a.lineTo(.75 * b, 1 * c);
            a.ib(!1);
            b = a.q;
            b.C = new R(.25, 0);
            b.D = new R(.75, 1);
            D.u(a);
            return b
        },
        Terminator: function(a, b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            b = a.q;
            b.C = new R(.23, 0);
            b.D = new R(.77, 1);
            D.u(a);
            return b
        },
        TransmittalTape: function(a, b, c) {
            a = a ? a.Oc: NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.75 * b, (1 - a) * c);
            d.lineTo(0, (1 - a) * c);
            X(d);
            b = d.q;
            b.C = cc;
            b.D = new R(1, 1 - a);
            D.u(d);
            return b
        },
        AndGate: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            X(a);
            b = a.q;
            b.C = cc;
            b.D = new R(.55, 1);
            D.u(a);
            return b
        },
        Buffer: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(.5, .75);
            D.u(a);
            return b
        },
        Clock: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            T(a, .8 * b, .75 * c, !1);
            a.lineTo(.8 * b, .25 * c);
            a.lineTo(.6 * b, .25 * c);
            a.lineTo(.6 * b, .75 * c);
            a.lineTo(.4 * b, .75 * c);
            a.lineTo(.4 * b, .25 * c);
            a.lineTo(.2 * b, .25 * c);
            a.lineTo(.2 * b, .75 * c);
            a.ib(!1);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        Ground: function(a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.3 * b, .8 * c);
            a.lineTo(.7 * b, .8 * c);
            a.moveTo(.4 * b, 1 * c);
            a.lineTo(.6 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Inverter: function(a, b, c) {
            a = D.v();
            var d = .1 * Fd;
            T(a, .8 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.8 * b, .5 * c);
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + d) * c, (.9 + d) * b, .6 * c, .9 * b, .6 * c);
            V(a, (.9 - d) * b, .6 * c, .8 * b, (.5 + d) * c, .8 * b, .5 * c);
            V(a, .8 * b, (.5 - d) * c, (.9 - d) * b, .4 * c, .9 * b, .4 * c);
            V(a, (.9 + d) * b, .4 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(.4, .75);
            D.u(a);
            return b
        },
        NandGate: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd,
            e = .4 * Fd,
            g = .1 * Fd;
            T(a, .8 * b, .5 * c, !0);
            V(a, .8 * b, (.5 + e) * c, (.4 + d) * b, 1 * c, .4 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.4 * b, 0);
            V(a, (.4 + d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + g) * c, (.9 + g) * b, .6 * c, .9 * b, .6 * c);
            V(a, (.9 - g) * b, .6 * c, .8 * b, (.5 + g) * c, .8 * b, .5 * c);
            V(a, .8 * b, (.5 - g) * c, (.9 - g) * b, .4 * c, .9 * b, .4 * c);
            V(a, (.9 + g) * b, .4 * c, 1 * b, (.5 - g) * c, 1 * b, .5 * c);
            b = a.q;
            b.C = new R(0, .05);
            b.D = new R(.55, .95);
            D.u(a);
            return b
        },
        NorGate: function(a, b, c) {
            a = D.v();
            var d = .5,
            e = Fd * d,
            g = 0,
            h = .5;
            T(a, .8 * b, .5 * c, !0);
            V(a, .7 * b, (h + e) * c, (g + e) * b, (h + d) * c, 0, 1 * c);
            V(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            V(a, (g + e) * b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * Fd;
            g = .9;
            h = .5;
            T(a, (g - d) * b, h * c, !0);
            V(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            V(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            V(a, (g + d) * b, (h + e) * c, (g + e) * b, (h + d) * c, g * b, (h + d) * c);
            V(a, (g - e) * b, (h + d) * c, (g - d) * b, (h + e) * c, (g - d) * b, h * c);
            b = a.q;
            b.C = new R(.2, .25);
            b.D = new R(.6, .75);
            D.u(a);
            return b
        },
        OrGate: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 0, 0, !0);
            V(a, (0 + d + d) * b, 0 * c, .8 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, .8 * b, (.5 + d) * c, (0 + d + d) * b, 1 * c, 0, 1 * c);
            V(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            X(a);
            b = a.q;
            b.C = new R(.2, .25);
            b.D = new R(.75, .75);
            D.u(a);
            return b
        },
        XnorGate: function(a, b, c) {
            a = D.v();
            var d = .5,
            e = Fd * d,
            g = .2,
            h = .5;
            T(a, .1 * b, 0, !1);
            V(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            T(a, .8 * b, .5 * c, !0);
            V(a, .7 * b, (h + e) * c, (g + e) * b, (h + d) * c, .2 * b, 1 * c);
            V(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            V(a, (g + e) * b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * Fd;
            g = .9;
            h = .5;
            T(a, (g - d) * b, h * c, !0);
            V(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            V(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            V(a, (g + d) * b, (h + e) * c, (g + e) * b, (h + d) * c, g * b, (h + d) * c);
            V(a, (g - e) * b, (h + d) * c, (g - d) * b, (h + e) * c, (g - d) * b, h * c);
            b = a.q;
            b.C = new R(.4, .25);
            b.D = new R(.65, .75);
            D.u(a);
            return b
        },
        XorGate: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, .1 * b, 0, !1);
            V(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            T(a, .2 * b, 0, !0);
            V(a, (.2 + d) * b, 0 * c, .9 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, .9 * b, (.5 + d) * c, (.2 + d) * b, 1 * c, .2 * b, 1 * c);
            V(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            X(a);
            b = a.q;
            b.C = new R(.4, .25);
            b.D = new R(.8, .75);
            D.u(a);
            return b
        },
        Capacitor: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Resistor: function(a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !1);
            a.lineTo(.1 * b, 0);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(.6 * b, 1 * c);
            a.lineTo(.7 * b, .5 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Inductor: function(a, b, c) {
            a = D.v();
            var d = .1 * Fd,
            e = .1;
            T(a, (e - .5 * d) * b, c, !1);
            V(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .3;
            V(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            V(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .5;
            V(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            V(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .7;
            V(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            V(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .9;
            V(a, (e + .1) * b, 0, (e + d) * b, c, (e + .5 * d) * b, c);
            b = a.q;
            D.u(a);
            return b
        },
        ACvoltageSource: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 0 * b, .5 * c, !1);
            V(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            V(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b, .5 * c);
            a.moveTo(.1 * b, .5 * c);
            V(a, .5 * b, 0 * c, .5 * b, 1 * c, .9 * b, .5 * c);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        DCvoltageSource: function(a, b, c) {
            a = D.v();
            T(a, 0, .75 * c, !1);
            a.lineTo(0, .25 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        Diode: function(a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new R(0, .25);
            b.D = new R(.5, .75);
            D.u(a);
            return b
        },
        Wifi: function(a, b, c) {
            var d = b,
            e = c;
            b *= .38;
            c *= .6;
            a = D.v();
            var g = .8 * Fd,
            h = .8,
            k = 0,
            l = .5,
            d = (d - b) / 2,
            e = (e - c) / 2;
            T(a, k * b + d, (l + h) * c + e, !0);
            V(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            V(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            V(a, k * b + d, (l - h) * c + e, (k - h + .5 * g) * b + d, (l - g) * c + e, (k - h + .5 * g) * b + d, l * c + e);
            V(a, (k - h + .5 * g) * b + d, (l + g) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            X(a);
            g = .4 * Fd;
            h = .4;
            k = .2;
            l = .5;
            T(a, k * b + d, (l + h) * c + e, !0);
            V(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            V(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            V(a, k * b + d, (l - h) * c + e, (k - h + .5 * g) * b + d, (l - g) * c + e, (k - h + .5 * g) * b + d, l * c + e);
            V(a, (k - h + .5 * g) * b + d, (l + g) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            X(a);
            g = .2 * Fd;
            h = .2;
            l = k = .5;
            T(a, (k - h) * b + d, l * c + e, !0);
            V(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            V(a, (k + g) * b + d, (l - h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            V(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            V(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            g = .4 * Fd;
            h = .4;
            k = .8;
            l = .5;
            T(a, k * b + d, (l - h) * c + e, !0);
            V(a, (k + g) * b + d, (l - h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            V(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            V(a, k * b + d, (l + h) * c + e, (k + h - .5 * g) * b + d, (l + g) * c + e, (k + h - .5 * g) * b + d, l * c + e);
            V(a, (k + h - .5 * g) * b + d, (l - g) * c + e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            X(a);
            g = .8 * Fd;
            h = .8;
            k = 1;
            l = .5;
            T(a, k * b + d, (l - h) * c + e, !0);
            V(a, (k + g) * b + d, (l - h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            V(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            V(a, k * b + d, (l + h) * c + e, (k + h - .5 * g) * b + d, (l + g) * c + e, (k + h - .5 * g) * b + d, l * c + e);
            V(a, (k + h - .5 * g) * b + d, (l - g) * c + e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        Email: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            X(a);
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 1 * c);
            a.lineTo(.45 * b, .54 * c);
            a.moveTo(1 * b, 1 * c);
            a.lineTo(.55 * b, .54 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        Ethernet: function(a, b, c) {
            a = D.v();
            T(a, .35 * b, 0, !0);
            a.lineTo(.65 * b, 0);
            a.lineTo(.65 * b, .4 * c);
            a.lineTo(.35 * b, .4 * c);
            a.lineTo(.35 * b, 0);
            X(a);
            T(a, .1 * b, 1 * c, !0, !0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.4 * b, .6 * c);
            a.lineTo(.1 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            X(a);
            T(a, .6 * b, 1 * c, !0, !0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.9 * b, .6 * c);
            a.lineTo(.6 * b, .6 * c);
            a.lineTo(.6 * b, 1 * c);
            X(a);
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.75 * b, .5 * c);
            a.lineTo(.75 * b, .6 * c);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.25 * b, .6 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        Power: function(a, b, c) {
            a = D.v();
            var d = .4 * Fd,
            e = .4,
            g = D.P(),
            h = D.P(),
            k = D.P(),
            l = D.P();
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, g, g, h, k, l);
            var m = D.Fb(h.x, h.y);
            T(a, h.x * b, h.y * c, !0);
            V(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            V(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            Ge(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, g, g);
            V(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            d = .3 * Fd;
            e = .3;
            Ge(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, g, g);
            a.lineTo(h.x * b, h.y * c);
            V(a, l.x * b, l.y * c, k.x * b, k.y * c, (.5 - e) * b, .5 * c);
            V(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            V(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            Ge(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, g, g, h, k, l);
            V(a, l.x * b, l.y * c, k.x * b, k.y * c, h.x * b, h.y * c);
            X(a);
            T(a, .45 * b, 0, !0);
            a.lineTo(.45 * b, .5 * c);
            a.lineTo(.55 * b, .5 * c);
            a.lineTo(.55 * b, 0);
            X(a);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            b = a.q;
            b.C = new R(.25, .55);
            b.D = new R(.75, .8);
            D.u(a);
            return b
        },
        Fallout: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 0 * b, .5 * c, !0);
            V(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            V(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b, .5 * c);
            var e = d = 0;
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .4;
            e = 0;
            X(a);
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .2;
            e = -.3;
            X(a);
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            X(a);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        },
        IrritationHazard: function(a, b, c) {
            a = D.v();
            T(a, .2 * b, 0 * c, !0);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(.8 * b, 0 * c);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(.7 * b, .5 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0 * b, .8 * c);
            a.lineTo(.3 * b, .5 * c);
            a.lineTo(0 * b, .2 * c);
            X(a);
            b = a.q;
            b.C = new R(.3, .3);
            b.D = new R(.7, .7);
            D.u(a);
            return b
        },
        ElectricalHazard: function(a, b, c) {
            a = D.v();
            T(a, .37 * b, 0 * c, !0);
            a.lineTo(.5 * b, .11 * c);
            a.lineTo(.77 * b, .04 * c);
            a.lineTo(.33 * b, .49 * c);
            a.lineTo(1 * b, .37 * c);
            a.lineTo(.63 * b, .86 * c);
            a.lineTo(.77 * b, .91 * c);
            a.lineTo(.34 * b, 1 * c);
            a.lineTo(.34 * b, .78 * c);
            a.lineTo(.44 * b, .8 * c);
            a.lineTo(.65 * b, .56 * c);
            a.lineTo(0 * b, .68 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        FireHazard: function(a, b, c) {
            a = D.v();
            T(a, .1 * b, 1 * c, !0);
            V(a, -.25 * b, .63 * c, .45 * b, .44 * c, .29 * b, 0 * c);
            V(a, .48 * b, .17 * c, .54 * b, .35 * c, .51 * b, .42 * c);
            V(a, .59 * b, .29 * c, .58 * b, .28 * c, .59 * b, .18 * c);
            V(a, .8 * b, .34 * c, .88 * b, .43 * c, .75 * b, .6 * c);
            V(a, .87 * b, .48 * c, .88 * b, .43 * c, .88 * b, .31 * c);
            V(a, 1.17 * b, .76 * c, .82 * b, .8 * c, .9 * b, 1 * c);
            X(a);
            b = a.q;
            b.C = new R(.05, .645);
            b.D = new R(.884, .908);
            D.u(a);
            return b
        },
        BpmnActivityLoop: function(a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, .65 * b, 1 * c, !1);
            V(a, (1 - d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            V(a, 1 * b, (.5 - d + 0) * c, (.5 + d + 0) * b, 0 * c, .5 * b, 0 * c);
            V(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            V(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .35 * b, .98 * c);
            a.moveTo(.25 * b, .8 * c);
            a.lineTo(.35 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnActivityParallel: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnActivitySequential: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(0, 1 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnActivityAdHoc: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, 1 * b, 1 * c, !1);
            T(a, 0, .5 * c, !1);
            V(a, .2 * b, .35 * c, .3 * b, .35 * c, .5 * b, .5 * c);
            V(a, .7 * b, .65 * c, .8 * b, .65 * c, 1 * b, .5 * c);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnActivityCompensation: function(a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnTaskMessage: function(a, b, c) {
            a = D.v();
            T(a, 0, .2 * c, !0);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(0, .8 * c);
            a.lineTo(0, .8 * c);
            X(a);
            T(a, 0, .2 * c, !1);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, .2 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnTaskScript: function(a, b, c) {
            a = D.v();
            T(a, .7 * b, 1 * c, !0);
            a.lineTo(.3 * b, 1 * c);
            V(a, .6 * b, .5 * c, 0, .5 * c, .3 * b, 0);
            a.lineTo(.7 * b, 0);
            V(a, .4 * b, .5 * c, 1 * b, .5 * c, .7 * b, 1 * c);
            X(a);
            T(a, .45 * b, .73 * c, !1);
            a.lineTo(.7 * b, .73 * c);
            a.moveTo(.38 * b, .5 * c);
            a.lineTo(.63 * b, .5 * c);
            a.moveTo(.31 * b, .27 * c);
            a.lineTo(.56 * b, .27 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnTaskUser: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, .335 * b, (1 - .555) * c, !0);
            a.lineTo(.335 * b, .595 * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            V(a, .88 * b, .46 * c, .98 * b, .54 * c, 1 * b, .68 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .68 * c);
            V(a, .02 * b, .54 * c, .12 * b, .46 * c, .335 * b, (1 - .555) * c);
            a.lineTo(.365 * b, .405 * c);
            var d = .5 - .285,
            e = Math.PI / 4,
            g = 4 * (1 - Math.cos(e)) / (3 * Math.sin(e)),
            e = g * d,
            g = g * d;
            V(a, (.5 - (e + d) / 2) * b, (d + (d + g) / 2) * c, (.5 - d) * b, (d + g) * c, (.5 - d) * b, d * c);
            V(a, (.5 - d) * b, (d - g) * c, (.5 - e) * b, (d - d) * c, .5 * b, (d - d) * c);
            V(a, (.5 + e) * b, (d - d) * c, (.5 + d) * b, (d - g) * c, (.5 + d) * b, d * c);
            V(a, (.5 + d) * b, (d + g) * c, (.5 + (e + d) / 2) * b, (d + (d + g) / 2) * c, .635 * b, .405 * c);
            a.lineTo(.635 * b, .405 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.335 * b, .595 * c);
            T(a, .2 * b, 1 * c, !1);
            a.lineTo(.2 * b, .8 * c);
            T(a, .8 * b, 1 * c, !1);
            a.lineTo(.8 * b, .8 * c);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnEventConditional: function(a, b, c) {
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            X(a);
            T(a, .2 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.moveTo(.2 * b, .4 * c);
            a.lineTo(.8 * b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.2 * b, .8 * c);
            a.lineTo(.8 * b, .8 * c);
            a.ib(!1);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnEventError: function(a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(.33 * b, 0);
            a.lineTo(.66 * b, .5 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.66 * b, 1 * c);
            a.lineTo(.33 * b, .5 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnEventEscalation: function(a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, 1 * b, 1 * c, !1);
            T(a, .1 * b, 1 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            X(a);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnEventTimer: function(a, b, c) {
            a = D.v();
            var d = .5 * Fd;
            T(a, 1 * b, .5 * c, !0);
            V(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            V(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            V(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            V(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .15 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, .85 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(.15 * b, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(.85 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.58 * b, .1 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.78 * b, .54 * c);
            a.ib(!1);
            b = a.q;
            b.je = Uj;
            D.u(a);
            return b
        }
    },
    br;
    for (br in mq) mq[br.toLowerCase()] = br;
    var tq = {
        "": "",
        Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
        Backward: "F1 m 8,0 l -2,4 2,4 -8,-4 z",
        Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
        BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
        Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
        BackwardBoomerang: "F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",
        SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
        BackwardV: "m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",
        OpenTriangle: "m 0,0 l 8,4 -8,4",
        BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
        OpenTriangleLine: "m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
        BackwardOpenTriangleLine: "m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
        OpenTriangleTop: "m 0,0 l 8,4 m 0,4",
        BackwardOpenTriangleTop: "m 8,0 l -8,4 m 0,4",
        OpenTriangleBottom: "m 0,8 l 8,-4",
        BackwardOpenTriangleBottom: "m 0,4 l 8,4",
        HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 z m 0,8",
        BackwardHalfTriangleTop: "F1 m 8,0 l 0,4 -8,0 z m 0,8",
        HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 z",
        BackwardHalfTriangleBottom: "F1 m 8,4 l 0,4 -8,-4 z",
        ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
        BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
        Feather: "m 0,0 l 3,4 -3,4",
        BackwardFeather: "m 3,0 l -3,4 3,4",
        DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardDoubleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardTripleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        ForwardSlash: "m 0,8 l 5,-8",
        BackSlash: "m 0,0 l 5,8",
        DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
        DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
        TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
        TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
        Fork: "m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",
        LineFork: "m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardLineFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",
        CircleFork: "F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
        CircleLineFork: "F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
        Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
        Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
        StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
        Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
        Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
        StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
        NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
        X: "m 0,0 l 8,8 m 0,-8 l -8,8",
        TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
        DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
        BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
        ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
        RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
        SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
        AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
        BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
        TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
        CircleEndedArrow: "F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",
        DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
        EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
        FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
        Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
        HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
        HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
        OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
        PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
        LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        CircleLine: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
        DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
        PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
        OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
        OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
        Line: "m 0,0 l 0,8",
        DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
        TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
        PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"
    };
    function qq(a) {
        var b = re[a];
        if (void 0 === b) {
            var c = a.toLowerCase();
            if ("none" === c) return "None";
            b = re[c];
            if (void 0 === b) {
                var d = null,
                e;
                for (e in tq) if (e.toLowerCase() === c) {
                    d = e;
                    break
                }
                if (null !== d) return a = yf(tq[d], !1),
                re[d] = a,
                c !== d && (re[c] = d),
                d
            }
        }
        return "string" === typeof b ? b: b instanceof bf ? a: null
    }
    function F(a) {
        x.call(this, a);
        this.S = 2408959;
        this.El = this.Ni = "";
        this.et = this.bt = this.nt = this.ps = null;
        this.pt = "";
        this.mh = this.cs = this.ot = this.rn = null;
        this.dt = "";
        this.Gp = null;
        this.ct = me;
        this.ft = "";
        this.Ip = null;
        this.Sd = "";
        this.kw = this.rr = this.ql = null;
        this.hj = (new O(NaN, NaN)).freeze();
        this.us = "";
        this.Hl = null;
        this.vs = cc;
        this.Ds = Xd;
        this.ws = Yd;
        this.Lr = null;
        this.qs = cr;
        this.tn = Wd;
        this.sn = "gray";
        this.Lg = 4;
        this.uD = -1;
        this.Ot = NaN;
        this.qH = new B;
        this.Jl = null;
        this.tk = NaN
    }
    D.Sa(F, x);
    D.ja("Part", F);
    F.prototype.cloneProtected = function(a) {
        x.prototype.cloneProtected.call(this, a);
        a.S = this.S & -4097 | 49152;
        a.Ni = this.Ni;
        a.El = this.El;
        a.ps = this.ps;
        a.nt = this.nt;
        a.bt = this.bt;
        a.et = this.et;
        a.pt = this.pt;
        a.ot = this.ot;
        a.cs = this.cs;
        a.mh = null;
        a.dt = this.dt;
        a.ct = this.ct.V();
        a.ft = this.ft;
        a.Sd = this.Sd;
        a.rr = this.rr;
        a.hj.assign(this.hj);
        a.us = this.us;
        a.vs = this.vs.V();
        a.Ds = this.Ds.V();
        a.ws = this.ws.V();
        a.Lr = this.Lr;
        a.qs = this.qs;
        a.tn = this.tn.V();
        a.sn = this.sn;
        a.Lg = this.Lg;
        a.Ot = this.Ot
    };
    F.prototype.Bi = function(a) {
        x.prototype.Bi.call(this, a);
        a.rm();
        a.rn = null;
        a.Gp = null;
        a.Ip = null;
        a.Hl = null;
        a.Jl = null
    };
    F.prototype.toString = function() {
        var a = D.qf(Object.getPrototypeOf(this)) + "#" + D.Fd(this);
        null !== this.data && (a += "(" + ja(this.data) + ")");
        return a
    };
    F.LayoutNone = 0;
    var Qm;
    F.LayoutAdded = Qm = 1;
    var Zm;
    F.LayoutRemoved = Zm = 2;
    F.LayoutShown = 4;
    F.LayoutHidden = 8;
    F.LayoutNodeSized = 16;
    var Fn;
    F.LayoutGroupLayout = Fn = 32;
    F.LayoutNodeReplaced = 64;
    var cr;
    F.LayoutStandard = cr = Qm | Zm | 28 | Fn | 64;
    F.LayoutAll = 16777215;
    F.prototype.po = function(a, b, c, d, e, g, h) {
        var k = this.g;
        null !== k && (a === mg && "elements" === b ? e instanceof x ? Rm(e,
        function(a) {
            Tm(k, a);
            Sm(k, a)
        }) : e instanceof Cl && rn(k, e) : a === ng && "elements" === b && (e instanceof x ? Rm(e,
        function(a) {
            Xm(k, a);
            Wm(k, a)
        }) : e instanceof Cl && sn(k, e)), k.hd(a, b, c, d, e, g, h))
    };
    F.prototype.updateTargetBindings = F.prototype.Nb = function(a) {
        x.prototype.Nb.call(this, a);
        if (null !== this.data) {
            a = this.xa.o;
            for (var b = a.length,
            c = 0; c < b; c++) {
                var d = a[c];
                d instanceof x && Rm(d,
                function(a) {
                    null !== a.data && a.Nb()
                })
            }
        }
    };
    F.prototype.updateRelationshipsFromData = function() {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                c instanceof Y && (a = c.Sn(a), b = b.EI(a), null === b || b instanceof I) && (this.Pa = b)
            }
        }
    };
    D.w(F, {
        jx: "adornments"
    },
    function() {
        return null === this.mh ? Ka: this.mh.YF
    });
    F.prototype.findAdornment = F.prototype.nq = function(a) {
        v && D.h(a, "string", F, "findAdornment:category");
        var b = this.mh;
        return null === b ? null: b.oa(a)
    };
    F.prototype.addAdornment = F.prototype.Ul = function(a, b) {
        if (null !== b) {
            v && (D.h(a, "string", F, "addAdornment:category"), D.l(b, da, F, "addAdornment:ad"));
            var c = null,
            d = this.mh;
            null !== d && (c = d.oa(a));
            if (c !== b) {
                if (null !== c) {
                    var e = c.g;
                    null !== e && e.remove(c)
                }
                null === d && (this.mh = d = new ma("string", da));
                b.Ni !== a && (b.Dd = a);
                d.add(a, b);
                c = this.g;
                null !== c && (c.add(b), b.data = this.data)
            }
        }
    };
    F.prototype.removeAdornment = F.prototype.Tj = function(a) {
        v && D.h(a, "string", F, "removeAdornment:category");
        var b = this.mh;
        if (null !== b) {
            var c = b.oa(a);
            if (null !== c) {
                var d = c.g;
                null !== d && d.remove(c)
            }
            b.remove(a);
            0 === b.count && (this.mh = null)
        }
    };
    F.prototype.clearAdornments = F.prototype.Zt = function() {
        var a = this.mh;
        if (null !== a) {
            for (var b = D.tb(), a = a.j; a.next();) b.push(a.key);
            for (var a = b.length,
            c = 0; c < a; c++) this.Tj(b[c]);
            D.Aa(b)
        }
    };
    F.prototype.updateAdornments = function() {
        var a = this.g;
        if (null !== a) {
            a: {
                if (this.hb && this.MG) {
                    var b = this.ro;
                    if (! (null !== b && this.$.F() && this.isVisible() && b.Nj() && b.$.F())) break a;
                    var c = this.nq("Selection");
                    if (null === c) {
                        c = this.eK;
                        null === c && (c = this instanceof J ? a.vJ: this instanceof I ? a.TI: a.MJ);
                        if (! (c instanceof da)) break a;
                        Kh(c);
                        c = c.copy();
                        null !== c && (c.zb = b)
                    }
                    if (null !== c) {
                        var d = c.placeholder;
                        if (null !== d) {
                            var e = b.Fj(),
                            g = 0;
                            b instanceof z && (g = b.jb);
                            var h = D.Cm();
                            h.m((b.Ga.width + g) * e, (b.Ga.height + g) * e);
                            d.Ea = h;
                            D.Rk(h)
                        }
                        c.angle = b.Rn();
                        c.type !== kj && (d = D.P(), c.location = b.eb(cc, d), D.A(d));
                        this.Ul("Selection", c);
                        break a
                    }
                }
                this.Tj("Selection")
            }
            dr(this, a);
            for (a = this.jx; a.next();) b = a.value,
            b.Nb(),
            b.K()
        }
    };
    function dr(a, b) {
        b.kb.lf.each(function(b) {
            b.isEnabled && b.updateAdornments(a)
        });
        b.kb.updateAdornments(a)
    }
    D.w(F, {
        layer: "layer"
    },
    function() {
        return this.kw
    });
    D.w(F, {
        g: "diagram"
    },
    function() {
        var a = this.kw;
        return null !== a ? a.g: null
    });
    D.defineProperty(F, {
        Jf: "layerName"
    },
    function() {
        return this.El
    },
    function(a) {
        var b = this.El;
        if (b !== a) {
            D.h(a, "string", F, "layerName");
            var c = this.g;
            if (null === c || null !== c.jm(a) && !c.br) if (this.El = a, null !== c && c.yc(), this.i("layerName", b, a), b = this.layer, null !== b && b.name !== a && (c = b.g, null !== c && (a = c.jm(a), null !== a && a !== b))) {
                var d = b.rf( - 1, this, !0);
                0 <= d && c.hd(ng, "parts", b, this, null, d, !0);
                b.visible !== a.visible && this.Hd(a.visible);
                d = a.uq(99999999, this, !0);
                0 <= d && c.hd(mg, "parts", a, null, this, !0, d);
                d = this.by;
                if (null !== d) {
                    var e = c.ab;
                    c.ab = !0;
                    d(this, b, a);
                    c.ab = e
                }
            }
        }
    });
    D.defineProperty(F, {
        by: "layerChanged"
    },
    function() {
        return this.ps
    },
    function(a) {
        var b = this.ps;
        b !== a && (null !== a && D.h(a, "function", F, "layerChanged"), this.ps = a, this.i("layerChanged", b, a))
    });
    D.defineProperty(F, {
        Bo: "zOrder"
    },
    function() {
        return this.Ot
    },
    function(a) {
        var b = this.Ot;
        if (b !== a) {
            D.h(a, "number", F, "zOrder");
            this.Ot = a;
            var c = this.layer;
            null !== c && tl(c, -1, this);
            this.i("zOrder", b, a);
            a = this.g;
            null !== a && a.qa()
        }
    });
    F.prototype.invalidateAdornments = F.prototype.ne = function() {
        var a = this.g;
        null !== a && (Rl(a), 0 !== (this.S & 16384) !== !0 && (this.S |= 16384, a.Se()))
    };
    function pl(a) {
        0 !== (a.S & 16384) !== !1 && (a.updateAdornments(), a.S &= -16385)
    }
    function er(a) {
        if (!1 === Jm(a)) {
            var b = a.g;
            null !== b && (b.Cg.add(a), b.Se());
            fr(a, !0);
            a.$i()
        }
    }
    function gr(a) {
        a.S |= 2097152;
        if (!1 !== Jm(a)) {
            var b = a.position,
            c = a.location;
            c.F() && b.F() || hr(a, b, c);
            var c = a.ac,
            d = c.copy();
            c.Ya();
            c.x = b.x;
            c.y = b.y;
            c.freeze();
            a.my(d, c);
            fr(a, !1)
        }
    }
    D.w(F, {
        uf: "locationObject"
    },
    function() {
        if (null === this.Hl) {
            var a = this.iy;
            "" !== a ? (a = this.Ed(a), this.Hl = null !== a ? a: this) : this.Hl = this instanceof da ? this.type !== kj && null !== this.placeholder ? this.placeholder: this: this
        }
        return this.Hl.visible ? this.Hl: this
    });
    D.defineProperty(F, {
        GJ: "minLocation"
    },
    function() {
        return this.Ds
    },
    function(a) {
        var b = this.Ds;
        b.O(a) || (v && D.l(a, O, F, "minLocation"), this.Ds = a = a.V(), this.i("minLocation", b, a))
    });
    D.defineProperty(F, {
        AJ: "maxLocation"
    },
    function() {
        return this.ws
    },
    function(a) {
        var b = this.ws;
        b.O(a) || (v && D.l(a, O, F, "maxLocation"), this.ws = a = a.V(), this.i("maxLocation", b, a))
    });
    D.defineProperty(F, {
        iy: "locationObjectName"
    },
    function() {
        return this.us
    },
    function(a) {
        var b = this.us;
        b !== a && (v && D.h(a, "string", F, "locationObjectName"), this.us = a, this.Hl = null, Wo(this), this.i("locationObjectName", b, a))
    });
    D.defineProperty(F, {
        Kf: "locationSpot"
    },
    function() {
        return this.vs
    },
    function(a) {
        var b = this.vs;
        b.O(a) || (v && (D.l(a, R, F, "locationSpot"), a.fd() || D.k("Part.locationSpot must be a specific Spot value, not: " + a)), this.vs = a = a.V(), Wo(this), this.i("locationSpot", b, a))
    });
    F.prototype.move = function(a) {
        this.position = a
    };
    F.prototype.moveTo = F.prototype.moveTo = function(a, b) {
        var c = D.Fb(a, b);
        this.move(c);
        D.A(c)
    };
    F.prototype.isVisible = function() {
        if (!this.visible) return ! 1;
        var a = this.layer;
        if (null !== a && !a.visible) return ! 1;
        a = this.g;
        if (null !== a && (a = a.Xa, a.sf && (a = a.gn.oa(this), null !== a && a.vy))) return ! 0;
        a = this.Pa;
        return null === a || a.Je && a.isVisible() ? !0 : !1
    };
    F.prototype.Hd = function(a) {
        var b = this.g;
        a ? (this.N(4), this.ne(), null !== b && b.Cg.add(this)) : (this.N(8), this.Zt());
        this.rm();
        null !== b && (b.yc(), b.qa())
    };
    F.prototype.findObject = F.prototype.Ed = function(a) {
        if (this.name === a) return this;
        var b = this.Jl;
        null === b && (this.Jl = b = new la);
        if (void 0 !== b[a]) return b[a];
        for (var c = this.xa.o,
        d = c.length,
        e = 0; e < d; e++) {
            var g = c[e];
            if (g.name === a) return b[a] = g;
            if (g instanceof x) if (null === g.cj && null === g.Eg) {
                if (g = g.Ed(a), null !== g) return b[a] = g
            } else if (pn(g) && (g = g.xa.first(), null !== g && g.name === a)) return b[a] = g
        }
        return b[a] = null
    };
    function ir(a, b, c, d) {
        void 0 === d && (d = new O);
        c = c.Zd() ? gc: c;
        var e = b.Ga;
        d.m(e.width * c.x + c.offsetX, e.height * c.y + c.offsetY);
        if (null === b || b === a) return d;
        b.transform.vb(d);
        for (b = b.Q; null !== b && b !== a;) b.transform.vb(d),
        b = b.Q;
        a.gj.vb(d);
        d.offset( - a.Ad.x, -a.Ad.y);
        return d
    }
    F.prototype.ensureBounds = F.prototype.hf = function() {
        Ak(this, Infinity, Infinity);
        this.oc()
    };
    function sl(a, b) {
        var c = a.qH,
        d;
        isNaN(a.tk) && (a.tk = bq(a));
        d = a.tk;
        var e = 2 * d;
        if (!a.Wk) return c.m(b.x - 1 - d, b.y - 1 - d, b.width + 2 + e, b.height + 2 + e),
        c;
        d = b.x;
        var e = b.y,
        g = b.width,
        h = b.height,
        k = a.shadowBlur,
        l = a.iK,
        g = g + k,
        h = h + k;
        d -= k / 2;
        e -= k / 2;
        0 < l.x ? g += l.x: (d += l.x, g -= l.x);
        0 < l.y ? h += l.y: (e += l.y, h -= l.y);
        c.m(d - 1, e - 1, g + 2, h + 2);
        return c
    }
    F.prototype.oc = function() {
        this.$i();
        if (!1 === Im(this)) gr(this);
        else {
            var a = this.ac,
            b = D.Nf();
            b.assign(a);
            a.Ya();
            var c = ol(this);
            this.yj(0, 0, this.Ad.width, this.Ad.height);
            var d = this.position;
            hr(this, d, this.location);
            a.x = d.x;
            a.y = d.y;
            a.freeze();
            this.my(b, a);
            Ko(this, !1);
            b.O(a) ? this.Lf(c) : !this.oe() || Q(b.width, a.width) && Q(b.height, a.height) || 0 <= this.uD && this.N(16);
            D.Mb(b);
            fr(this, !1)
        }
    };
    F.prototype.my = function(a, b) {
        var c = this.g;
        if (null !== c) {
            var d = !1;
            if (!1 === c.mk && a.F()) {
                var e = c.cd,
                g = c.padding,
                h = e.x + g.left,
                k = e.y + g.top,
                l = e.width - 2 * g.right,
                e = e.height - 2 * g.bottom;
                a.x > h && a.y > k && a.right < l && a.bottom < e && b.x > h && b.y > k && b.right < l && b.bottom < e && (d = !0)
            }
            0 !== (this.S & 65536) !== !0 && a.O(b) || Um(this, d, c);
            c.qa();
            xb(a, b) || (this instanceof G && !c.ra.nb && this.fg(), this.rm())
        }
    };
    D.defineProperty(F, {
        location: "location"
    },
    function() {
        return this.hj
    },
    function(a) {
        v && D.l(a, O, F, "location");
        var b = a.x,
        c = a.y,
        d = this.hj,
        e = d.x,
        g = d.y; (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) || (a = a.V(), b = a, this instanceof J ? b = !1 : (this.hj = b, this.S |= 2097152, !1 === Im(this) && (er(this), c = this.qb, c.F() && (e = c.copy(), c.m(c.x + (b.x - d.x), c.y + (b.y - d.y)), jr(this, this.g, c, e), this.i("position", e, c))), b = !0), b && this.i("location", d, a))
    });
    f = F.prototype;
    f.FB = function(a, b) {
        if (this instanceof J || !a.F()) return ! 1;
        var c = this.g;
        if (null !== c && (jr(this, c, a, b), !0 === c.ra.nb)) return ! 0;
        this.qb = a;
        this.S &= -2097153;
        c = this.hj;
        if (c.F()) {
            var d = c.copy();
            c.m(c.x + (a.x - b.x), c.y + (a.y - b.y));
            this.i("location", d, c)
        } ! 1 === Jm(this) && !1 === Im(this) && (er(this), gr(this));
        return ! 0
    };
    function jr(a, b, c, d) {
        null === b || a instanceof da || (b = b.Xa, b.vc && cl(b, a, "position", d.copy(), c.copy(), !1))
    }
    f.Hy = function(a, b) {
        var c = this.hj,
        d = this.qb;
        Jm(this) || Im(this) ? c.m(NaN, NaN) : c.m(c.x + a - d.x, c.y + b - d.y);
        d.m(a, b);
        er(this)
    };
    f.GB = function() {
        this.S &= -2097153;
        er(this)
    };
    function hr(a, b, c) {
        var d = D.P(),
        e = a.Kf,
        g = a.uf;
        e.Zd() && D.k("determineOffset: Part's locationSpot must be real: " + e.toString());
        var h = g.Ga,
        k = g instanceof z ? g.jb: 0;
        d.av(0, 0, h.width + k, h.height + k, e);
        if (g !== a) for (d.offset( - k / 2, -k / 2), g.transform.vb(d), e = g.Q; null !== e && e !== a;) e.transform.vb(d),
        e = e.Q;
        a.gj.vb(d);
        d.offset( - a.Ad.x, -a.Ad.y);
        e = a.g;
        g = c.F();
        h = b.F();
        g && h ? 0 !== (a.S & 2097152) ? kr(a, b, c, e, d) : lr(a, b, c, e, d) : g ? kr(a, b, c, e, d) : h && lr(a, b, c, e, d);
        a.S |= 2097152;
        D.A(d);
        a.$i()
    }
    function kr(a, b, c, d, e) {
        var g = b.x,
        h = b.y;
        b.m(c.x - e.x, c.y - e.y);
        null !== d && (c = d.Xa, (e = c.nk) || !c.vc || a instanceof da || cl(c, a, "position", new O(g, h), b, !1), e || b.x === g && b.y === h || (c = d.Eb, d.Eb = !0, a.i("position", new O(g, h), b), d.Eb = c))
    }
    function lr(a, b, c, d, e) {
        var g = c.copy();
        c.m(b.x + e.x, b.y + e.y);
        c.O(g) || null === d || (b = d.Eb, d.Eb = !0, a.i("location", g, c), d.Eb = b)
    }
    function Um(a, b, c) {
        Mo(a, !1);
        a instanceof G && Mn(c, a);
        a.layer.Tc || b || c.yc();
        b = a.ac;
        var d = c.xb;
        d.F() ? (ol(a) ? Lb(b, d) || a.Lf(!1) : b.Wg(d) && a.Lf(!0), a.updateAdornments()) : c.zl = !0
    }
    f.um = function() {
        return ! 0
    };
    function ql(a, b) {
        var c = a.ac;
        if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y) && a.isVisible()) {
            var d = a.transform;
            null !== a.hc && (So(a, b, a.hc, !0, !0), b.fillRect(c.x, c.y, c.width, c.height));
            null === a.hc && null === a.Kb && (So(a, b, "rgba(0,0,0,0.4)", !0, !1), b.fillRect(c.x, c.y, c.width, c.height));
            null !== a.Kb && (d.xu() || b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c = a.Ga, So(a, b, a.Kb, !0, !1), b.fillRect(0, 0, c.width, c.height), d.xu() || (c = 1 / (d.m11 * d.m22 - d.m12 * d.m21), b.transform(d.m22 * c, -d.m12 * c, -d.m21 * c, d.m11 * c, c * (d.m21 * d.dy - d.m22 * d.dx), c * (d.m12 * d.dx - d.m11 * d.dy))))
        }
    }
    f.oe = function() {
        return ! 0
    };
    f.Jj = function() {
        return ! 0
    };
    D.defineProperty(F, {
        Dd: "category"
    },
    function() {
        return this.Ni
    },
    function(a) {
        var b = this.Ni;
        if (b !== a) {
            D.h(a, "string", F, "category");
            var c = this.g,
            d = this.data,
            e = null;
            if (null !== c && null !== d && !(this instanceof da)) {
                var g = c.ga.ra;
                g.isEnabled && !g.nb && (e = this.clone(), e.xa.Rc(this.xa))
            }
            this.Ni = a;
            this.i("category", b, a);
            null === c || null === d || this instanceof da ? (e = this.Zf, null !== e && (a = e.mh, null !== a && a.remove(b), e.Ul(this.Dd, this))) : (g = c.ga, g.ra.nb || (this instanceof J ? (g instanceof Y ? g.OG(d, a) : g instanceof wg && g.gK(d, a), c = zn(c, a), null !== c && (Kh(c), c = c.copy(), null !== c && mr(this, c, b, a))) : (null !== g && g.Ey(d, a), c = wn(c, d, a), null !== c && (Kh(c), c = c.copy(), null === c || c instanceof J || (c.location = this.location, mr(this, c, b, a)))), null !== e && (b = this.clone(), b.xa.Rc(this.xa), this.i("self", e, b))))
        }
    });
    D.defineProperty(F, {
        self: "self"
    },
    function() {
        return this
    },
    function(a) {
        mr(this, a, this.Dd, a.Dd)
    });
    var nr = !1;
    function mr(a, b, c, d) {
        b.constructor === a.constructor || nr || (nr = !0, D.trace('Should not change the class of the Part when changing category from "' + c + '" to "' + d + '"'), D.trace("  Old class: " + D.qf(a) + ", new class: " + D.qf(b) + ", part: " + a.toString()));
        a.Zt();
        var e = a.data;
        c = a.Jf;
        var g = a.hb,
        h = a.Xg,
        k = !0,
        l = !0,
        m = !1;
        if (a instanceof G) var n = a,
        k = n.Mj,
        l = n.rd,
        m = n.iv;
        b.Bi(a);
        b.cloneProtected(a);
        a.Ni = d;
        a.K();
        a.qa();
        b = a.g;
        d = !0;
        null !== b && (d = b.Eb, b.Eb = !0);
        a.Nd = e;
        null !== e && a.Nb();
        null !== b && (b.Eb = d);
        e = a.Jf;
        e !== c && (a.El = c, a.Jf = e);
        a instanceof G && (n = a, n.Mj = k, n.rd = l, n.iv = m, n.oe() && n.N(64));
        a.hb = g;
        a.Xg = h
    }
    F.prototype.canCopy = function() {
        if (!this.UE) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Kk) return ! 1;
        a = a.g;
        return null === a ? !0 : a.Kk ? !0 : !1
    };
    F.prototype.canDelete = function() {
        if (!this.YE) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Bn) return ! 1;
        a = a.g;
        return null === a ? !0 : a.Bn ? !0 : !1
    };
    F.prototype.canEdit = function() {
        if (!this.XG) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.nx) return ! 1;
        a = a.g;
        return null === a ? !0 : a.nx ? !0 : !1
    };
    F.prototype.canGroup = function() {
        if (!this.DF) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.kx) return ! 1;
        a = a.g;
        return null === a ? !0 : a.kx ? !0 : !1
    };
    F.prototype.canMove = function() {
        if (!this.gG) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Yl) return ! 1;
        a = a.g;
        return null === a ? !0 : a.Yl ? !0 : !1
    };
    F.prototype.canReshape = function() {
        if (!this.zG) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.lx) return ! 1;
        a = a.g;
        return null === a ? !0 : a.lx ? !0 : !1
    };
    F.prototype.canResize = function() {
        if (!this.AG) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Wt) return ! 1;
        a = a.g;
        return null === a ? !0 : a.Wt ? !0 : !1
    };
    F.prototype.canRotate = function() {
        if (!this.FG) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.mx) return ! 1;
        a = a.g;
        return null === a ? !0 : a.mx ? !0 : !1
    };
    F.prototype.canSelect = function() {
        if (!this.$k) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Bf) return ! 1;
        a = a.g;
        return null === a ? !0 : a.Bf ? !0 : !1
    };
    D.defineProperty(F, {
        UE: "copyable"
    },
    function() {
        return 0 !== (this.S & 1)
    },
    function(a) {
        var b = 0 !== (this.S & 1);
        b !== a && (v && D.h(a, "boolean", F, "copyable"), this.S ^= 1, this.i("copyable", b, a))
    });
    D.defineProperty(F, {
        YE: "deletable"
    },
    function() {
        return 0 !== (this.S & 2)
    },
    function(a) {
        var b = 0 !== (this.S & 2);
        b !== a && (v && D.h(a, "boolean", F, "deletable"), this.S ^= 2, this.i("deletable", b, a))
    });
    D.defineProperty(F, {
        XG: "textEditable"
    },
    function() {
        return 0 !== (this.S & 4)
    },
    function(a) {
        var b = 0 !== (this.S & 4);
        b !== a && (v && D.h(a, "boolean", F, "textEditable"), this.S ^= 4, this.i("textEditable", b, a), this.ne())
    });
    D.defineProperty(F, {
        DF: "groupable"
    },
    function() {
        return 0 !== (this.S & 8)
    },
    function(a) {
        var b = 0 !== (this.S & 8);
        b !== a && (v && D.h(a, "boolean", F, "groupable"), this.S ^= 8, this.i("groupable", b, a))
    });
    D.defineProperty(F, {
        gG: "movable"
    },
    function() {
        return 0 !== (this.S & 16)
    },
    function(a) {
        var b = 0 !== (this.S & 16);
        b !== a && (v && D.h(a, "boolean", F, "movable"), this.S ^= 16, this.i("movable", b, a))
    });
    D.defineProperty(F, {
        MG: "selectionAdorned"
    },
    function() {
        return 0 !== (this.S & 32)
    },
    function(a) {
        var b = 0 !== (this.S & 32);
        b !== a && (v && D.h(a, "boolean", F, "selectionAdorned"), this.S ^= 32, this.i("selectionAdorned", b, a), this.ne())
    });
    D.defineProperty(F, {
        Ux: "isInDocumentBounds"
    },
    function() {
        return 0 !== (this.S & 64)
    },
    function(a) {
        var b = 0 !== (this.S & 64);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isInDocumentBounds");
            this.S ^= 64;
            var c = this.g;
            null !== c && c.yc();
            this.i("isInDocumentBounds", b, a)
        }
    });
    D.defineProperty(F, {
        $A: "isLayoutPositioned"
    },
    function() {
        return 0 !== (this.S & 128)
    },
    function(a) {
        var b = 0 !== (this.S & 128);
        b !== a && (v && D.h(a, "boolean", F, "isLayoutPositioned"), this.S ^= 128, this.i("isLayoutPositioned", b, a), this.N(a ? 4 : 8))
    });
    D.defineProperty(F, {
        $k: "selectable"
    },
    function() {
        return 0 !== (this.S & 256)
    },
    function(a) {
        var b = 0 !== (this.S & 256);
        b !== a && (v && D.h(a, "boolean", F, "selectable"), this.S ^= 256, this.i("selectable", b, a), this.ne())
    });
    D.defineProperty(F, {
        zG: "reshapable"
    },
    function() {
        return 0 !== (this.S & 512)
    },
    function(a) {
        var b = 0 !== (this.S & 512);
        b !== a && (v && D.h(a, "boolean", F, "reshapable"), this.S ^= 512, this.i("reshapable", b, a), this.ne())
    });
    D.defineProperty(F, {
        AG: "resizable"
    },
    function() {
        return 0 !== (this.S & 1024)
    },
    function(a) {
        var b = 0 !== (this.S & 1024);
        b !== a && (v && D.h(a, "boolean", F, "resizable"), this.S ^= 1024, this.i("resizable", b, a), this.ne())
    });
    D.defineProperty(F, {
        FG: "rotatable"
    },
    function() {
        return 0 !== (this.S & 2048)
    },
    function(a) {
        var b = 0 !== (this.S & 2048);
        b !== a && (v && D.h(a, "boolean", F, "rotatable"), this.S ^= 2048, this.i("rotatable", b, a), this.ne())
    });
    D.defineProperty(F, {
        hb: "isSelected"
    },
    function() {
        return 0 !== (this.S & 4096)
    },
    function(a) {
        var b = 0 !== (this.S & 4096);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isSelected");
            var c = this.g;
            if (!a || this.canSelect() && !(null !== c && c.selection.count >= c.BJ)) {
                this.S ^= 4096;
                var d = !1;
                if (null !== c) {
                    d = c.Eb;
                    c.Eb = !0;
                    var e = c.selection;
                    e.Ya();
                    a ? e.add(this) : e.remove(this);
                    e.freeze()
                }
                this.i("isSelected", b, a);
                this.ne();
                a = this.fK;
                null !== a && a(this);
                null !== c && (c.Se(), c.Eb = d)
            }
        }
    });
    D.defineProperty(F, {
        Xg: "isHighlighted"
    },
    function() {
        return 0 !== (this.S & 524288)
    },
    function(a) {
        var b = 0 !== (this.S & 524288);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isHighlighted");
            this.S ^= 524288;
            var c = this.g;
            null !== c && (c = c.qm, c.Ya(), a ? c.add(this) : c.remove(this), c.freeze());
            this.i("isHighlighted", b, a);
            this.qa();
            a = this.WI;
            null !== a && a(this)
        }
    });
    D.defineProperty(F, {
        Wk: "isShadowed"
    },
    function() {
        return 0 !== (this.S & 8192)
    },
    function(a) {
        var b = 0 !== (this.S & 8192);
        b !== a && (v && D.h(a, "boolean", F, "isShadowed"), this.S ^= 8192, this.i("isShadowed", b, a), this.qa())
    });
    function Jm(a) {
        return 0 !== (a.S & 32768)
    }
    function fr(a, b) {
        a.S = b ? a.S | 32768 : a.S & -32769
    }
    function Mo(a, b) {
        a.S = b ? a.S | 65536 : a.S & -65537
    }
    function ol(a) {
        return 0 !== (a.S & 131072)
    }
    F.prototype.Lf = function(a) {
        this.S = a ? this.S | 131072 : this.S & -131073
    };
    function or(a, b) {
        a.S = b ? a.S | 1048576 : a.S & -1048577
    }
    D.defineProperty(F, {
        KF: "isAnimated"
    },
    function() {
        return 0 !== (this.S & 262144)
    },
    function(a) {
        var b = 0 !== (this.S & 262144);
        b !== a && (v && D.h(a, "boolean", F, "isAnimated"), this.S ^= 262144, this.i("isAnimated", b, a))
    });
    D.defineProperty(F, {
        WI: "highlightedChanged"
    },
    function() {
        return this.cs
    },
    function(a) {
        var b = this.cs;
        b !== a && (null !== a && D.h(a, "function", F, "highlightedChanged"), this.cs = a, this.i("highlightedChanged", b, a))
    });
    D.defineProperty(F, {
        Cy: "selectionObjectName"
    },
    function() {
        return this.pt
    },
    function(a) {
        var b = this.pt;
        b !== a && (v && D.h(a, "string", F, "selectionObjectName"), this.pt = a, this.rn = null, this.i("selectionObjectName", b, a))
    });
    D.defineProperty(F, {
        eK: "selectionAdornmentTemplate"
    },
    function() {
        return this.nt
    },
    function(a) {
        var b = this.nt;
        b !== a && (v && D.l(a, da, F, "selectionAdornmentTemplate"), this instanceof J && (a.type = kj), this.nt = a, this.i("selectionAdornmentTemplate", b, a))
    });
    D.w(F, {
        ro: "selectionObject"
    },
    function() {
        if (null === this.rn) {
            var a = this.Cy;
            null !== a && "" !== a ? (a = this.Ed(a), this.rn = null !== a ? a: this) : this instanceof J ? (a = this.path, this.rn = null !== a ? a: this) : this.rn = this
        }
        return this.rn
    });
    D.defineProperty(F, {
        fK: "selectionChanged"
    },
    function() {
        return this.ot
    },
    function(a) {
        var b = this.ot;
        b !== a && (null !== a && D.h(a, "function", F, "selectionChanged"), this.ot = a, this.i("selectionChanged", b, a))
    });
    D.defineProperty(F, {
        BG: "resizeAdornmentTemplate"
    },
    function() {
        return this.bt
    },
    function(a) {
        var b = this.bt;
        b !== a && (v && D.l(a, da, F, "resizeAdornmentTemplate"), this.bt = a, this.i("resizeAdornmentTemplate", b, a))
    });
    D.defineProperty(F, {
        DG: "resizeObjectName"
    },
    function() {
        return this.dt
    },
    function(a) {
        var b = this.dt;
        b !== a && (v && D.h(a, "string", F, "resizeObjectName"), this.dt = a, this.Gp = null, this.i("resizeObjectName", b, a))
    });
    D.w(F, {
        CG: "resizeObject"
    },
    function() {
        if (null === this.Gp) {
            var a = this.DG;
            null !== a && "" !== a ? (a = this.Ed(a), this.Gp = null !== a ? a: this) : this.Gp = this
        }
        return this.Gp
    });
    D.defineProperty(F, {
        XJ: "resizeCellSize"
    },
    function() {
        return this.ct
    },
    function(a) {
        var b = this.ct;
        b.O(a) || (v && D.l(a, Ca, F, "resizeCellSize"), this.ct = a = a.V(), this.i("resizeCellSize", b, a))
    });
    D.defineProperty(F, {
        ZJ: "rotateAdornmentTemplate"
    },
    function() {
        return this.et
    },
    function(a) {
        var b = this.et;
        b !== a && (v && D.l(a, da, F, "rotateAdornmentTemplate"), this.et = a, this.i("rotateAdornmentTemplate", b, a))
    });
    D.defineProperty(F, {
        $J: "rotateObjectName"
    },
    function() {
        return this.ft
    },
    function(a) {
        var b = this.ft;
        b !== a && (v && D.h(a, "string", F, "rotateObjectName"), this.ft = a, this.Ip = null, this.i("rotateObjectName", b, a))
    });
    D.w(F, {
        GG: "rotateObject"
    },
    function() {
        if (null === this.Ip) {
            var a = this.$J;
            null !== a && "" !== a ? (a = this.Ed(a), this.Ip = null !== a ? a: this) : this.Ip = this
        }
        return this.Ip
    });
    D.defineProperty(F, {
        text: "text"
    },
    function() {
        return this.Sd
    },
    function(a) {
        var b = this.Sd;
        b !== a && (v && D.h(a, "string", F, "text"), this.Sd = a, this.i("text", b, a))
    });
    D.defineProperty(F, {
        Pa: "containingGroup"
    },
    function() {
        return this.ql
    },
    function(a) {
        if (this.oe()) {
            var b = this.ql;
            if (b !== a) {
                v && null !== a && D.l(a, I, F, "containingGroup");
                null === a || this !== a && !a.Ei(this) || (this === a && D.k("Cannot make a Group a member of itself: " + this.toString()), D.k("Cannot make a Group indirectly contain itself: " + this.toString() + " already contains " + a.toString()));
                this.N(Zm);
                var c = this.g;
                null !== b ? pr(b, this) : this instanceof I && null !== c && c.Rl.remove(this);
                this.ql = a;
                null !== a ? qr(a, this) : this instanceof I && null !== c && c.Rl.add(this);
                this.N(Qm);
                if (null !== c) {
                    var d = this.data,
                    e = c.ga;
                    null !== d && e instanceof Y && e.DB(d, e.Cb(null !== a ? a.data: null))
                }
                d = this.QE;
                null !== d && (e = !0, null !== c && (e = c.ab, c.ab = !0), d(this, b, a), null !== c && (c.ab = e));
                if (this instanceof I) for (c = new L(F), Ih(c, this, !0, 0, !0), c = c.j; c.next();) if (d = c.value, d instanceof G) for (d = d.Gd; d.next();) un(d.value);
                if (this instanceof G) for (d = this.Gd; d.next();) un(d.value);
                this.i("containingGroup", b, a);
                null !== a && (b = a.layer, null !== b && tl(b, -1, a))
            }
        } else D.k("cannot set the Part.containingGroup of a Link or Adornment")
    });
    f = F.prototype;
    f.rm = function() {
        var a = this.Pa;
        null !== a && (a.K(), null !== a.Qb && a.Qb.K(), a.fg())
    };
    f.qa = function() {
        var a = this.g;
        null !== a && !Im(this) && !Jm(this) && this.isVisible() && this.ac.F() && a.qa(sl(this, this.ac))
    };
    f.K = function() {
        x.prototype.K.call(this);
        var a = this.g;
        null !== a && (a.Cg.add(this), this instanceof G && null !== this.zc && Wo(this.zc), a.Se(!0))
    };
    f.ru = function(a) {
        a || (a = this.ql, null !== a && qr(a, this))
    };
    f.su = function(a) {
        a || (a = this.ql, null !== a && pr(a, this))
    };
    f.Mn = function() {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            null !== b && (b = b.ga, null !== b && b.yy(a))
        }
    };
    D.defineProperty(F, {
        QE: "containingGroupChanged"
    },
    function() {
        return this.rr
    },
    function(a) {
        var b = this.rr;
        b !== a && (null !== a && D.h(a, "function", F, "containingGroupChanged"), this.rr = a, this.i("containingGroupChanged", b, a))
    });
    F.prototype.findSubGraphLevel = function() {
        return rr(this, this)
    };
    function rr(a, b) {
        var c = b.Pa;
        return null !== c ? 1 + rr(a, c) : b instanceof G && (c = b.zc, null !== c) ? rr(a, c) : 0
    }
    F.prototype.findTopLevelPart = function() {
        return sr(this, this)
    };
    function sr(a, b) {
        var c = b.Pa;
        return null !== c ? sr(a, c) : b instanceof G && (c = b.zc, null !== c) ? sr(a, c) : b
    }
    D.w(F, {
        zq: "isTopLevel"
    },
    function() {
        return null !== this.Pa || this instanceof G && this.tf ? !1 : !0
    });
    F.prototype.isMemberOf = F.prototype.Ei = function(a) {
        return a instanceof I ? tr(this, this, a) : !1
    };
    function tr(a, b, c) {
        if (b === c || null === c) return ! 1;
        var d = b.Pa;
        return null === d || d !== c && !tr(a, d, c) ? b instanceof G && (b = b.zc, null !== b) ? tr(a, b, c) : !1 : !0
    }
    F.prototype.findCommonContainingGroup = F.prototype.CI = function(a) {
        if (null === a) return null;
        v && D.l(a, F, F, "findCommonContainingGroup:other");
        if (this === a) return this.Pa;
        for (var b = this; null !== b;) b instanceof I && or(b, !0),
        b = b.Pa;
        for (var c = null,
        b = a; null !== b;) {
            if (0 !== (b.S & 1048576)) {
                c = b;
                break
            }
            b = b.Pa
        }
        for (b = this; null !== b;) b instanceof I && or(b, !1),
        b = b.Pa;
        return c
    };
    D.defineProperty(F, {
        qJ: "layoutConditions"
    },
    function() {
        return this.qs
    },
    function(a) {
        var b = this.qs;
        b !== a && (v && D.h(a, "number", F, "layoutConditions"), this.qs = a, this.i("layoutConditions", b, a))
    });
    F.prototype.canLayout = function() {
        if (!this.$A || !this.isVisible()) return ! 1;
        var a = this.layer;
        return null !== a && a.Tc || this instanceof G && this.tf ? !1 : !0
    };
    F.prototype.invalidateLayout = F.prototype.N = function(a) {
        void 0 === a && (a = 16777215);
        var b;
        this.$A && 0 !== (a & this.qJ) ? (b = this.layer, null !== b && b.Tc || this instanceof G && this.tf ? b = !1 : (b = this.g, b = null !== b && b.ra.nb ? !1 : !0)) : b = !1;
        if (b) if (b = this.ql, null !== b) {
            var c = b.Vb;
            null !== c ? c.N() : b.N(a)
        } else a = this.g,
        null !== a && (c = a.Vb, null !== c && c.N())
    };
    function Vm(a) {
        if (!a.isVisible()) return ! 1;
        a = a.layer;
        return null !== a && a.Tc ? !1 : !0
    }
    D.defineProperty(F, {
        cF: "dragComputation"
    },
    function() {
        return this.Lr
    },
    function(a) {
        var b = this.Lr;
        b !== a && (null !== a && D.h(a, "function", F, "dragComputation"), this.Lr = a, this.i("dragComputation", b, a))
    });
    D.defineProperty(F, {
        iK: "shadowOffset"
    },
    function() {
        return this.tn
    },
    function(a) {
        var b = this.tn;
        b.O(a) || (v && D.l(a, O, F, "shadowOffset"), this.tn = a = a.V(), this.qa(), this.i("shadowOffset", b, a))
    });
    D.defineProperty(F, {
        shadowColor: "shadowColor"
    },
    function() {
        return this.sn
    },
    function(a) {
        var b = this.sn;
        b !== a && (v && D.h(a, "string", F, "shadowColor"), this.sn = a, this.qa(), this.i("shadowColor", b, a))
    });
    D.defineProperty(F, {
        shadowBlur: "shadowBlur"
    },
    function() {
        return this.Lg
    },
    function(a) {
        var b = this.Lg;
        b !== a && (v && D.h(a, "number", F, "shadowBlur"), this.Lg = a, this.qa(), this.i("shadowBlur", b, a))
    });
    function da(a) {
        0 === arguments.length ? F.call(this, Xj) : F.call(this, a);
        this.S &= -257;
        this.El = "Adornment";
        this.Pc = null;
        this.FD = 0;
        this.vE = !1;
        this.Qb = this.ph = null
    }
    D.Sa(da, F);
    D.ja("Adornment", da);
    da.prototype.toString = function() {
        var a = this.Zf;
        return "Adornment(" + this.Dd + ")" + (null !== a ? a.toString() : "")
    };
    da.prototype.updateRelationshipsFromData = function() {};
    da.prototype.Gu = function(a) {
        var b = this.zb.Y,
        c = this.zb;
        if (b instanceof J && c instanceof z) {
            var d = b.path,
            c = d.Df;
            b.Gu(a);
            c = d.Df;
            a = this.xa.o;
            b = a.length;
            for (d = 0; d < b; d++) {
                var e = a[d];
                e.Gf && e instanceof z && (e.ob = c)
            }
        }
    };
    D.w(da, {
        placeholder: "placeholder"
    },
    function() {
        return this.Qb
    });
    D.defineProperty(da, {
        zb: "adornedObject"
    },
    function() {
        return this.Pc
    },
    function(a) {
        v && null !== a && D.l(a, P, F, "adornedObject:value");
        var b = this.Zf,
        c = null;
        null !== a && (c = a.Y);
        null === b || null !== a && b === c || b.Tj(this.Dd);
        this.Pc = a;
        null !== c && c.Ul(this.Dd, this)
    });
    D.w(da, {
        Zf: "adornedPart"
    },
    function() {
        var a = this.Pc;
        return null !== a ? a.Y: null
    });
    da.prototype.um = function() {
        var a = this.Pc;
        if (null === a) return ! 0;
        a = a.Y;
        return null === a || !Im(a)
    };
    da.prototype.oe = function() {
        return ! 1
    };
    D.w(da, {
        Pa: "containingGroup"
    },
    function() {
        return null
    });
    da.prototype.po = function(a, b, c, d, e, g, h) {
        if (a === mg && "elements" === b) if (e instanceof Rj) {
            var k = e;
            null === this.Qb ? this.Qb = k: this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")
        } else e instanceof x && (k = e.gu(function(a) {
            return a instanceof Rj
        }), k instanceof Rj && (null === this.Qb ? this.Qb = k: this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));
        else a === ng && "elements" === b && null !== this.Qb && (d === this.Qb ? this.Qb = null: d instanceof x && this.Qb.tm(d) && (this.Qb = null));
        F.prototype.po.call(this, a, b, c, d, e, g, h)
    };
    da.prototype.updateAdornments = function() {};
    da.prototype.Mn = function() {};
    function G(a) {
        F.call(this, a);
        this.Ba = 13;
        this.uc = new K(J);
        this.Kt = this.rp = this.Gl = this.ss = this.rs = null;
        this.kr = Vd;
        this.xe = this.Xh = null;
        this.Ys = ur;
        this.Hk = !1
    }
    D.Sa(G, F);
    D.ja("Node", G);
    G.prototype.cloneProtected = function(a) {
        F.prototype.cloneProtected.call(this, a);
        a.Ba = this.Ba;
        a.Ba = this.Ba & -17;
        a.rs = this.rs;
        a.ss = this.ss;
        a.Gl = this.Gl;
        a.Kt = this.Kt;
        a.kr = this.kr.V();
        a.Ys = this.Ys
    };
    G.prototype.Bi = function(a) {
        F.prototype.Bi.call(this, a);
        a.fg();
        a.Xh = this.Xh;
        a.xe = null
    };
    var vr;
    G.DirectionDefault = vr = D.s(G, "DirectionDefault", 0);
    G.DirectionAbsolute = D.s(G, "DirectionAbsolute", 1);
    var wr;
    G.DirectionRotatedNode = wr = D.s(G, "DirectionRotatedNode", 2);
    var Co;
    G.DirectionRotatedNodeOrthogonal = Co = D.s(G, "DirectionRotatedNodeOrthogonal", 3);
    G.SpreadingNone = D.s(G, "SpreadingNone", 10);
    var ur;
    G.SpreadingEvenly = ur = D.s(G, "SpreadingEvenly", 11);
    var xr;
    G.SpreadingPacked = xr = D.s(G, "SpreadingPacked", 12);
    function yr(a, b) {
        null !== b && (null === a.Xh && (a.Xh = new L(Dl)), a.Xh.add(b))
    }
    function zr(a, b, c, d) {
        if (null === b || null === a.Xh) return null;
        for (var e = a.Xh.j; e.next();) {
            var g = e.value;
            if (g.Eq === a && g.Lu === b && g.py === c && g.qy === d || g.Eq === b && g.Lu === a && g.py === d && g.qy === c) return g
        }
        return null
    }
    G.prototype.invalidateLinkBundle = function(a, b, c) {
        if (void 0 === b || null === b) b = "";
        if (void 0 === c || null === c) c = "";
        a = zr(this, a, b, c);
        null !== a && a.wq()
    };
    G.prototype.po = function(a, b, c, d, e, g, h) {
        a === mg && "elements" === b ? this.xe = null: a === ng && "elements" === b && (null === this.g ? this.xe = null: d instanceof P && dp(this, d,
        function(a, b) {
            ap(a, b, !0)
        }));
        F.prototype.po.call(this, a, b, c, d, e, g, h)
    };
    G.prototype.invalidateConnectedLinks = G.prototype.fg = function(a) {
        void 0 === a && (a = null);
        for (var b = this.Gd; b.next();) {
            var c = b.value;
            null !== a && a.contains(c) || (Ar(this, c.dd), Ar(this, c.Ld), c.fc())
        }
    };
    function No(a, b) {
        for (var c = a.Gd; c.next();) {
            var d = c.value;
            if (d.dd === b || d.Ld === b) Ar(a, d.dd),
            Ar(a, d.Ld),
            d.fc()
        }
    }
    function Ar(a, b) {
        if (null !== b) {
            var c = b.Xs;
            null !== c && c.wq();
            c = a.Pa;
            null === c || c.Je || Ar(c, c.km(""))
        }
    }
    G.prototype.um = function() {
        return ! 0
    };
    D.defineProperty(G, {
        QJ: "portSpreading"
    },
    function() {
        return this.Ys
    },
    function(a) {
        var b = this.Ys;
        b !== a && (v && D.Ca(a, G, G, "portSpreading"), this.Ys = a, this.i("portSpreading", b, a), a = this.g, null !== a && a.ra.nb || this.fg())
    });
    D.defineProperty(G, {
        qA: "avoidable"
    },
    function() {
        return 0 !== (this.Ba & 8)
    },
    function(a) {
        var b = 0 !== (this.Ba & 8);
        if (b !== a) {
            v && D.h(a, "boolean", G, "avoidable");
            this.Ba ^= 8;
            var c = this.g;
            null !== c && Mn(c, this);
            this.i("avoidable", b, a)
        }
    });
    D.defineProperty(G, {
        TH: "avoidableMargin"
    },
    function() {
        return this.kr
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : D.l(a, Hb, G, "avoidableMargin");
        var b = this.kr;
        if (!b.O(a)) {
            this.kr = a = a.V();
            var c = this.g;
            null !== c && Mn(c, this);
            this.i("avoidableMargin", b, a)
        }
    });
    G.prototype.getAvoidableRect = function(a) {
        a.set(this.$);
        a.ix(this.TH);
        return a
    };
    G.prototype.findVisibleNode = function() {
        for (var a = this; null !== a && !a.isVisible();) a = a.Pa;
        return a
    };
    G.prototype.isVisible = function() {
        if (!F.prototype.isVisible.call(this)) return ! 1;
        var a = !0,
        b = zl,
        c = this.g;
        if (null !== c) {
            a = c.Xa;
            if (a.sf && (a = a.gn.oa(this), null !== a && a.vy)) return ! 0;
            a = c.$d;
            b = c.VB
        }
        if (b === zl) {
            if (c = this.mm(), null !== c && !c.rd) return ! 1
        } else if (b === cn) {
            if (c = a ? this.nF() : this.oF(), 0 < c.count && c.all(function(a) {
                return ! a.rd
            })) return ! 1
        } else if (b === dn && (c = a ? this.nF() : this.oF(), 0 < c.count && c.any(function(a) {
            return ! a.rd
        }))) return ! 1;
        c = this.zc;
        return null !== c ? c.isVisible() : !0
    };
    G.prototype.Hd = function(a) {
        F.prototype.Hd.call(this, a);
        for (var b = this.Gd; b.next();) b.value.Hd(a)
    };
    D.w(G, {
        Gd: "linksConnected"
    },
    function() {
        return this.uc.j
    });
    G.prototype.findLinksConnected = G.prototype.lF = function(a) {
        void 0 === a && (a = null);
        if (null === a) return this.uc.j;
        v && D.h(a, "string", G, "findLinksConnected:pid");
        var b = new Na(this.uc),
        c = this;
        b.Fq = function(b) {
            return b.aa === c && b.cg === a || b.da === c && b.jh === a
        };
        return b
    };
    G.prototype.findLinksOutOf = G.prototype.Hx = function(a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findLinksOutOf:pid");
        var b = new Na(this.uc),
        c = this;
        b.Fq = function(b) {
            return b.aa !== c ? !1 : null === a ? !0 : b.cg === a
        };
        return b
    };
    G.prototype.findLinksInto = G.prototype.Vg = function(a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findLinksInto:pid");
        var b = new Na(this.uc),
        c = this;
        b.Fq = function(b) {
            return b.da !== c ? !1 : null === a ? !0 : b.jh === a
        };
        return b
    };
    G.prototype.findNodesConnected = G.prototype.mF = function(a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesConnected:pid");
        for (var b = null,
        c = null,
        d = this.uc.j; d.next();) {
            var e = d.value;
            if (e.aa === this) {
                if (null === a || e.cg === a) e = e.da,
                null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e
            } else e.da !== this || null !== a && e.jh !== a || (e = e.aa, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j: null !== c ? new La(c) : Ka
    };
    G.prototype.findNodesOutOf = G.prototype.oF = function(a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesOutOf:pid");
        for (var b = null,
        c = null,
        d = this.uc.j; d.next();) {
            var e = d.value;
            e.aa !== this || null !== a && e.cg !== a || (e = e.da, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j: null !== c ? new La(c) : Ka
    };
    G.prototype.findNodesInto = G.prototype.nF = function(a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesInto:pid");
        for (var b = null,
        c = null,
        d = this.uc.j; d.next();) {
            var e = d.value;
            e.da !== this || null !== a && e.jh !== a || (e = e.aa, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j: null !== c ? new La(c) : Ka
    };
    G.prototype.findLinksBetween = function(a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        v && (D.l(a, G, G, "findLinksBetween:othernode"), null !== b && D.h(b, "string", G, "findLinksBetween:pid"), null !== c && D.h(c, "string", G, "findLinksBetween:otherpid"));
        var d = new Na(this.uc),
        e = this;
        d.Fq = function(d) {
            return (d.aa !== e || d.da !== a || null !== b && d.cg !== b || null !== c && d.jh !== c) && (d.aa !== a || d.da !== e || null !== c && d.cg !== c || null !== b && d.jh !== b) ? !1 : !0
        };
        return d
    };
    G.prototype.findLinksTo = function(a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        v && (D.l(a, G, G, "findLinksTo:othernode"), null !== b && D.h(b, "string", G, "findLinksTo:pid"), null !== c && D.h(c, "string", G, "findLinksTo:otherpid"));
        var d = new Na(this.uc),
        e = this;
        d.Fq = function(d) {
            return d.aa !== e || d.da !== a || null !== b && d.cg !== b || null !== c && d.jh === c ? !1 : !0
        };
        return d
    };
    D.defineProperty(G, {
        sJ: "linkConnected"
    },
    function() {
        return this.rs
    },
    function(a) {
        var b = this.rs;
        b !== a && (null !== a && D.h(a, "function", G, "linkConnected"), this.rs = a, this.i("linkConnected", b, a))
    });
    D.defineProperty(G, {
        tJ: "linkDisconnected"
    },
    function() {
        return this.ss
    },
    function(a) {
        var b = this.ss;
        b !== a && (null !== a && D.h(a, "function", G, "linkDisconnected"), this.ss = a, this.i("linkDisconnected", b, a))
    });
    D.defineProperty(G, {
        gy: "linkValidation"
    },
    function() {
        return this.Gl
    },
    function(a) {
        var b = this.Gl;
        b !== a && (null !== a && D.h(a, "function", G, "linkValidation"), this.Gl = a, this.i("linkValidation", b, a))
    });
    function Br(a, b, c) {
        Ar(a, c);
        if (!a.uc.contains(b)) {
            a.uc.add(b);
            var d = a.sJ;
            if (null !== d) {
                var e = !0,
                g = a.g;
                null !== g && (e = g.ab, g.ab = !0);
                d(a, b, c);
                null !== g && (g.ab = e)
            }
            b.Uc && (c = b.aa, b = b.da, null !== c && null !== b && c !== b && (d = !0, g = a.g, null !== g && (d = g.$d), a = d ? b: c, e = d ? c: b, a.Hk || (a.Hk = e), !e.Mj || null !== g && g.ra.nb || (d ? c === e && (e.Mj = !1) : b === e && (e.Mj = !1))))
        }
    }
    function Cr(a, b, c) {
        Ar(a, c);
        if (a.uc.remove(b)) {
            var d = a.tJ,
            e = a.g;
            if (null !== d) {
                var g = !0;
                null !== e && (g = e.ab, e.ab = !0);
                d(a, b, c);
                null !== e && (e.ab = g)
            }
            b.Uc && (c = !0, null !== e && (c = e.$d), a = c ? b.da: b.aa, b = c ? b.aa: b.da, null !== a && (a.Hk = !1), null === b || b.Mj || (0 === b.uc.count ? (b.Hk = null, null !== e && e.ra.nb || (b.Mj = !0)) : Gn(b)))
        }
    }
    function Gn(a) {
        a.Hk = !1;
        if (0 !== a.uc.count) {
            var b = !0,
            c = a.g;
            if (null === c || !c.ra.nb) {
                null !== c && (b = c.$d);
                for (c = a.uc.j; c.next();) {
                    var d = c.value;
                    if (d.Uc) if (b) {
                        if (d.aa === a) {
                            a.Mj = !1;
                            return
                        }
                    } else if (d.da === a) {
                        a.Mj = !1;
                        return
                    }
                }
                a.Mj = !0
            }
        }
    }
    G.prototype.updateRelationshipsFromData = function() {
        F.prototype.updateRelationshipsFromData.call(this);
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                c instanceof wg && (a = c.Un(a), a = b.Qe(a), c = this.mm(), a !== c && (c = this.Pn(), null !== a ? null !== c ? b.$d ? c.aa = a: c.da = a: jn(b, a, this) : null !== c && Ym(b, c, !1)))
            }
        }
    };
    G.prototype.ru = function(a) {
        F.prototype.ru.call(this, a);
        a || (Gn(this), a = this.rp, null !== a && Dr(a, this))
    };
    G.prototype.su = function(a) {
        F.prototype.su.call(this, a);
        a || (a = this.rp, null !== a && null !== a.zf && (a.zf.remove(this), a.K()))
    };
    G.prototype.Mn = function() {
        if (0 < this.uc.count) {
            var a = this.g;
            if (null !== a) for (var b = a.wb.bF,
            c = this.uc.copy().j; c.next();) {
                var d = c.value;
                b ? a.remove(d) : (d.aa === this && (d.aa = null), d.da === this && (d.da = null))
            }
        }
        this.zc = null;
        F.prototype.Mn.call(this)
    };
    D.w(G, {
        tf: "isLinkLabel"
    },
    function() {
        return null !== this.rp
    });
    D.defineProperty(G, {
        zc: "labeledLink"
    },
    function() {
        return this.rp
    },
    function(a) {
        var b = this.rp;
        if (b !== a) {
            v && null !== a && D.l(a, J, G, "labeledLink");
            var c = this.g,
            d = this.data;
            if (null !== b && (null !== b.zf && (b.zf.remove(this), b.K()), null !== c && null !== d && !c.ra.nb)) {
                var e = b.data,
                g = c.ga;
                if (null !== e && g instanceof Y) {
                    var h = g.Cb(d);
                    void 0 !== h && g.VJ(e, h)
                }
            }
            this.rp = a;
            null !== a && (Dr(a, this), null === c || null === d || c.ra.nb || (e = a.data, g = c.ga, null !== e && g instanceof Y && (h = g.Cb(d), void 0 !== h && g.CE(e, h))));
            Wo(this);
            this.i("labeledLink", b, a)
        }
    });
    G.prototype.findPort = G.prototype.km = function(a) {
        v && D.h(a, "string", G, "findPort:pid");
        if (null === this.xe) {
            if ("" === a && !1 === this.Uk) return this;
            bp(this)
        }
        var b = this.xe.oa(a);
        return null !== b || "" !== a && (b = this.xe.oa(""), null !== b) ? b: this
    };
    D.w(G, {
        port: "port"
    },
    function() {
        return this.km("")
    });
    D.w(G, {
        ports: "ports"
    },
    function() {
        null === this.xe && bp(this);
        return this.xe.YF
    });
    function bp(a) {
        null === a.xe ? a.xe = new ma("string", P) : a.xe.clear();
        dp(a, a,
        function(a, c) {
            var d = c.sd;
            null !== d && a.xe.add(d, c)
        });
        0 === a.xe.count && a.xe.add("", a)
    }
    function ap(a, b, c) {
        var d = b.sd;
        if (null !== d && (null !== a.xe && a.xe.remove(d), b = a.g, null !== b && c)) {
            c = null;
            for (d = a.lF(d); d.next();) a = d.value,
            null === c && (c = D.tb()),
            c.push(a);
            if (null !== c) {
                for (d = 0; d < c.length; d++) a = c[d],
                b.remove(a);
                D.Aa(c)
            }
        }
    }
    G.prototype.isInTreeOf = function(a) {
        if (null === a || a === this) return ! 1;
        var b = !0,
        c = this.g;
        null !== c && (b = c.$d);
        c = this;
        if (b) for (; c !== a;) {
            for (var b = null,
            d = c.uc.j; d.next();) {
                var e = d.value;
                if (e.Uc && (b = e.aa, b !== c && b !== this)) break
            }
            if (b === this || null === b || b === c) return ! 1;
            c = b
        } else for (; c !== a;) {
            b = null;
            for (d = c.uc.j; d.next() && (e = d.value, !e.Uc || (b = e.da, b === c || b === this)););
            if (b === this || null === b || b === c) return ! 1;
            c = b
        }
        return ! 0
    };
    G.prototype.findTreeRoot = function() {
        var a = !0,
        b = this.g;
        null !== b && (a = b.$d);
        b = this;
        if (a) for (;;) {
            for (var a = null,
            c = b.uc.j; c.next();) {
                var d = c.value;
                if (d.Uc && (a = d.aa, a !== b && a !== this)) break
            }
            if (a === this) return this;
            if (null === a || a === b) return b;
            b = a
        } else for (;;) {
            a = null;
            for (c = b.uc.j; c.next() && (d = c.value, !d.Uc || (a = d.da, a === b || a === this)););
            if (a === this) return this;
            if (null === a || a === b) return b;
            b = a
        }
    };
    G.prototype.findCommonTreeParent = function(a) {
        if (null === a) return null;
        v && D.l(a, G, G, "findCommonTreeParent:other");
        if (this === a) return this;
        for (var b = this; null !== b;) or(b, !0),
        b = b.mm();
        for (var c = null,
        b = a; null !== b;) {
            if (0 !== (b.S & 1048576)) {
                c = b;
                break
            }
            b = b.mm()
        }
        for (b = this; null !== b;) or(b, !1),
        b = b.mm();
        return c
    };
    G.prototype.findTreeParentLink = G.prototype.Pn = function() {
        var a = !0,
        b = this.g;
        null !== b && (a = b.$d);
        b = this.uc.j;
        if (a) for (; b.next();) {
            if (a = b.value, a.Uc && a.aa !== this) return a
        } else for (; b.next();) if (a = b.value, a.Uc && a.da !== this) return a;
        return null
    };
    G.prototype.findTreeParentNode = G.prototype.mm = function() {
        var a = this.Hk;
        if (null === a) return null;
        if (a instanceof G) return a;
        var b = !0,
        a = this.g;
        null !== a && (b = a.$d);
        a = this.uc.j;
        if (b) for (; a.next();) {
            if (b = a.value, b.Uc && (b = b.aa, b !== this)) return this.Hk = b
        } else for (; a.next();) if (b = a.value, b.Uc && (b = b.da, b !== this)) return this.Hk = b;
        return this.Hk = null
    };
    G.prototype.findTreeParentChain = function() {
        function a(b, d) {
            if (null !== b) {
                d.add(b);
                var e = b.Pn();
                null !== e && (d.add(e), a(b.mm(), d))
            }
        }
        var b = new L(F);
        a(this, b);
        return b
    };
    G.prototype.findTreeLevel = function() {
        return Er(this, this)
    };
    function Er(a, b) {
        var c = b.mm();
        return null === c ? 0 : 1 + Er(a, c)
    }
    G.prototype.findTreeChildrenLinks = G.prototype.Jx = function() {
        var a = !0,
        b = this.g;
        null !== b && (a = b.$d);
        var b = new Na(this.uc),
        c = this;
        b.Fq = a ?
        function(a) {
            return a.Uc && a.aa === c ? !0 : !1
        }: function(a) {
            return a.Uc && a.da === c ? !0 : !1
        };
        return b
    };
    G.prototype.findTreeChildrenNodes = G.prototype.qF = function() {
        var a = !0,
        b = this.g;
        null !== b && (a = b.$d);
        var c = b = null,
        d = this.uc.j;
        if (a) for (; d.next();) a = d.value,
        a.Uc && a.aa === this && (a = a.da, null !== b ? b.add(a) : null !== c && c !== a ? (b = new K(G), b.add(c), b.add(a)) : c = a);
        else for (; d.next();) a = d.value,
        a.Uc && a.da === this && (a = a.aa, null !== b ? b.add(a) : null !== c && c !== a ? (b = new K(G), b.add(c), b.add(a)) : c = a);
        return null !== b ? b.j: null !== c ? new La(c) : Ka
    };
    G.prototype.findTreeParts = function(a) {
        void 0 === a && (a = Infinity);
        D.h(a, "number", G, "findTreeParts:level");
        var b = new L(F);
        Ih(b, this, !1, a, !0);
        return b
    };
    G.prototype.collapseTree = G.prototype.collapseTree = function(a) {
        void 0 === a && (a = 1);
        D.p(a, G, "collapseTree:level");
        1 > a && (a = 1);
        var b = this.g;
        if (null !== b && !b.Oh) {
            b.Oh = !0;
            var c = new L(G);
            c.add(this);
            Fr(this, c, b.$d, a, b.Xa, this, b.VB === zl);
            b.Oh = !1
        }
    };
    function Fr(a, b, c, d, e, g, h) {
        if (1 < d) for (var k = c ? a.Hx() : a.Vg(); k.next();) {
            var l = k.value;
            l.Uc && (l = l.PA(a), null === l || l === a || b.contains(l) || (b.add(l), Fr(l, b, c, d - 1, e, g, h)))
        } else Gr(a, b, c, e, g, h)
    }
    function Gr(a, b, c, d, e, g) {
        for (var h = e === a ? !0 : a.rd, k = c ? a.Hx() : a.Vg(); k.next();) {
            var l = k.value;
            l.Uc && (l = l.PA(a), null === l || l === a || b.contains(l) || (b.add(l), h && (g && ll(d, l, e), l.rm(), l.Hd(!1)), l.rd && (l.iv = l.rd, Gr(l, b, c, d, e, g))))
        }
        a.rd = !1
    }
    G.prototype.expandTree = G.prototype.expandTree = function(a) {
        void 0 === a && (a = 2);
        D.p(a, G, "expandTree:level");
        2 > a && (a = 2);
        var b = this.g;
        if (null !== b && !b.Oh) {
            b.Oh = !0;
            var c = new L(G);
            c.add(this);
            Hr(this, c, b.$d, a, b.Xa, this, b.VB === zl);
            b.Oh = !1
        }
    };
    function Hr(a, b, c, d, e, g, h) {
        for (var k = g === a ? !1 : a.rd, l = c ? a.Hx() : a.Vg(); l.next();) {
            var m = l.value;
            m.Uc && (k || m.lh || m.fc(), m = m.PA(a), null !== m && m !== a && !b.contains(m) && (b.add(m), k || (m.Hd(!0), m.rm(), h && kl(e, m, g)), 2 < d || m.iv)) && (m.iv = !1, Hr(m, b, c, d - 1, e, g, h))
        }
        a.rd = !0
    }
    D.defineProperty(G, {
        rd: "isTreeExpanded"
    },
    function() {
        return 0 !== (this.Ba & 1)
    },
    function(a) {
        var b = 0 !== (this.Ba & 1);
        if (b !== a) {
            v && D.h(a, "boolean", G, "isTreeExpanded");
            this.Ba ^= 1;
            var c = this.g;
            this.i("isTreeExpanded", b, a);
            b = this.vK;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.ab, c.ab = !0);
                b(this);
                null !== c && (c.ab = d)
            }
            null !== c && c.ra.nb ? this.Hd(a) : a ? this.expandTree() : this.collapseTree()
        }
    });
    D.defineProperty(G, {
        iv: "wasTreeExpanded"
    },
    function() {
        return 0 !== (this.Ba & 2)
    },
    function(a) {
        var b = 0 !== (this.Ba & 2);
        b !== a && (v && D.h(a, "boolean", G, "wasTreeExpanded"), this.Ba ^= 2, this.i("wasTreeExpanded", b, a))
    });
    D.defineProperty(G, {
        vK: "treeExpandedChanged"
    },
    function() {
        return this.Kt
    },
    function(a) {
        var b = this.Kt;
        b !== a && (null !== a && D.h(a, "function", G, "treeExpandedChanged"), this.Kt = a, this.i("treeExpandedChanged", b, a))
    });
    D.defineProperty(G, {
        Mj: "isTreeLeaf"
    },
    function() {
        return 0 !== (this.Ba & 4)
    },
    function(a) {
        var b = 0 !== (this.Ba & 4);
        b !== a && (v && D.h(a, "boolean", G, "isTreeLeaf"), this.Ba ^= 4, this.i("isTreeLeaf", b, a))
    });
    function J() {
        F.call(this, kj);
        this.dc = 8;
        this.yg = null;
        this.ci = "";
        this.Pg = this.Vr = null;
        this.xi = "";
        this.Jt = null;
        this.cr = nj;
        this.xr = 0;
        this.Ar = nj;
        this.Br = NaN;
        this.mn = Ir;
        this.wt = .5;
        this.zf = null;
        this.ad = (new K(O)).freeze();
        this.ph = this.NC = this.HC = this.Mi = this.Yi = this.ob = this.Iw = this.Jp = this.cf = null;
        this.dA = new O;
        this.Z = this.gE = this.fE = null
    }
    D.Sa(J, F);
    D.ja("Link", J);
    J.prototype.cloneProtected = function(a) {
        F.prototype.cloneProtected.call(this, a);
        a.dc = this.dc & -113;
        a.ci = this.ci;
        a.Vr = this.Vr;
        a.xi = this.xi;
        a.Jt = this.Jt;
        a.cr = this.cr;
        a.xr = this.xr;
        a.Ar = this.Ar;
        a.Br = this.Br;
        a.mn = this.mn;
        a.wt = this.wt;
        null !== this.Z && (a.Z = this.Z.copy())
    };
    J.prototype.Bi = function(a) {
        F.prototype.Bi.call(this, a);
        this.ci = a.ci;
        this.xi = a.xi;
        a.cf = null;
        a.fc();
        a.Mi = this.Mi
    };
    J.prototype.nc = function(a) {
        a.Ne === J ? 2 === (a.value & 2) ? this.Ay = a: a === Nj || a === mj || a === lj ? this.gf = a: a === Jr || a === Kr || a === Lr ? this.St = a: a !== Ir && a !== nj && D.k("Unknown Link enum value for a Link property: " + a) : F.prototype.nc.call(this, a)
    };
    var Ir;
    J.Normal = Ir = D.s(J, "Normal", 1);
    J.Orthogonal = D.s(J, "Orthogonal", 2);
    J.AvoidsNodes = D.s(J, "AvoidsNodes", 6);
    var Mr;
    J.AvoidsNodesStraight = Mr = D.s(J, "AvoidsNodesStraight", 7);
    var nj;
    J.None = nj = D.s(J, "None", 0);
    var Nj;
    J.Bezier = Nj = D.s(J, "Bezier", 9);
    var mj;
    J.JumpGap = mj = D.s(J, "JumpGap", 10);
    var lj;
    J.JumpOver = lj = D.s(J, "JumpOver", 11);
    var Jr;
    J.End = Jr = D.s(J, "End", 17);
    var Kr;
    J.Scale = Kr = D.s(J, "Scale", 18);
    var Lr;
    J.Stretch = Lr = D.s(J, "Stretch", 19);
    var sq;
    J.OrientAlong = sq = D.s(J, "OrientAlong", 21);
    var Tp;
    J.OrientPlus90 = Tp = D.s(J, "OrientPlus90", 22);
    var Vp;
    J.OrientMinus90 = Vp = D.s(J, "OrientMinus90", 23);
    var Lq;
    J.OrientOpposite = Lq = D.s(J, "OrientOpposite", 24);
    var Mq;
    J.OrientUpright = Mq = D.s(J, "OrientUpright", 25);
    var Up;
    J.OrientPlus90Upright = Up = D.s(J, "OrientPlus90Upright", 26);
    var Wp;
    J.OrientMinus90Upright = Wp = D.s(J, "OrientMinus90Upright", 27);
    var Xp;
    J.OrientUpright45 = Xp = D.s(J, "OrientUpright45", 28);
    f = J.prototype;
    f.Wd = function() {
        null === this.Z && (this.Z = new Bo)
    };
    f.um = function() {
        var a = this.aa;
        if (null !== a) {
            var b = a.findVisibleNode();
            null !== b && (a = b);
            if (Im(a) || Jm(a)) return ! 1
        }
        a = this.da;
        return null !== a && (b = a.findVisibleNode(), null !== b && (a = b), Im(a) || Jm(a)) ? !1 : !0
    };
    f.FB = function() {
        return ! 1
    };
    f.GB = function() {};
    f.oe = function() {
        return ! 1
    };
    J.prototype.computeAngle = function(a, b, c) {
        a = 0;
        switch (b) {
        default:
        case nj:
            a = 0;
            break;
        case sq:
            a = c;
            break;
        case Tp:
            a = c + 90;
            break;
        case Vp:
            a = c - 90;
            break;
        case Lq:
            a = c + 180;
            break;
        case Mq:
            a = Ye(c);
            90 < a && 270 > a && (a -= 180);
            break;
        case Up:
            a = Ye(c + 90);
            90 < a && 270 > a && (a -= 180);
            break;
        case Wp:
            a = Ye(c - 90);
            90 < a && 270 > a && (a -= 180);
            break;
        case Xp:
            a = Ye(c);
            if (45 < a && 135 > a || 225 < a && 315 > a) return 0;
            90 < a && 270 > a && (a -= 180)
        }
        return Ye(a)
    };
    D.defineProperty(J, {
        aa: "fromNode"
    },
    function() {
        return this.yg
    },
    function(a) {
        var b = this.yg;
        if (b !== a) {
            v && null !== a && D.l(a, G, J, "fromNode");
            var c = this.dd;
            null !== b && (this.Pg !== b && Cr(b, this, c), Nr(this), this.N(Zm));
            this.yg = a;
            null !== a && this.Hd(a.isVisible());
            this.Yi = null;
            this.fc();
            var d = this.g;
            if (null !== d) {
                var e = this.data,
                g = d.ga;
                if (null !== e) if (g instanceof Y) {
                    var h = null !== a ? a.data: null;
                    g.BB(e, g.Cb(h))
                } else g instanceof wg && (h = null !== a ? a.data: null, d.$d ? g.Hi(e, g.Cb(h)) : (null !== b && g.Hi(b.data, void 0), g.Hi(h, g.Cb(null !== this.Pg ? this.Pg.data: null))))
            }
            e = this.dd;
            g = this.tF;
            null !== g && (h = !0, null !== d && (h = d.ab, d.ab = !0), g(this, c, e), null !== d && (d.ab = h));
            null !== a && (this.Pg !== a && Br(a, this, e), Or(this), this.N(Qm));
            this.i("fromNode", b, a);
            un(this)
        }
    });
    D.defineProperty(J, {
        cg: "fromPortId"
    },
    function() {
        return this.ci
    },
    function(a) {
        var b = this.ci;
        if (b !== a) {
            v && D.h(a, "string", J, "fromPortId");
            var c = this.dd;
            null !== c && Ar(this.aa, c);
            Nr(this);
            this.ci = a;
            var d = this.dd;
            null !== d && Ar(this.aa, d);
            var e = this.g;
            if (null !== e) {
                var g = this.data,
                h = e.ga;
                null !== g && h instanceof Y && h.CB(g, a)
            }
            c !== d && (this.Yi = null, this.fc(), g = this.tF, null !== g && (h = !0, null !== e && (h = e.ab, e.ab = !0), g(this, c, d), null !== e && (e.ab = h)));
            Or(this);
            this.i("fromPortId", b, a)
        }
    });
    D.w(J, {
        dd: "fromPort"
    },
    function() {
        var a = this.yg;
        return null === a ? null: a.km(this.ci)
    });
    D.defineProperty(J, {
        tF: "fromPortChanged"
    },
    function() {
        return this.Vr
    },
    function(a) {
        var b = this.Vr;
        b !== a && (null !== a && D.h(a, "function", J, "fromPortChanged"), this.Vr = a, this.i("fromPortChanged", b, a))
    });
    D.defineProperty(J, {
        da: "toNode"
    },
    function() {
        return this.Pg
    },
    function(a) {
        var b = this.Pg;
        if (b !== a) {
            v && null !== a && D.l(a, G, J, "toNode");
            var c = this.Ld;
            null !== b && (this.yg !== b && Cr(b, this, c), Nr(this), this.N(Zm));
            this.Pg = a;
            null !== a && this.Hd(a.isVisible());
            this.Yi = null;
            this.fc();
            var d = this.g;
            if (null !== d) {
                var e = this.data,
                g = d.ga;
                if (null !== e) if (g instanceof Y) {
                    var h = null !== a ? a.data: null;
                    g.HB(e, g.Cb(h))
                } else g instanceof wg && (h = null !== a ? a.data: null, d.$d ? (null !== b && g.Hi(b.data, void 0), g.Hi(h, g.Cb(null !== this.yg ? this.yg.data: null))) : g.Hi(e, g.Cb(h)))
            }
            e = this.Ld;
            g = this.aH;
            null !== g && (h = !0, null !== d && (h = d.ab, d.ab = !0), g(this, c, e), null !== d && (d.ab = h));
            null !== a && (this.yg !== a && Br(a, this, e), Or(this), this.N(Qm));
            this.i("toNode", b, a);
            un(this)
        }
    });
    D.defineProperty(J, {
        jh: "toPortId"
    },
    function() {
        return this.xi
    },
    function(a) {
        var b = this.xi;
        if (b !== a) {
            v && D.h(a, "string", J, "toPortId");
            var c = this.Ld;
            null !== c && Ar(this.da, c);
            Nr(this);
            this.xi = a;
            var d = this.Ld;
            null !== d && Ar(this.da, d);
            var e = this.g;
            if (null !== e) {
                var g = this.data,
                h = e.ga;
                null !== g && h instanceof Y && h.IB(g, a)
            }
            c !== d && (this.Yi = null, this.fc(), g = this.aH, null !== g && (h = !0, null !== e && (h = e.ab, e.ab = !0), g(this, c, d), null !== e && (e.ab = h)));
            Or(this);
            this.i("toPortId", b, a)
        }
    });
    D.w(J, {
        Ld: "toPort"
    },
    function() {
        var a = this.Pg;
        return null === a ? null: a.km(this.xi)
    });
    D.defineProperty(J, {
        aH: "toPortChanged"
    },
    function() {
        return this.Jt
    },
    function(a) {
        var b = this.Jt;
        b !== a && (null !== a && D.h(a, "function", J, "toPortChanged"), this.Jt = a, this.i("toPortChanged", b, a))
    });
    D.defineProperty(J, {
        Gb: "fromSpot"
    },
    function() {
        return null !== this.Z ? this.Z.jk: Tc
    },
    function(a) {
        this.Wd();
        var b = this.Z.jk;
        b.O(a) || (v && D.l(a, R, J, "fromSpot"), a = a.V(), this.Z.jk = a, this.i("fromSpot", b, a), this.fc())
    });
    D.defineProperty(J, {
        nm: "fromEndSegmentLength"
    },
    function() {
        return null !== this.Z ? this.Z.hk: NaN
    },
    function(a) {
        this.Wd();
        var b = this.Z.hk;
        b !== a && (v && D.h(a, "number", J, "fromEndSegmentLength"), 0 > a && D.ua(a, ">= 0", J, "fromEndSegmentLength"), this.Z.hk = a, this.i("fromEndSegmentLength", b, a), this.fc())
    });
    D.defineProperty(J, {
        nu: "fromEndSegmentDirection"
    },
    function() {
        return null !== this.Z ? this.Z.gk: vr
    },
    function(a) {
        this.Wd();
        var b = this.Z.gk;
        b !== a && (D.Nn("Link.fromEndSegmentDirection", "2.0"), v && D.Ca(a, G, J, "fromEndSegmentDirection"), this.Z.gk = a, this.i("fromEndSegmentDirection", b, a), this.fc())
    });
    D.defineProperty(J, {
        ou: "fromShortLength"
    },
    function() {
        return null !== this.Z ? this.Z.ik: NaN
    },
    function(a) {
        this.Wd();
        var b = this.Z.ik;
        b !== a && (v && D.h(a, "number", J, "fromShortLength"), this.Z.ik = a, this.i("fromShortLength", b, a), this.fc())
    });
    D.defineProperty(J, {
        Hb: "toSpot"
    },
    function() {
        return null !== this.Z ? this.Z.Gk: Tc
    },
    function(a) {
        this.Wd();
        var b = this.Z.Gk;
        b.O(a) || (v && D.l(a, R, J, "toSpot"), a = a.V(), this.Z.Gk = a, this.i("toSpot", b, a), this.fc())
    });
    D.defineProperty(J, {
        Dm: "toEndSegmentLength"
    },
    function() {
        return null !== this.Z ? this.Z.Ek: NaN
    },
    function(a) {
        this.Wd();
        var b = this.Z.Ek;
        b !== a && (v && D.h(a, "number", J, "toEndSegmentLength"), 0 > a && D.ua(a, ">= 0", J, "toEndSegmentLength"), this.Z.Ek = a, this.i("toEndSegmentLength", b, a), this.fc())
    });
    D.defineProperty(J, {
        fv: "toEndSegmentDirection"
    },
    function() {
        return null !== this.Z ? this.Z.Dk: vr
    },
    function(a) {
        this.Wd();
        var b = this.Z.Dk;
        b !== a && (D.Nn("Link.toEndSegmentDirection", "2.0"), v && D.Ca(a, G, J, "toEndSegmentDirection"), this.Z.Dk = a, this.i("toEndSegmentDirection", b, a), this.fc())
    });
    D.defineProperty(J, {
        gv: "toShortLength"
    },
    function() {
        return null !== this.Z ? this.Z.Fk: NaN
    },
    function(a) {
        this.Wd();
        var b = this.Z.Fk;
        b !== a && (v && D.h(a, "number", J, "toShortLength"), this.Z.Fk = a, this.i("toShortLength", b, a), this.fc())
    });
    function un(a) {
        var b = a.aa,
        c = a.da;
        null !== b ? null !== c ? Pr(a, b.CI(c)) : Pr(a, null) : Pr(a, null)
    }
    function Pr(a, b) {
        var c = a.ql;
        if (c !== b) {
            null !== c && pr(c, a);
            a.ql = b;
            null !== b && qr(b, a);
            var d = a.QE;
            if (null !== d) {
                var e = !0,
                g = a.g;
                null !== g && (e = g.ab, g.ab = !0);
                d(a, c, b);
                null !== g && (g.ab = e)
            } ! a.lh || a.fE !== c && a.gE !== c || a.fc()
        }
    }
    J.prototype.rm = function() {
        var a = this.Pa;
        null !== a && this.aa !== a && this.da !== a && a.ux && F.prototype.rm.call(this)
    };
    J.prototype.getOtherNode = J.prototype.PA = function(a) {
        v && D.l(a, G, J, "getOtherNode:node");
        var b = this.aa;
        return a === b ? this.da: b
    };
    J.prototype.getOtherPort = function(a) {
        v && D.l(a, P, J, "getOtherPort:port");
        var b = this.dd;
        return a === b ? this.Ld: b
    };
    D.w(J, {
        IL: "isLabeledLink"
    },
    function() {
        return null === this.zf ? !1 : 0 < this.zf.count
    });
    D.w(J, {
        If: "labelNodes"
    },
    function() {
        return null === this.zf ? Ka: this.zf.j
    });
    function Dr(a, b) {
        null === a.zf && (a.zf = new L(G));
        a.zf.add(b);
        a.K()
    }
    J.prototype.ru = function(a) {
        F.prototype.ru.call(this, a);
        Qr(this) && oj(this, this.$);
        a || (a = this.yg, null !== a && Br(a, this, this.dd), a = this.Pg, null !== a && Br(a, this, this.Ld), Or(this))
    };
    J.prototype.su = function(a) {
        F.prototype.su.call(this, a);
        Qr(this) && oj(this, this.$);
        a || (a = this.yg, null !== a && Cr(a, this, this.dd), a = this.Pg, null !== a && Cr(a, this, this.Ld), Nr(this))
    };
    J.prototype.Mn = function() {
        this.lh = !0;
        if (null !== this.zf) {
            var a = this.g;
            if (null !== a) for (var b = this.zf.copy().j; b.next();) a.remove(b.value)
        }
        b = this.data;
        null !== b && (a = this.g, null !== a && (a = a.ga, a instanceof Y ? a.xy(b) : a instanceof wg && a.Hi(b, void 0)))
    };
    J.prototype.updateRelationshipsFromData = function() {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                if (c instanceof Y) {
                    var d = c.om(a);
                    this.aa = d = b.Qe(d);
                    d = c.pm(a);
                    this.da = d = b.Qe(d);
                    a = c.Sk(a);
                    if (0 < a.length || 0 < this.If.count) {
                        if (1 === a.length && 1 === this.If.count) {
                            var d = a[0],
                            e = this.If.first();
                            if (c.Cb(e.data) === d) return
                        }
                        var d = (new L).Rc(a),
                        g = new L;
                        this.If.each(function(a) {
                            null !== a.data && (a = c.Cb(a.data), void 0 !== a && g.add(a))
                        });
                        a = g.copy();
                        a.wy(d);
                        d = d.copy();
                        d.wy(g);
                        if (0 < a.count || 0 < d.count) {
                            var h = this;
                            a.each(function(a) {
                                a = b.Qe(a);
                                null !== a && a.zc === h && (a.zc = null)
                            });
                            d.each(function(a) {
                                a = b.Qe(a);
                                null !== a && a.zc !== h && (a.zc = h)
                            })
                        }
                    }
                }
            }
        }
    };
    J.prototype.move = function(a) {
        var b = this.position,
        c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        F.prototype.move.call(this, a);
        this.wm(c, b);
        for (a = this.If; a.next();) {
            var d = a.value,
            e = d.position;
            d.moveTo(e.x + c, e.y + b)
        }
    };
    D.defineProperty(J, {
        TJ: "relinkableFrom"
    },
    function() {
        return 0 !== (this.dc & 1)
    },
    function(a) {
        var b = 0 !== (this.dc & 1);
        b !== a && (v && D.h(a, "boolean", J, "relinkableFrom"), this.dc ^= 1, this.i("relinkableFrom", b, a), this.ne())
    });
    D.defineProperty(J, {
        UJ: "relinkableTo"
    },
    function() {
        return 0 !== (this.dc & 2)
    },
    function(a) {
        var b = 0 !== (this.dc & 2);
        b !== a && (v && D.h(a, "boolean", J, "relinkableTo"), this.dc ^= 2, this.i("relinkableTo", b, a), this.ne())
    });
    J.prototype.canRelinkFrom = function() {
        if (!this.TJ) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Cn) return ! 1;
        a = a.g;
        return null === a || a.Cn ? !0 : !1
    };
    J.prototype.canRelinkTo = function() {
        if (!this.UJ) return ! 1;
        var a = this.layer;
        if (null === a) return ! 0;
        if (!a.Cn) return ! 1;
        a = a.g;
        return null === a || a.Cn ? !0 : !1
    };
    D.defineProperty(J, {
        Vu: "resegmentable"
    },
    function() {
        return 0 !== (this.dc & 4)
    },
    function(a) {
        var b = 0 !== (this.dc & 4);
        b !== a && (v && D.h(a, "boolean", J, "resegmentable"), this.dc ^= 4, this.i("resegmentable", b, a), this.ne())
    });
    D.defineProperty(J, {
        Uc: "isTreeLink"
    },
    function() {
        return 0 !== (this.dc & 8)
    },
    function(a) {
        var b = 0 !== (this.dc & 8);
        b !== a && (v && D.h(a, "boolean", J, "isTreeLink"), this.dc ^= 8, this.i("isTreeLink", b, a), null !== this.aa && Gn(this.aa), null !== this.da && Gn(this.da))
    });
    D.w(J, {
        path: "path"
    },
    function() {
        var a = this.Vd();
        return a instanceof z ? a: null
    });
    D.w(J, {
        qo: "routeBounds"
    },
    function() {
        this.yo();
        var a = new B;
        var b = Infinity,
        c = Infinity,
        d = this.ta;
        if (0 === d) a.m(NaN, NaN, 0, 0);
        else {
            if (1 === d) d = this.n(0),
            b = Math.min(d.x, b),
            c = Math.min(d.y, c),
            a.m(d.x, d.y, 0, 0);
            else if (2 === d) {
                var e = this.n(0),
                g = this.n(1),
                b = Math.min(e.x, g.x),
                c = Math.min(e.y, g.y);
                a.m(e.x, e.y, 0, 0);
                a.Ki(g)
            } else if (this.computeCurve() === Nj && 3 <= d && !this.qc) if (e = this.n(0), b = e.x, c = e.y, a.m(b, c, 0, 0), 3 === d) d = this.n(1),
            b = Math.min(d.x, b),
            c = Math.min(d.y, c),
            g = this.n(2),
            b = Math.min(g.x, b),
            c = Math.min(g.y, c),
            Ee(e.x, e.y, d.x, d.y, d.x, d.y, g.x, g.y, .5, a);
            else for (var h = 3; h < d; h += 3) {
                var k = this.n(h - 2);
                h + 3 >= d && (h = d - 1);
                var l = this.n(h - 1),
                g = this.n(h);
                Ee(e.x, e.y, k.x, k.y, l.x, l.y, g.x, g.y, .5, a);
                b = Math.min(g.x, b);
                c = Math.min(g.y, c);
                e = g
            } else for (e = this.n(0), g = this.n(1), b = Math.min(e.x, g.x), c = Math.min(e.y, g.y), a.m(e.x, e.y, 0, 0), a.Ki(g), h = 2; h < d; h++) e = this.n(h),
            b = Math.min(e.x, b),
            c = Math.min(e.y, c),
            a.Ki(e);
            this.dA.m(b - a.x, c - a.y)
        }
        return this.Iw = a
    });
    D.w(J, {
        eG: "midPoint"
    },
    function() {
        this.yo();
        return this.computeMidPoint(new O)
    });
    J.prototype.computeMidPoint = function(a) {
        var b = this.ta;
        if (0 === b) return a.assign(le),
        a;
        if (1 === b) return a.assign(this.n(0)),
        a;
        if (2 === b) {
            var c = this.n(0),
            d = this.n(1);
            a.m((c.x + d.x) / 2, (c.y + d.y) / 2);
            return a
        }
        if (this.computeCurve() === Nj && 3 <= b && !this.qc) {
            if (3 === b) return this.n(1);
            var c = (b - 1) / 3 | 0,
            e = 3 * (c / 2 | 0);
            if (1 === c % 2) {
                var c = this.n(e),
                d = this.n(e + 1),
                g = this.n(e + 2),
                e = this.n(e + 3),
                b = d.x,
                h = d.y,
                d = g.x,
                k = g.y,
                g = (b + d) / 2,
                l = (h + k) / 2,
                h = ((c.y + h) / 2 + l) / 2,
                k = (l + (k + e.y) / 2) / 2;
                a.x = (((c.x + b) / 2 + g) / 2 + (g + (d + e.x) / 2) / 2) / 2;
                a.y = (h + k) / 2
            } else a.assign(this.n(e));
            return a
        }
        e = 0;
        g = D.tb();
        for (h = 0; h < b - 1; h++) c = 0,
        c = this.n(h),
        d = this.n(h + 1),
        yb(c.x, d.x) ? (c = d.y - c.y, 0 > c && (c = -c)) : yb(c.y, d.y) ? (c = d.x - c.x, 0 > c && (c = -c)) : c = Math.sqrt(c.Cf(d)),
        g.push(c),
        e += c;
        for (d = h = c = 0; c < e / 2 && h < b;) {
            d = g[h];
            if (c + d > e / 2) break;
            c += d;
            h++
        }
        D.Aa(g);
        b = this.n(h);
        g = this.n(h + 1);
        b.x === g.x ? b.y > g.y ? a.m(b.x, b.y - (e / 2 - c)) : a.m(b.x, b.y + (e / 2 - c)) : b.y === g.y ? b.x > g.x ? a.m(b.x - (e / 2 - c), b.y) : a.m(b.x + (e / 2 - c), b.y) : (c = (e / 2 - c) / d, a.m(b.x + c * (g.x - b.x), b.y + c * (g.y - b.y)));
        return a
    };
    D.w(J, {
        dG: "midAngle"
    },
    function() {
        this.yo();
        return this.computeMidAngle()
    });
    J.prototype.computeMidAngle = function() {
        var a = this.ta;
        if (2 > a) return NaN;
        if (this.computeCurve() === Nj && 4 <= a && !this.qc) {
            var b = (a - 1) / 3 | 0,
            c = 3 * (b / 2 | 0);
            if (1 === b % 2) {
                var c = Math.floor(c),
                b = this.n(c),
                d = this.n(c + 1),
                a = this.n(c + 2),
                c = this.n(c + 3),
                e = d.x,
                d = d.y,
                g = a.x,
                a = a.y,
                h = (e + g) / 2,
                k = (d + a) / 2;
                return sb(((b.x + e) / 2 + h) / 2, ((b.y + d) / 2 + k) / 2, (h + (g + c.x) / 2) / 2, (k + (a + c.y) / 2) / 2)
            }
            if (0 < c && c + 1 < a) return b = this.n(c - 1),
            d = this.n(c + 1),
            b.Jc(d)
        }
        c = a / 2 | 0;
        if (0 === a % 2) return b = this.n(c - 1),
        d = this.n(c),
        4 <= a && b.Sc(d) && (b = this.n(c - 2), a = this.n(c + 1), c = b.Cf(d), e = d.Cf(a), !(c > e + 10)) ? e > c + 10 ? d.Jc(a) : b.Jc(a) : b.Jc(d);
        b = this.n(c - 1);
        d = this.n(c);
        a = this.n(c + 1);
        c = b.Cf(d);
        e = d.Cf(a);
        return c > e + 10 ? b.Jc(d) : e > c + 10 ? d.Jc(a) : b.Jc(a)
    };
    D.defineProperty(J, {
        points: "points"
    },
    function() {
        return this.ad
    },
    function(a) {
        var b = this.ad;
        if (b !== a) {
            var c = null;
            if (Array.isArray(a)) {
                var d = 0 === a.length % 2;
                if (d) for (var e = 0; e < a.length; e++) if ("number" !== typeof a[e] || isNaN(a[e])) {
                    d = !1;
                    break
                }
                if (d) for (c = new K(O), d = 0; d < a.length / 2; d++) {
                    var g = (new O(a[2 * d], a[2 * d + 1])).freeze();
                    c.add(g)
                } else {
                    e = !0;
                    for (d = 0; d < a.length; d++) {
                        var h = a[d];
                        if (!D.Ta(g) || "number" !== typeof h.x || isNaN(h.x) || "number" !== typeof h.y || isNaN(h.y)) {
                            e = !1;
                            break
                        }
                    }
                    if (e) for (c = new K(O), d = 0; d < a.length; d++) g = a[d],
                    c.add((new O(g.x, g.y)).freeze());
                    else D.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: " + a)
                }
            } else if (a instanceof K) for (c = a.copy(), a = c.j; a.next();) a.value.freeze();
            else D.k("Link.points value is not an instance of List or Array: " + a);
            c.freeze();
            this.ad = c;
            this.Re();
            this.K();
            Rr(this);
            a = this.g;
            null !== a && (a.Zn || a.ra.nb || a.hy.add(this), a.Xa.vc && (this.Jp = c));
            this.i("points", b, c)
        }
    });
    D.w(J, {
        ta: "pointsCount"
    },
    function() {
        return this.ad.count
    });
    J.prototype.getPoint = J.prototype.n = function(a) {
        return this.ad.o[a]
    };
    J.prototype.setPoint = J.prototype.eh = function(a, b) {
        v && (D.l(b, O, J, "setPoint"), b.F() || D.k("Link.setPoint called with a Point that does not have real numbers: " + b.toString()));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.qg(a, b)
    };
    J.prototype.setPointAt = J.prototype.ia = function(a, b, c) {
        v && (D.p(b, J, "setPointAt:x"), D.p(c, J, "setPointAt:y"));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.qg(a, new O(b, c))
    };
    J.prototype.insertPoint = function(a, b) {
        v && (D.l(b, O, J, "insertPoint"), b.F() || D.k("Link.insertPoint called with a Point that does not have real numbers: " + b.toString()));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.Xd(a, b)
    };
    J.prototype.insertPointAt = J.prototype.B = function(a, b, c) {
        v && (D.p(b, J, "insertPointAt:x"), D.p(c, J, "insertPointAt:y"));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.Xd(a, new O(b, c))
    };
    J.prototype.addPoint = J.prototype.zi = function(a) {
        v && (D.l(a, O, J, "addPoint"), a.F() || D.k("Link.addPoint called with a Point that does not have real numbers: " + a.toString()));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.add(a)
    };
    J.prototype.addPointAt = J.prototype.Wl = function(a, b) {
        v && (D.p(a, J, "insertPointAt:x"), D.p(b, J, "insertPointAt:y"));
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.add(new O(a, b))
    };
    J.prototype.removePoint = J.prototype.vG = function(a) {
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.jd(a)
    };
    J.prototype.clearPoints = J.prototype.dq = function() {
        null === this.cf && D.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.clear()
    };
    J.prototype.movePoints = J.prototype.wm = function(a, b) {
        for (var c = new K(O), d = this.ad.j; d.next();) {
            var e = d.value;
            c.add((new O(e.x + a, e.y + b)).freeze())
        }
        c.freeze();
        d = this.ad;
        this.ad = c;
        this.K();
        Rr(this);
        e = this.g;
        null !== e && e.Xa.vc && (this.Jp = c);
        this.i("points", d, c)
    };
    J.prototype.startRoute = J.prototype.zm = function() {
        null === this.cf && (this.cf = this.ad, this.ad = this.ad.copy())
    };
    J.prototype.commitRoute = J.prototype.Aj = function() {
        if (null !== this.cf) {
            for (var a = this.cf,
            b = this.ad,
            c = Infinity,
            d = Infinity,
            e = a.o,
            g = e.length,
            h = 0; h < g; h++) var k = e[h],
            c = Math.min(k.x, c),
            d = Math.min(k.y, d);
            for (var l = Infinity,
            m = Infinity,
            n = b.o,
            p = n.length,
            h = 0; h < p; h++) k = n[h],
            l = Math.min(k.x, l),
            m = Math.min(k.y, m),
            k.freeze();
            b.freeze();
            if (p === g) for (h = 0; h < p; h++) {
                if (g = e[h], k = n[h], g.x - c !== k.x - l || g.y - d !== k.y - m) {
                    this.K();
                    this.Re();
                    break
                }
            } else this.K(),
            this.Re();
            this.cf = null;
            c = this.g;
            null !== c && c.Xa.vc && (this.Jp = b);
            Rr(this);
            this.i("points", a, b)
        }
    };
    J.prototype.rollbackRoute = J.prototype.YJ = function() {
        null !== this.cf && (this.ad = this.cf, this.cf = null)
    };
    function Rr(a) {
        0 === a.ad.count ? a.lh = !1 : (a.lh = !0, a.iq = a.n(0), a.jq = a.n(a.ta - 1), Sr(a, !1))
    }
    J.prototype.invalidateRoute = J.prototype.fc = function() {
        if (!this.Wj) {
            var a = this.g;
            a && (a.hy.contains(this) || a.ra.nb || a.Xa.lJ && !a.Xa.sf) || (a = this.path, null !== a && (this.lh = !1, this.K(), a.K()))
        }
    };
    D.defineProperty(J, {
        lh: null
    },
    function() {
        return 0 !== (this.dc & 16)
    },
    function(a) {
        0 !== (this.dc & 16) !== a && (this.dc ^= 16)
    });
    D.defineProperty(J, {
        Wj: "suspendsRouting"
    },
    function() {
        return 0 !== (this.dc & 32)
    },
    function(a) {
        0 !== (this.dc & 32) !== a && (this.dc ^= 32)
    });
    D.defineProperty(J, {
        tA: null
    },
    function() {
        return 0 !== (this.dc & 64)
    },
    function(a) {
        0 !== (this.dc & 64) !== a && (this.dc ^= 64)
    });
    D.defineProperty(J, {
        iq: "defaultFromPoint"
    },
    function() {
        return this.HC
    },
    function(a) {
        this.HC = a.copy()
    });
    D.defineProperty(J, {
        jq: "defaultToPoint"
    },
    function() {
        return this.NC
    },
    function(a) {
        this.NC = a.copy()
    });
    J.prototype.updateRoute = J.prototype.yo = function() {
        if (!this.lh && !this.tA) {
            var a = !0;
            try {
                this.tA = !0,
                this.zm(),
                a = this.computePoints()
            } finally {
                this.tA = !1,
                a ? this.Aj() : this.YJ()
            }
        }
    };
    J.prototype.computePoints = function() {
        var a = this.g;
        if (null === a) return ! 1;
        var b = this.aa,
        c = null;
        null === b ? (a.Nl || (a.gt = new z, a.gt.Ea = Zd, a.gt.jb = 0, a.Nl = new G, a.Nl.add(a.gt), a.Nl.hf()), this.iq && (a.Nl.position = a.Nl.location = this.iq, a.Nl.hf(), b = a.Nl, c = a.gt)) : c = this.dd;
        if (null !== c && !b.isVisible()) {
            var d = b.findVisibleNode();
            null !== d && d !== b ? (b = d, c = d.km("")) : b = d
        }
        this.fE = b;
        if (null === b || !b.location.F()) return ! 1;
        for (; ! (null === c || c.$.F() && c.Nj());) c = c.Q;
        if (null === c) return ! 1;
        var e = this.da,
        g = null;
        null === e ? (a.Ol || (a.ht = new z, a.ht.Ea = Zd, a.ht.jb = 0, a.Ol = new G, a.Ol.add(a.ht), a.Ol.hf()), this.jq && (a.Ol.position = a.Ol.location = this.jq, a.Ol.hf(), e = a.Ol, g = a.ht)) : g = this.Ld;
        null === g || e.isVisible() || (a = e.findVisibleNode(), null !== a && a !== e ? (e = a, g = a.km("")) : e = a);
        this.gE = e;
        if (null === e || !e.location.F()) return ! 1;
        for (; ! (null === g || g.$.F() && g.Nj());) g = g.Q;
        if (null === g) return ! 1;
        var h = this.ta,
        d = Tr(this, c),
        a = Ur(this, g),
        k = d === bc,
        l = a === bc,
        m = c === g && null !== c,
        n = this.qc,
        p = this.gf === Nj;
        this.Yi = m && !n ? p = !0 : !1;
        var q = this.St === nj || m;
        if (!n && !m && k && l) {
            if (k = !1, !q && 3 <= h && (q = this.getLinkPoint(b, c, d, !0, !1, e, g), l = this.getLinkPoint(e, g, a, !1, !1, b, c), k = this.adjustPoints(0, q, h - 1, l)) && (q = this.getLinkPoint(b, c, d, !0, !1, e, g), l = this.getLinkPoint(e, g, a, !1, !1, b, c), this.adjustPoints(0, q, h - 1, l)), !k) if (this.dq(), p) {
                var h = this.getLinkPoint(b, c, d, !0, !1, e, g),
                q = this.getLinkPoint(e, g, a, !1, !1, b, c),
                k = q.x - h.x,
                l = q.y - h.y,
                m = this.computeCurviness(),
                p = n = 0,
                r = h.x + k / 3,
                s = h.y + l / 3,
                u = r,
                t = s;
                Q(l, 0) ? t = 0 < k ? t - m: t + m: (n = -k / l, p = Math.sqrt(m * m / (n * n + 1)), 0 > m && (p = -p), u = (0 > l ? -1 : 1) * p + r, t = n * (u - r) + s);
                var r = h.x + 2 * k / 3,
                s = h.y + 2 * l / 3,
                y = r,
                w = s;
                Q(l, 0) ? w = 0 < k ? w - m: w + m: (y = (0 > l ? -1 : 1) * p + r, w = n * (y - r) + s);
                this.dq();
                this.zi(h);
                this.Wl(u, t);
                this.Wl(y, w);
                this.zi(q);
                this.eh(0, this.getLinkPoint(b, c, d, !0, !1, e, g));
                this.eh(3, this.getLinkPoint(e, g, a, !1, !1, b, c))
            } else d = this.getLinkPoint(b, c, d, !0, !1, e, g),
            a = this.getLinkPoint(e, g, a, !1, !1, b, c),
            this.hasCurviness() ? (q = a.x - d.x, e = a.y - d.y, g = this.computeCurviness(), b = d.x + q / 2, c = d.y + e / 2, h = b, k = c, Q(e, 0) ? k = 0 < q ? k - g: k + g: (q = -q / e, h = Math.sqrt(g * g / (q * q + 1)), 0 > g && (h = -h), h = (0 > e ? -1 : 1) * h + b, k = q * (h - b) + c), this.zi(d), this.Wl(h, k)) : this.zi(d),
            this.zi(a)
        } else {
            p = this.Di;
            q && (n && p || m) && this.dq();
            var C = m ? this.computeCurviness() : 0,
            p = this.getLinkPoint(b, c, d, !0, n, e, g),
            r = u = s = 0;
            if (n || !k || m) if (t = this.computeEndSegmentLength(b, c, d, !0), r = this.getLinkDirection(b, c, p, d, !0, n, e, g), m && (k || d.O(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (r -= n ? 90 : 30, 0 > C && (r -= 180)), 0 > r ? r += 360 : 360 <= r && (r -= 360), m && (t += Math.abs(C) * (n ? 1 : 2)), 0 === r ? s = t: 90 === r ? u = t: 180 === r ? s = -t: 270 === r ? u = -t: (s = t * Math.cos(r * Math.PI / 180), u = t * Math.sin(r * Math.PI / 180)), d.Zd() && m) {
                var A = c.eb(gc, D.P()),
                N = D.Fb(A.x + 1E3 * s, A.y + 1E3 * u);
                this.getLinkPointFromPoint(b, c, A, N, !0, p);
                D.A(A);
                D.A(N)
            }
            var t = this.getLinkPoint(e, g, a, !1, n, b, c),
            H = w = y = 0;
            if (n || !l || m) A = this.computeEndSegmentLength(e, g, a, !1),
            H = this.getLinkDirection(e, g, t, a, !1, n, b, c),
            m && (l || d.O(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (H += n ? 0 : 30, 0 > C && (H += 180)),
            0 > H ? H += 360 : 360 <= H && (H -= 360),
            m && (A += Math.abs(C) * (n ? 1 : 2)),
            0 === H ? y = A: 90 === H ? w = A: 180 === H ? y = -A: 270 === H ? w = -A: (y = A * Math.cos(H * Math.PI / 180), w = A * Math.sin(H * Math.PI / 180)),
            a.Zd() && m && (A = g.eb(gc, D.P()), N = D.Fb(A.x + 1E3 * y, A.y + 1E3 * w), this.getLinkPointFromPoint(e, g, A, N, !1, t), D.A(A), D.A(N));
            a = p;
            if (n || !k || m) a = new O(p.x + s, p.y + u);
            d = t;
            if (n || !l || m) d = new O(t.x + y, t.y + w); ! q && !n && k && 3 < h && this.adjustPoints(0, p, h - 2, d) ? this.eh(h - 1, t) : !q && !n && l && 3 < h && this.adjustPoints(1, a, h - 1, t) ? this.eh(0, p) : !q && (n ? 6 <= h: 4 < h) && this.adjustPoints(1, a, h - 2, d) ? (this.eh(0, p), this.eh(h - 1, t)) : (this.dq(), this.zi(p), (n || !k || m) && this.zi(a), n && this.addOrthoPoints(a, r, d, H, b, e), (n || !l || m) && this.zi(d), this.zi(t))
        }
        return ! 0
    };
    function Vr(a, b) {
        Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x = b.x >= a.x ? a.x + 9E9: a.x - 9E9, b.y = a.y) : (b.y = b.y >= a.y ? a.y + 9E9: a.y - 9E9, b.x = a.x);
        return b
    }
    J.prototype.getLinkPointFromPoint = function(a, b, c, d, e, g) {
        void 0 === g && (g = new O);
        if (null === a || null === b) return g.assign(c),
        g;
        a.isVisible() || (e = a.findVisibleNode(), null !== e && e !== a && (b = e.port));
        var h = e = 0,
        k = 0,
        l = 0;
        a = null;
        e = b.Q;
        null === e || e.kh() || (e = e.Q);
        if (null === e) e = d.x,
        h = d.y,
        k = c.x,
        l = c.y;
        else {
            a = e.Hh;
            e = 1 / (a.m11 * a.m22 - a.m12 * a.m21);
            var k = a.m22 * e,
            l = -a.m12 * e,
            m = -a.m21 * e,
            n = a.m11 * e,
            p = e * (a.m21 * a.dy - a.m22 * a.dx),
            q = e * (a.m12 * a.dx - a.m11 * a.dy);
            e = d.x * k + d.y * m + p;
            h = d.x * l + d.y * n + q;
            k = c.x * k + c.y * m + p;
            l = c.x * l + c.y * n + q
        }
        b.Tn(e, h, k, l, g);
        null !== a && g.transform(a);
        return g
    };
    function Wr(a, b) {
        var c = b.Xs;
        null === c && (c = new Xr, c.port = b, c.Vc = b.Y, b.Xs = c);
        return Yr(c, a)
    }
    J.prototype.getLinkPoint = function(a, b, c, d, e, g, h, k) {
        void 0 === k && (k = new O);
        if (c.fd()) return b.eb(c, k),
        k;
        if (c.Kj()) {
            var l = Wr(this, b);
            if (null !== l) {
                k.assign(l.Bq);
                if (e && this.Ay === Mr) {
                    var m = Wr(this, h);
                    if (null !== m && l.Kn < m.Kn) {
                        var l = D.P(),
                        m = D.P(),
                        n = new B(b.eb(cc, l), b.eb(rc, m)),
                        p = this.computeSpot(!d);
                        a = this.getLinkPoint(g, h, p, !d, e, a, b, m); (c.Ij(tc) || c.Ij(uc)) && a.y >= n.y && a.y <= n.y + n.height ? k.y = a.y: (c.Ij(sc) || c.Ij(yc)) && a.x >= n.x && a.x <= n.x + n.width && (k.x = a.x);
                        D.A(l);
                        D.A(m)
                    }
                }
                return k
            }
        }
        c = b.eb(gc, D.P());
        l = g = null;
        this.ta > (e ? 6 : 2) ? (l = d ? this.n(1) : this.n(this.ta - 2), e && (l = Vr(c, l.copy()))) : (g = D.P(), l = h.eb(gc, g), e && (l = Vr(c, l)), D.A(g));
        this.getLinkPointFromPoint(a, b, c, l, d, k);
        D.A(c);
        return k
    };
    J.prototype.getLinkDirection = function(a, b, c, d, e, g, h, k) {
        a: if (d.fd()) c = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : .5 > d.x ? 225 : .5 < d.x ? 45 : 0;
        else {
            if (d.Kj()) {
                var l = Wr(this, b);
                if (null !== l) switch (l.Ke) {
                case D.ud:
                    c = 270;
                    break a;
                case D.Yc:
                    c = 180;
                    break a;
                default:
                case D.ld:
                    c = 0;
                    break a;
                case D.kd:
                    c = 90;
                    break a
                }
            }
            var l = b.eb(gc, D.P()),
            m = null,
            n = null;
            this.ta > (g ? 6 : 2) ? (n = e ? this.n(1) : this.n(this.ta - 2), n = g ? Vr(l, n.copy()) : c) : (m = D.P(), n = k.eb(gc, m), D.A(m));
            c = 0;
            c = Math.abs(n.x - l.x) > Math.abs(n.y - l.y) ? n.x >= l.x ? 0 : 180 : n.y >= l.y ? 90 : 270;
            D.A(l)
        }
        d.Zd() && h.Ei(a) && (c += 180, 360 <= c && (c -= 360));
        a = vr;
        a = e ? this.nu: this.fv;
        a === vr && (a = e ? b.nu: b.fv);
        switch (a) {
        case wr:
            b = b.Rn();
            c += b;
            360 <= c && (c -= 360);
            break;
        case vr:
        case Co:
            b = b.Rn();
            if (0 === b) break;
            45 <= b && 135 > b ? c += 90 : 135 <= b && 225 > b ? c += 180 : 225 <= b && 315 > b && (c += 270);
            360 <= c && (c -= 360)
        }
        return c
    };
    J.prototype.computeEndSegmentLength = function(a, b, c, d) {
        if (null !== b && c.Kj() && (a = Wr(this, b), null !== a)) return a.Dx;
        a = NaN;
        a = d ? this.nm: this.Dm;
        null !== b && isNaN(a) && (a = d ? b.nm: b.Dm);
        isNaN(a) && (a = 10);
        return a
    };
    J.prototype.computeSpot = function(a) {
        return a ? Tr(this, this.dd) : Ur(this, this.Ld)
    };
    function Tr(a, b) {
        if (null === b) return gc;
        var c = a.Gb;
        c.ed() && null !== b && (c = b.Gb);
        return c === Tc ? bc: c
    }
    function Ur(a, b) {
        if (null === b) return gc;
        var c = a.Hb;
        c.ed() && null !== b && (c = b.Hb);
        return c === Tc ? bc: c
    }
    J.prototype.computeOtherPoint = function(a, b) {
        var c = b.eb(gc),
        d;
        d = b.Xs;
        d = null !== d ? Yr(d, this) : null;
        null !== d && (c = d.Bq);
        return c
    };
    J.prototype.computeShortLength = function(a) {
        if (a) {
            if (a = this.ou, isNaN(a)) {
                var b = this.dd;
                null !== b && (a = b.ou)
            }
        } else a = this.gv,
        isNaN(a) && (b = this.Ld, null !== b && (a = b.gv));
        return isNaN(a) ? 0 : a
    };
    J.prototype.Qk = function(a, b, c, d, e, g) {
        if (!1 === this.pg) return ! 1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = g;
        void 0 === g && (h = D.Of(), h.reset());
        h.multiply(this.transform);
        if (this.Hn(a, h)) return cq(this, b, c, e),
        void 0 === g && D.He(h),
        !0;
        if (this.Wg(a, h)) {
            var k = !1;
            if (!this.Yn) for (var l = this.xa.o,
            m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === this.uf) {
                    var p = n.$,
                    q = this.Ga;
                    if (! (p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = D.Of();
                        p.set(h);
                        if (n instanceof x) k = n.Qk(a, b, c, d, e, p);
                        else if (this.path === n) {
                            if (n instanceof z) {
                                var k = n,
                                r = a,
                                s = d,
                                q = p;
                                if (!1 === k.pg) k = !1;
                                else if (q.multiply(k.transform), s) b: {
                                    var u = r,
                                    t = q;
                                    if (k.Hn(u, t)) k = !0;
                                    else {
                                        if (void 0 === t && (t = k.transform, u.Nk(k.$))) {
                                            k = !0;
                                            break b
                                        }
                                        var q = u.left,
                                        r = u.right,
                                        s = u.top,
                                        u = u.bottom,
                                        y = D.P(),
                                        w = D.P(),
                                        C = D.P(),
                                        A = D.Of();
                                        A.set(t);
                                        A.lB(k.transform);
                                        A.Qx();
                                        w.x = r;
                                        w.y = s;
                                        w.transform(A);
                                        y.x = q;
                                        y.y = s;
                                        y.transform(A);
                                        t = !1;
                                        pq(k, y, w, C) ? t = !0 : (y.x = r, y.y = u, y.transform(A), pq(k, y, w, C) ? t = !0 : (w.x = q, w.y = u, w.transform(A), pq(k, y, w, C) ? t = !0 : (y.x = q, y.y = s, y.transform(A), pq(k, y, w, C) && (t = !0))));
                                        D.He(A);
                                        D.A(y);
                                        D.A(w);
                                        D.A(C);
                                        k = t
                                    }
                                } else k = k.Hn(r, q)
                            }
                        } else k = Io(n, a, d, p);
                        k && (null !== b && (n = b(n)), n && (null === c || c(n)) && (e instanceof L && e.add(n), e instanceof K && e.add(n)));
                        D.He(p)
                    }
                }
            }
            void 0 === g && D.He(h);
            return k || null !== this.background || null !== this.Zl
        }
        void 0 === g && D.He(h);
        return ! 1
    };
    D.w(J, {
        qc: "isOrthogonal"
    },
    function() {
        return 2 === (this.mn.value & 2)
    });
    D.w(J, {
        Di: "isAvoiding"
    },
    function() {
        return 4 === (this.mn.value & 4)
    });
    J.prototype.computeCurve = function() {
        if (null === this.Yi) {
            var a = this.dd,
            b = this.qc;
            this.Yi = null !== a && a === this.Ld && !b
        }
        return this.Yi ? Nj: this.gf
    };
    J.prototype.computeCorner = function() {
        if (this.gf === Nj) return 0;
        var a = this.yA;
        if (isNaN(a) || 0 > a) a = 10;
        return a
    };
    J.prototype.findMidLabel = function() {
        for (var a = this.path,
        b = this.xa.o,
        c = b.length,
        d = 0; d < c; d++) {
            var e = b[d];
            if (e !== a && !e.Gf && ( - Infinity === e.Te || isNaN(e.Te))) return e
        }
        for (a = this.If; a.next();) if (b = a.value, -Infinity === b.Te || isNaN(b.Te)) return b;
        return null
    };
    J.prototype.computeSpacing = function() {
        if (!this.isVisible()) return 0;
        var a;
        a = Math.max(14, this.computeThickness());
        var b = this.dd,
        c = this.Ld;
        if (null !== b && null !== c) {
            var d = this.findMidLabel();
            if (null !== d) {
                var e = d.Ga,
                g = d.margin,
                h = isNaN(e.width) ? 30 : e.width * d.scale + g.left + g.right,
                e = isNaN(e.height) ? 14 : e.height * d.scale + g.top + g.bottom,
                d = d.Oq;
                d === sq || d === Mq || d === Lq ? a = Math.max(a, e) : d === Vp || d === Wp || d === Tp || d === Up ? a = Math.max(a, h) : (b = b.eb(gc).Jc(c.eb(gc)) / 180 * Math.PI, a = Math.max(a, Math.abs(Math.sin(b) * h) + Math.abs(Math.cos(b) * e) + 1));
                this.gf === Nj && (a *= 1.333)
            }
        }
        return a
    };
    J.prototype.arrangeBundledLinks = function(a, b) {
        if (b) for (var c = 0; c < a.length; c++) a[c].fc()
    };
    J.prototype.computeCurviness = function() {
        var a = this.yx;
        if (isNaN(a)) {
            var a = 16,
            b = this.Mi;
            if (null !== b) {
                for (var c = D.tb(), d = 0, e = b.links, g = 0; g < e.length; g++) {
                    var h = e[g],
                    h = h.computeSpacing();
                    c.push(h);
                    d += h
                }
                d = -d / 2;
                for (g = 0; g < e.length; g++) {
                    h = e[g];
                    if (h === this) {
                        a = d + c[g] / 2;
                        break
                    }
                    d += c[g]
                }
                b.Eq === this.aa && (a = -a);
                D.Aa(c)
            }
        }
        return a
    };
    J.prototype.computeThickness = function() {
        if (!this.isVisible()) return 0;
        var a = this.path;
        return null !== a ? Math.max(a.jb, 1) : 1
    };
    J.prototype.hasCurviness = function() {
        return ! isNaN(this.yx) || null !== this.Mi
    };
    J.prototype.adjustPoints = function(a, b, c, d) {
        var e = this.St;
        if (this.qc) {
            if (e === Kr) return ! 1;
            e === Lr && (e = Jr)
        }
        switch (e) {
        case Kr:
            var g = this.n(a),
            h = this.n(c);
            if (!g.Sc(b) || !h.Sc(d)) {
                var e = g.x,
                g = g.y,
                k = h.x - e,
                l = h.y - g,
                m = Math.sqrt(k * k + l * l);
                if (!yb(m, 0)) {
                    var n = 0;
                    yb(k, 0) ? n = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (n = Math.atan(l / Math.abs(k)), 0 > k && (n = Math.PI - n));
                    var h = b.x,
                    p = b.y,
                    l = d.x - h,
                    q = d.y - p,
                    r = Math.sqrt(l * l + q * q),
                    k = 0;
                    yb(l, 0) ? k = 0 > q ? -Math.PI / 2 : Math.PI / 2 : (k = Math.atan(q / Math.abs(l)), 0 > l && (k = Math.PI - k));
                    m = r / m;
                    n = k - n;
                    this.eh(a, b);
                    for (a += 1; a < c; a++) b = this.n(a),
                    k = b.x - e,
                    l = b.y - g,
                    b = Math.sqrt(k * k + l * l),
                    yb(b, 0) || (q = 0, yb(k, 0) ? q = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (q = Math.atan(l / Math.abs(k)), 0 > k && (q = Math.PI - q)), k = q + n, b *= m, this.ia(a, h + b * Math.cos(k), p + b * Math.sin(k)));
                    this.eh(c, d)
                }
            }
            return ! 0;
        case Lr:
            g = this.n(a);
            p = this.n(c);
            if (!g.Sc(b) || !p.Sc(d)) {
                var e = g.x,
                g = g.y,
                h = p.x,
                p = p.y,
                m = (h - e) * (h - e) + (p - g) * (p - g),
                k = b.x,
                n = b.y,
                l = d.x,
                q = d.y,
                r = 0,
                s = 1;
                0 !== l - k ? (r = (q - n) / (l - k), s = Math.sqrt(1 + 1 / (r * r))) : r = 9E9;
                this.eh(a, b);
                for (a += 1; a < c; a++) {
                    b = this.n(a);
                    var u = b.x,
                    t = b.y,
                    y = .5;
                    0 !== m && (y = ((e - u) * (e - h) + (g - t) * (g - p)) / m);
                    var w = e + y * (h - e),
                    C = g + y * (p - g);
                    b = Math.sqrt((u - w) * (u - w) + (t - C) * (t - C));
                    t < r * (u - w) + C && (b = -b);
                    0 < r && (b = -b);
                    u = k + y * (l - k);
                    y = n + y * (q - n);
                    0 !== r ? (b = u + b / s, this.ia(a, b, y - (b - u) / r)) : this.ia(a, u, y + b)
                }
                this.eh(c, d)
            }
            return ! 0;
        case Jr:
            a:
            {
                if (this.qc) {
                    h = this.n(a);
                    p = this.n(a + 1);
                    e = this.n(a + 2);
                    m = p.x;
                    k = p.y;
                    Q(h.y, p.y) ? Q(p.x, e.x) ? k = b.y: Q(p.y, e.y) && (m = b.x) : Q(h.x, p.x) && (Q(p.y, e.y) ? m = b.x: Q(p.x, e.x) && (k = b.y));
                    g = this.g;
                    if (this.Di && null !== g && (h = ha(g, !0, this.Pa, null), !h.vm(Math.min(m, e.x), Math.min(k, e.y), Math.abs(m - e.x), Math.abs(k - e.y)))) {
                        c = !1;
                        break a
                    }
                    this.ia(a + 1, m, k);
                    h = this.n(c);
                    p = this.n(c - 1);
                    e = this.n(c - 2);
                    m = p.x;
                    k = p.y;
                    Q(h.y, p.y) ? Q(p.x, e.x) ? k = d.y: Q(p.y, e.y) && (m = d.x) : Q(h.x, p.x) && (Q(p.y, e.y) ? m = d.x: Q(p.x, e.x) && (k = d.y));
                    if (this.Di && null !== g && (h = ha(g, !0, this.Pa, null), !h.vm(Math.min(m, e.x), Math.min(k, e.y), Math.abs(m - e.x), Math.abs(k - e.y)))) {
                        c = !1;
                        break a
                    }
                    this.ia(c - 1, m, k)
                }
                this.eh(a, b);
                this.eh(c, d);
                c = !0
            }
            return c;
        default:
            return ! 1
        }
    };
    J.prototype.addOrthoPoints = function(a, b, c, d, e, g) {
        b = -45 <= b && 45 > b ? 0 : 45 <= b && 135 > b ? 90 : 135 <= b && 225 > b ? 180 : 270;
        d = -45 <= d && 45 > d ? 0 : 45 <= d && 135 > d ? 90 : 135 <= d && 225 > d ? 180 : 270;
        var h = e.$.copy(),
        k = g.$.copy();
        if (h.F() && k.F()) {
            h.eg(8, 8);
            k.eg(8, 8);
            h.Ki(a);
            k.Ki(c);
            var l, m;
            if (0 === b) if (c.x > a.x || 270 === d && c.y < a.y && k.right > a.x || 90 === d && c.y > a.y && k.right > a.x) l = new O(c.x, a.y),
            m = new O(c.x, (a.y + c.y) / 2),
            180 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x < k.left ? this.computeMidOrthoPosition(a.x, k.left, !1) : a.x < k.right && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.right, m.x = l.x, m.y = c.y) : 0 === d && a.x < k.left && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y);
            else {
                l = new O(a.x, c.y);
                m = new O((a.x + c.x) / 2, c.y);
                if (180 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom) 180 === d && (k.Oa(a) || h.Oa(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (180 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y, k.bottom), !0) : c.y > a.y && (180 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)),
                m.x = c.x,
                m.y = l.y;
                if (l.y > h.top && l.y < h.bottom) if (c.x >= h.left && c.x <= a.x || a.x <= k.right && a.x >= c.x) {
                    if (90 === d || 270 === d) l = new O(Math.max((a.x + c.x) / 2, a.x), a.y),
                    m = new O(l.x, c.y)
                } else l.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 0 === d ? h.top: Math.min(h.top, k.top)) : Math.max(c.y, 0 === d ? h.bottom: Math.max(h.bottom, k.bottom)),
                m.x = c.x,
                m.y = l.y
            } else if (180 === b) if (c.x < a.x || 270 === d && c.y < a.y && k.left < a.x || 90 === d && c.y > a.y && k.left < a.x) l = new O(c.x, a.y),
            m = new O(c.x, (a.y + c.y) / 2),
            0 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x > k.right ? this.computeMidOrthoPosition(a.x, k.right, !1) : a.x > k.left && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.left, m.x = l.x, m.y = c.y) : 180 === d && a.x > k.right && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y);
            else {
                l = new O(a.x, c.y);
                m = new O((a.x + c.x) / 2, c.y);
                if (0 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom) 0 === d && (k.Oa(a) || h.Oa(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (0 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y, k.bottom), !0) : c.y > a.y && (0 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)),
                m.x = c.x,
                m.y = l.y;
                if (l.y > h.top && l.y < h.bottom) if (c.x <= h.right && c.x >= a.x || a.x >= k.left && a.x <= c.x) {
                    if (90 === d || 270 === d) l = new O(Math.min((a.x + c.x) / 2, a.x), a.y),
                    m = new O(l.x, c.y)
                } else l.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 180 === d ? h.top: Math.min(h.top, k.top)) : Math.max(c.y, 180 === d ? h.bottom: Math.max(h.bottom, k.bottom)),
                m.x = c.x,
                m.y = l.y
            } else if (90 === b) if (c.y > a.y || 180 === d && c.x < a.x && k.bottom > a.y || 0 === d && c.x > a.x && k.bottom > a.y) l = new O(a.x, c.y),
            m = new O((a.x + c.x) / 2, c.y),
            270 === d ? (l.y = this.computeMidOrthoPosition(a.y, c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x > a.x ? (l.y = a.y < k.top ? this.computeMidOrthoPosition(a.y, k.top, !0) : a.y < k.bottom && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ? this.computeMidOrthoPosition(a.y, c.y, !0) : k.bottom, m.x = c.x, m.y = l.y) : 90 === d && a.y < k.top && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x);
            else {
                l = new O(c.x, a.y);
                m = new O(c.x, (a.y + c.y) / 2);
                if (270 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right) 270 === d && (k.Oa(a) || h.Oa(c)) ? l.x = this.computeMidOrthoPosition(a.x, c.x, !1) : c.x < a.x && (270 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (270 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right, Math.min(c.x, k.left), !1)),
                m.x = l.x,
                m.y = c.y;
                if (l.x > h.left && l.x < h.right) if (c.y >= h.top && c.y <= a.y || a.y <= k.bottom && a.y >= c.y) {
                    if (0 === d || 180 === d) l = new O(a.x, Math.max((a.y + c.y) / 2, a.y)),
                    m = new O(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 90 === d ? h.left: Math.min(h.left, k.left)) : Math.max(c.x, 90 === d ? h.right: Math.max(h.right, k.right)),
                m.x = l.x,
                m.y = c.y
            } else if (c.y < a.y || 180 === d && c.x < a.x && k.top < a.y || 0 === d && c.x > a.x && k.top < a.y) l = new O(a.x, c.y),
            m = new O((a.x + c.x) / 2, c.y),
            90 === d ? (l.y = this.computeMidOrthoPosition(a.y, c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x >= a.x ? (l.y = a.y > k.bottom ? this.computeMidOrthoPosition(a.y, k.bottom, !0) : a.y > k.top && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ? this.computeMidOrthoPosition(a.y, c.y, !0) : k.top, m.x = c.x, m.y = l.y) : 270 === d && a.y > k.bottom && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x);
            else {
                l = new O(c.x, a.y);
                m = new O(c.x, (a.y + c.y) / 2);
                if (90 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right) 90 === d && (k.Oa(a) || h.Oa(c)) ? l.x = this.computeMidOrthoPosition(a.x, c.x, !1) : c.x < a.x && (90 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (90 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right, Math.min(c.x, k.left), !1)),
                m.x = l.x,
                m.y = c.y;
                if (l.x > h.left && l.x < h.right) if (c.y <= h.bottom && c.y >= a.y || a.y >= k.top && a.y <= c.y) {
                    if (0 === d || 180 === d) l = new O(a.x, Math.min((a.y + c.y) / 2, a.y)),
                    m = new O(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 270 === d ? h.left: Math.min(h.left, k.left)) : Math.max(c.x, 270 === d ? h.right: Math.max(h.right, k.right)),
                m.x = l.x,
                m.y = c.y
            }
            var n = l,
            p = m;
            if (this.Di) {
                var q = this.g,
                r; (r = null === q) || (q.Xa.sf ? r = !1 : (r = q.gb, r = r instanceof Mh ? !r.Xw || r.dJ: !0), r = !r);
                if (r || h.Oa(c) && !g.Ei(e) || k.Oa(a) && !e.Ei(g) || e === g || this.layer.Tc) a = !1;
                else if (e = ha(q, !0, this.Pa, null), e.vm(Math.min(a.x, n.x), Math.min(a.y, n.y), Math.abs(a.x - n.x), Math.abs(a.y - n.y)) && e.vm(Math.min(n.x, p.x), Math.min(n.y, p.y), Math.abs(n.x - p.x), Math.abs(n.y - p.y)) && e.vm(Math.min(p.x, c.x), Math.min(p.y, c.y), Math.abs(p.x - c.x), Math.abs(p.y - c.y))) a = !1;
                else if (h = h.copy().Wh(k), h.eg(2 * e.cq, 2 * e.aq), Zr(e, a, b, c, d, h), k = $r(e, c.x, c.y), e.abort || 999999 !== k || (Kn(e), k = e.SG, h.eg(e.cq * k, e.aq * k), Zr(e, a, b, c, d, h), k = $r(e, c.x, c.y)), e.abort || 999999 !== k || (Kn(e), k = e.ZF, h.eg(e.cq * k, e.aq * k), Zr(e, a, b, c, d, h), k = $r(e, c.x, c.y)), !e.abort && 999999 === k && e.jH && (Kn(e), Zr(e, a, b, c, d, e.sb), k = $r(e, c.x, c.y)), !e.abort && 999999 > k && 0 !== $r(e, c.x, c.y)) {
                    as(this, e, c.x, c.y, d, !0);
                    d = this.n(2);
                    if (4 > this.ta) 0 === b || 180 === b ? (d.x = a.x, d.y = c.y) : (d.x = c.x, d.y = a.y),
                    this.ia(2, d.x, d.y),
                    this.B(3, d.x, d.y);
                    else if (c = this.n(3), 0 === b || 180 === b) Q(d.x, c.x) ? (b = 0 === b ? Math.max(d.x, a.x) : Math.min(d.x, a.x), this.ia(2, b, a.y), this.ia(3, b, c.y)) : Q(d.y, c.y) ? (Math.abs(a.y - d.y) <= e.aq / 2 && (this.ia(2, d.x, a.y), this.ia(3, c.x, a.y)), this.B(2, d.x, a.y)) : this.ia(2, a.x, d.y);
                    else if (90 === b || 270 === b) Q(d.y, c.y) ? (b = 90 === b ? Math.max(d.y, a.y) : Math.min(d.y, a.y), this.ia(2, a.x, b), this.ia(3, c.x, b)) : Q(d.x, c.x) ? (Math.abs(a.x - d.x) <= e.cq / 2 && (this.ia(2, a.x, d.y), this.ia(3, a.x, c.y)), this.B(2, a.x, d.y)) : this.ia(2, d.x, a.y);
                    a = !0
                } else a = !1
            } else a = !1;
            a || (this.zi(l), this.zi(m))
        }
    };
    J.prototype.computeMidOrthoPosition = function(a, b) {
        if (this.hasCurviness()) {
            var c = this.computeCurviness();
            return (a + b) / 2 + c
        }
        return (a + b) / 2
    };
    function Qh(a) {
        if (null === a.g || !a.Di) return ! 1;
        var b = a.points.o,
        c = b.length;
        if (4 > c) return ! 1;
        a = ha(a.g, !0, a.Pa, null);
        for (var d = 1; d < c - 2; d++) {
            var e = b[d],
            g = b[d + 1];
            if (!a.vm(Math.min(e.x, g.x), Math.min(e.y, g.y), Math.abs(e.x - g.x), Math.abs(e.y - g.y))) return ! 0
        }
        return ! 1
    }
    function as(a, b, c, d, e, g) {
        var h = b.cq,
        k = b.aq,
        l = $r(b, c, d),
        m = c,
        n = d;
        for (0 === e ? m += h: 90 === e ? n += k: 180 === e ? m -= h: n -= k; 1 < l && $r(b, m, n) === l - 1;) c = m,
        d = n,
        0 === e ? m += h: 90 === e ? n += k: 180 === e ? m -= h: n -= k,
        l -= 1;
        if (g) {
            if (1 < l) if (180 === e || 0 === e) c = Math.floor(c / h) * h + h / 2;
            else if (90 === e || 270 === e) d = Math.floor(d / k) * k + k / 2
        } else c = Math.floor(c / h) * h + h / 2,
        d = Math.floor(d / k) * k + k / 2;
        1 < l && (g = e, m = c, n = d, 0 === e ? (g = 90, n += k) : 90 === e ? (g = 180, m -= h) : 180 === e ? (g = 270, n -= k) : 270 === e && (g = 0, m += h), $r(b, m, n) === l - 1 ? as(a, b, m, n, g, !1) : (m = c, n = d, 0 === e ? (g = 270, n -= k) : 90 === e ? (g = 0, m += h) : 180 === e ? (g = 90, n += k) : 270 === e && (g = 180, m -= h), $r(b, m, n) === l - 1 && as(a, b, m, n, g, !1)));
        a.Wl(c, d)
    }
    J.prototype.findClosestSegment = function(a) {
        v && D.l(a, O, J, "findClosestSegment:p");
        var b = a.x;
        a = a.y;
        for (var c = this.n(0), d = this.n(1), e = jb(b, a, c.x, c.y, d.x, d.y), g = 0, h = 1; h < this.ta - 1; h++) {
            var c = this.n(h + 1),
            k = jb(b, a, d.x, d.y, c.x, c.y),
            d = c;
            k < e && (g = h, e = k)
        }
        return g
    };
    J.prototype.Re = function() {
        this.ob = null
    };
    D.w(J, {
        Df: "geometry"
    },
    function() {
        null === this.ob && (this.yo(), this.ob = this.makeGeometry());
        return this.ob
    });
    J.prototype.Gu = function(a) {
        if (!a) {
            if (!1 === this.lh) return;
            a = this.Vd();
            if (null !== this.ob && (null === a || null !== a.Df)) return
        }
        this.ob = this.makeGeometry();
        a = this.path;
        if (null !== a) {
            a.ob = this.ob;
            for (var b = this.xa.o,
            c = b.length,
            d = 0; d < c; d++) {
                var e = b[d];
                e !== a && e.Gf && e instanceof z && (e.ob = this.ob)
            }
        }
    };
    J.prototype.makeGeometry = function() {
        var a = this.ta;
        if (2 > a) return new bf(sf);
        var b = !1,
        c = this.g;
        null !== c && Qr(this) && c.sl.contains(this) && null !== this.Iw && (b = !0);
        var d = c = 0,
        e = this.n(0).copy(),
        g = e.copy(),
        c = this.ad.o,
        h = this.computeCurve();
        if (h === Nj && 3 <= a && !yb(this.Tq, 0)) if (3 === a) var k = this.n(1),
        c = Math.min(e.x, k.x),
        d = Math.min(e.y, k.y),
        k = this.n(2),
        c = Math.min(c, k.x),
        d = Math.min(d, k.y);
        else {
            if (this.qc) for (k = 0; k < a; k++) d = c[k],
            g.x = Math.min(d.x, g.x),
            g.y = Math.min(d.y, g.y);
            else for (k = 3; k < a; k += 3) k + 3 >= a && (k = a - 1),
            c = this.n(k),
            g.x = Math.min(c.x, g.x),
            g.y = Math.min(c.y, g.y);
            c = g.x;
            d = g.y
        } else {
            for (k = 0; k < a; k++) d = c[k],
            g.x = Math.min(d.x, g.x),
            g.y = Math.min(d.y, g.y);
            c = g.x;
            d = g.y
        }
        c -= this.dA.x;
        d -= this.dA.y;
        e.x -= c;
        e.y -= d;
        if (2 !== a || Qr(this)) {
            var l = D.v();
            0 !== this.computeShortLength(!0) && (e = bs(this, e, !0, g));
            T(l, e.x, e.y, !1, !1);
            if (h === Nj && 3 <= a && !yb(this.Tq, 0)) if (3 === a) k = this.n(1),
            a = k.x - c,
            b = k.y - d,
            k = this.n(2).copy(),
            k.x -= c,
            k.y -= d,
            0 !== this.computeShortLength(!1) && (k = bs(this, k, !1, g)),
            V(l, a, b, a, b, k.x, k.y);
            else if (this.qc) {
                for (var g = new O(c, d), e = this.n(1).copy(), h = new O(c, d), a = new O(c, d), b = this.n(0), m = null, n = this.Tq / 3, k = 1; k < this.ta - 1; k++) {
                    var m = this.n(k),
                    p = b,
                    q = m,
                    r = this.n(cs(this, m, k, !1));
                    if (!yb(p.x, q.x) || !yb(q.x, r.x)) if (!yb(p.y, q.y) || !yb(q.y, r.y)) {
                        var s = n,
                        u = h,
                        t = a;
                        isNaN(s) && (s = this.Tq / 3);
                        var y = p.x,
                        p = p.y,
                        w = q.x,
                        q = q.y,
                        C = r.x,
                        r = r.y,
                        A = s * ds(y, p, w, q),
                        s = s * ds(w, q, C, r);
                        yb(p, q) && yb(w, C) && (w > y ? r > q ? (u.x = w - A, u.y = q - A, t.x = w + s, t.y = q + s) : (u.x = w - A, u.y = q + A, t.x = w + s, t.y = q - s) : r > q ? (u.x = w + A, u.y = q - A, t.x = w - s, t.y = q + s) : (u.x = w + A, u.y = q + A, t.x = w - s, t.y = q - s));
                        yb(y, w) && yb(q, r) && (q > p ? (C > w ? (u.x = w - A, u.y = q - A, t.x = w + s) : (u.x = w + A, u.y = q - A, t.x = w - s), t.y = q + s) : (C > w ? (u.x = w - A, u.y = q + A, t.x = w + s) : (u.x = w + A, u.y = q + A, t.x = w - s), t.y = q - s));
                        if (yb(y, w) && yb(w, C) || yb(p, q) && yb(q, r)) y = .5 * (y + C),
                        p = .5 * (p + r),
                        u.x = y,
                        u.y = p,
                        t.x = y,
                        t.y = p;
                        1 === k ? (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y)) : 2 === k && yb(b.x, this.n(0).x) && yb(b.y, this.n(0).y) && (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y));
                        V(l, e.x - c, e.y - d, h.x - c, h.y - d, m.x - c, m.y - d);
                        g.set(h);
                        e.set(a);
                        b = m
                    }
                }
                k = b.x;
                b = b.y;
                g = this.n(this.ta - 1);
                0 !== this.computeShortLength(!1) && (g = bs(this, g.copy(), !1, Gd));
                k = .5 * (k + g.x);
                b = .5 * (b + g.y);
                V(l, a.x - c, a.y - d, k - c, b - d, g.x - c, g.y - d)
            } else for (k = 3; k < a; k += 3) b = this.n(k - 2),
            k + 3 >= a && (k = a - 1),
            g = this.n(k - 1),
            e = this.n(k),
            k === a - 1 && 0 !== this.computeShortLength(!1) && (e = bs(this, e.copy(), !1, Gd)),
            V(l, b.x - c, b.y - d, g.x - c, g.y - d, e.x - c, e.y - d);
            else {
                g = D.P();
                g.assign(this.n(0));
                for (k = 1; k < a;) {
                    k = cs(this, g, k, 1 < k);
                    u = this.n(k);
                    if (k >= a - 1) {
                        g !== u && (0 !== this.computeShortLength(!1) && (u = bs(this, u.copy(), !1, Gd)), es(this, l, -c, -d, g, u, b));
                        break
                    }
                    k = cs(this, u, k + 1, k < a - 3);
                    e = l;
                    h = -c;
                    m = -d;
                    n = g;
                    t = this.n(k);
                    y = g;
                    p = b;
                    Q(n.y, u.y) && Q(u.x, t.x) ? (s = this.computeCorner(), s = Math.min(s, Math.abs(u.x - n.x) / 2), s = w = Math.min(s, Math.abs(t.y - u.y) / 2), Q(s, 0) ? (es(this, e, h, m, n, u, p), y.assign(u)) : (q = u.x, C = u.y, r = q, A = C, q = u.x > n.x ? u.x - s: u.x + s, A = t.y > u.y ? u.y + w: u.y - w, es(this, e, h, m, n, new O(q, C), p), zf(e, u.x + h, u.y + m, r + h, A + m), y.m(r, A))) : Q(n.x, u.x) && Q(u.y, t.y) ? (s = this.computeCorner(), w = Math.min(s, Math.abs(u.y - n.y) / 2), w = s = Math.min(w, Math.abs(t.x - u.x) / 2), Q(s, 0) ? (es(this, e, h, m, n, u, p), y.assign(u)) : (q = u.x, A = C = u.y, C = u.y > n.y ? u.y - w: u.y + w, r = t.x > u.x ? u.x + s: u.x - s, es(this, e, h, m, n, new O(q, C), p), zf(e, u.x + h, u.y + m, r + h, A + m), y.m(r, A))) : (es(this, e, h, m, n, u, p), y.assign(u))
                }
                D.A(g)
            }
            c = l.q;
            D.u(l)
        } else l = this.n(1).copy(),
        l.x -= c,
        l.y -= d,
        0 !== this.computeShortLength(!0) && (e = bs(this, e, !0, g)),
        0 !== this.computeShortLength(!1) && (l = bs(this, l, !1, g)),
        c = new bf(sf),
        c.ma = e.x,
        c.ka = e.y,
        c.H = l.x,
        c.I = l.y;
        return c
    };
    function ds(a, b, c, d) {
        a = c - a;
        if (isNaN(a) || Infinity === a || -Infinity === a) return NaN;
        0 > a && (a = -a);
        b = d - b;
        if (isNaN(b) || Infinity === b || -Infinity === b) return NaN;
        0 > b && (b = -b);
        return yb(a, 0) ? b: yb(b, 0) ? a: Math.sqrt(a * a + b * b)
    }
    function bs(a, b, c, d) {
        var e = a.ta;
        if (2 > e) return b;
        if (c) {
            var g = a.n(1);
            c = g.x - d.x;
            d = g.y - d.y;
            g = ds(b.x, b.y, c, d);
            if (0 === g) return b;
            e = 2 === e ? .5 * g: g;
            a = a.computeShortLength(!0);
            a > e && (a = e);
            c = a * (c - b.x) / g;
            a = a * (d - b.y) / g;
            b.x += c;
            b.y += a
        } else {
            g = a.n(e - 2);
            c = g.x - d.x;
            d = g.y - d.y;
            g = ds(b.x, b.y, c, d);
            if (0 === g) return b;
            e = 2 === e ? .5 * g: g;
            a = a.computeShortLength(!1);
            a > e && (a = e);
            c = a * (b.x - c) / g;
            a = a * (b.y - d) / g;
            b.x -= c;
            b.y -= a
        }
        return b
    }
    function cs(a, b, c, d) {
        for (var e = a.ta,
        g = b; yb(b.x, g.x) && yb(b.y, g.y);) {
            if (c >= e) return e - 1;
            g = a.n(c++)
        }
        if (!yb(b.x, g.x) && !yb(b.y, g.y)) return c - 1;
        for (var h = g; yb(b.x, g.x) && yb(g.x, h.x) && (!d || (b.y >= g.y ? g.y >= h.y: g.y <= h.y)) || yb(b.y, g.y) && yb(g.y, h.y) && (!d || (b.x >= g.x ? g.x >= h.x: g.x <= h.x));) {
            if (c >= e) return e - 1;
            h = a.n(c++)
        }
        return c - 2
    }
    function es(a, b, c, d, e, g, h) {
        if (!h && Qr(a)) {
            h = [];
            var k = 0;
            a.isVisible() && (k = fs(a, e, g, h));
            var l = e.x,
            l = e.y;
            if (0 < k) if (Q(e.y, g.y)) if (e.x < g.x) for (var m = 0; m < k;) {
                var n = Math.max(e.x, Math.min(h[m++] - 5, g.x - 10));
                b.lineTo(n + c, g.y + d);
                for (var l = n + c,
                p = Math.min(n + 10, g.x); m < k;) {
                    var q = h[m];
                    if (q < p + 10) m++,
                    p = Math.min(q + 5, g.x);
                    else break
                }
                q = (n + p) / 2 + c;
                q = g.y - 10 + d;
                n = p + c;
                p = g.y + d;
                a.gf === mj ? T(b, n, p, !1, !1) : V(b, l, q, n, q, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.x, Math.max(h[m--] + 5, g.x + 10));
                b.lineTo(n + c, g.y + d);
                l = n + c;
                for (p = Math.max(n - 10, g.x); 0 <= m;) if (q = h[m], q > p - 10) m--,
                p = Math.max(q - 5, g.x);
                else break;
                q = g.y - 10 + d;
                n = p + c;
                p = g.y + d;
                a.gf === mj ? T(b, n, p, !1, !1) : V(b, l, q, n, q, n, p)
            } else if (Q(e.x, g.x)) if (e.y < g.y) for (m = 0; m < k;) {
                n = Math.max(e.y, Math.min(h[m++] - 5, g.y - 10));
                b.lineTo(g.x + c, n + d);
                l = n + d;
                for (p = Math.min(n + 10, g.y); m < k;) if (q = h[m], q < p + 10) m++,
                p = Math.min(q + 5, g.y);
                else break;
                q = g.x - 10 + c;
                n = g.x + c;
                p += d;
                a.gf === mj ? T(b, n, p, !1, !1) : V(b, q, l, q, p, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.y, Math.max(h[m--] + 5, g.y + 10));
                b.lineTo(g.x + c, n + d);
                l = n + d;
                for (p = Math.max(n - 10, g.y); 0 <= m;) if (q = h[m], q > p - 10) m--,
                p = Math.max(q - 5, g.y);
                else break;
                q = g.x - 10 + c;
                n = g.x + c;
                p += d;
                a.gf === mj ? T(b, n, p, !1, !1) : V(b, q, l, q, p, n, p)
            }
        }
        b.lineTo(g.x + c, g.y + d)
    }
    function fs(a, b, c, d) {
        var e = a.g;
        if (null === e || b.O(c)) return 0;
        for (e = e.ao; e.next();) {
            var g = e.value;
            if (null !== g && g.visible) for (var g = g.pb.o,
            h = g.length,
            k = 0; k < h; k++) {
                var l = g[k];
                if (l instanceof J) {
                    if (l === a) return 0 < d.length && d.sort(function(a, b) {
                        return a - b
                    }),
                    d.length;
                    if (l.isVisible() && Qr(l)) {
                        var m = l.qo;
                        m.F() && a.qo.Wg(m) && !a.usesSamePort(l) && (m = l.path, null !== m && m.Nj() && gs(b, c, d, l))
                    }
                }
            }
        }
        0 < d.length && d.sort(function(a, b) {
            return a - b
        });
        return d.length
    }
    function gs(a, b, c, d) {
        for (var e = Q(a.y, b.y), g = d.ta, h = d.n(0), k = D.P(), l = 1; l < g; l++) {
            var m = d.n(l);
            if (l < g - 1) {
                var n = d.n(l + 1);
                if (h.y === m.y && m.y === n.y) {
                    if (m.x > h.x && n.x > m.x || m.x < h.x && n.x < m.x) m = n,
                    l++
                } else h.x === m.x && m.x === n.x && (m.y > h.y && n.y > m.y || m.y < h.y && n.y < m.y) && (m = n, l++)
            }
            a: {
                var n = k,
                p = a.x,
                q = a.y,
                r = b.x,
                s = b.y,
                u = h.x,
                h = h.y,
                t = m.x,
                y = m.y;
                if (!Q(p, r)) {
                    if (Q(q, s) && Q(u, t) && Math.min(p, r) < u && Math.max(p, r) > u && Math.min(h, y) < q && Math.max(h, y) > q && !Q(h, y)) {
                        n.x = u;
                        n.y = q;
                        n = !0;
                        break a
                    }
                } else if (!Q(q, s) && Q(h, y) && Math.min(q, s) < h && Math.max(q, s) > h && Math.min(u, t) < p && Math.max(u, t) > p && !Q(u, t)) {
                    n.x = p;
                    n.y = h;
                    n = !0;
                    break a
                }
                n.x = 0;
                n.y = 0;
                n = !1
            }
            n && (e ? c.push(k.x) : c.push(k.y));
            h = m
        }
        D.A(k)
    }
    D.w(J, {
        ju: "firstPickIndex"
    },
    function() {
        var a;
        2 >= this.ta ? a = 0 : ((a = this.qc) || (a = this.computeSpot(!0) !== bc), a = a ? 1 : 0);
        return a
    });
    D.w(J, {
        ay: "lastPickIndex"
    },
    function() {
        var a = this.ta;
        if (0 === a) a = 0;
        else if (2 >= a) a -= 1;
        else {
            var b; (b = this.qc) || (b = this.computeSpot(!1) !== bc);
            a = b ? a - 2 : a - 1
        }
        return a
    });
    function Qr(a) {
        a = a.gf;
        return a === lj || a === mj
    }
    function Sr(a, b) {
        if (b || Qr(a)) {
            var c = a.g;
            null === c || c.sl.contains(a) || null === a.Iw || c.sl.add(a, a.Iw)
        }
    }
    function oj(a, b) {
        var c = a.layer;
        if (null !== c && c.visible && !c.Tc) {
            var d = c.g;
            if (null !== d) for (var e = !1,
            d = d.ao; d.next();) {
                var g = d.value;
                if (g.visible) if (g === c) for (var e = !0,
                h = !1,
                g = g.pb.o,
                k = g.length,
                l = 0; l < k; l++) {
                    var m = g[l];
                    m instanceof J && (m === a ? h = !0 : h && hs(a, m, b))
                } else if (e) for (g = g.pb.o, k = g.length, l = 0; l < k; l++) m = g[l],
                m instanceof J && hs(a, m, b)
            }
        }
    }
    function hs(a, b, c) {
        if (null !== b && null !== b.ob && Qr(b)) {
            var d = b.qo;
            d.F() && (a.qo.Wg(d) || c.Wg(d)) && (a.usesSamePort(b) || b.Re())
        }
    }
    J.prototype.usesSamePort = function(a) {
        var b = this.ta,
        c = a.ta;
        if (0 < b && 0 < c) {
            var d = this.n(0),
            e = a.n(0);
            if (d.Sc(e)) return ! 0;
            b = this.n(b - 1);
            a = a.n(c - 1);
            if (b.Sc(a) || d.Sc(a) || b.Sc(e)) return ! 0
        } else if (this.aa === a.aa || this.da === a.da || this.aa === a.da || this.da === a.aa) return ! 0;
        return ! 1
    };
    J.prototype.isVisible = function() {
        if (!F.prototype.isVisible.call(this)) return ! 1;
        var a = this.Pa,
        b = !0,
        c = this.g;
        null !== c && (b = c.$d);
        var d = this.aa;
        if (null !== d) {
            if (this.Uc && b && !d.rd) return ! 1;
            if (d === a) return ! 0;
            for (c = d; null !== c;) {
                if (c.zc === this) return ! 0;
                c = c.Pa
            }
            c = d.findVisibleNode();
            if (null === c || c === a) return ! 1
        }
        d = this.da;
        if (null !== d) {
            if (this.Uc && !b && !d.rd) return ! 1;
            if (d === a) return ! 0;
            for (c = d; null !== c;) {
                if (c.zc === this) return ! 0;
                c = c.Pa
            }
            b = d.findVisibleNode();
            if (null === b || b === a) return ! 1
        }
        return ! 0
    };
    J.prototype.Hd = function(a) {
        F.prototype.Hd.call(this, a);
        null !== this.Mi && this.Mi.wq();
        if (null !== this.zf) for (var b = this.zf.j; b.next();) b.value.Hd(a)
    };
    D.defineProperty(J, {
        St: "adjusting"
    },
    function() {
        return this.cr
    },
    function(a) {
        var b = this.cr;
        b !== a && (v && D.Ca(a, J, J, "adjusting"), this.cr = a, this.i("adjusting", b, a))
    });
    D.defineProperty(J, {
        yA: "corner"
    },
    function() {
        return this.xr
    },
    function(a) {
        var b = this.xr;
        b !== a && (v && D.h(a, "number", J, "corner"), this.xr = a, this.Re(), this.i("corner", b, a))
    });
    D.defineProperty(J, {
        gf: "curve"
    },
    function() {
        return this.Ar
    },
    function(a) {
        var b = this.Ar;
        b !== a && (v && D.Ca(a, J, J, "curve"), this.Ar = a, this.fc(), this.Re(), Sr(this, b === mj || b === lj || a === mj || a === lj), this.i("curve", b, a))
    });
    D.defineProperty(J, {
        yx: "curviness"
    },
    function() {
        return this.Br
    },
    function(a) {
        var b = this.Br;
        b !== a && (v && D.h(a, "number", J, "curviness"), this.Br = a, this.fc(), this.Re(), this.i("curviness", b, a))
    });
    D.defineProperty(J, {
        Ay: "routing"
    },
    function() {
        return this.mn
    },
    function(a) {
        var b = this.mn;
        b !== a && (v && D.Ca(a, J, J, "routing"), this.mn = a, this.Yi = null, this.fc(), Sr(this, 2 === (b.value & 2) || 2 === (a.value & 2)), this.i("routing", b, a))
    });
    D.defineProperty(J, {
        Tq: "smoothness"
    },
    function() {
        return this.wt
    },
    function(a) {
        var b = this.wt;
        b !== a && (v && D.h(a, "number", J, "smoothness"), this.wt = a, this.Re(), this.i("smoothness", b, a))
    });
    function Or(a) {
        var b = a.yg;
        if (null !== b) {
            var c = a.Pg;
            if (null !== c) {
                var d = a.ci;
                a = a.xi;
                for (var e = null,
                g = null,
                h = b.uc.o,
                k = h.length,
                l = 0; l < k; l++) {
                    var m = h[l];
                    if (m.yg === b && m.ci === d && m.Pg === c && m.xi === a || m.yg === c && m.ci === a && m.Pg === b && m.xi === d) null === g ? g = m: (null === e && (e = [], e.push(g)), e.push(m))
                }
                if (null !== e) {
                    g = zr(b, c, d, a);
                    null === g && (g = new Dl, g.Eq = b, g.py = d, g.Lu = c, g.qy = a, yr(b, g), yr(c, g));
                    g.links = e;
                    for (l = 0; l < e.length; l++) m = e[l],
                    m.Mi = g;
                    g.wq()
                }
            }
        }
    }
    function Nr(a) {
        var b = a.Mi;
        null !== b && (a.Mi = null, a = b.links.indexOf(a), 0 <= a && (D.Sg(b.links, a), b.wq()))
    }
    function Dl() {
        D.tc(this);
        this.dw = !1;
        this.qy = this.Lu = this.py = this.Eq = null;
        this.links = []
    }
    Dl.prototype.wq = function() {
        if (!this.dw) {
            var a = this.links;
            0 < a.length && (a = a[0].g, null !== a && a.eD.add(this))
        }
        this.dw = !0
    };
    Dl.prototype.XB = function() {
        if (this.dw) {
            this.dw = !1;
            var a = this.links;
            if (0 < a.length) {
                var b = a[0],
                c = b.g;
                b.arrangeBundledLinks(a, null === c || c.Zn);
                1 === a.length && (b.Mi = null, a.length = 0)
            }
            0 === a.length && (a = this.Eq, null !== this && null !== a.Xh && a.Xh.remove(this), a = this.Lu, null !== this && null !== a.Xh && a.Xh.remove(this))
        }
    };
    D.ke(Dl, {
        Eq: !0,
        py: !0,
        Lu: !0,
        qy: !0,
        links: !0,
        spacing: !0
    });
    function In() {
        D.tc(this);
        this.KB = this.group = null;
        this.vq = !0;
        this.abort = !1;
        this.Wf = this.Vf = 1;
        this.ys = this.xs = -1;
        this.Md = this.ce = 8;
        this.wd = null;
        this.jH = !1;
        this.SG = 22;
        this.ZF = 111
    }
    D.ke(In, {
        group: !0,
        KB: !0,
        vq: !0,
        abort: !0,
        jH: !0,
        SG: !0,
        ZF: !0
    });
    In.prototype.initialize = function(a) {
        if (! (0 >= a.width || 0 >= a.height)) {
            var b = a.y,
            c = a.x + a.width,
            d = a.y + a.height;
            this.Vf = Math.floor((a.x - this.ce) / this.ce) * this.ce;
            this.Wf = Math.floor((b - this.Md) / this.Md) * this.Md;
            this.xs = Math.ceil((c + 2 * this.ce) / this.ce) * this.ce;
            this.ys = Math.ceil((d + 2 * this.Md) / this.Md) * this.Md;
            a = 1 + (Math.ceil((this.xs - this.Vf) / this.ce) | 0);
            b = 1 + (Math.ceil((this.ys - this.Wf) / this.Md) | 0);
            if (null === this.wd || this.yn < a - 1 || this.zn < b - 1) {
                c = [];
                for (d = 0; d <= a; d++) {
                    for (var e = [], g = 0; g <= b; g++) e[g] = 0;
                    c[d] = e
                }
                this.wd = c;
                this.yn = a - 1;
                this.zn = b - 1
            }
            if (null !== this.wd) for (a = 0; a <= this.yn; a++) for (b = 0; b <= this.zn; b++) this.wd[a][b] = 999999
        }
    };
    D.w(In, {
        sb: null
    },
    function() {
        return new B(this.Vf, this.Wf, this.xs - this.Vf, this.ys - this.Wf)
    });
    D.defineProperty(In, {
        cq: null
    },
    function() {
        return this.ce
    },
    function(a) {
        0 < a && a !== this.ce && (this.ce = a, this.initialize(this.sb))
    });
    D.defineProperty(In, {
        aq: null
    },
    function() {
        return this.Md
    },
    function(a) {
        0 < a && a !== this.Md && (this.Md = a, this.initialize(this.sb))
    });
    function is(a, b, c) {
        return a.Vf <= b && b <= a.xs && a.Wf <= c && c <= a.ys
    }
    function $r(a, b, c) {
        if (!is(a, b, c)) return 0;
        b -= a.Vf;
        b /= a.ce;
        c -= a.Wf;
        c /= a.Md;
        return a.wd[b | 0][c | 0]
    }
    function Ln(a, b, c) {
        is(a, b, c) && (b -= a.Vf, b /= a.ce, c -= a.Wf, c /= a.Md, a.wd[b | 0][c | 0] = 0)
    }
    function Kn(a) {
        if (null !== a.wd) for (var b = 0; b <= a.yn; b++) for (var c = 0; c <= a.zn; c++) 1 <= a.wd[b][c] && (a.wd[b][c] |= 999999)
    }
    In.prototype.vm = function(a, b, c, d) {
        if (a > this.xs || a + c < this.Vf || b > this.ys || b + d < this.Wf) return ! 0;
        a = (a - this.Vf) / this.ce | 0;
        b = (b - this.Wf) / this.Md | 0;
        c = Math.max(0, c) / this.ce + 1 | 0;
        var e = Math.max(0, d) / this.Md + 1 | 0;
        0 > a && (c += a, a = 0);
        0 > b && (e += b, b = 0);
        if (0 > c || 0 > e) return ! 0;
        d = Math.min(a + c - 1, this.yn) | 0;
        for (c = Math.min(b + e - 1, this.zn) | 0; a <= d; a++) for (e = b; e <= c; e++) if (0 === this.wd[a][e]) return ! 1;
        return ! 0
    };
    function js(a, b, c, d, e, g, h, k, l) {
        if (! (b < g || b > h || c < k || c > l)) {
            var m, n;
            m = b | 0;
            n = c | 0;
            var p = a.wd[m][n];
            if (1 <= p && 999999 > p) for (e ? n += d: m += d, p += 1; g <= m && m <= h && k <= n && n <= l && !(p >= a.wd[m][n]);) a.wd[m][n] = p,
            p += 1,
            e ? n += d: m += d;
            m = e ? n: m;
            if (e) if (0 < d) for (c += d; c < m; c += d) js(a, b, c, 1, !e, g, h, k, l),
            js(a, b, c, -1, !e, g, h, k, l);
            else for (c += d; c > m; c += d) js(a, b, c, 1, !e, g, h, k, l),
            js(a, b, c, -1, !e, g, h, k, l);
            else if (0 < d) for (b += d; b < m; b += d) js(a, b, c, 1, !e, g, h, k, l),
            js(a, b, c, -1, !e, g, h, k, l);
            else for (b += d; b > m; b += d) js(a, b, c, 1, !e, g, h, k, l),
            js(a, b, c, -1, !e, g, h, k, l)
        }
    }
    function ks(a, b, c, d, e, g, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0,
        n = 1;
        for (a.wd[b][c] = n; 0 === m && b > g && b < h && c > k && c < l;) n += 1,
        a.wd[b][c] = n,
        e ? c += d: b += d,
        m = a.wd[b][c]
    }
    function ls(a, b, c, d, e, g, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0;
        for (a.wd[b][c] = 999999; 0 === m && b > g && b < h && c > k && c < l;) a.wd[b][c] = 999999,
        e ? c += d: b += d,
        m = a.wd[b][c]
    }
    function Zr(a, b, c, d, e, g) {
        if (null !== a.wd) {
            a.abort = !1;
            var h = b.x,
            k = b.y;
            if (is(a, h, k) && (h -= a.Vf, h /= a.ce, k -= a.Wf, k /= a.Md, b = d.x, d = d.y, is(a, b, d))) if (b -= a.Vf, b /= a.ce, d -= a.Wf, d /= a.Md, 1 >= Math.abs(h - b) && 1 >= Math.abs(k - d)) a.abort = !0;
            else {
                var l = g.x,
                m = g.y,
                n = g.x + g.width,
                p = g.y + g.height,
                l = l - a.Vf,
                l = l / a.ce,
                m = m - a.Wf,
                m = m / a.Md,
                n = n - a.Vf,
                n = n / a.ce,
                p = p - a.Wf,
                p = p / a.Md;
                g = Math.max(0, Math.min(a.yn, l | 0));
                n = Math.min(a.yn, Math.max(0, n | 0));
                m = Math.max(0, Math.min(a.zn, m | 0));
                p = Math.min(a.zn, Math.max(0, p | 0));
                h |= 0;
                k |= 0;
                b |= 0;
                d |= 0;
                l = 90 === c || 270 === c;
                ks(a, h, k, 0 === c || 90 === c ? 1 : -1, l, g, n, m, p);
                ks(a, h, k, 1, !l, g, n, m, p);
                ks(a, h, k, -1, !l, g, n, m, p);
                ls(a, b, d, 0 === e || 90 === e ? 1 : -1, 90 === e || 270 === e, g, n, m, p);
                ls(a, b, d, 1, !(90 === e || 270 === e), g, n, m, p);
                ls(a, b, d, -1, !(90 === e || 270 === e), g, n, m, p);
                a.abort || (js(a, h, k, 1, !1, g, n, m, p), js(a, h, k, -1, !1, g, n, m, p), js(a, h, k, 1, !0, g, n, m, p), js(a, h, k, -1, !0, g, n, m, p))
            }
        }
    }
    function Xr() {
        D.tc(this);
        this.port = this.Vc = null;
        this.kg = [];
        this.Dq = !1
    }
    D.ke(Xr, {
        Vc: !0,
        port: !0,
        kg: !0,
        Dq: !0
    });
    Xr.prototype.toString = function() {
        for (var a = this.kg,
        b = this.Vc.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++) {
            var d = a[c];
            null !== d && (b += "\n  " + d.toString())
        }
        return b
    };
    function ms(a, b, c, d) {
        b = b.offsetY;
        switch (b) {
        case D.kd:
            return 90;
        case D.Yc:
            return 180;
        case D.ud:
            return 270;
        case D.ld:
            return 0
        }
        switch (b) {
        case D.kd | D.ud: return 180 < c ? 270 : 90;
        case D.Yc | D.ld: return 90 < c && 270 >= c ? 180 : 0
        }
        a = 180 * Math.atan2(a.height, a.width) / Math.PI;
        switch (b) {
        case D.Yc | D.ud: return c > a && c <= 180 + a ? 180 : 270;
        case D.ud | D.ld: return c > 180 - a && c <= 360 - a ? 270 : 0;
        case D.ld | D.kd: return c > a && c <= 180 + a ? 90 : 0;
        case D.kd | D.Yc: return c > 180 - a && c <= 360 - a ? 180 : 90;
        case D.Yc | D.ud | D.ld: return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 - a ? 270 : 0;
        case D.ud | D.ld | D.kd: return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
        case D.ld | D.kd | D.Yc: return c > a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
        case D.kd | D.Yc | D.ud: return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
        }
        d && b !== (D.Yc | D.ud | D.ld | D.kd) && (c -= 15, 0 > c && (c += 360));
        return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
    }
    Xr.prototype.wq = function() {
        this.kg.length = 0
    };
    function Yr(a, b) {
        var c = a.kg;
        if (0 === c.length) {
            a: if (!a.Dq) {
                c = a.Dq;
                a.Dq = !0;
                var d, e = null,
                g = a.Vc,
                g = g instanceof I ? g: null;
                if (null === g || g.Je) d = a.Vc.lF(a.port.sd);
                else {
                    if (!g.$.F()) {
                        a.Dq = c;
                        break a
                    }
                    e = g;
                    d = e.kF()
                }
                var h = a.kg.length = 0,
                k = a.port.eb(cc, D.P()),
                l = a.port.eb(rc, D.P()),
                g = D.gh(k.x, k.y, 0, 0);
                g.Ki(l);
                D.A(k);
                D.A(l);
                k = D.Fb(g.x + g.width / 2, g.y + g.height / 2);
                for (d = d.j; d.next();) if (l = d.value, l.isVisible()) {
                    var m = l.dd === a.port || l.aa.Ei(e),
                    n = l.computeSpot(m);
                    if (n.Kj() && (m = m ? l.Ld: l.dd, null !== m)) {
                        var p = m.Y;
                        if (null !== p) {
                            var m = l.computeOtherPoint(p, m),
                            p = k.Jc(m),
                            n = ms(g, n, p, l.qc),
                            q = 0;
                            0 === n ? (q = D.ld, 180 < p && (p -= 360)) : q = 90 === n ? D.kd: 180 === n ? D.Yc: D.ud;
                            n = a.kg[h];
                            void 0 === n ? (n = new ns(l, p, q), a.kg[h] = n) : (n.link = l, n.angle = p, n.Ke = q);
                            n.ny.set(m);
                            h++
                        }
                    }
                }
                D.A(k);
                a.kg.sort(Xr.prototype.LJ);
                e = a.kg.length;
                k = -1;
                for (h = d = 0; h < e; h++) n = a.kg[h],
                void 0 !== n && (n.Ke !== k && (k = n.Ke, d = 0), n.tq = d, d++);
                k = -1;
                d = 0;
                for (h = e - 1; 0 <= h; h--) n = a.kg[h],
                void 0 !== n && (n.Ke !== k && (k = n.Ke, d = n.tq + 1), n.Kn = d);
                h = a.kg;
                m = a.port;
                e = a.Vc.QJ;
                k = D.P();
                d = D.P();
                l = D.P();
                n = D.P();
                m.eb(cc, k);
                m.eb(ec, d);
                m.eb(rc, l);
                m.eb(pc, n);
                var r = q = p = m = 0;
                if (e === xr) for (var s = 0; s < h.length; s++) {
                    var u = h[s];
                    if (null !== u) {
                        var t = u.link.computeThickness();
                        switch (u.Ke) {
                        case D.kd:
                            q += t;
                            break;
                        case D.Yc:
                            r += t;
                            break;
                        case D.ud:
                            m += t;
                            break;
                        default:
                        case D.ld:
                            p += t
                        }
                    }
                }
                for (var y = 0,
                w = 0,
                C = 1,
                s = 0; s < h.length; s++) if (u = h[s], null !== u) {
                    var A, N;
                    if (y !== u.Ke) {
                        y = u.Ke;
                        switch (y) {
                        case D.kd:
                            A = l;
                            N = n;
                            break;
                        case D.Yc:
                            A = n;
                            N = k;
                            break;
                        case D.ud:
                            A = k;
                            N = d;
                            break;
                        default:
                        case D.ld:
                            A = d,
                            N = l
                        }
                        var H = N.x - A.x;
                        N = N.y - A.y;
                        switch (y) {
                        case D.kd:
                            q > Math.abs(H) ? (C = Math.abs(H) / q, q = Math.abs(H)) : C = 1;
                            break;
                        case D.Yc:
                            r > Math.abs(N) ? (C = Math.abs(N) / r, r = Math.abs(N)) : C = 1;
                            break;
                        case D.ud:
                            m > Math.abs(H) ? (C = Math.abs(H) / m, m = Math.abs(H)) : C = 1;
                            break;
                        default:
                        case D.ld:
                            p > Math.abs(N) ? (C = Math.abs(N) / p, p = Math.abs(N)) : C = 1
                        }
                        w = 0
                    }
                    var W = u.Bq;
                    if (e === xr) {
                        t = u.link.computeThickness();
                        t *= C;
                        W.set(A);
                        switch (y) {
                        case D.kd:
                            W.x = A.x + H / 2 + q / 2 - w - t / 2;
                            break;
                        case D.Yc:
                            W.y = A.y + N / 2 + r / 2 - w - t / 2;
                            break;
                        case D.ud:
                            W.x = A.x + H / 2 - m / 2 + w + t / 2;
                            break;
                        default:
                        case D.ld:
                            W.y = A.y + N / 2 - p / 2 + w + t / 2
                        }
                        w += t
                    } else t = .5,
                    e === ur && (t = (u.tq + 1) / (u.Kn + 1)),
                    W.x = A.x + H * t,
                    W.y = A.y + N * t
                }
                D.A(k);
                D.A(d);
                D.A(l);
                D.A(n);
                A = a.kg;
                for (H = 0; H < A.length; H++) N = A[H],
                null !== N && (N.Dx = a.computeEndSegmentLength(N));
                a.Dq = c;
                D.Mb(g)
            }
            c = a.kg
        }
        for (g = 0; g < c.length; g++) if (A = c[g], null !== A && A.link === b) return A;
        return null
    }
    Xr.prototype.LJ = function(a, b) {
        return a === b ? 0 : null === a ? -1 : null === b ? 1 : a.Ke < b.Ke ? -1 : a.Ke > b.Ke ? 1 : a.angle < b.angle ? -1 : a.angle > b.angle ? 1 : 0
    };
    Xr.prototype.computeEndSegmentLength = function(a) {
        var b = a.link,
        c = b.computeEndSegmentLength(this.Vc, this.port, bc, b.dd === this.port),
        d = a.tq;
        if (0 > d) return c;
        var e = a.Kn;
        if (1 >= e || !b.qc) return c;
        var b = a.ny,
        g = a.Bq;
        if (a.Ke === D.Yc || a.Ke === D.kd) d = e - 1 - d;
        return ((a = a.Ke === D.Yc || a.Ke === D.ld) ? b.y < g.y: b.x < g.x) ? c + 8 * d: (a ? b.y === g.y: b.x === g.x) ? c: c + 8 * (e - 1 - d)
    };
    function ns(a, b, c) {
        this.link = a;
        this.angle = b;
        this.Ke = c;
        this.ny = new O;
        this.Kn = this.tq = 0;
        this.Bq = new O;
        this.Dx = 0
    }
    D.ke(ns, {
        link: !0,
        angle: !0,
        Ke: !0,
        ny: !0,
        tq: !0,
        Kn: !0,
        Bq: !0,
        Dx: !0
    });
    ns.prototype.toString = function() {
        return this.link.toString() + " " + this.angle.toString() + " " + this.Ke.toString() + ":" + this.tq.toString() + "/" + this.Kn.toString() + " " + this.Bq.toString() + " " + this.Dx.toString() + " " + this.ny.toString()
    };
    function Bo() {
        this.Gk = this.jk = Tc;
        this.Ek = this.hk = NaN;
        this.Dk = this.gk = vr;
        this.Fk = this.ik = NaN;
        this.Ht = this.Tr = null;
        this.It = this.Ur = Infinity
    }
    Bo.prototype.copy = function() {
        var a = new Bo;
        a.jk = this.jk.V();
        a.Gk = this.Gk.V();
        a.hk = this.hk;
        a.Ek = this.Ek;
        a.gk = this.gk;
        a.Dk = this.Dk;
        a.ik = this.ik;
        a.Fk = this.Fk;
        a.Tr = this.Tr;
        a.Ht = this.Ht;
        a.Ur = this.Ur;
        a.It = this.It;
        return a
    };
    function I(a) {
        G.call(this, a);
        this.Ba |= 4608;
        this.As = new L(F);
        this.en = new L(I);
        this.Qb = this.At = this.Il = this.Bs = this.zs = null;
        this.te = new Tg;
        this.te.group = this
    }
    D.Sa(I, G);
    D.ja("Group", I);
    I.prototype.cloneProtected = function(a) {
        G.prototype.cloneProtected.call(this, a);
        this.Ba &= -32769;
        a.zs = this.zs;
        a.Bs = this.Bs;
        a.Il = this.Il;
        a.At = this.At;
        var b = a.gu(function(a) {
            return a instanceof Rj
        });
        a.Qb = b instanceof Rj ? b: null;
        null !== this.te ? (a.te = this.te.copy(), a.te.group = a) : (null !== a.te && (a.te.group = null), a.te = null)
    };
    I.prototype.Bi = function(a) {
        G.prototype.Bi.call(this, a);
        var b = a.pq();
        for (a = a.Mc; a.next();) {
            var c = a.value;
            c.K();
            c.N(8);
            c.Zt();
            if (c instanceof G) c.fg(b);
            else if (c instanceof J) for (c = c.If; c.next();) c.value.fg(b)
        }
    };
    I.prototype.po = function(a, b, c, d, e, g, h) {
        if (a === mg && "elements" === b) if (e instanceof Rj) {
            var k = e;
            null === this.Qb ? this.Qb = k: this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of a Group.")
        } else e instanceof x && (k = e.gu(function(a) {
            return a instanceof Rj
        }), k instanceof Rj && (null === this.Qb ? this.Qb = k: this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of a Group.")));
        else a === ng && "elements" === b && null !== this.Qb && (d === this.Qb ? this.Qb = null: d instanceof x && this.Qb.tm(d) && (this.Qb = null));
        G.prototype.po.call(this, a, b, c, d, e, g, h)
    };
    I.prototype.yj = function(a, b, c, d) {
        this.Hl = this.Qb;
        x.prototype.yj.call(this, a, b, c, d)
    };
    I.prototype.um = function() {
        if (!G.prototype.um.call(this)) return ! 1;
        for (var a = this.Mc; a.next();) {
            var b = a.value;
            if (b instanceof G) {
                if (b.isVisible() && Im(b)) return ! 1
            } else if (b instanceof J && b.isVisible() && Im(b) && b.aa !== this && b.da !== this) return ! 1
        }
        return ! 0
    };
    D.w(I, {
        placeholder: "placeholder"
    },
    function() {
        return this.Qb
    });
    D.defineProperty(I, {
        eI: "computesBoundsAfterDrag"
    },
    function() {
        return 0 !== (this.Ba & 2048)
    },
    function(a) {
        var b = 0 !== (this.Ba & 2048);
        b !== a && (D.h(a, "boolean", I, "computesBoundsAfterDrag"), this.Ba ^= 2048, this.i("computesBoundsAfterDrag", b, a))
    });
    D.defineProperty(I, {
        ux: "computesBoundsIncludingLinks"
    },
    function() {
        return 0 !== (this.Ba & 4096)
    },
    function(a) {
        D.h(a, "boolean", I, "computesBoundsIncludingLinks");
        var b = 0 !== (this.Ba & 4096);
        b !== a && (this.Ba ^= 4096, this.i("computesBoundsIncludingLinks", b, a))
    });
    D.defineProperty(I, {
        fI: "computesBoundsIncludingLocation"
    },
    function() {
        return 0 !== (this.Ba & 8192)
    },
    function(a) {
        D.h(a, "boolean", I, "computesBoundsIncludingLocation");
        var b = 0 !== (this.Ba & 8192);
        b !== a && (this.Ba ^= 8192, this.i("computesBoundsIncludingLocation", b, a))
    });
    D.defineProperty(I, {
        UI: "handlesDragDropForMembers"
    },
    function() {
        return 0 !== (this.Ba & 16384)
    },
    function(a) {
        D.h(a, "boolean", I, "handlesDragDropForMembers");
        var b = 0 !== (this.Ba & 16384);
        b !== a && (this.Ba ^= 16384, this.i("handlesDragDropForMembers", b, a))
    });
    D.w(I, {
        Mc: "memberParts"
    },
    function() {
        return this.As.j
    });
    function qr(a, b) {
        if (a.As.add(b)) {
            b instanceof I && a.en.add(b);
            var c = a.DJ;
            if (null !== c) {
                var d = !0,
                e = a.g;
                null !== e && (d = e.ab, e.ab = !0);
                c(a, b);
                null !== e && (e.ab = d)
            }
            a.isVisible() && a.Je || b.Hd(!1)
        }
        b instanceof J && !a.ux || (c = a.Qb, null === c && (c = a), c.K())
    }
    function pr(a, b) {
        if (a.As.remove(b)) {
            b instanceof I && a.en.remove(b);
            var c = a.EJ;
            if (null !== c) {
                var d = !0,
                e = a.g;
                null !== e && (d = e.ab, e.ab = !0);
                c(a, b);
                null !== e && (e.ab = d)
            }
            a.isVisible() && a.Je || b.Hd(!0)
        }
        b instanceof J && !a.ux || (c = a.Qb, null === c && (c = a), c.K())
    }
    I.prototype.Mn = function() {
        if (0 < this.As.count) {
            var a = this.g;
            if (null !== a) for (var b = this.As.copy().j; b.next();) a.remove(b.value)
        }
        G.prototype.Mn.call(this)
    };
    D.defineProperty(I, {
        Vb: "layout"
    },
    function() {
        return this.te
    },
    function(a) {
        var b = this.te;
        b !== a && (null !== a && D.l(a, Tg, I, "layout"), null !== b && (b.g = null, b.group = null), this.te = a, null !== a && (a.g = this.g, a.group = this), this.i("layout", b, a))
    });
    D.defineProperty(I, {
        DJ: "memberAdded"
    },
    function() {
        return this.zs
    },
    function(a) {
        var b = this.zs;
        b !== a && (null !== a && D.h(a, "function", I, "memberAdded"), this.zs = a, this.i("memberAdded", b, a))
    });
    D.defineProperty(I, {
        EJ: "memberRemoved"
    },
    function() {
        return this.Bs
    },
    function(a) {
        var b = this.Bs;
        b !== a && (null !== a && D.h(a, "function", I, "memberRemoved"), this.Bs = a, this.i("memberRemoved", b, a))
    });
    D.defineProperty(I, {
        gB: "memberValidation"
    },
    function() {
        return this.Il
    },
    function(a) {
        var b = this.Il;
        b !== a && (null !== a && D.h(a, "function", I, "memberValidation"), this.Il = a, this.i("memberValidation", b, a))
    });
    I.prototype.canAddMembers = function(a) {
        var b = this.g;
        if (null === b) return ! 1;
        b = b.wb;
        for (a = Oh(a).j; a.next();) if (!b.isValidMember(this, a.value)) return ! 1;
        return ! 0
    };
    I.prototype.addMembers = function(a, b) {
        var c = this.g;
        if (null === c) return ! 1;
        for (var c = c.wb,
        d = !0,
        e = Oh(a).j; e.next();) {
            var g = e.value; ! b || c.isValidMember(this, g) ? g.Pa = this: d = !1
        }
        return d
    };
    D.defineProperty(I, {
        xK: "ungroupable"
    },
    function() {
        return 0 !== (this.Ba & 256)
    },
    function(a) {
        var b = 0 !== (this.Ba & 256);
        b !== a && (D.h(a, "boolean", I, "ungroupable"), this.Ba ^= 256, this.i("ungroupable", b, a))
    });
    I.prototype.canUngroup = function() {
        if (!this.xK) return ! 1;
        var a = this.layer;
        if (null !== a && !a.ox) return ! 1;
        a = a.g;
        return null === a || a.ox ? !0 : !1
    };
    I.prototype.fg = function(a) {
        void 0 === a && (a = null);
        var b = 0 !== (this.Ba & 65536);
        G.prototype.fg.call(this, a);
        if (!b) for (0 !== (this.Ba & 65536) !== !0 && (this.Ba ^= 65536), b = this.kF(); b.next();) {
            var c = b.value;
            if (null === a || !a.contains(c)) {
                var d = c.aa;
                null !== d && d !== this && d.Ei(this) && !d.isVisible() ? c.fc() : (d = c.da, null !== d && d !== this && d.Ei(this) && !d.isVisible() && c.fc())
            }
        }
    };
    I.prototype.findExternalLinksConnected = I.prototype.kF = function() {
        var a = this.pq();
        a.add(this);
        for (var b = new L(J), c = a.j; c.next();) {
            var d = c.value;
            if (d instanceof G) for (d = d.Gd; d.next();) {
                var e = d.value;
                a.contains(e) || b.add(e)
            }
        }
        return b.j
    };
    I.prototype.findExternalNodesConnected = function() {
        var a = this.pq();
        a.add(this);
        for (var b = new L(G), c = a.j; c.next();) {
            var d = c.value;
            if (d instanceof G) for (d = d.Gd; d.next();) {
                var e = d.value,
                g = e.aa;
                a.contains(g) && g !== this || b.add(g);
                e = e.da;
                a.contains(e) && e !== this || b.add(e)
            }
        }
        return b.j
    };
    I.prototype.findContainingGroupChain = function() {
        function a(b, d) {
            null !== b && (d.add(b), a(b.Pa, d))
        }
        var b = new L(I);
        a(this, b);
        return b
    };
    I.prototype.findSubGraphParts = I.prototype.pq = function() {
        var a = new L(F);
        Ih(a, this, !0, 0, !0);
        a.remove(this);
        return a
    };
    I.prototype.Hd = function(a) {
        G.prototype.Hd.call(this, a);
        for (var b = this.Mc; b.next();) b.value.Hd(a)
    };
    I.prototype.collapseSubGraph = I.prototype.collapseSubGraph = function() {
        var a = this.g;
        if (null !== a && !a.Oh) {
            a.Oh = !0;
            var b = this.pq();
            os(this, b, a.Xa, this);
            a.Oh = !1
        }
    };
    function os(a, b, c, d) {
        for (var e = a.Mc; e.next();) {
            var g = e.value;
            g.Hd(!1);
            if (g instanceof I) {
                var h = g;
                h.Je && (h.ZB = h.Je, os(h, b, c, d))
            }
            if (g instanceof G) g.fg(b),
            ll(c, g, d);
            else if (g instanceof J) for (g = g.If; g.next();) g.value.fg(b)
        }
        a.Je = !1
    }
    I.prototype.expandSubGraph = I.prototype.expandSubGraph = function() {
        var a = this.g;
        if (null !== a && !a.Oh) {
            a.Oh = !0;
            var b = this.pq();
            ps(this, b, a.Xa, this);
            a.Oh = !1
        }
    };
    function ps(a, b, c, d) {
        for (var e = a.Mc; e.next();) {
            var g = e.value;
            g.Hd(!0);
            if (g instanceof I) {
                var h = g;
                h.ZB && (h.ZB = !1, ps(h, b, c, d))
            }
            if (g instanceof G) g.fg(b),
            kl(c, g, d);
            else if (g instanceof J) for (g = g.If; g.next();) g.value.fg(b)
        }
        a.Je = !0
    }
    D.defineProperty(I, {
        Je: "isSubGraphExpanded"
    },
    function() {
        return 0 !== (this.Ba & 512)
    },
    function(a) {
        var b = 0 !== (this.Ba & 512);
        if (b !== a) {
            D.h(a, "boolean", I, "isSubGraphExpanded");
            this.Ba ^= 512;
            var c = this.g;
            this.i("isSubGraphExpanded", b, a);
            b = this.nK;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.ab, c.ab = !0);
                b(this);
                null !== c && (c.ab = d)
            }
            null !== c && c.ra.nb ? null !== this.Qb && this.Qb.K() : a ? this.expandSubGraph() : this.collapseSubGraph()
        }
    });
    D.defineProperty(I, {
        ZB: "wasSubGraphExpanded"
    },
    function() {
        return 0 !== (this.Ba & 1024)
    },
    function(a) {
        var b = 0 !== (this.Ba & 1024);
        b !== a && (D.h(a, "boolean", I, "wasSubGraphExpanded"), this.Ba ^= 1024, this.i("wasSubGraphExpanded", b, a))
    });
    D.defineProperty(I, {
        nK: "subGraphExpandedChanged"
    },
    function() {
        return this.At
    },
    function(a) {
        var b = this.At;
        b !== a && (null !== a && D.h(a, "function", I, "subGraphExpandedChanged"), this.At = a, this.i("subGraphExpandedChanged", b, a))
    });
    I.prototype.move = function(a) {
        var b = this.position,
        c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        var c = a.x - c,
        b = a.y - b,
        d = D.Fb(c, b);
        G.prototype.move.call(this, a);
        for (a = this.pq().j; a.next();) {
            var e = a.value;
            if (! (e instanceof J || e instanceof G && e.tf)) {
                var g = e.position,
                h = e.location;
                g.F() ? (d.x = g.x + c, d.y = g.y + b, e.position = d) : h.F() && (d.x = h.x + c, d.y = h.y + b, e.location = d)
            }
        }
        for (a.reset(); a.next();) e = a.value,
        e instanceof J && (g = e.position, d.x = g.x + c, d.y = g.y + b, e.move(d));
        D.A(d)
    };
    D.defineProperty(I, {
        mo: null
    },
    function() {
        return 0 !== (this.Ba & 32768)
    },
    function(a) {
        0 !== (this.Ba & 32768) !== a && (this.Ba ^= 32768)
    });
    function Rj() {
        P.call(this);
        this.of = Ud;
        this.kt = new B(NaN, NaN, NaN, NaN)
    }
    D.Sa(Rj, P);
    D.ja("Placeholder", Rj);
    Rj.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.of = this.of.V();
        a.kt = this.kt.copy()
    };
    Rj.prototype.Mk = function(a) {
        if (null === this.background && null === this.Zl) return ! 1;
        var b = this.Ga;
        return Pb(0, 0, b.width, b.height, a.x, a.y)
    };
    Rj.prototype.ho = function() {
        var a = this.Y;
        null !== a && (a instanceof I || a instanceof da) || D.k("Placeholder is not inside a Group or Adornment.");
        if (a instanceof I) {
            var b = this.computeBorder(this.kt),
            c = this.$c;
            wb(c, b.width || 0, b.height || 0);
            Go(this, 0, 0, c.width, c.height);
            for (var c = a.Mc,
            d = !1; c.next();) if (c.value.isVisible()) {
                d = !0;
                break
            } ! d || isNaN(b.x) || isNaN(b.y) || (c = new O, c.so(b, a.Kf), a.location = new O(c.x, c.y))
        } else {
            var b = this.Ea,
            c = this.$c,
            d = this.padding,
            e = d.left + d.right,
            g = d.top + d.bottom;
            if (b.F()) wb(c, b.width + e || 0, b.height + g || 0),
            Go(this, -d.left, -d.top, c.width, c.height);
            else {
                var h = a.zb,
                k = h.eb(cc, D.P()),
                b = D.gh(k.x, k.y, 0, 0);
                b.Ki(h.eb(rc, k));
                b.Ki(h.eb(ec, k));
                b.Ki(h.eb(pc, k));
                a.hj.m(b.x, b.y);
                wb(c, b.width + e || 0, b.height + g || 0);
                Go(this, -d.left, -d.top, c.width, c.height);
                D.A(k);
                D.Mb(b)
            }
        }
    };
    Rj.prototype.yj = function(a, b, c, d) {
        var e = this.$;
        e.x = a;
        e.y = b;
        e.width = c;
        e.height = d
    };
    Rj.prototype.computeBorder = function(a) {
        var b = this.Y;
        if (b instanceof I) {
            var c = b;
            if (c.eI && this.kt.F()) {
                var d = c.g;
                if (null !== d && (d = d.gb, d instanceof Mh && !d.Mr && null !== d.ec && !d.ec.contains(c))) return a.assign(this.kt),
                a
            }
        }
        var c = D.Nf(),
        d = this.computeMemberBounds(c),
        e = this.padding;
        a.m(d.x - e.left, d.y - e.top, Math.max(d.width + e.left + e.right, 0), Math.max(d.height + e.top + e.bottom, 0));
        D.Mb(c);
        b instanceof I && (c = b, c.fI && c.location.F() && a.Ki(c.location));
        return a
    };
    Rj.prototype.computeMemberBounds = function(a) {
        if (! (this.Y instanceof I)) return a.m(0, 0, 0, 0),
        a;
        for (var b = this.Y,
        c = Infinity,
        d = Infinity,
        e = -Infinity,
        g = -Infinity,
        h = b.Mc; h.next();) {
            var k = h.value;
            if (k.isVisible()) {
                if (k instanceof J) {
                    var l = k;
                    if (!b.ux) continue;
                    if (Hm(l)) continue;
                    if (l.aa === b || l.da === b) continue
                }
                k = k.$;
                k.left < c && (c = k.left);
                k.top < d && (d = k.top);
                k.right > e && (e = k.right);
                k.bottom > g && (g = k.bottom)
            }
        }
        isFinite(c) && isFinite(d) ? a.m(c, d, e - c, g - d) : (b = b.location, c = this.padding, a.m(b.x + c.left, b.y + c.top, 0, 0));
        return a
    };
    D.defineProperty(Rj, {
        padding: "padding"
    },
    function() {
        return this.of
    },
    function(a) {
        "number" === typeof a ? a = new Hb(a) : D.l(a, Hb, Rj, "padding");
        var b = this.of;
        b.O(a) || (this.of = a = a.V(), this.i("padding", b, a))
    });
    function Tg() {
        0 < arguments.length && D.td(Tg);
        D.tc(this);
        this.Ez = this.ba = null;
        this.ok = this.gs = !0;
        this.ms = !1;
        this.gr = (new O(0, 0)).freeze();
        this.js = this.ks = !0;
        this.QC = "";
        this.pp = !1;
        this.Rz = null
    }
    D.ja("Layout", Tg);
    Tg.prototype.cloneProtected = function(a) {
        a.gs = this.gs;
        a.ok = this.ok;
        a.ms = this.ms;
        a.gr.assign(this.gr);
        a.ks = this.ks;
        a.js = this.js;
        a.QC = this.QC;
        this.ok || (a.pp = !0)
    };
    Tg.prototype.copy = function() {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    Tg.prototype.nc = function(a) {
        D.Xj(this, a)
    };
    Tg.prototype.toString = function() {
        var a = D.qf(Object.getPrototypeOf(this)),
        a = a + "(";
        null !== this.group && (a += " in " + this.group);
        null !== this.g && (a += " for " + this.g);
        return a + ")"
    };
    D.defineProperty(Tg, {
        g: "diagram"
    },
    function() {
        return this.ba
    },
    function(a) {
        null !== a && D.l(a, E, Tg, "diagram");
        this.ba = a
    });
    D.defineProperty(Tg, {
        group: "group"
    },
    function() {
        return this.Ez
    },
    function(a) {
        this.Ez !== a && (null !== a && D.l(a, I, Tg, "group"), this.Ez = a, null !== a && (this.ba = a.g))
    });
    D.defineProperty(Tg, {
        jJ: "isOngoing"
    },
    function() {
        return this.gs
    },
    function(a) {
        this.gs !== a && (D.h(a, "boolean", Tg, "isOngoing"), this.gs = a)
    });
    D.defineProperty(Tg, {
        SF: "isInitial"
    },
    function() {
        return this.ok
    },
    function(a) {
        D.h(a, "boolean", Tg, "isInitial");
        this.ok = a;
        a || (this.pp = !0)
    });
    D.defineProperty(Tg, {
        Zx: "isViewportSized"
    },
    function() {
        return this.ms
    },
    function(a) {
        this.ms !== a && (D.h(a, "boolean", Tg, "isViewportSized"), (this.ms = a) && this.N())
    });
    D.defineProperty(Tg, {
        zu: "isRouting"
    },
    function() {
        return this.ks
    },
    function(a) {
        this.ks !== a && (D.h(a, "boolean", Tg, "isRouting"), this.ks = a)
    });
    D.defineProperty(Tg, {
        UF: "isRealtime"
    },
    function() {
        return this.js
    },
    function(a) {
        this.js !== a && (D.h(a, "boolean", Tg, "isRealtime"), this.js = a)
    });
    D.defineProperty(Tg, {
        Hf: "isValidLayout"
    },
    function() {
        return this.pp
    },
    function(a) {
        this.pp !== a && (D.h(a, "boolean", Tg, "isValidLayout"), this.pp = a, a || (a = this.g, null !== a && (a.wv = !0)))
    });
    Tg.prototype.invalidateLayout = Tg.prototype.N = function() {
        if (this.pp) {
            var a = this.g;
            if (null !== a && !a.ra.nb) {
                var b = a.Xa; ! b.op && (b.sf && b.Ii(), this.jJ && a.Zn || this.SF && !a.Zn) && (this.Hf = !1, a.Se())
            }
        }
    };
    D.defineProperty(Tg, {
        network: "network"
    },
    function() {
        return this.Rz
    },
    function(a) {
        var b = this.Rz;
        b !== a && (null !== a && D.l(a, va, Tg, "network"), null !== b && (b.Vb = null), this.Rz = a, null !== a && (a.Vb = this))
    });
    Tg.prototype.createNetwork = function() {
        return new va
    };
    Tg.prototype.makeNetwork = function(a) {
        var b = this.createNetwork();
        b.Vb = this;
        a instanceof E ? (b.Jk(a.ng, !0), b.Jk(a.links, !0)) : a instanceof I ? b.Jk(a.Mc) : b.Jk(a.j);
        return b
    };
    Tg.prototype.updateParts = function() {
        var a = this.g;
        if (null === a && null !== this.network) for (var b = this.network.vertexes.j; b.next();) {
            var c = b.value.Vc;
            if (null !== c && (a = c.g, null !== a)) break
        }
        this.Hf = !0;
        try {
            null !== a && a.$b("Layout"),
            this.commitLayout()
        } finally {
            null !== a && a.Td("Layout")
        }
    };
    Tg.prototype.commitLayout = function() {
        for (var a = this.network.vertexes.j; a.next();) a.value.commit();
        if (this.zu) for (a = this.network.edges.j; a.next();) a.value.commit()
    };
    Tg.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        var b = new L(F);
        a instanceof E ? (qs(this, b, a.ng, !0, this.mo, !0, !1, !0), qs(this, b, a.Gi, !0, this.mo, !0, !1, !0)) : a instanceof I ? qs(this, b, a.Mc, !1, this.mo, !0, !1, !0) : b.Rc(a.j);
        var c = b.count;
        if (0 < c) {
            a = this.g;
            null !== a && a.$b("Layout");
            for (var c = Math.ceil(Math.sqrt(c)), d = this.Ae.x, e = d, g = this.Ae.y, h = 0, k = 0, b = b.j; b.next();) {
                var l = b.value;
                l.hf();
                var m = l.Fa,
                n = m.width,
                m = m.height;
                l.moveTo(e, g);
                l instanceof I && (l.mo = !1);
                e += Math.max(n, 50) + 20;
                k = Math.max(k, Math.max(m, 50));
                h >= c - 1 ? (h = 0, e = d, g += k + 20, k = 0) : h++
            }
            null !== a && a.Td("Layout")
        }
        this.Hf = !0
    };
    Tg.prototype.mo = function(a) {
        return ! a.location.F() || a instanceof I && a.mo ? !0 : !1
    };
    function qs(a, b, c, d, e, g, h, k) {
        for (c = c.j; c.next();) {
            var l = c.value;
            d && !l.zq || null !== e && !e(l) || !l.canLayout() || (g && l instanceof G ? l.tf || (l instanceof I ? null === l.Vb ? qs(a, b, l.Mc, !1, e, g, h, k) : (rs(l), b.add(l)) : (rs(l), b.add(l))) : h && l instanceof J ? b.add(l) : !k || !l.oe() || l instanceof G || (rs(l), b.add(l)))
        }
    }
    function rs(a) {
        var b = a.$; (0 === b.width || 0 === b.height || isNaN(b.width) || isNaN(b.height)) && a.hf()
    }
    Tg.prototype.collectParts = Tg.prototype.ZH = function(a) {
        var b = new L(F);
        a instanceof E ? (qs(this, b, a.ng, !0, null, !0, !0, !0), qs(this, b, a.links, !0, null, !0, !0, !0), qs(this, b, a.Gi, !0, null, !0, !0, !0)) : a instanceof I ? qs(this, b, a.Mc, !1, null, !0, !0, !0) : qs(this, b, a.j, !1, null, !0, !0, !0);
        return b
    };
    D.defineProperty(Tg, {
        Ae: "arrangementOrigin"
    },
    function() {
        return this.gr
    },
    function(a) {
        D.l(a, O, Tg, "arrangementOrigin");
        this.gr.O(a) || (this.gr.assign(a), this.N())
    });
    Tg.prototype.initialOrigin = function(a) {
        var b = this.group;
        if (null !== b) {
            var c = b.position.copy(); (isNaN(c.x) || isNaN(c.y)) && c.set(a);
            b = b.placeholder;
            null !== b && (c = b.eb(cc), (isNaN(c.x) || isNaN(c.y)) && c.set(a), c.x += b.padding.left, c.y += b.padding.top);
            return c
        }
        return a
    };
    function va() {
        D.tc(this);
        this.te = null;
        if (this.vertexes) for (var a = this.vertexes.j; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges) for (a = this.edges.j; a.next();) b = a.value,
        b.clear(),
        b.network = null;
        this.vertexes = new L(wa);
        this.edges = new L(xa);
        this.ky = new ma(G, wa);
        this.ey = new ma(J, xa)
    }
    D.ja("LayoutNetwork", va);
    va.prototype.clear = function() {
        if (this.vertexes) for (var a = this.vertexes.j; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges) for (a = this.edges.j; a.next();) b = a.value,
        b.clear(),
        b.network = null;
        this.vertexes = new L(wa);
        this.edges = new L(xa);
        this.ky = new ma(G, wa);
        this.ey = new ma(J, xa)
    };
    va.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        var b = "LayoutNetwork" + (null !== this.Vb ? "(" + this.Vb.toString() + ")": "");
        if (0 >= a) return b;
        b += " vertexes: " + this.vertexes.count + " edges: " + this.edges.count;
        if (1 < a) {
            for (var c = this.vertexes.j; c.next();) b += "\n    " + c.value.toString(a - 1);
            for (c = this.edges.j; c.next();) b += "\n    " + c.value.toString(a - 1)
        }
        return b
    };
    D.defineProperty(va, {
        Vb: "layout"
    },
    function() {
        return this.te
    },
    function(a) {
        v && null !== a && D.l(a, Tg, va, "layout");
        this.te = a
    });
    va.prototype.createVertex = function() {
        return new wa
    };
    va.prototype.createEdge = function() {
        return new xa
    };
    va.prototype.addParts = va.prototype.Jk = function(a, b, c) {
        if (null !== a) {
            void 0 === b && (b = !1);
            D.h(b, "boolean", va, "addParts:toplevelonly");
            void 0 === c && (c = null);
            null === c && (c = function(a) {
                if (a instanceof G) return ! a.tf;
                if (a instanceof J) {
                    var b = a.aa;
                    if (null === b || b.tf) return ! 1;
                    a = a.da;
                    return null === a || a.tf ? !1 : !0
                }
                return ! 1
            });
            for (a = a.j; a.next();) {
                var d = a.value;
                if (d instanceof G && (!b || d.zq) && d.canLayout() && c(d)) if (d instanceof I && null === d.Vb) this.Jk(d.Mc, !1);
                else if (null === this.Qn(d)) {
                    var e = this.createVertex();
                    e.Vc = d;
                    this.Xl(e)
                }
            }
            for (a.reset(); a.next();) if (d = a.value, d instanceof J && (!b || d.zq) && d.canLayout() && c(d) && null === this.Fx(d)) {
                var g = d.aa,
                e = d.da;
                null !== g && null !== e && g !== e && (g = this.findGroupVertex(g), e = this.findGroupVertex(e), null !== g && null !== e && this.Cq(g, e, d))
            }
        }
    };
    va.prototype.findGroupVertex = function(a) {
        if (null === a) return null;
        var b = a.findVisibleNode();
        if (null === b) return null;
        a = this.Qn(b);
        if (null !== a) return a;
        for (b = b.Pa; null !== b;) {
            a = this.Qn(b);
            if (null !== a) return a;
            b = b.Pa
        }
        return null
    };
    va.prototype.addVertex = va.prototype.Xl = function(a) {
        if (null !== a) {
            v && D.l(a, wa, va, "addVertex:vertex");
            this.vertexes.add(a);
            var b = a.Vc;
            null !== b && this.ky.add(b, a);
            a.network = this
        }
    };
    va.prototype.addNode = va.prototype.Rt = function(a) {
        if (null === a) return null;
        v && D.l(a, G, va, "addNode:node");
        var b = this.Qn(a);
        null === b && (b = this.createVertex(), b.Vc = a, this.Xl(b));
        return b
    };
    va.prototype.deleteVertex = va.prototype.aF = function(a) {
        if (null !== a && (v && D.l(a, wa, va, "deleteVertex:vertex"), ss(this, a))) {
            for (var b = a.Ve,
            c = b.count - 1; 0 <= c; c--) {
                var d = b.ea(c);
                this.kq(d)
            }
            b = a.Pe;
            for (c = b.count - 1; 0 <= c; c--) d = b.ea(c),
            this.kq(d)
        }
    };
    function ss(a, b) {
        if (null === b) return ! 1;
        var c = a.vertexes.remove(b);
        c && (a.ky.remove(b.Vc), b.network = null);
        return c
    }
    va.prototype.deleteNode = function(a) {
        null !== a && (v && D.l(a, G, va, "deleteNode:node"), a = this.Qn(a), null !== a && this.aF(a))
    };
    va.prototype.findVertex = va.prototype.Qn = function(a) {
        if (null === a) return null;
        v && D.l(a, G, va, "findVertex:node");
        return this.ky.oa(a)
    };
    va.prototype.addEdge = va.prototype.Yp = function(a) {
        if (null !== a) {
            v && D.l(a, xa, va, "addEdge:edge");
            this.edges.add(a);
            var b = a.link;
            null !== b && null === this.Fx(b) && this.ey.add(b, a);
            b = a.toVertex;
            null !== b && b.DE(a);
            b = a.fromVertex;
            null !== b && b.BE(a);
            a.network = this
        }
    };
    va.prototype.addLink = function(a) {
        if (null === a) return null;
        v && D.l(a, J, va, "addLink:link");
        var b = a.aa,
        c = a.da,
        d = this.Fx(a);
        null === d ? (d = this.createEdge(), d.link = a, null !== b && (d.fromVertex = this.Rt(b)), null !== c && (d.toVertex = this.Rt(c)), this.Yp(d)) : (d.fromVertex = null !== b ? this.Rt(b) : null, d.toVertex = null !== c ? this.Rt(c) : null);
        return d
    };
    va.prototype.deleteEdge = va.prototype.kq = function(a) {
        if (null !== a) {
            v && D.l(a, xa, va, "deleteEdge:edge");
            var b = a.toVertex;
            null !== b && b.$E(a);
            b = a.fromVertex;
            null !== b && b.ZE(a);
            ts(this, a)
        }
    };
    function ts(a, b) {
        null !== b && a.edges.remove(b) && (a.ey.remove(b.link), b.network = null)
    }
    va.prototype.deleteLink = function(a) {
        null !== a && (v && D.l(a, J, va, "deleteLink:link"), a = this.Fx(a), null !== a && this.kq(a))
    };
    va.prototype.findEdge = va.prototype.Fx = function(a) {
        if (null === a) return null;
        v && D.l(a, J, va, "findEdge:link");
        return this.ey.oa(a)
    };
    va.prototype.linkVertexes = va.prototype.Cq = function(a, b, c) {
        if (null === a || null === b) return null;
        v && (D.l(a, wa, va, "linkVertexes:fromVertex"), D.l(b, wa, va, "linkVertexes:toVertex"), null !== c && D.l(c, J, va, "linkVertexes:link"));
        if (a.network === this && b.network === this) {
            var d = this.createEdge();
            d.link = c;
            d.fromVertex = a;
            d.toVertex = b;
            this.Yp(d);
            return d
        }
        return null
    };
    va.prototype.reverseEdge = va.prototype.zy = function(a) {
        if (null !== a) {
            v && D.l(a, xa, va, "reverseEdge:edge");
            var b = a.fromVertex,
            c = a.toVertex;
            null !== b && null !== c && (b.ZE(a), c.$E(a), a.zy(), b.DE(a), c.BE(a))
        }
    };
    va.prototype.deleteSelfEdges = va.prototype.Ax = function() {
        for (var a = D.tb(), b = this.edges.j; b.next();) {
            var c = b.value;
            c.fromVertex === c.toVertex && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++) this.kq(a[c]);
        D.Aa(a)
    };
    va.prototype.deleteArtificialVertexes = function() {
        for (var a = D.tb(), b = this.vertexes.j; b.next();) {
            var c = b.value;
            null === c.Vc && a.push(c)
        }
        for (var c = a.length,
        d = 0; d < c; d++) this.aF(a[d]);
        b = D.tb();
        for (c = this.edges.j; c.next();) d = c.value,
        null === d.link && b.push(d);
        c = b.length;
        for (d = 0; d < c; d++) this.kq(b[d]);
        D.Aa(a);
        D.Aa(b)
    };
    function us(a) {
        for (var b = D.tb(), c = a.edges.j; c.next();) {
            var d = c.value;
            null !== d.fromVertex && null !== d.toVertex || b.push(d)
        }
        c = b.length;
        for (d = 0; d < c; d++) a.kq(b[d]);
        D.Aa(b)
    }
    va.prototype.splitIntoSubNetworks = va.prototype.mK = function() {
        this.deleteArtificialVertexes();
        us(this);
        this.Ax();
        for (var a = new K(va), b = !0; b;) for (var b = !1,
        c = this.vertexes.j; c.next();) {
            var d = c.value;
            if (0 < d.Ve.count || 0 < d.Pe.count) {
                b = this.Vb.createNetwork();
                a.add(b);
                vs(this, b, d);
                b = !0;
                break
            }
        }
        a.sort(function(a, b) {
            return null === a || null === b || a === b ? 0 : b.vertexes.count - a.vertexes.count
        });
        return a
    };
    function vs(a, b, c) {
        if (null !== c && c.network !== b) {
            ss(a, c);
            b.Xl(c);
            for (var d = c.sc; d.next();) {
                var e = d.value;
                e.network !== b && (ts(a, e), b.Yp(e), vs(a, b, e.fromVertex))
            }
            for (d = c.pc; d.next();) c = d.value,
            c.network !== b && (ts(a, c), b.Yp(c), vs(a, b, c.toVertex))
        }
    }
    va.prototype.findAllParts = function() {
        for (var a = new L(F), b = this.vertexes.j; b.next();) a.add(b.value.Vc);
        for (b = this.edges.j; b.next();) a.add(b.value.link);
        return a
    };
    function wa() {
        D.tc(this);
        this.network = null;
        this.R = (new B(0, 0, 10, 10)).freeze();
        this.W = (new O(5, 5)).freeze();
        this.Bd = this.Nd = null;
        this.Ve = new K(xa);
        this.Pe = new K(xa)
    }
    D.ja("LayoutVertex", wa);
    wa.prototype.clear = function() {
        this.Bd = this.Nd = null;
        this.Ve = new K(xa);
        this.Pe = new K(xa)
    };
    wa.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        var b = "LayoutVertex#" + D.Fd(this);
        if (0 < a && (b += null !== this.Vc ? "(" + this.Vc.toString() + ")": "", 1 < a)) {
            a = "";
            for (var c = !0,
            d = this.Ve.j; d.next();) {
                var e = d.value;
                c ? c = !1 : a += ",";
                a += e.toString(0)
            }
            e = "";
            c = !0;
            for (d = this.Pe.j; d.next();) {
                var g = d.value;
                c ? c = !1 : e += ",";
                e += g.toString(0)
            }
            b += " sources: " + a + " destinations: " + e
        }
        return b
    };
    D.defineProperty(wa, {
        data: "data"
    },
    function() {
        return this.Nd
    },
    function(a) {
        this.Nd = a;
        if (null !== a) {
            var b = a.bounds;
            a = b.x;
            var c = b.y,
            d = b.width,
            b = b.height;
            this.W.m(d / 2, b / 2);
            this.R.m(a, c, d, b)
        }
    });
    D.defineProperty(wa, {
        Vc: "node"
    },
    function() {
        return this.Bd
    },
    function(a) {
        if (this.Bd !== a) {
            v && null !== a && D.l(a, G, wa, "node");
            this.Bd = a;
            a.hf();
            var b = a.$,
            c = b.x,
            d = b.y,
            e = b.width,
            b = b.height;
            isNaN(c) && (c = 0);
            isNaN(d) && (d = 0);
            this.R.m(c, d, e, b);
            if (! (a instanceof I) && (a = a.uf.eb(gc), a.F())) {
                this.W.m(a.x - c, a.y - d);
                return
            }
            this.W.m(e / 2, b / 2)
        }
    });
    D.defineProperty(wa, {
        sb: "bounds"
    },
    function() {
        return this.R
    },
    function(a) {
        this.R.O(a) || (v && D.l(a, B, wa, "bounds"), this.R.assign(a))
    });
    D.defineProperty(wa, {
        focus: "focus"
    },
    function() {
        return this.W
    },
    function(a) {
        this.W.O(a) || (v && D.l(a, O, wa, "focus"), this.W.assign(a))
    });
    D.defineProperty(wa, {
        na: "centerX"
    },
    function() {
        return this.R.x + this.W.x
    },
    function(a) {
        var b = this.R;
        b.x + this.W.x !== a && (v && D.p(a, wa, "centerX"), b.Ya(), b.x = a - this.W.x, b.freeze())
    });
    D.defineProperty(wa, {
        va: "centerY"
    },
    function() {
        return this.R.y + this.W.y
    },
    function(a) {
        var b = this.R;
        b.y + this.W.y !== a && (v && D.p(a, wa, "centerY"), b.Ya(), b.y = a - this.W.y, b.freeze())
    });
    D.defineProperty(wa, {
        lu: "focusX"
    },
    function() {
        return this.W.x
    },
    function(a) {
        var b = this.W;
        b.x !== a && (b.Ya(), b.x = a, b.freeze())
    });
    D.defineProperty(wa, {
        mu: "focusY"
    },
    function() {
        return this.W.y
    },
    function(a) {
        var b = this.W;
        b.y !== a && (b.Ya(), b.y = a, b.freeze())
    });
    D.defineProperty(wa, {
        x: "x"
    },
    function() {
        return this.R.x
    },
    function(a) {
        var b = this.R;
        b.x !== a && (b.Ya(), b.x = a, b.freeze())
    });
    D.defineProperty(wa, {
        y: "y"
    },
    function() {
        return this.R.y
    },
    function(a) {
        var b = this.R;
        b.y !== a && (b.Ya(), b.y = a, b.freeze())
    });
    D.defineProperty(wa, {
        width: "width"
    },
    function() {
        return this.R.width
    },
    function(a) {
        var b = this.R;
        b.width !== a && (b.Ya(), b.width = a, b.freeze())
    });
    D.defineProperty(wa, {
        height: "height"
    },
    function() {
        return this.R.height
    },
    function(a) {
        var b = this.R;
        b.height !== a && (b.Ya(), b.height = a, b.freeze())
    });
    wa.prototype.commit = function() {
        var a = this.Nd;
        if (null !== a) {
            var b = this.sb,
            c = a.bounds;
            D.Ta(c) ? (c.x = b.x, c.y = b.y, c.width = b.width, c.height = b.height) : a.bounds = b.copy()
        } else if (a = this.Vc, null !== a) {
            b = this.sb;
            if (! (a instanceof I)) {
                var c = a.$,
                d = a.uf.eb(gc);
                if (c.F() && d.F()) {
                    a.moveTo(b.x + this.lu - (d.x - c.x), b.y + this.mu - (d.y - c.y));
                    return
                }
            }
            a.moveTo(b.x, b.y)
        }
    };
    wa.prototype.addSourceEdge = wa.prototype.DE = function(a) {
        null !== a && (v && D.l(a, xa, wa, "addSourceEdge:edge"), this.Ve.contains(a) || this.Ve.add(a))
    };
    wa.prototype.deleteSourceEdge = wa.prototype.$E = function(a) {
        null !== a && (v && D.l(a, xa, wa, "deleteSourceEdge:edge"), this.Ve.remove(a))
    };
    wa.prototype.addDestinationEdge = wa.prototype.BE = function(a) {
        null !== a && (v && D.l(a, xa, wa, "addDestinationEdge:edge"), this.Pe.contains(a) || this.Pe.add(a))
    };
    wa.prototype.deleteDestinationEdge = wa.prototype.ZE = function(a) {
        null !== a && (v && D.l(a, xa, wa, "deleteDestinationEdge:edge"), this.Pe.remove(a))
    };
    D.w(wa, {
        lK: "sourceVertexes"
    },
    function() {
        for (var a = new L(wa), b = this.sc; b.next();) a.add(b.value.fromVertex);
        return a.j
    });
    D.w(wa, {
        qI: "destinationVertexes"
    },
    function() {
        for (var a = new L(wa), b = this.pc; b.next();) a.add(b.value.toVertex);
        return a.j
    });
    D.w(wa, {
        vertexes: "vertexes"
    },
    function() {
        for (var a = new L(wa), b = this.sc; b.next();) a.add(b.value.fromVertex);
        for (b = this.pc; b.next();) a.add(b.value.toVertex);
        return a.j
    });
    D.w(wa, {
        sc: "sourceEdges"
    },
    function() {
        return this.Ve.j
    });
    D.w(wa, {
        pc: "destinationEdges"
    },
    function() {
        return this.Pe.j
    });
    D.w(wa, {
        edges: "edges"
    },
    function() {
        for (var a = new K(xa), b = this.sc; b.next();) a.add(b.value);
        for (b = this.pc; b.next();) a.add(b.value);
        return a.j
    });
    D.w(wa, {
        BI: "edgesCount"
    },
    function() {
        return this.Ve.count + this.Pe.count
    });
    var ws;
    wa.standardComparer = ws = function(a, b) {
        v && D.l(a, wa, wa, "standardComparer:m");
        v && D.l(b, wa, wa, "standardComparer:n");
        var c = a.Bd,
        d = b.Bd;
        return c ? d ? (c = c.text, d = d.text, c < d ? -1 : c > d ? 1 : 0) : 1 : null !== d ? -1 : 0
    };
    wa.smartComparer = function(a, b) {
        v && D.l(a, wa, wa, "smartComparer:m");
        v && D.l(b, wa, wa, "smartComparer:n");
        if (null !== a) {
            if (null !== b) {
                var c = a.Bd,
                d = b.Bd;
                if (null !== c) {
                    if (null !== d) {
                        for (var c = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++) if ("" !== d[e] && void 0 !== d[e]) {
                            var g = parseFloat(c[e]),
                            h = parseFloat(d[e]);
                            if (isNaN(g)) {
                                if (!isNaN(h)) return 1;
                                if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                            } else {
                                if (isNaN(h)) return - 1;
                                if (0 !== g - h) return g - h
                            }
                        } else if ("" !== c[e]) return 1;
                        return "" !== d[e] && void 0 !== d[e] ? -1 : 0
                    }
                    return 1
                }
                return null !== d ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    function xa() {
        D.tc(this);
        this.toVertex = this.fromVertex = this.link = this.data = this.network = null
    }
    D.ja("LayoutEdge", xa);
    xa.prototype.clear = function() {
        this.toVertex = this.fromVertex = this.link = this.data = null
    };
    xa.prototype.toString = function(a) {
        void 0 === a && (a = 0);
        var b = "LayoutEdge#" + D.Fd(this);
        0 < a && (b += null !== this.link ? "(" + this.link.toString() + ")": "", 1 < a && (b += " " + (this.fromVertex ? this.fromVertex.toString() : "null") + " --\x3e " + (this.toVertex ? this.toVertex.toString() : "null")));
        return b
    };
    xa.prototype.zy = function() {
        var a = this.fromVertex;
        this.fromVertex = this.toVertex;
        this.toVertex = a
    };
    xa.prototype.commit = function() {};
    xa.prototype.getOtherVertex = xa.prototype.LI = function(a) {
        v && D.l(a, wa, xa, "getOtherVertex:v");
        return this.toVertex === a ? this.fromVertex: this.fromVertex === a ? this.toVertex: null
    };
    function Tn() {
        0 < arguments.length && D.td(Tn);
        Tg.call(this);
        this.Zx = !0;
        this.Mt = this.Nt = NaN;
        this.bk = (new Ca(NaN, NaN)).freeze();
        this.ri = (new Ca(10, 10)).freeze();
        this.re = xs;
        this.vd = ys;
        this.qi = zs;
        this.Zh = As
    }
    D.Sa(Tn, Tg);
    D.ja("GridLayout", Tn);
    Tn.prototype.cloneProtected = function(a) {
        Tg.prototype.cloneProtected.call(this, a);
        a.Nt = this.Nt;
        a.Mt = this.Mt;
        a.bk.assign(this.bk);
        a.ri.assign(this.ri);
        a.re = this.re;
        a.vd = this.vd;
        a.qi = this.qi;
        a.Zh = this.Zh
    };
    Tn.prototype.nc = function(a) {
        a.Ne === Tn ? a === zs || a === Bs || a === Cs || a === Ds ? this.sorting = a: a === ys || a === Es ? this.$f = a: a === xs || a === Fs ? this.alignment = a: D.k("Unknown enum value: " + a) : Tg.prototype.nc.call(this, a)
    };
    Tn.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        this.Ae = this.initialOrigin(this.Ae);
        var b = this.g;
        a = this.ZH(a);
        for (var c = a.copy().j; c.next();) {
            var d = c.value;
            if (d instanceof J) {
                var e = d;
                if (null !== e.aa || null !== e.da) {
                    a.remove(e);
                    continue
                }
            }
            d.hf();
            if (d instanceof I) for (d = d.Mc; d.next();) a.remove(d.value)
        }
        e = a.lc();
        if (0 !== e.length) {
            switch (this.sorting) {
            case Ds:
                e.reverse();
                break;
            case zs:
                e.sort(this.comparer);
                break;
            case Bs:
                e.sort(this.comparer),
                e.reverse()
            }
            var g = this.BK;
            isNaN(g) && (g = 0);
            var h = this.lH,
            h = isNaN(h) && null !== b ? Math.max(b.xb.width - b.padding.left - b.padding.right, 0) : Math.max(this.lH, 0);
            0 >= g && 0 >= h && (g = 1);
            a = this.spacing.width;
            isFinite(a) || (a = 0);
            c = this.spacing.height;
            isFinite(c) || (c = 0);
            null !== b && b.$b("Layout");
            d = [];
            switch (this.alignment) {
            case Fs:
                var k = a,
                l = c,
                m = Math.max(this.bq.width, 1);
                if (!isFinite(m)) for (var n = m = 0; n < e.length; n++) var p = e[n],
                q = p.Fa,
                m = Math.max(m, q.width);
                var m = Math.max(m + k, 1),
                r = Math.max(this.bq.height, 1);
                if (!isFinite(r)) for (n = r = 0; n < e.length; n++) p = e[n],
                q = p.Fa,
                r = Math.max(r, q.height);
                for (var r = Math.max(r + l, 1), s = this.$f, u = this.Ae.x, t = u, y = this.Ae.y, w = 0, C = 0, n = 0; n < e.length; n++) {
                    var p = e[n],
                    q = p.Fa,
                    A = Math.ceil((q.width + k) / m) * m,
                    N = Math.ceil((q.height + l) / r) * r,
                    H = 0;
                    switch (s) {
                    case Es:
                        H = Math.abs(t - q.width);
                        break;
                    default:
                        H = t + q.width
                    }
                    if (0 < g && w > g - 1 || 0 < h && 0 < w && H > h) d.push(new B(0, y, h + k, C)),
                    w = 0,
                    t = u,
                    y += C,
                    C = 0;
                    C = Math.max(C, N);
                    N = 0;
                    switch (s) {
                    case Es:
                        N = -q.width;
                        break;
                    default:
                        N = 0
                    }
                    p.moveTo(t + N, y);
                    switch (s) {
                    case Es:
                        t -= A;
                        break;
                    default:
                        t += A
                    }
                    w++
                }
                d.push(new B(0, y, h + k, C));
                break;
            case xs:
                k = g;
                l = a;
                m = c;
                n = Math.max(this.bq.width, 1);
                p = y = A = 0;
                q = D.P();
                for (g = 0; g < e.length; g++) r = e[g],
                s = r.Fa,
                u = ir(r, r.uf, r.Kf, q),
                A = Math.max(A, u.x),
                y = Math.max(y, s.width - u.x),
                p = Math.max(p, u.y);
                t = this.$f;
                switch (t) {
                case Es:
                    A += l;
                    break;
                default:
                    y += l
                }
                var n = isFinite(n) ? Math.max(n + l, 1) : Math.max(A + y, 1),
                W = y = this.Ae.x,
                w = this.Ae.y,
                C = 0;
                h >= A && (h -= A);
                for (var A = N = 0,
                H = Math.max(this.bq.height, 1), fa = p = 0, S = !0, ba = D.P(), g = 0; g < e.length; g++) {
                    r = e[g];
                    s = r.Fa;
                    u = ir(r, r.uf, r.Kf, q);
                    if (0 < C) switch (t) {
                    case Es:
                        W = (W - y - (s.width - u.x)) / n;
                        W = yb(Math.round(W), W) ? Math.round(W) : Math.floor(W);
                        W = W * n + y;
                        break;
                    default:
                        W = (W - y + u.x) / n,
                        W = yb(Math.round(W), W) ? Math.round(W) : Math.ceil(W),
                        W = W * n + y
                    } else switch (t) {
                    case Es:
                        N = W + u.x + s.width;
                        break;
                    default:
                        N = W - u.x
                    }
                    var ia = 0;
                    switch (t) {
                    case Es:
                        ia = -(W + u.x) + N;
                        break;
                    default:
                        ia = W + s.width - u.x - N
                    }
                    if (0 < k && C > k - 1 || 0 < h && 0 < C && ia > h) {
                        d.push(new B(0, S ? w - p: w, h + l, fa + p + m));
                        for (W = 0; W < C && g !== C; W++) {
                            var ia = e[g - C + W],
                            U = ir(ia, ia.uf, ia.Kf, ba);
                            ia.moveTo(ia.position.x, ia.position.y + p - U.y)
                        }
                        fa += m;
                        w = S ? w + fa: w + (fa + p);
                        C = fa = p = 0;
                        W = y;
                        S = !1
                    }
                    W === y && (A = t === Es ? Math.max(A, s.width - u.x) : Math.min(A, -u.x));
                    p = Math.max(p, u.y);
                    fa = Math.max(fa, s.height - u.y);
                    isFinite(H) && (fa = Math.max(fa, Math.max(s.height, H) - u.y));
                    S ? r.moveTo(W - u.x, w - u.y) : r.moveTo(W - u.x, w);
                    switch (t) {
                    case Es:
                        W -= u.x + l;
                        break;
                    default:
                        W += s.width - u.x + l
                    }
                    C++
                }
                d.push(new B(0, w, h + l, (S ? fa: fa + p) + m));
                for (W = 0; W < C && g !== C; W++) ia = e[g - C + W],
                U = ir(ia, ia.uf, ia.Kf, q),
                ia.moveTo(ia.position.x, ia.position.y + p - U.y);
                D.A(q);
                D.A(ba);
                if (t === Es) for (g = 0; g < d.length; g++) e = d[g],
                e.width += A,
                e.x -= A;
                else for (g = 0; g < d.length; g++) e = d[g],
                e.x > A && (e.width += e.x - A, e.x = A)
            }
            for (k = g = h = e = 0; k < d.length; k++) l = d[k],
            e = Math.min(e, l.x),
            h = Math.min(h, l.y),
            g = Math.max(g, l.x + l.width);
            this.$f === Es ? this.commitLayers(d, new O(e + a / 2 - (g + e), h - c / 2)) : this.commitLayers(d, new O(e - a / 2, h - c / 2));
            null !== b && b.Td("Layout");
            this.Hf = !0
        }
    };
    Tn.prototype.commitLayers = function() {};
    D.defineProperty(Tn, {
        lH: "wrappingWidth"
    },
    function() {
        return this.Nt
    },
    function(a) {
        this.Nt !== a && (D.h(a, "number", Tn, "wrappingWidth"), 0 < a || isNaN(a)) && (this.Nt = a, this.Zx = isNaN(a), this.N())
    });
    D.defineProperty(Tn, {
        BK: "wrappingColumn"
    },
    function() {
        return this.Mt
    },
    function(a) {
        this.Mt !== a && (D.h(a, "number", Tn, "wrappingColumn"), 0 < a || isNaN(a)) && (this.Mt = a, this.N())
    });
    D.defineProperty(Tn, {
        bq: "cellSize"
    },
    function() {
        return this.bk
    },
    function(a) {
        D.l(a, Ca, Tn, "cellSize");
        this.bk.O(a) || (this.bk.assign(a), this.N())
    });
    D.defineProperty(Tn, {
        spacing: "spacing"
    },
    function() {
        return this.ri
    },
    function(a) {
        D.l(a, Ca, Tn, "spacing");
        this.ri.O(a) || (this.ri.assign(a), this.N())
    });
    D.defineProperty(Tn, {
        alignment: "alignment"
    },
    function() {
        return this.re
    },
    function(a) {
        this.re !== a && (D.Ca(a, Tn, Tn, "alignment"), a === xs || a === Fs) && (this.re = a, this.N())
    });
    D.defineProperty(Tn, {
        $f: "arrangement"
    },
    function() {
        return this.vd
    },
    function(a) {
        this.vd !== a && (D.Ca(a, Tn, Tn, "arrangement"), a === ys || a === Es) && (this.vd = a, this.N())
    });
    D.defineProperty(Tn, {
        sorting: "sorting"
    },
    function() {
        return this.qi
    },
    function(a) {
        this.qi !== a && (D.Ca(a, Tn, Tn, "sorting"), a === Cs || a === Ds || a === zs || a === Bs) && (this.qi = a, this.N())
    });
    D.defineProperty(Tn, {
        comparer: "comparer"
    },
    function() {
        return this.Zh
    },
    function(a) {
        this.Zh !== a && (D.h(a, "function", Tn, "comparer"), this.Zh = a, this.N())
    });
    var As;
    Tn.standardComparer = As = function(a, b) {
        v && D.l(a, F, Tn, "standardComparer:a");
        v && D.l(b, F, Tn, "standardComparer:b");
        var c = a.text,
        d = b.text;
        return c < d ? -1 : c > d ? 1 : 0
    };
    Tn.smartComparer = function(a, b) {
        v && D.l(a, F, Tn, "standardComparer:a");
        v && D.l(b, F, Tn, "standardComparer:b");
        if (null !== a) {
            if (null !== b) {
                for (var c = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++) if ("" !== d[e] && void 0 !== d[e]) {
                    var g = parseFloat(c[e]),
                    h = parseFloat(d[e]);
                    if (isNaN(g)) {
                        if (!isNaN(h)) return 1;
                        if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                    } else {
                        if (isNaN(h)) return - 1;
                        if (0 !== g - h) return g - h
                    }
                } else if ("" !== c[e]) return 1;
                return "" !== d[e] && void 0 !== d[e] ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    var Fs;
    Tn.Position = Fs = D.s(Tn, "Position", 0);
    var xs;
    Tn.Location = xs = D.s(Tn, "Location", 1);
    var ys;
    Tn.LeftToRight = ys = D.s(Tn, "LeftToRight", 2);
    var Es;
    Tn.RightToLeft = Es = D.s(Tn, "RightToLeft", 3);
    var Cs;
    Tn.Forward = Cs = D.s(Tn, "Forward", 4);
    var Ds;
    Tn.Reverse = Ds = D.s(Tn, "Reverse", 5);
    var zs;
    Tn.Ascending = zs = D.s(Tn, "Ascending", 6);
    var Bs;
    Tn.Descending = Bs = D.s(Tn, "Descending", 7);
    function Gs() {
        0 < arguments.length && D.td(Gs);
        Tg.call(this);
        this.vz = this.Zo = this.fe = 0;
        this.Nr = 360;
        this.uz = Hs;
        this.tl = 0;
        this.YC = Hs;
        this.Dv = this.Rg = this.oE = 0;
        this.ex = new Is;
        this.Ev = this.hn = 0;
        this.yH = 600;
        this.Zs = NaN;
        this.ir = 1;
        this.zt = 0;
        this.Ct = 360;
        this.vd = Hs;
        this.fa = Js;
        this.qi = Ks;
        this.Zh = ws;
        this.ri = 6;
        this.Os = Ls
    }
    D.Sa(Gs, Tg);
    D.ja("CircularLayout", Gs);
    Gs.prototype.cloneProtected = function(a) {
        Tg.prototype.cloneProtected.call(this, a);
        a.Zs = this.Zs;
        a.ir = this.ir;
        a.zt = this.zt;
        a.Ct = this.Ct;
        a.vd = this.vd;
        a.fa = this.fa;
        a.qi = this.qi;
        a.Zh = this.Zh;
        a.ri = this.ri;
        a.Os = this.Os
    };
    Gs.prototype.nc = function(a) {
        if (a.Ne === Gs) if (a === Ms || a === Ns || a === Os || a === Ps || a === Ks) this.sorting = a;
        else if (a === Qs || a === Rs || a === Js || a === Ss) this.direction = a;
        else if (a === Ts || a === Us || a === Hs || a === Vs) this.$f = a;
        else {
            if (a === Ws || a === Ls) this.jy = a
        } else Tg.prototype.nc.call(this, a)
    };
    Gs.prototype.createNetwork = function() {
        return new Xs
    };
    Gs.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.network.vertexes;
        if (1 >= a.count) 1 === a.count && (a = a.first(), a.na = 0, a.va = 0);
        else {
            var b = new K(Ys);
            b.Rc(a.j);
            a = new K(Ys);
            var c = new K(Ys),
            d;
            d = this.sort(b);
            var e = this.uz,
            g = this.YC,
            h = this.fe,
            k = this.Zo,
            l = this.vz,
            m = this.Nr,
            b = this.tl,
            n = this.oE,
            p = this.Rg,
            q = this.Dv,
            e = this.$f,
            g = this.jy,
            h = this.RJ;
            if (!isFinite(h) || 0 >= h) h = NaN;
            k = this.SH;
            if (!isFinite(k) || 0 >= k) k = 1;
            l = this.Le;
            isFinite(l) || (l = 0);
            m = this.xf;
            if (!isFinite(m) || 360 < m || 1 > m) m = 360;
            b = this.spacing;
            isFinite(b) || (b = NaN);
            e === Vs && g === Ws ? e = Hs: e === Vs && g !== Ws && (g = Ws, e = this.$f);
            if ((this.direction === Qs || this.direction === Rs) && this.sorting !== Ks) {
                for (var r = 0; ! (r >= d.length); r += 2) {
                    a.add(d.ea(r));
                    if (r + 1 >= d.length) break;
                    c.add(d.ea(r + 1))
                }
                this.direction === Qs ? (this.$f === Vs && a.reverse(), d = new K(Ys), d.Rc(a), d.Rc(c)) : (this.$f === Vs && c.reverse(), d = new K(Ys), d.Rc(c), d.Rc(a))
            }
            for (var s = d.length,
            u = n = 0,
            r = 0; r < d.length; r++) {
                var p = l + m * u * (this.direction === Js ? 1 : -1) / s,
                t = d.ea(r).diameter;
                isNaN(t) && (t = Zs(d.ea(r), p));
                360 > m && (0 === r || r === d.length - 1) && (t /= 2);
                n += t;
                u++
            }
            if (isNaN(h) || e === Vs) {
                isNaN(b) && (b = 6);
                if (e !== Hs && e !== Vs) {
                    t = -Infinity;
                    for (r = 0; r < s; r++) {
                        var q = d.ea(r),
                        y = d.ea(r === s - 1 ? 0 : r + 1);
                        isNaN(q.diameter) && Zs(q, 0);
                        isNaN(y.diameter) && Zs(y, 0);
                        t = Math.max(t, (q.diameter + y.diameter) / 2)
                    }
                    q = t + b;
                    e === Ts ? (p = 2 * Math.PI / s, h = (t + b) / p) : h = $s(this, q * (360 <= m ? s: s - 1), k, l * Math.PI / 180, m * Math.PI / 180)
                } else h = $s(this, n + (360 <= m ? s: s - 1) * (e !== Vs ? b: 1.6 * b), k, l * Math.PI / 180, m * Math.PI / 180);
                p = h * k
            } else if (p = h * k, u = at(this, h, p, l * Math.PI / 180, m * Math.PI / 180), isNaN(b)) {
                if (e === Hs || e === Vs) b = (u - n) / (360 <= m ? s: s - 1)
            } else if (e === Hs || e === Vs) r = (u - n) / (360 <= m ? s: s - 1),
            r < b ? (h = $s(this, n + b * (360 <= m ? s: s - 1), k, l * Math.PI / 180, m * Math.PI / 180), p = h * k) : b = r;
            else {
                t = -Infinity;
                for (r = 0; r < s; r++) q = d.ea(r),
                y = d.ea(r === s - 1 ? 0 : r + 1),
                isNaN(q.diameter) && Zs(q, 0),
                isNaN(y.diameter) && Zs(y, 0),
                t = Math.max(t, (q.diameter + y.diameter) / 2);
                q = t + b;
                r = $s(this, q * (360 <= m ? s: s - 1), k, l * Math.PI / 180, m * Math.PI / 180);
                r > h ? (h = r, p = h * k) : q = u / (360 <= m ? s: s - 1)
            }
            this.uz = e;
            this.YC = g;
            this.fe = h;
            this.Zo = k;
            this.vz = l;
            this.Nr = m;
            this.tl = b;
            this.oE = n;
            this.Rg = p;
            this.Dv = q;
            b = d;
            d = this.uz;
            e = this.fe;
            g = this.vz;
            k = this.Nr;
            l = this.tl;
            m = this.Rg;
            n = this.Dv;
            if (this.direction !== Qs && this.direction !== Rs || d !== Vs) if (this.direction === Qs || this.direction === Rs) {
                h = 0;
                switch (d) {
                case Us:
                    h = 180 * bt(this, e, m, g, n) / Math.PI;
                    break;
                case Hs:
                    n = b = 0;
                    h = a.first();
                    null !== h && (b = Zs(h, Math.PI / 2));
                    h = c.first();
                    null !== h && (n = Zs(h, Math.PI / 2));
                    h = 180 * bt(this, e, m, g, l + (b + n) / 2) / Math.PI;
                    break;
                case Ts:
                    h = k / b.length
                }
                if (this.direction === Qs) {
                    switch (d) {
                    case Us:
                        ct(this, a, g, Ss);
                        break;
                    case Hs:
                        dt(this, a, g, Ss);
                        break;
                    case Ts:
                        et(this, a, k / 2, g, Ss)
                    }
                    switch (d) {
                    case Us:
                        ct(this, c, g + h, Js);
                        break;
                    case Hs:
                        dt(this, c, g + h, Js);
                        break;
                    case Ts:
                        et(this, c, k / 2, g + h, Js)
                    }
                } else {
                    switch (d) {
                    case Us:
                        ct(this, c, g, Ss);
                        break;
                    case Hs:
                        dt(this, c, g, Ss);
                        break;
                    case Ts:
                        et(this, c, k / 2, g, Ss)
                    }
                    switch (d) {
                    case Us:
                        ct(this, a, g + h, Js);
                        break;
                    case Hs:
                        dt(this, a, g + h, Js);
                        break;
                    case Ts:
                        et(this, a, k / 2, g + h, Js)
                    }
                }
            } else switch (d) {
            case Us:
                ct(this, b, g, this.direction);
                break;
            case Hs:
                dt(this, b, g, this.direction);
                break;
            case Ts:
                et(this, b, k, g, this.direction);
                break;
            case Vs:
                ft(this, b, k, g, this.direction)
            } else ft(this, b, k, g - k / 2, Js)
        }
        this.updateParts();
        this.network = null;
        this.Hf = !0
    };
    function et(a, b, c, d, e) {
        var g = a.Nr,
        h = a.fe;
        a = a.Rg;
        d = d * Math.PI / 180;
        c = c * Math.PI / 180;
        for (var k = b.length,
        l = 0; l < k; l++) {
            var m = d + (e === Js ? l * c / (360 <= g ? k: k - 1) : -(l * c) / k),
            n = b.ea(l),
            p = h * Math.tan(m) / a,
            p = Math.sqrt((h * h + a * a * p * p) / (1 + p * p));
            n.na = p * Math.cos(m);
            n.va = p * Math.sin(m);
            n.actualAngle = 180 * m / Math.PI
        }
    }
    function dt(a, b, c, d) {
        var e = a.fe,
        g = a.Rg,
        h = a.tl;
        c = c * Math.PI / 180;
        for (var k = b.length,
        l = 0; l < k; l++) {
            var m = b.ea(l),
            n = b.ea(l === k - 1 ? 0 : l + 1),
            p = g * Math.sin(c);
            m.na = e * Math.cos(c);
            m.va = p;
            m.actualAngle = 180 * c / Math.PI;
            isNaN(m.diameter) && Zs(m, 0);
            isNaN(n.diameter) && Zs(n, 0);
            m = bt(a, e, g, d === Js ? c: -c, (m.diameter + n.diameter) / 2 + h);
            c += d === Js ? m: -m
        }
    }
    function ct(a, b, c, d) {
        var e = a.fe,
        g = a.Rg,
        h = a.Dv;
        c = c * Math.PI / 180;
        for (var k = b.length,
        l = 0; l < k; l++) {
            var m = b.ea(l);
            m.na = e * Math.cos(c);
            m.va = g * Math.sin(c);
            m.actualAngle = 180 * c / Math.PI;
            m = bt(a, e, g, d === Js ? c: -c, h);
            c += d === Js ? m: -m
        }
    }
    function ft(a, b, c, d, e) {
        var g = a.Ev,
        g = a.Nr;
        a.hn = 0;
        a.ex = new Is;
        if (360 > c) {
            for (g = d + (e === Js ? g: -g); 0 > g;) g += 360;
            g %= 360;
            180 < g && (g -= 360);
            g *= Math.PI / 180;
            a.Ev = g;
            gt(a, b, c, d, e)
        } else ht(a, b, c, d, e);
        a.ex.commit(b)
    }
    function ht(a, b, c, d, e) {
        var g = a.fe,
        h = a.tl,
        k = a.Zo,
        l = g * Math.cos(d * Math.PI / 180),
        m = a.Rg * Math.sin(d * Math.PI / 180),
        n = b.lc();
        if (3 === n.length) n[0].na = g,
        n[0].va = 0,
        n[1].na = n[0].na - n[0].width / 2 - n[1].width / 2 - h,
        n[1].y = n[0].y,
        n[2].na = (n[0].na + n[1].na) / 2,
        n[2].y = n[0].y - n[2].height - h;
        else if (4 === n.length) n[0].na = g,
        n[0].va = 0,
        n[2].na = -n[0].na,
        n[2].va = n[0].va,
        n[1].na = 0,
        n[1].y = Math.min(n[0].y, n[2].y) - n[1].height - h,
        n[3].na = 0,
        n[3].y = Math.max(n[0].y + n[0].height + h, n[2].y + n[2].height + h);
        else {
            for (var g = D.P(), p = 0; p < n.length; p++) {
                n[p].na = l;
                n[p].va = m;
                if (p >= n.length - 1) break;
                it(a, l, m, n, p, e, g) || jt(a, l, m, n, p, e, g);
                l = g.x;
                m = g.y
            }
            D.A(g);
            a.hn++;
            if (! (23 < a.hn)) {
                var l = n[0].na,
                m = n[0].va,
                g = n[n.length - 1].na,
                p = n[n.length - 1].va,
                q = Math.abs(l - g) - ((n[0].width + n[n.length - 1].width) / 2 + h),
                r = Math.abs(m - p) - ((n[0].height + n[n.length - 1].height) / 2 + h),
                h = 0;
                1 > Math.abs(r) ? Math.abs(l - g) < (n[0].width + n[n.length - 1].width) / 2 && (h = 0) : h = 0 < r ? r: 1 > Math.abs(q) ? 0 : q;
                q = !1;
                q = Math.abs(g) > Math.abs(p) ? 0 < g !== m > p: 0 < p !== l < g;
                if (q = e === Js ? q: !q) h = -Math.abs(h),
                h = Math.min(h, -n[n.length - 1].width),
                h = Math.min(h, -n[n.length - 1].height);
                a.ex.compare(h, n);
                1 < Math.abs(h) && (a.fe = 8 > a.hn ? a.fe - h / (2 * Math.PI) : 5 > n.length && 10 < h ? a.fe / 2 : a.fe - (0 < h ? 1.7 : -2.3), a.Rg = a.fe * k, ht(a, b, c, d, e))
            }
        }
    }
    function gt(a, b, c, d, e) {
        for (var g = a.fe,
        h = a.Rg,
        k = a.Zo,
        l = g * Math.cos(d * Math.PI / 180), m = h * Math.sin(d * Math.PI / 180), n = D.P(), p = b.lc(), q = 0; q < p.length; q++) {
            p[q].na = l;
            p[q].va = m;
            if (q >= p.length - 1) break;
            it(a, l, m, p, q, e, n) || jt(a, l, m, p, q, e, n);
            l = n.x;
            m = n.y
        }
        D.A(n);
        a.hn++;
        if (! (23 < a.hn)) {
            l = Math.atan2(m, l);
            l = e === Js ? a.Ev - l: l - a.Ev;
            l = Math.abs(l) < Math.abs(l - 2 * Math.PI) ? l: l - 2 * Math.PI;
            g = l * (g + h) / 2;
            h = a.ex;
            if (Math.abs(g) < Math.abs(h.qq)) for (h.qq = g, h.Ao = [], h.Xq = [], l = 0; l < p.length; l++) h.Ao[l] = p[l].sb.x,
            h.Xq[l] = p[l].sb.y;
            1 < Math.abs(g) && (a.fe = 8 > a.hn ? a.fe - g / (2 * Math.PI) : a.fe - (0 < g ? 1.7 : -2.3), a.Rg = a.fe * k, gt(a, b, c, d, e))
        }
    }
    function it(a, b, c, d, e, g, h) {
        var k = a.fe,
        l = a.Rg,
        m = 0,
        n = 0;
        a = (d[e].width + d[e + 1].width) / 2 + a.tl;
        var p = !1;
        if (0 <= c !== (g === Js)) {
            if (m = b + a, m > k) {
                m = b - a;
                if (m < -k) return h.x = m,
                h.y = n,
                !1;
                p = !0
            }
        } else if (m = b - a, m < -k) {
            m = b + a;
            if (m > k) return h.x = m,
            h.y = n,
            !1;
            p = !0
        }
        n = Math.sqrt(1 - Math.min(1, m * m / (k * k))) * l;
        0 > c !== p && (n = -n);
        if (Math.abs(c - n) > (d[e].height + d[e + 1].height) / 2) return h.x = m,
        h.y = n,
        !1;
        h.x = m;
        h.y = n;
        return ! 0
    }
    function jt(a, b, c, d, e, g, h) {
        var k = a.fe,
        l = a.Rg,
        m = 0,
        n = 0;
        a = (d[e].height + d[e + 1].height) / 2 + a.tl;
        d = !1;
        if (0 <= b !== (g === Js)) {
            if (n = c - a, n < -l) {
                n = c + a;
                if (n > l) {
                    h.x = m;
                    h.y = n;
                    return
                }
                d = !0
            }
        } else if (n = c + a, n > l) {
            n = c - a;
            if (n < -l) {
                h.x = m;
                h.y = n;
                return
            }
            d = !0
        }
        m = Math.sqrt(1 - Math.min(1, n * n / (l * l))) * k;
        0 > b !== d && (m = -m);
        h.x = m;
        h.y = n
    }
    Gs.prototype.commitLayout = function() {
        this.commitNodes();
        this.zu && this.commitLinks()
    };
    Gs.prototype.commitNodes = function() {
        for (var a = this.HH,
        b = this.network.vertexes.j; b.next();) {
            var c = b.value;
            c.x += a.x;
            c.y += a.y;
            c.commit()
        }
    };
    Gs.prototype.commitLinks = function() {
        for (var a = this.network.edges.j; a.next();) a.value.commit()
    };
    function at(a, b, c, d, e) {
        var g = a.yH;
        if (.001 > Math.abs(a.Zo - 1)) return void 0 !== d && void 0 !== e ? e * b: 2 * Math.PI * b;
        a = b > c ? Math.sqrt(b * b - c * c) / b: Math.sqrt(c * c - b * b) / c;
        for (var h = 0,
        k = 0,
        k = void 0 !== d && void 0 !== e ? e / (g + 1) : Math.PI / (2 * (g + 1)), l = 0, m = 0; m <= g; m++) l = void 0 !== d && void 0 !== e ? d + m * e / g: m * Math.PI / (2 * g),
        l = Math.sin(l),
        h += Math.sqrt(1 - a * a * l * l) * k;
        return void 0 !== d && void 0 !== e ? (b > c ? b: c) * h: 4 * (b > c ? b: c) * h
    }
    function $s(a, b, c, d, e) {
        var g = 0,
        g = void 0 !== d && void 0 !== e ? at(a, 1, c, d, e) : at(a, 1, c);
        return b / g
    }
    function bt(a, b, c, d, e) {
        if (.001 > Math.abs(a.Zo - 1)) return e / b;
        var g = b > c ? Math.sqrt(b * b - c * c) / b: Math.sqrt(c * c - b * b) / c,
        h = 0;
        a = 2 * Math.PI / (700 * a.network.vertexes.count);
        b > c && (d += Math.PI / 2);
        for (var k = 0;; k++) {
            var l = Math.sin(d + k * a),
            h = h + (b > c ? b: c) * Math.sqrt(1 - g * g * l * l) * a;
            if (h >= e) return k * a
        }
    }
    Gs.prototype.sort = function(a) {
        switch (this.sorting) {
        case Os:
            break;
        case Ps:
            a.reverse();
            break;
        case Ms:
            a.sort(this.comparer);
            break;
        case Ns:
            a.sort(this.comparer);
            a.reverse();
            break;
        case Ks:
            for (var b = [], c = 0; c < a.length; c++) b.push(0);
            for (var d = new K(Ys), c = 0; c < a.length; c++) {
                var e = -1,
                g = -1;
                if (0 === c) for (var h = 0; h < a.length; h++) {
                    var k = a.ea(h).BI;
                    k > e && (e = k, g = h)
                } else for (h = 0; h < a.length; h++) k = b[h],
                k > e && (e = k, g = h);
                d.add(a.ea(g));
                b[g] = -1;
                g = a.ea(g);
                e = 0;
                for (h = g.sc; h.next();) e = a.indexOf(h.value.fromVertex),
                0 > e || 0 <= b[e] && b[e]++;
                for (g = g.pc; g.next();) e = a.indexOf(g.value.toVertex),
                0 > e || 0 <= b[e] && b[e]++
            }
            a = [];
            for (g = 0; g < d.length; g++) {
                b = d.ea(g);
                a[g] = [];
                for (var l = 0,
                c = b.pc; c.next();) l = d.indexOf(c.value.toVertex),
                l !== g && 0 > a[g].indexOf(l) && a[g].push(l);
                for (b = b.sc; b.next();) l = d.indexOf(b.value.fromVertex),
                l !== g && 0 > a[g].indexOf(l) && a[g].push(l)
            }
            h = [];
            for (g = 0; g < a.length; g++) h[g] = 0;
            for (var b = [], k = [], m = [], c = [], e = new K(Ys), n = 0, g = 0; g < a.length; g++) {
                var p = a[g].length;
                if (1 === p) c.push(g);
                else if (0 === p) e.add(d.ea(g));
                else {
                    if (0 === n) b.push(g);
                    else {
                        for (var q = Infinity,
                        r = Infinity,
                        s = -1,
                        u = [], p = 0; p < b.length; p++) 0 > a[b[p]].indexOf(b[p === b.length - 1 ? 0 : p + 1]) && u.push(p === b.length - 1 ? 0 : p + 1);
                        if (0 === u.length) for (p = 0; p < b.length; p++) u.push(p);
                        for (p = 0; p < u.length; p++) {
                            var t = u[p],
                            y,
                            l = a[g];
                            y = k;
                            for (var w = m,
                            C = h,
                            A = t,
                            N = b,
                            H = 0,
                            W = 0; W < y.length; W++) {
                                var fa = C[y[W]],
                                S = C[w[W]],
                                ba = 0,
                                ia = 0;
                                fa < S ? (ba = fa, ia = S) : (ba = S, ia = fa);
                                if (ba < A && A <= ia) for (fa = 0; fa < l.length; fa++) S = l[fa],
                                0 > N.indexOf(S) || ba < C[S] && C[S] < ia || ba === C[S] || ia === C[S] || H++;
                                else for (fa = 0; fa < l.length; fa++) S = l[fa],
                                0 > N.indexOf(S) || ba < C[S] && C[S] < ia && ba !== C[S] && ia !== C[S] && H++
                            }
                            y = H;
                            for (C = w = 0; C < a[g].length; C++) l = b.indexOf(a[g][C]),
                            0 <= l && (l = Math.abs(t - (l >= t ? l + 1 : l)), w += l < b.length + 1 - l ? l: b.length + 1 - l);
                            for (C = 0; C < k.length; C++) l = h[k[C]],
                            A = h[m[C]],
                            l >= t && l++,
                            A >= t && A++,
                            l > A && (N = A, A = l, l = N),
                            A - l < (b.length + 2) / 2 === (l < t && t <= A) && w++;
                            if (y < q || y === q && w < r) q = y,
                            r = w,
                            s = t
                        }
                        b.splice(s, 0, g);
                        for (p = 0; p < b.length; p++) h[b[p]] = p;
                        for (p = 0; p < a[g].length; p++) q = a[g][p],
                        0 <= b.indexOf(q) && (k.push(g), m.push(q))
                    }
                    n++
                }
            }
            g = !1;
            for (h = b.length;;) {
                g = !0;
                for (k = 0; k < c.length; k++) if (m = c[k], n = a[m][0], l = b.indexOf(n), 0 <= l) {
                    for (r = p = 0; r < a[n].length; r++) q = a[n][r],
                    q = b.indexOf(q),
                    0 > q || q === l || (s = q > l ? q - l: l - q, p += q < l !== s > h - s ? 1 : -1);
                    b.splice(0 > p ? l: l + 1, 0, m);
                    c.splice(k, 1);
                    k--
                } else g = !1;
                if (g) break;
                else b.push(c[0]),
                c.splice(0, 1)
            }
            for (g = 0; g < b.length; g++) e.add(d.ea(b[g]));
            return e;
        default:
            D.k("Invalid sorting type.")
        }
        return a
    };
    D.defineProperty(Gs, {
        RJ: "radius"
    },
    function() {
        return this.Zs
    },
    function(a) {
        this.Zs !== a && (D.h(a, "number", Gs, "radius"), 0 < a || isNaN(a)) && (this.Zs = a, this.N())
    });
    D.defineProperty(Gs, {
        SH: "aspectRatio"
    },
    function() {
        return this.ir
    },
    function(a) {
        this.ir !== a && (D.h(a, "number", Gs, "aspectRatio"), 0 < a && (this.ir = a, this.N()))
    });
    D.defineProperty(Gs, {
        Le: "startAngle"
    },
    function() {
        return this.zt
    },
    function(a) {
        this.zt !== a && (D.h(a, "number", Gs, "startAngle"), this.zt = a, this.N())
    });
    D.defineProperty(Gs, {
        xf: "sweepAngle"
    },
    function() {
        return this.Ct
    },
    function(a) {
        this.Ct !== a && (D.h(a, "number", Gs, "sweepAngle"), this.Ct = 0 < a && 360 >= a ? a: 360, this.N())
    });
    D.defineProperty(Gs, {
        $f: "arrangement"
    },
    function() {
        return this.vd
    },
    function(a) {
        this.vd !== a && (D.Ca(a, Gs, Gs, "arrangement"), a === Vs || a === Hs || a === Us || a === Ts) && (this.vd = a, this.N())
    });
    D.defineProperty(Gs, {
        direction: "direction"
    },
    function() {
        return this.fa
    },
    function(a) {
        this.fa !== a && (D.Ca(a, Gs, Gs, "direction"), a === Js || a === Ss || a === Qs || a === Rs) && (this.fa = a, this.N())
    });
    D.defineProperty(Gs, {
        sorting: "sorting"
    },
    function() {
        return this.qi
    },
    function(a) {
        this.qi !== a && (D.Ca(a, Gs, Gs, "sorting"), a === Os || a === Ps || a === Ms || Ns || a === Ks) && (this.qi = a, this.N())
    });
    D.defineProperty(Gs, {
        comparer: "comparer"
    },
    function() {
        return this.Zh
    },
    function(a) {
        this.Zh !== a && (D.h(a, "function", Gs, "comparer"), this.Zh = a, this.N())
    });
    D.defineProperty(Gs, {
        spacing: "spacing"
    },
    function() {
        return this.ri
    },
    function(a) {
        this.ri !== a && (D.h(a, "number", Gs, "spacing"), this.ri = a, this.N())
    });
    D.defineProperty(Gs, {
        jy: "nodeDiameterFormula"
    },
    function() {
        return this.Os
    },
    function(a) {
        this.Os !== a && (D.Ca(a, Gs, Gs, "nodeDiameterFormula"), a === Ls || a === Ws) && (this.Os = a, this.N())
    });
    D.w(Gs, {
        IH: "actualXRadius"
    },
    function() {
        return this.fe
    });
    D.w(Gs, {
        JH: "actualYRadius"
    },
    function() {
        return this.Rg
    });
    D.w(Gs, {
        DK: "actualSpacing"
    },
    function() {
        return this.tl
    });
    D.w(Gs, {
        HH: "actualCenter"
    },
    function() {
        return isNaN(this.Ae.x) || isNaN(this.Ae.y) ? new O(0, 0) : new O(this.Ae.x + this.IH, this.Ae.y + this.JH)
    });
    var Hs;
    Gs.ConstantSpacing = Hs = D.s(Gs, "ConstantSpacing", 0);
    var Us;
    Gs.ConstantDistance = Us = D.s(Gs, "ConstantDistance", 1);
    var Ts;
    Gs.ConstantAngle = Ts = D.s(Gs, "ConstantAngle", 2);
    var Vs;
    Gs.Packed = Vs = D.s(Gs, "Packed", 3);
    var Js;
    Gs.Clockwise = Js = D.s(Gs, "Clockwise", 4);
    var Ss;
    Gs.Counterclockwise = Ss = D.s(Gs, "Counterclockwise", 5);
    var Qs;
    Gs.BidirectionalLeft = Qs = D.s(Gs, "BidirectionalLeft", 6);
    var Rs;
    Gs.BidirectionalRight = Rs = D.s(Gs, "BidirectionalRight", 7);
    var Os;
    Gs.Forwards = Os = D.s(Gs, "Forwards", 8);
    var Ps;
    Gs.Reverse = Ps = D.s(Gs, "Reverse", 9);
    var Ms;
    Gs.Ascending = Ms = D.s(Gs, "Ascending", 10);
    var Ns;
    Gs.Descending = Ns = D.s(Gs, "Descending", 11);
    var Ks;
    Gs.Optimized = Ks = D.s(Gs, "Optimized", 12);
    var Ls;
    Gs.Pythagorean = Ls = D.s(Gs, "Pythagorean", 13);
    var Ws;
    Gs.Circular = Ws = D.s(Gs, "Circular", 14);
    function Is() {
        this.qq = -Infinity;
        this.Xq = this.Ao = null
    }
    Is.prototype.compare = function(a, b) {
        if (0 < a && 0 > this.qq || Math.abs(a) < Math.abs(this.qq) && !(0 > a && 0 < this.qq)) {
            this.qq = a;
            this.Ao = [];
            this.Xq = [];
            for (var c = 0; c < b.length; c++) this.Ao[c] = b[c].sb.x,
            this.Xq[c] = b[c].sb.y
        }
    };
    Is.prototype.commit = function(a) {
        if (null !== this.Ao && null !== this.Xq) for (var b = 0; b < this.Ao.length; b++) {
            var c = a.ea(b);
            c.x = this.Ao[b];
            c.y = this.Xq[b]
        }
    };
    function Xs() {
        va.call(this)
    }
    D.Sa(Xs, va);
    D.ja("CircularNetwork", Xs);
    Xs.prototype.createVertex = function() {
        return new Ys
    };
    Xs.prototype.createEdge = function() {
        return new kt
    };
    function Ys() {
        wa.call(this);
        this.actualAngle = this.diameter = NaN
    }
    D.Sa(Ys, wa);
    D.ja("CircularVertex", Ys);
    function Zs(a, b) {
        var c = a.network;
        if (null === c) return NaN;
        c = c.Vb;
        if (null === c) return NaN;
        if (c.$f === Vs) if (c.jy === Ws) a.diameter = Math.max(a.width, a.height);
        else {
            var c = Math.abs(Math.sin(b)),
            d = Math.abs(Math.cos(b));
            if (0 === c) return a.width;
            if (0 === d) return a.height;
            a.diameter = Math.min(a.height / c, a.width / d)
        } else a.diameter = c.jy === Ws ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
        return a.diameter
    }
    function kt() {
        xa.call(this)
    }
    D.Sa(kt, xa);
    D.ja("CircularEdge", kt);
    function lt() {
        0 < arguments.length && D.td(lt);
        Tg.call(this);
        this.Qg = null;
        this.os = 0;
        this.sg = (new Ca(100, 100)).freeze();
        this.hr = !1;
        this.pi = !0;
        this.Yh = !1;
        this.zp = 100;
        this.Rr = 1;
        this.di = 1E3;
        this.$s = Math;
        this.Vo = .05;
        this.Uo = 50;
        this.So = 150;
        this.To = 0;
        this.Fr = 10;
        this.Er = 5
    }
    D.Sa(lt, Tg);
    D.ja("ForceDirectedLayout", lt);
    lt.prototype.cloneProtected = function(a) {
        Tg.prototype.cloneProtected.call(this, a);
        a.sg.assign(this.sg);
        a.hr = this.hr;
        a.pi = this.pi;
        a.Yh = this.Yh;
        a.zp = this.zp;
        a.Rr = this.Rr;
        a.di = this.di;
        a.$s = this.$s;
        a.Vo = this.Vo;
        a.Uo = this.Uo;
        a.So = this.So;
        a.To = this.To;
        a.Fr = this.Fr;
        a.Er = this.Er
    };
    lt.prototype.createNetwork = function() {
        return new vt
    };
    lt.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.fB;
        if (0 < this.network.vertexes.count) {
            this.network.Ax();
            for (var b = this.network.vertexes.j; b.next();) {
                var c = b.value;
                c.charge = this.electricalCharge(c);
                c.mass = this.gravitationalMass(c)
            }
            for (b = this.network.edges.j; b.next();) c = b.value,
            c.stiffness = this.springStiffness(c),
            c.length = this.springLength(c);
            this.oA();
            this.os = 0;
            if (this.needsClusterLayout()) {
                b = this.network;
                for (c = b.mK().j; c.next();) {
                    this.network = c.value;
                    for (var d = this.network.vertexes.j; d.next();) {
                        var e = d.value;
                        e.og = e.vertexes.count;
                        e.Zk = 1;
                        e.Gn = null;
                        e.Uh = null
                    }
                    cu(this, 0, a)
                }
                this.network = b;
                c.reset();
                v && D.l(b, vt, lt, "arrangeConnectedGraphs:singletons");
                for (var d = this.IE,
                g = c.count,
                h = !0,
                k = e = 0,
                l = D.tb(), m = 0; m < g + b.vertexes.count + 2; m++) l[m] = null;
                g = 0;
                c.reset();
                for (var n = D.Nf(); c.next();) if (m = c.value, this.Kh(m, n), h) h = !1,
                e = n.x + n.width / 2,
                k = n.y + n.height / 2,
                l[0] = new O(n.x + n.width + d.width, n.y),
                l[1] = new O(n.x, n.y + n.height + d.height),
                g = 2;
                else {
                    var p = du(l, g, e, k, n.width, n.height, d),
                    q = l[p],
                    r = new O(q.x + n.width + d.width, q.y),
                    s = new O(q.x, q.y + n.height + d.height);
                    p + 1 < g && l.splice(p + 1, 0, null);
                    l[p] = r;
                    l[p + 1] = s;
                    g++;
                    p = q.x - n.x;
                    q = q.y - n.y;
                    for (m = m.vertexes.j; m.next();) r = m.value,
                    r.na += p,
                    r.va += q
                }
                D.Mb(n);
                for (m = b.vertexes.j; m.next();) h = m.value,
                n = h.sb,
                2 > g ? (e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new O(n.x + n.width + d.width, n.y), l[1] = new O(n.x, n.y + n.height + d.height), g = 2) : (p = du(l, g, e, k, n.width, n.height, d), q = l[p], r = new O(q.x + n.width + d.width, q.y), s = new O(q.x, q.y + n.height + d.height), p + 1 < g && l.splice(p + 1, 0, null), l[p] = r, l[p + 1] = s, g++, h.na = q.x + h.width / 2, h.va = q.y + h.height / 2);
                D.Aa(l);
                for (c.reset(); c.next();) {
                    d = c.value;
                    for (e = d.vertexes.j; e.next();) b.Xl(e.value);
                    for (d = d.edges.j; d.next();) b.Yp(d.value)
                }
            }
            eu(this, a);
            this.updateParts()
        }
        this.zp = a;
        this.network = null;
        this.Hf = !0
    };
    lt.prototype.needsClusterLayout = function() {
        if (3 > this.network.vertexes.count) return ! 1;
        for (var a = 0,
        b = 0,
        c = this.network.vertexes.first().sb, d = this.network.vertexes.j; d.next();) {
            if (d.value.sb.Wg(c) && (a++, 2 < a)) return ! 0;
            if (10 < b) break;
            b++
        }
        return ! 1
    };
    lt.prototype.Kh = function(a, b) {
        for (var c = !0,
        d = a.vertexes.j; d.next();) {
            var e = d.value;
            c ? (c = !1, b.set(e.sb)) : b.Wh(e.sb)
        }
        return b
    };
    function fu(a, b, c) {
        v && (D.p(b, lt, "computeClusterLayoutIterations:level"), D.p(c, lt, "computeClusterLayoutIterations:maxiter"));
        return Math.max(Math.min(a.network.vertexes.count, c * (b + 1) / 11), 10)
    }
    function cu(a, b, c) {
        v && (D.p(b, lt, "layoutClusters:level"), D.p(c, lt, "layoutClusters:maxiter"));
        if (gu(a, b)) {
            var d = a.di;
            a.di *= 1 + 1 / (b + 1);
            var e = hu(a, b),
            g = Math.max(0, fu(a, b, c));
            a.fB += g;
            cu(a, b + 1, c);
            eu(a, g);
            iu(a, e, b);
            c = a.Qg;
            null === c ? c = new K(ju) : c.clear();
            c.Rc(e.vertexes);
            c.sort(function(a, b) {
                return null === a || null === b || a === b ? 0 : b.og - a.og
            });
            for (e = c.j; e.next();) ku(a, e.value, b);
            a.di = d
        }
    }
    function gu(a, b) {
        v && D.p(b, lt, "hasClusters:level");
        if (10 < b || 3 > a.network.vertexes.count) return ! 1;
        null === a.Qg ? a.Qg = new K(ju) : a.Qg.clear();
        a.Qg.Rc(a.network.vertexes);
        var c = a.Qg;
        c.sort(function(a, b) {
            return null === a || null === b || a === b ? 0 : b.og - a.og
        });
        for (var d = c.count - 1; 0 <= d && 1 >= c.ea(d).og;) d--;
        return 1 < c.count - d
    }
    function hu(a, b) {
        v && D.p(b, lt, "pushSubNetwork:level");
        for (var c = a.network,
        d = new vt,
        e = a.Qg.j; e.next();) {
            var g = e.value;
            if (1 < g.og) {
                d.Xl(g);
                var h = new lu;
                h.Py = g.og;
                h.Qy = g.width;
                h.Oy = g.height;
                h.dC = g.W.x;
                h.eC = g.W.y;
                null === g.Uh && (g.Uh = new K(lu));
                g.Uh.add(h);
                g.xB = g.Uh.count - 1
            } else break
        }
        for (var k = c.edges.j; k.next();) if (h = k.value, e = h.fromVertex, g = h.toVertex, e.network === d && g.network === d) d.Yp(h);
        else if (e.network === d) {
            var l = e.Gn;
            null === l && (l = new K(ju), e.Gn = l);
            l.add(g);
            e.og--;
            e.Zk += g.Zk
        } else g.network === d && (l = g.Gn, null === l && (l = new K(ju), g.Gn = l), l.add(e), g.og--, g.Zk += e.Zk);
        for (e = d.edges.j; e.next();) g = e.value,
        g.length *= Math.max(1, te((g.fromVertex.Zk + g.toVertex.Zk) / (4 * b + 1)));
        for (e = d.vertexes.j; e.next();) if (g = e.value, l = g.Gn, null !== l && 0 < l.count && (h = g.Uh.ea(g.Uh.count - 1), h = h.Py - g.og, !(0 >= h))) {
            for (var m = 0,
            n = 0,
            p = l.count - h; p < l.count; p++) {
                for (var q = l.ea(p), r = null, k = q.edges.j; k.next();) {
                    var s = k.value;
                    if (s.LI(q) === g) {
                        r = s;
                        break
                    }
                }
                null !== r && (n += r.length, m += q.width * q.height)
            }
            k = g.na;
            l = g.va;
            p = g.width;
            q = g.height;
            r = g.W;
            s = p * q;
            1 > s && (s = 1);
            m = te((m + s + n * n * 4 / (h * h)) / s);
            h = (m - 1) * p / 2;
            m = (m - 1) * q / 2;
            g.sb = new B(k - r.x - h, l - r.y - m, p + 2 * h, q + 2 * m);
            g.focus = new O(r.x + h, r.y + m)
        }
        a.network = d;
        return c
    }
    function iu(a, b, c) {
        v && (D.l(b, vt, lt, "popNetwork:oldnet"), D.p(c, lt, "popNetwork:level"));
        for (c = a.network.vertexes.j; c.next();) {
            var d = c.value;
            d.network = b;
            if (null !== d.Uh) {
                var e = d.Uh.ea(d.xB);
                d.og = e.Py;
                var g = e.dC,
                h = e.eC;
                d.sb = new B(d.na - g, d.va - h, e.Qy, e.Oy);
                d.focus = new O(g, h);
                d.xB--
            }
        }
        for (c = a.network.edges.j; c.next();) c.value.network = b;
        a.network = b
    }
    function ku(a, b, c) {
        v && (D.l(b, ju, lt, "surroundNode:oldnet"), D.p(c, lt, "surroundNode:level"));
        var d = b.Gn;
        if (null !== d && 0 !== d.count) {
            c = b.na;
            var e = b.va,
            g = b.width,
            h = b.height;
            null !== b.Uh && 0 < b.Uh.count && (h = b.Uh.ea(0), g = h.Qy, h = h.Oy);
            for (var g = te(g * g + h * h) / 2, k = !1, l = h = 0, m = 0, n = b.vertexes.j; n.next();) {
                var p = n.value;
                1 >= p.og ? l++:(k = !0, m++, h += Math.atan2(b.va - p.va, b.na - p.na))
            }
            if (0 !== l) for (0 < m && (h /= m), m = b = 0, b = k ? 2 * Math.PI / (l + 1) : 2 * Math.PI / l, 0 === l % 2 && (m = b / 2), 1 < d.count && d.sort(function(a, b) {
                return null === a || null === b || a === b ? 0 : b.width * b.height - a.width * a.height
            }), k = 0 === l % 2 ? 0 : 1, d = d.j; d.next();) if (l = d.value, !(1 < l.og || a.isFixed(l))) {
                n = null;
                for (p = l.edges.j; p.next();) {
                    n = p.value;
                    break
                }
                var p = l.width,
                q = l.height,
                p = te(p * p + q * q) / 2,
                n = g + n.length + p,
                p = h + (b * (k / 2 >> 1) + m) * (0 === k % 2 ? 1 : -1);
                l.na = c + n * Math.cos(p);
                l.va = e + n * Math.sin(p);
                k++
            }
        }
    }
    function du(a, b, c, d, e, g, h) {
        var k = 9E19,
        l = -1,
        m = 0;
        a: for (; m < b; m++) {
            var n = a[m],
            p = n.x - c,
            q = n.y - d,
            p = p * p + q * q;
            if (p < k) {
                for (q = m - 1; 0 <= q; q--) if (a[q].y > n.y && a[q].x - n.x < e + h.width) continue a;
                for (q = m + 1; q < b; q++) if (a[q].x > n.x && a[q].y - n.y < g + h.height) continue a;
                l = m;
                k = p
            }
        }
        return l
    }
    lt.prototype.oA = function() {
        if (this.comments) for (var a = this.network.vertexes.j; a.next();) this.addComments(a.value)
    };
    lt.prototype.addComments = function(a) {
        var b = a.Vc;
        if (null !== b) for (b = b.mF(); b.next();) {
            var c = b.value;
            if ("Comment" === c.Dd && c.isVisible()) {
                var d = this.network.Qn(c);
                null === d && (d = this.network.Rt(c));
                d.charge = this.mI;
                for (var c = null,
                e = d.pc; e.next();) {
                    var g = e.value;
                    if (g.toVertex === a) {
                        c = g;
                        break
                    }
                }
                if (null === c) for (e = d.sc; e.next();) if (g = e.value, g.fromVertex === a) {
                    c = g;
                    break
                }
                null === c && (c = this.network.Cq(a, d, null));
                c.length = this.nI
            }
        }
    };
    function mu(a, b) {
        v && (D.l(a, ju, lt, "getNodeDistance:vertexA"), D.l(b, ju, lt, "getNodeDistance:vertexB"));
        var c = a.R,
        d = c.x,
        e = c.y,
        g = c.width,
        c = c.height,
        h = b.R,
        k = h.x,
        l = h.y,
        m = h.width,
        h = h.height;
        return d + g < k ? e > l + h ? (d = d + g - k, e = e - l - h, te(d * d + e * e)) : e + c < l ? (d = d + g - k, e = e + c - l, te(d * d + e * e)) : k - (d + g) : d > k + m ? e > l + h ? (d = d - k - m, e = e - l - h, te(d * d + e * e)) : e + c < l ? (d = d - k - m, e = e + c - l, te(d * d + e * e)) : d - (k + m) : e > l + h ? e - (l + h) : e + c < l ? l - (e + c) : .1
    }
    function eu(a, b) {
        v && D.p(b, lt, "performIterations:num");
        a.Qg = null;
        for (var c = a.os + b; a.os < c && (a.os++, nu(a)););
        a.Qg = null
    }
    function nu(a) {
        null === a.Qg && (a.Qg = new K(ju), a.Qg.Rc(a.network.vertexes));
        var b = a.Qg.o;
        if (0 >= b.length) return ! 1;
        var c = b[0];
        c.forceX = 0;
        c.forceY = 0;
        for (var d = c.na,
        e = d,
        g = c.va,
        h = g,
        c = 1; c < b.length; c++) {
            var k = b[c];
            k.forceX = 0;
            k.forceY = 0;
            var l = k.na,
            k = k.va,
            d = Math.min(d, l),
            e = Math.max(e, l),
            g = Math.min(g, k),
            h = Math.max(h, k)
        } (g = e - d > h - g) ? b.sort(function(a, b) {
            return null === a || null === b || a === b ? 0 : a.na - b.na
        }) : b.sort(function(a, b) {
            return null === a || null === b || a === b ? 0 : a.va - b.va
        });
        for (var h = a.di,
        m = 0,
        n = 0,
        p = 0,
        c = 0; c < b.length; c++) {
            var k = b[c],
            l = k.R,
            q = k.W,
            d = l.x + q.x,
            l = l.y + q.y,
            n = k.charge * a.electricalFieldX(d, l),
            p = k.charge * a.electricalFieldY(d, l),
            n = n + k.mass * a.gravitationalFieldX(d, l),
            p = p + k.mass * a.gravitationalFieldY(d, l);
            k.forceX += n;
            k.forceY += p;
            for (q = c + 1; q < b.length; q++) if (e = b[q], e !== k) {
                var r = e.R,
                n = e.W,
                p = r.x + n.x,
                r = r.y + n.y;
                if (d - p > h || p - d > h) {
                    if (g) break
                } else if (l - r > h || r - l > h) {
                    if (!g) break
                } else {
                    var s = mu(k, e);
                    1 > s ? (n = a.ty, null === n && (a.ty = n = new Ia(0)), m = n.random(), s = n.random(), d > p ? (n = Math.abs(e.R.right - k.R.x), n = (1 + n) * m) : d < p ? (n = Math.abs(e.R.x - k.R.right), n = -(1 + n) * m) : (n = Math.max(e.width, k.width), n = (1 + n) * m - n / 2), l > r ? (p = Math.abs(e.R.bottom - k.R.y), p = (1 + p) * s) : d < p ? (p = Math.abs(e.R.y - k.R.bottom), p = -(1 + p) * s) : (p = Math.max(e.height, k.height), p = (1 + p) * s - p / 2)) : (m = -(k.charge * e.charge) / (s * s), n = (p - d) / s * m, p = (r - l) / s * m);
                    k.forceX += n;
                    k.forceY += p;
                    e.forceX -= n;
                    e.forceY -= p
                }
            }
        }
        for (c = a.network.edges.j; c.next();) g = c.value,
        k = g.fromVertex,
        e = g.toVertex,
        l = k.R,
        q = k.W,
        d = l.x + q.x,
        l = l.y + q.y,
        r = e.R,
        n = e.W,
        p = r.x + n.x,
        r = r.y + n.y,
        s = mu(k, e),
        1 > s ? (n = a.ty, null === n && (a.ty = n = new Ia(0)), m = n.random(), s = n.random(), n = (d > p ? 1 : -1) * (1 + (e.width > k.width ? e.width: k.width)) * m, p = (l > r ? 1 : -1) * (1 + (e.height > k.height ? e.height: k.height)) * s) : (m = g.stiffness * (s - g.length), n = (p - d) / s * m, p = (r - l) / s * m),
        k.forceX += n,
        k.forceY += p,
        e.forceX -= n,
        e.forceY -= p;
        c = 0;
        d = Math.max(a.di / 20, 50);
        for (e = 0; e < b.length; e++) k = b[e],
        a.isFixed(k) ? a.moveFixedVertex(k) : (g = k.forceX, h = k.forceY, g < -d ? g = -d: g > d && (g = d), h < -d ? h = -d: h > d && (h = d), k.na += g, k.va += h, c = Math.max(c, g * g + h * h));
        return c > a.jF * a.jF
    }
    lt.prototype.moveFixedVertex = function() {};
    lt.prototype.commitLayout = function() {
        this.EB();
        this.commitNodes();
        this.zu && this.commitLinks()
    };
    lt.prototype.EB = function() {
        if (this.Rq) for (var a = this.network.edges.j; a.next();) {
            var b = a.value.link;
            null !== b && (b.Gb = Tc, b.Hb = Tc)
        }
    };
    lt.prototype.commitNodes = function() {
        var a = 0,
        b = 0;
        if (this.RH) {
            var c = D.Nf();
            this.Kh(this.network, c);
            b = this.Ae;
            a = b.x - c.x;
            b = b.y - c.y;
            D.Mb(c)
        }
        for (var c = D.Nf(), d = this.network.vertexes.j; d.next();) {
            var e = d.value;
            if (0 !== a || 0 !== b) c.assign(e.sb),
            c.x += a,
            c.y += b,
            e.sb = c;
            e.commit()
        }
        D.Mb(c)
    };
    lt.prototype.commitLinks = function() {
        for (var a = this.network.edges.j; a.next();) a.value.commit()
    };
    lt.prototype.springStiffness = function(a) {
        a = a.stiffness;
        return isNaN(a) ? this.Vo: a
    };
    lt.prototype.springLength = function(a) {
        a = a.length;
        return isNaN(a) ? this.Uo: a
    };
    lt.prototype.electricalCharge = function(a) {
        a = a.charge;
        return isNaN(a) ? this.So: a
    };
    lt.prototype.electricalFieldX = function() {
        return 0
    };
    lt.prototype.electricalFieldY = function() {
        return 0
    };
    lt.prototype.gravitationalMass = function(a) {
        a = a.mass;
        return isNaN(a) ? this.To: a
    };
    lt.prototype.gravitationalFieldX = function() {
        return 0
    };
    lt.prototype.gravitationalFieldY = function() {
        return 0
    };
    lt.prototype.isFixed = function(a) {
        return a.isFixed
    };
    D.w(lt, {
        gL: "currentIteration"
    },
    function() {
        return this.os
    });
    D.defineProperty(lt, {
        IE: "arrangementSpacing"
    },
    function() {
        return this.sg
    },
    function(a) {
        D.l(a, Ca, lt, "arrangementSpacing");
        this.sg.O(a) || (this.sg.assign(a), this.N())
    });
    D.defineProperty(lt, {
        RH: "arrangesToOrigin"
    },
    function() {
        return this.hr
    },
    function(a) {
        this.hr !== a && (D.h(a, "boolean", lt, "arrangesToOrigin"), this.hr = a, this.N())
    });
    D.defineProperty(lt, {
        Rq: "setsPortSpots"
    },
    function() {
        return this.pi
    },
    function(a) {
        this.pi !== a && (D.h(a, "boolean", lt, "setsPortSpots"), this.pi = a, this.N())
    });
    D.defineProperty(lt, {
        comments: "comments"
    },
    function() {
        return this.Yh
    },
    function(a) {
        this.Yh !== a && (D.h(a, "boolean", lt, "comments"), this.Yh = a, this.N())
    });
    D.defineProperty(lt, {
        fB: "maxIterations"
    },
    function() {
        return this.zp
    },
    function(a) {
        this.zp !== a && (D.h(a, "number", lt, "maxIterations"), 0 <= a && (this.zp = a, this.N()))
    });
    D.defineProperty(lt, {
        jF: "epsilonDistance"
    },
    function() {
        return this.Rr
    },
    function(a) {
        this.Rr !== a && (D.h(a, "number", lt, "epsilonDistance"), 0 < a && (this.Rr = a, this.N()))
    });
    D.defineProperty(lt, {
        EL: "infinityDistance"
    },
    function() {
        return this.di
    },
    function(a) {
        this.di !== a && (D.h(a, "number", lt, "infinityDistance"), 1 < a && (this.di = a, this.N()))
    });
    D.defineProperty(lt, {
        ty: "randomNumberGenerator"
    },
    function() {
        return this.$s
    },
    function(a) {
        this.$s !== a && (null !== a && "function" !== typeof a.random && D.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: ' + a), this.$s = a)
    });
    D.defineProperty(lt, {
        sL: "defaultSpringStiffness"
    },
    function() {
        return this.Vo
    },
    function(a) {
        this.Vo !== a && (D.h(a, "number", lt, "defaultSpringStiffness"), this.Vo = a, this.N())
    });
    D.defineProperty(lt, {
        rL: "defaultSpringLength"
    },
    function() {
        return this.Uo
    },
    function(a) {
        this.Uo !== a && (D.h(a, "number", lt, "defaultSpringLength"), this.Uo = a, this.N())
    });
    D.defineProperty(lt, {
        lL: "defaultElectricalCharge"
    },
    function() {
        return this.So
    },
    function(a) {
        this.So !== a && (D.h(a, "number", lt, "defaultElectricalCharge"), this.So = a, this.N())
    });
    D.defineProperty(lt, {
        mL: "defaultGravitationalMass"
    },
    function() {
        return this.To
    },
    function(a) {
        this.To !== a && (D.h(a, "number", lt, "defaultGravitationalMass"), this.To = a, this.N())
    });
    D.defineProperty(lt, {
        nI: "defaultCommentSpringLength"
    },
    function() {
        return this.Fr
    },
    function(a) {
        this.Fr !== a && (D.h(a, "number", lt, "defaultCommentSpringLength"), this.Fr = a, this.N())
    });
    D.defineProperty(lt, {
        mI: "defaultCommentElectricalCharge"
    },
    function() {
        return this.Er
    },
    function(a) {
        this.Er !== a && (D.h(a, "number", lt, "defaultCommentElectricalCharge"), this.Er = a, this.N())
    });
    function lu() {
        this.eC = this.dC = this.Oy = this.Qy = this.Py = 0
    }
    function vt() {
        va.call(this)
    }
    D.Sa(vt, va);
    D.ja("ForceDirectedNetwork", vt);
    vt.prototype.createVertex = function() {
        return new ju
    };
    vt.prototype.createEdge = function() {
        return new ou
    };
    function ju() {
        wa.call(this);
        this.isFixed = !1;
        this.mass = this.charge = NaN;
        this.Zk = this.og = this.forceY = this.forceX = 0;
        this.Uh = this.Gn = null;
        this.xB = 0
    }
    D.Sa(ju, wa);
    D.ja("ForceDirectedVertex", ju);
    function ou() {
        xa.call(this);
        this.length = this.stiffness = NaN
    }
    D.Sa(ou, xa);
    D.ja("ForceDirectedEdge", ou);
    function pu() {
        0 < arguments.length && D.td(pu);
        Tg.call(this);
        this.ee = this.Zm = 25;
        this.fa = 0;
        this.Ro = qu;
        this.vp = ru;
        this.jp = su;
        this.Xm = 4;
        this.Eo = tu;
        this.oj = uu;
        this.pi = !0;
        this.ts = 4;
        this.Pb = this.ow = this.yb = -1;
        this.Uf = this.Cs = 0;
        this.Ub = this.Sf = this.Tf = this.Fg = this.se = null;
        this.Ks = 0;
        this.Js = this.dn = null;
        this.Hg = 0;
        this.Ls = null;
        this.nC = new O;
        this.xh = [];
        this.xh.length = 100
    }
    D.Sa(pu, Tg);
    D.ja("LayeredDigraphLayout", pu);
    pu.prototype.cloneProtected = function(a) {
        Tg.prototype.cloneProtected.call(this, a);
        a.Zm = this.Zm;
        a.ee = this.ee;
        a.fa = this.fa;
        a.Ro = this.Ro;
        a.vp = this.vp;
        a.jp = this.jp;
        a.Xm = this.Xm;
        a.Eo = this.Eo;
        a.oj = this.oj;
        a.pi = this.pi;
        a.ts = this.ts
    };
    pu.prototype.nc = function(a) {
        a.Ne === pu ? 0 === a.name.indexOf("Aggressive") ? this.PH = a: 0 === a.name.indexOf("Cycle") ? this.lI = a: 0 === a.name.indexOf("Init") ? this.cJ = a: 0 === a.name.indexOf("Layer") ? this.pJ = a: D.k("Unknown enum value: " + a) : Tg.prototype.nc.call(this, a)
    };
    pu.prototype.createNetwork = function() {
        return new vu
    };
    pu.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Ae = this.initialOrigin(this.Ae);
        this.ow = -1;
        this.Uf = this.Cs = 0;
        this.Ls = this.Js = this.dn = null;
        for (a = 0; a < this.xh.length; a++) this.xh[a] = null;
        if (0 < this.network.vertexes.count) {
            this.network.Ax();
            for (a = this.network.edges.j; a.next();) a.value.rev = !1;
            switch (this.Ro) {
            default:
            case wu:
                a = this.network;
                var b = 0,
                c = a.vertexes.count - 1,
                d = [];
                d.length = c + 1;
                for (var e = a.vertexes.j; e.next();) e.value.valid = !0;
                for (; null !== xu(a);) {
                    for (e = yu(a); null !== e;) d[c] = e,
                    c--,
                    e.valid = !1,
                    e = yu(a);
                    for (e = zu(a); null !== e;) d[b] = e,
                    b++,
                    e.valid = !1,
                    e = zu(a);
                    for (var e = null,
                    g = 0,
                    h = this.network.vertexes.j; h.next();) {
                        var k = h.value;
                        if (k.valid) {
                            for (var l = 0,
                            m = k.pc; m.next();) m.value.toVertex.valid && l++;
                            for (var m = 0,
                            n = k.sc; n.next();) n.value.fromVertex.valid && m++;
                            if (null === e || g < l - m) e = k,
                            g = l - m
                        }
                    }
                    null !== e && (d[b] = e, b++, e.valid = !1)
                }
                for (b = 0; b < a.vertexes.count; b++) d[b].index = b;
                for (d = a.edges.j; d.next();) b = d.value,
                b.fromVertex.index > b.toVertex.index && (a.zy(b), b.rev = !0);
                break;
            case qu:
                for (d = this.network.vertexes.j; d.next();) a = d.value,
                a.lq = -1,
                a.finish = -1;
                for (a = this.network.edges.j; a.next();) a.value.forest = !1;
                this.Ks = 0;
                for (d.reset(); d.next();) b = d.value,
                0 === b.sc.count && Au(this, b);
                for (d.reset(); d.next();) b = d.value,
                -1 === b.lq && Au(this, b);
                for (a.reset(); a.next();) d = a.value,
                d.forest || (b = d.fromVertex, c = b.finish, e = d.toVertex, g = e.finish, e.lq < b.lq && c < g && (this.network.zy(d), d.rev = !0))
            }
            for (a = this.network.vertexes.j; a.next();) a.value.layer = -1;
            this.yb = -1;
            this.assignLayers();
            for (a.reset(); a.next();) this.yb = Math.max(this.yb, a.value.layer);
            a = this.network;
            d = [];
            for (c = a.edges.j; c.next();) b = c.value,
            b.valid = !1,
            d.push(b);
            for (c = 0; c < d.length; c++) if (b = d[c], g = b.fromVertex, e = b.toVertex, !b.valid && (null !== g.Bd && null !== e.Bd || g.layer !== e.layer)) {
                m = k = l = h = 0;
                if (null !== b.link) {
                    l = b.link;
                    if (null === l) continue;
                    var p = g.Bd,
                    h = e.Bd;
                    if (null === p || null === h) continue;
                    var q = l.aa,
                    k = l.da,
                    r = l.dd,
                    m = l.Ld;
                    b.rev && (l = q, n = r, q = k, r = m, k = l, m = n);
                    var s = g.W,
                    l = e.W,
                    u = b.rev ? e.R: g.R,
                    n = D.P();
                    u.F() ? (ir(q, r, gc, n), n.F() || n.assign(s)) : n.assign(s);
                    p !== q && u.F() && q.isVisible() && (p = g.R, p.F() && (n.x += u.x - p.x, n.y += u.y - p.y));
                    q = b.rev ? g.R: e.R;
                    p = D.P();
                    q.F() ? (ir(k, m, gc, p), p.F() || p.assign(l)) : p.assign(l);
                    h !== k && q.F() && k.isVisible() && (h = e.R, h.F() && (p.x += q.x - h.x, p.y += q.y - h.y));
                    90 === this.fa || 270 === this.fa ? (h = Math.round((n.x - s.x) / this.ee), k = n.x, l = Math.round((p.x - l.x) / this.ee), m = p.x) : (h = Math.round((n.y - s.y) / this.ee), k = n.y, l = Math.round((p.y - l.y) / this.ee), m = p.y);
                    D.A(n);
                    D.A(p);
                    b.portFromColOffset = h;
                    b.portFromPos = k;
                    b.portToColOffset = l;
                    b.portToPos = m
                } else b.portFromColOffset = 0,
                b.portFromPos = 0,
                b.portToColOffset = 0,
                b.portToPos = 0;
                n = g.layer;
                s = e.layer;
                a: if (p = b, q = 0, u = p.link, null !== u) {
                    var t = u.dd,
                    y = u.Ld;
                    if (null !== t && null !== y) {
                        var w = u.aa,
                        r = u.da;
                        if (null !== w && null !== r) {
                            var C = t.Gb,
                            A = y.Hb;
                            this.Rq || (u.Gb.ed() || (C = u.Gb), u.Hb.ed() || (A = u.Hb));
                            var N = u.qc,
                            H = Bu(this, !0);
                            if (C.ed() || C === bc) C = H;
                            var W = Bu(this, !1);
                            if (A.ed() || A === bc) A = W;
                            if (C.Kj() && C.Ij(W) && A.Kj() && A.Ij(H)) {
                                q = 0;
                                break a
                            }
                            H = u.getLinkPoint(w, t, C, !0, N, r, y, D.P());
                            C = u.getLinkDirection(w, t, H, C, !0, N, r, y);
                            D.A(H);
                            C === Cu(this, p, !0) ? q += 1 : this.Rq && null !== w && 1 === w.ports.count && p.rev && (q += 1);
                            C = u.getLinkPoint(r, y, A, !1, N, w, t, D.P());
                            u = u.getLinkDirection(r, y, C, A, !1, N, w, t);
                            D.A(C);
                            u === Cu(this, p, !1) ? q += 2 : this.Rq && null !== r && 1 === r.ports.count && p.rev && (q += 2)
                        }
                    }
                }
                p = 1 === q || 3 === q ? !0 : !1;
                if (q = 2 === q || 3 === q ? !0 : !1) r = a.createVertex(),
                r.Bd = null,
                r.Dn = 1,
                r.layer = n,
                r.near = g,
                a.Xl(r),
                g = a.Cq(g, r, b.link),
                g.valid = !1,
                g.rev = b.rev,
                g.portFromColOffset = h,
                g.portToColOffset = 0,
                g.portFromPos = k,
                g.portToPos = 0,
                g = r;
                u = 1;
                p && u--;
                if (n - s > u && 0 < n) {
                    b.valid = !1;
                    r = a.createVertex();
                    r.Bd = null;
                    r.Dn = 2;
                    r.layer = n - 1;
                    a.Xl(r);
                    g = a.Cq(g, r, b.link);
                    g.valid = !0;
                    g.rev = b.rev;
                    g.portFromColOffset = q ? 0 : h;
                    g.portToColOffset = 0;
                    g.portFromPos = q ? 0 : k;
                    g.portToPos = 0;
                    g = r;
                    for (n--; n - s > u && 0 < n;) r = a.createVertex(),
                    r.Bd = null,
                    r.Dn = 3,
                    r.layer = n - 1,
                    a.Xl(r),
                    g = a.Cq(g, r, b.link),
                    g.valid = !0,
                    g.rev = b.rev,
                    g.portFromColOffset = 0,
                    g.portToColOffset = 0,
                    g.portFromPos = 0,
                    g.portToPos = 0,
                    g = r,
                    n--;
                    g = a.Cq(r, e, b.link);
                    g.valid = !p;
                    p && (r.near = e);
                    g.rev = b.rev;
                    g.portFromColOffset = 0;
                    g.portToColOffset = l;
                    g.portFromPos = 0;
                    g.portToPos = m
                } else b.valid = !0
            }
            d = this.se = [];
            for (b = 0; b <= this.yb; b++) d[b] = 0;
            for (a = this.network.vertexes.j; a.next();) a.value.index = -1;
            this.initializeIndices();
            this.ow = -1;
            for (b = this.Uf = this.Cs = 0; b <= this.yb; b++) d[b] > d[this.Uf] && (this.ow = d[b] - 1, this.Uf = b),
            d[b] < d[this.Cs] && (this.Cs = b);
            this.Ls = [];
            for (b = 0; b < d.length; b++) this.Ls[b] = [];
            for (a.reset(); a.next();) d = a.value,
            this.Ls[d.layer][d.index] = d;
            this.Pb = -1;
            for (a = 0; a <= this.yb; a++) {
                d = Du(this, a);
                b = 0;
                c = this.se[a];
                for (e = 0; e < c; e++) g = d[e],
                b += this.nodeMinColumnSpace(g, !0),
                g.column = b,
                b += 1,
                b += this.nodeMinColumnSpace(g, !1);
                this.Pb = Math.max(this.Pb, b - 1);
                Eu(this, a, d)
            }
            this.reduceCrossings();
            this.straightenAndPack();
            this.updateParts()
        }
        this.network = null;
        this.Hf = !0
    };
    pu.prototype.linkMinLength = function() {
        return 1
    };
    function Fu(a) {
        var b = a.fromVertex.Bd;
        a = a.toVertex.Bd;
        return null === b && null === a ? 8 : null === b || null === a ? 4 : 1
    }
    pu.prototype.nodeMinLayerSpace = function(a, b) {
        return null === a.Bd ? 0 : 90 === this.fa || 270 === this.fa ? b ? a.W.y + 10 : a.R.height - a.W.y + 10 : b ? a.W.x + 10 : a.R.width - a.W.x + 10
    };
    pu.prototype.nodeMinColumnSpace = function(a, b) {
        if (null === a.Bd) return 0;
        var c = b ? a.nB: a.mB;
        if (null !== c) return c;
        c = this.fa;
        return 90 === c || 270 === c ? b ? a.nB = a.W.x / this.ee + 1 | 0 : a.mB = (a.R.width - a.W.x) / this.ee + 1 | 0 : b ? a.nB = a.W.y / this.ee + 1 | 0 : a.mB = (a.R.height - a.W.y) / this.ee + 1 | 0
    };
    function Gu(a) {
        null === a.dn && (a.dn = []);
        for (var b = 0,
        c = a.network.vertexes.j; c.next();) {
            var d = c.value;
            a.dn[b] = d.layer;
            b++;
            a.dn[b] = d.column;
            b++;
            a.dn[b] = d.index;
            b++
        }
        return a.dn
    }
    function Hu(a, b) {
        for (var c = 0,
        d = a.network.vertexes.j; d.next();) {
            var e = d.value;
            e.layer = b[c];
            c++;
            e.column = b[c];
            c++;
            e.index = b[c];
            c++
        }
    }
    function Iu(a, b, c) {
        v && (D.p(b, pu, "crossingMatrix:unfixedLayer"), D.p(c, pu, "crossingMatrix:direction"));
        var d = Du(a, b),
        e = a.se[b];
        if (null === a.Js || a.Js.length < e * e) a.Js = [];
        for (var g = a.Js,
        h = 0; h < e; h++) {
            var k = 0,
            l = d[h],
            m = l.near,
            n = 0;
            if (null !== m && m.layer === l.layer) if (n = m.index, n > h) for (var p = h + 1; p < n; p++) l = d[p],
            l.near === m && l.Dn === m.Dn || k++;
            else for (p = h - 1; p > n; p--) l = d[p],
            l.near === m && l.Dn === m.Dn || k++;
            var m = 0,
            q, r = q = p = l = 0,
            s, u = 0,
            t = 0;
            s = 0;
            var y;
            if (0 <= c) for (n = d[h].Ve, m = 0; m < n.count; m++) if (q = n.o[m], q.valid && q.fromVertex.layer !== b) for (l = q.fromVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++) s = n.o[r],
            s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, t = s.portToPos, s = s.portFromPos, p < t && (l > u || l === u && q > s) && k++, t < p && (u > l || u === l && s > q) && k++);
            if (0 >= c) for (n = d[h].Pe, m = 0; m < n.count; m++) if (q = n.o[m], q.valid && q.toVertex.layer !== b) for (l = q.toVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++) s = n.o[r],
            s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, s = s.portFromPos, q < s && (l > u || l === u && p > t) && k++, s < q && (u > l || u === l && t > p) && k++);
            g[h * e + h] = k;
            for (n = h + 1; n < e; n++) {
                var w = 0,
                C = 0;
                if (0 <= c) for (k = d[h].Ve, y = d[n].Ve, m = 0; m < k.count; m++) if (q = k.o[m], q.valid && q.fromVertex.layer !== b) for (l = q.fromVertex.index, q = q.portFromPos, r = 0; r < y.count; r++) s = y.o[r],
                s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, s = s.portFromPos, (l < u || l === u && q < s) && C++, (u < l || u === l && s < q) && w++);
                if (0 >= c) for (k = d[h].Pe, y = d[n].Pe, m = 0; m < k.count; m++) if (q = k.o[m], q.valid && q.toVertex.layer !== b) for (l = q.toVertex.index, p = q.portToPos, r = 0; r < y.count; r++) s = y.o[r],
                s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, (l < u || l === u && p < t) && C++, (u < l || u === l && t < p) && w++);
                g[h * e + n] = w;
                g[n * e + h] = C
            }
        }
        Eu(a, b, d);
        return g
    }
    pu.prototype.countCrossings = function() {
        for (var a = 0,
        b = 0; b <= this.yb; b++) for (var c = Iu(this, b, 1), d = this.se[b], e = 0; e < d; e++) for (var g = e; g < d; g++) a += c[e * d + g];
        return a
    };
    function Ju(a) {
        for (var b = 0,
        c = 0; c <= a.yb; c++) {
            for (var d = a,
            e = c,
            g = Du(d, e), h = d.se[e], k = 0, l = 0; l < h; l++) {
                var m = null,
                m = g[l].Pe,
                n,
                p = 0,
                q = 0;
                if (null !== m) for (var r = 0; r < m.count; r++) n = m.o[r],
                n.valid && n.toVertex.layer !== e && (p = n.fromVertex.column + n.portFromColOffset, q = n.toVertex.column + n.portToColOffset, k += (Math.abs(p - q) + 1) * Fu(n))
            }
            Eu(d, e, g);
            b += k
        }
        return b
    }
    pu.prototype.normalize = function() {
        var a = Infinity;
        this.Pb = -1;
        for (var b = this.network.vertexes.j; b.next();) {
            var c = b.value,
            a = Math.min(a, c.column - this.nodeMinColumnSpace(c, !0));
            this.Pb = Math.max(this.Pb, c.column + this.nodeMinColumnSpace(c, !1))
        }
        for (b.reset(); b.next();) b.value.column -= a;
        this.Pb -= a
    };
    function Ku(a, b, c) {
        v && (D.p(b, pu, "barycenters:unfixedLayer"), D.p(c, pu, "barycenters:direction"));
        for (var d = Du(a, b), e = a.se[b], g = [], h = 0; h < e; h++) {
            var k = d[h],
            l = null;
            0 >= c && (l = k.Ve);
            var m = null;
            0 <= c && (m = k.Pe);
            var n = 0,
            p = 0,
            q = k.near;
            null !== q && q.layer === k.layer && (n += q.column - 1, p++);
            if (null !== l) for (q = 0; q < l.count; q++) {
                var k = l.o[q],
                r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (n += r.column, p++)
            }
            if (null !== m) for (l = 0; l < m.count; l++) k = m.o[l],
            q = k.toVertex,
            k.valid && !k.rev && q.layer !== b && (n += q.column, p++);
            g[h] = 0 === p ? -1 : n / p
        }
        Eu(a, b, d);
        return g
    }
    function Lu(a, b, c) {
        v && (D.p(b, pu, "medians:unfixedLayer"), D.p(c, pu, "medians:direction"));
        for (var d = Du(a, b), e = a.se[b], g = [], h = 0; h < e; h++) {
            var k = d[h],
            l = null;
            0 >= c && (l = k.Ve);
            var m = null;
            0 <= c && (m = k.Pe);
            var n = 0,
            p = [],
            q = k.near;
            null !== q && q.layer === k.layer && (p[n] = q.column - 1, n++);
            if (null !== l) for (q = 0; q < l.count; q++) {
                var k = l.o[q],
                r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (p[n] = r.column + k.portFromColOffset, n++)
            }
            if (null !== m) for (l = 0; l < m.count; l++) k = m.o[l],
            q = k.toVertex,
            k.valid && !k.rev && q.layer !== b && (p[n] = q.column + k.portToColOffset, n++);
            0 === n ? g[h] = -1 : (p.sort(function(a, b) {
                return a - b
            }), m = n >> 1, g[h] = 0 !== (n & 1) ? p[m] : p[m - 1] + p[m] >> 1)
        }
        Eu(a, b, d);
        return g
    }
    function Mu(a, b, c, d, e, g) {
        if (b.component === d) {
            b.component = c;
            var h = 0,
            k = 0;
            if (e) for (var l = b.pc; l.next();) {
                var k = l.value,
                m = k.toVertex,
                h = b.layer - m.layer,
                k = a.linkMinLength(k);
                h === k && Mu(a, m, c, d, e, g)
            }
            if (g) for (l = b.sc; l.next();) k = l.value,
            m = k.fromVertex,
            h = m.layer - b.layer,
            k = a.linkMinLength(k),
            h === k && Mu(a, m, c, d, e, g)
        }
    }
    function Nu(a, b, c, d, e, g) {
        if (b.component === d) {
            b.component = c;
            if (e) for (var h = b.pc; h.next();) Nu(a, h.value.toVertex, c, d, e, g);
            if (g) for (b = b.sc; b.next();) Nu(a, b.value.fromVertex, c, d, e, g)
        }
    }
    function xu(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid) return b
        }
        return null
    }
    function yu(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0,
                d = b.pc; d.next();) if (d.value.toVertex.valid) {
                    c = !1;
                    break
                }
                if (c) return b
            }
        }
        return null
    }
    function zu(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0,
                d = b.sc; d.next();) if (d.value.fromVertex.valid) {
                    c = !1;
                    break
                }
                if (c) return b
            }
        }
        return null
    }
    function Au(a, b) {
        b.lq = a.Ks;
        a.Ks++;
        for (var c = b.pc; c.next();) {
            var d = c.value,
            e = d.toVertex; - 1 === e.lq && (d.forest = !0, Au(a, e))
        }
        b.finish = a.Ks;
        a.Ks++
    }
    pu.prototype.assignLayers = function() {
        switch (this.vp) {
        case Ou:
            Pu(this);
            break;
        case Qu:
            for (var a = 0,
            b = this.network.vertexes.j; b.next();) a = Ru(this, b.value),
            this.yb = Math.max(a, this.yb);
            for (b.reset(); b.next();) a = b.value,
            a.layer = this.yb - a.layer;
            break;
        default:
        case ru:
            Pu(this);
            for (b = this.network.vertexes.j; b.next();) b.value.valid = !1;
            for (b.reset(); b.next();) a = b.value,
            0 === a.sc.count && Su(this, a);
            a = Infinity;
            for (b.reset(); b.next();) a = Math.min(a, b.value.layer);
            this.yb = -1;
            for (b.reset(); b.next();) {
                var c = b.value;
                c.layer -= a;
                this.yb = Math.max(this.yb, c.layer)
            }
        }
    };
    function Pu(a) {
        for (var b = a.network.vertexes.j; b.next();) {
            var c = Tu(a, b.value);
            a.yb = Math.max(c, a.yb)
        }
    }
    function Tu(a, b) {
        var c = 0;
        if ( - 1 === b.layer) {
            for (var d = b.pc; d.next();) var e = d.value,
            g = e.toVertex,
            e = a.linkMinLength(e),
            c = Math.max(c, Tu(a, g) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }
    function Ru(a, b) {
        var c = 0;
        if ( - 1 === b.layer) {
            for (var d = b.sc; d.next();) var e = d.value,
            g = e.fromVertex,
            e = a.linkMinLength(e),
            c = Math.max(c, Ru(a, g) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }
    function Su(a, b) {
        if (!b.valid) {
            b.valid = !0;
            for (var c = b.pc; c.next();) Su(a, c.value.toVertex);
            for (c = a.network.vertexes.j; c.next();) c.value.component = -1;
            for (var d = b.Ve.o,
            e = d.length,
            g = 0; g < e; g++) {
                var h = d[g],
                k = h.fromVertex,
                l = h.toVertex,
                h = a.linkMinLength(h);
                k.layer - l.layer > h && Mu(a, k, 0, -1, !0, !1)
            }
            for (Mu(a, b, 1, -1, !0, !0); 0 !== b.component;) {
                for (var k = 0,
                d = Infinity,
                l = 0,
                m = null,
                n = a.network.vertexes.j; n.next();) {
                    var p = n.value;
                    if (1 === p.component) {
                        for (var q = 0,
                        r = !1,
                        s = p.Ve.o,
                        e = s.length,
                        g = 0; g < e; g++) {
                            var h = s[g],
                            u = h.fromVertex,
                            q = q + 1;
                            1 !== u.component && (k += 1, u = u.layer - p.layer, h = a.linkMinLength(h), d = Math.min(d, u - h))
                        }
                        h = p.Pe.o;
                        e = h.length;
                        for (g = 0; g < e; g++) s = h[g].toVertex,
                        q -= 1,
                        1 !== s.component ? k -= 1 : r = !0; (null === m || q < l) && !r && (m = p, l = q)
                    }
                }
                if (0 < k) {
                    for (c.reset(); c.next();) e = c.value,
                    1 === e.component && (e.layer += d);
                    b.component = 0
                } else m.component = 0
            }
            for (c = a.network.vertexes.j; c.next();) c.value.component = -1;
            for (Mu(a, b, 1, -1, !0, !1); 0 !== b.component;) {
                g = 0;
                e = Infinity;
                d = 0;
                h = null;
                for (k = a.network.vertexes.j; k.next();) if (l = k.value, 1 === l.component) {
                    m = 0;
                    n = !1;
                    r = l.Ve.o;
                    p = r.length;
                    for (q = 0; q < p; q++) s = r[q].fromVertex,
                    m += 1,
                    1 !== s.component ? g += 1 : n = !0;
                    r = l.Pe.o;
                    p = r.length;
                    for (q = 0; q < p; q++) s = r[q],
                    u = s.toVertex,
                    m -= 1,
                    1 !== u.component && (g -= 1, u = l.layer - u.layer, s = a.linkMinLength(s), e = Math.min(e, u - s)); (null === h || m > d) && !n && (h = l, d = m)
                }
                if (0 > g) {
                    for (c.reset(); c.next();) g = c.value,
                    1 === g.component && (g.layer -= e);
                    b.component = 0
                } else h.component = 0
            }
        }
    }
    function Cu(a, b, c) {
        return 90 === a.fa ? c && !b.rev || !c && b.rev ? 270 : 90 : 180 === a.fa ? c && !b.rev || !c && b.rev ? 0 : 180 : 270 === a.fa ? c && !b.rev || !c && b.rev ? 90 : 270 : c && !b.rev || !c && b.rev ? 180 : 0
    }
    pu.prototype.initializeIndices = function() {
        switch (this.jp) {
        default:
        case Uu:
            for (var a = this.network.vertexes.j; a.next();) {
                var b = a.value,
                c = b.layer;
                b.index = this.se[c];
                this.se[c]++
            }
            break;
        case su:
            a = this.network.vertexes.j;
            for (b = this.yb; 0 <= b; b--) for (a.reset(); a.next();) c = a.value,
            c.layer === b && -1 === c.index && Vu(this, c);
            break;
        case Wu:
            for (a = this.network.vertexes.j, b = 0; b <= this.yb; b++) for (a.reset(); a.next();) c = a.value,
            c.layer === b && -1 === c.index && Xu(this, c)
        }
    };
    function Vu(a, b) {
        var c = b.layer;
        b.index = a.se[c];
        a.se[c]++;
        for (var c = b.Pe.lc(), d = !0; d;) for (var d = !1,
        e = 0; e < c.length - 1; e++) {
            var g = c[e],
            h = c[e + 1];
            g.portFromColOffset > h.portFromColOffset && (d = !0, c[e] = h, c[e + 1] = g)
        }
        for (e = 0; e < c.length; e++) d = c[e],
        d.valid && (d = d.toVertex, -1 === d.index && Vu(a, d))
    }
    function Xu(a, b) {
        var c = b.layer;
        b.index = a.se[c];
        a.se[c]++;
        for (var c = b.Ve.lc(), d = !0, e = 0; d;) for (d = !1, e = 0; e < c.length - 1; e++) {
            var g = c[e],
            h = c[e + 1];
            g.portToColOffset > h.portToColOffset && (d = !0, c[e] = h, c[e + 1] = g)
        }
        for (e = 0; e < c.length; e++) d = c[e],
        d.valid && (d = d.fromVertex, -1 === d.index && Xu(a, d))
    }
    pu.prototype.reduceCrossings = function() {
        for (var a = this.countCrossings(), b = Gu(this), c = 0, d = 0, e = 0, c = 0; c < this.Xm; c++) {
            for (d = 0; d <= this.yb; d++) Yu(this, d, 1),
            Zu(this, d, 1);
            e = this.countCrossings();
            e < a && (a = e, b = Gu(this));
            for (d = this.yb; 0 <= d; d--) Yu(this, d, -1),
            Zu(this, d, -1);
            e = this.countCrossings();
            e < a && (a = e, b = Gu(this))
        }
        Hu(this, b);
        for (c = 0; c < this.Xm; c++) {
            for (d = 0; d <= this.yb; d++) Yu(this, d, 0),
            Zu(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Gu(this));
            for (d = this.yb; 0 <= d; d--) Yu(this, d, 0),
            Zu(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Gu(this))
        }
        Hu(this, b);
        var g = !1,
        h = c = 0,
        k = 0,
        d = 0;
        switch (this.Eo) {
        case $u:
            break;
        case av:
            for (k = a + 1; (d = this.countCrossings()) < k;) for (k = d, c = this.yb; 0 <= c; c--) for (h = 0; h <= c; h++) {
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, -1) || g;
                e = this.countCrossings();
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, 1) || g;
                e = this.countCrossings();
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, 1) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, -1) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, 0) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, 0) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this))
            }
            break;
        default:
        case tu:
            for (c = this.yb, h = 0, k = a + 1; (d = this.countCrossings()) < k;) {
                k = d;
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, -1) || g;
                e = this.countCrossings();
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, 1) || g;
                e = this.countCrossings();
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, 1) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, -1) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = c; d >= h; d--) g = Zu(this, d, 0) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this));
                for (g = !0; g;) for (g = !1, d = h; d <= c; d++) g = Zu(this, d, 0) || g;
                e >= a ? Hu(this, b) : (a = e, b = Gu(this))
            }
        }
        Hu(this, b)
    };
    function Yu(a, b, c) {
        v && (D.p(b, pu, "medianBarycenterCrossingReduction:unfixedLayer"), D.p(c, pu, "medianBarycenterCrossingReduction:direction"));
        var d = 0,
        e = Du(a, b),
        g = a.se[b],
        h = Lu(a, b, c);
        c = Ku(a, b, c);
        for (d = 0; d < g; d++) - 1 === c[d] && (c[d] = e[d].column),
        -1 === h[d] && (h[d] = e[d].column);
        for (var k = !0,
        l; k;) for (k = !1, d = 0; d < g - 1; d++) if (h[d + 1] < h[d] || h[d + 1] === h[d] && c[d + 1] < c[d]) k = !0,
        l = h[d],
        h[d] = h[d + 1],
        h[d + 1] = l,
        l = c[d],
        c[d] = c[d + 1],
        c[d + 1] = l,
        l = e[d],
        e[d] = e[d + 1],
        e[d + 1] = l;
        for (d = h = 0; d < g; d++) l = e[d],
        l.index = d,
        h += a.nodeMinColumnSpace(l, !0),
        l.column = h,
        h += 1,
        h += a.nodeMinColumnSpace(l, !1);
        Eu(a, b, e)
    }
    function Zu(a, b, c) {
        var d = Du(a, b),
        e = a.se[b];
        c = Iu(a, b, c);
        var g = 0,
        h;
        h = [];
        for (g = 0; g < e; g++) h[g] = -1;
        var k;
        k = [];
        for (g = 0; g < e; g++) k[g] = -1;
        for (var l = !1,
        m = !0; m;) for (m = !1, g = 0; g < e - 1; g++) {
            var n = c[d[g].index * e + d[g + 1].index],
            p = c[d[g + 1].index * e + d[g].index],
            q = 0,
            r = 0,
            s = d[g].column,
            u = d[g + 1].column,
            t = a.nodeMinColumnSpace(d[g], !0),
            y = a.nodeMinColumnSpace(d[g], !1),
            w = a.nodeMinColumnSpace(d[g + 1], !0),
            C = a.nodeMinColumnSpace(d[g + 1], !1),
            t = s - t + w,
            y = u - y + C,
            w = w = 0,
            A = d[g].sc.j;
            for (A.reset(); A.next();) if (w = A.value, C = w.fromVertex, w.valid && C.layer === b) {
                for (w = 0; d[w] !== C;) w++;
                w < g && (q += 2 * (g - w), r += 2 * (g + 1 - w));
                w === g + 1 && (q += 1);
                w > g + 1 && (q += 4 * (w - g), r += 4 * (w - (g + 1)))
            }
            A = d[g].pc.j;
            for (A.reset(); A.next();) if (w = A.value, C = w.toVertex, w.valid && C.layer === b) {
                for (w = 0; d[w] !== C;) w++;
                w === g + 1 && (r += 1)
            }
            A = d[g + 1].sc.j;
            for (A.reset(); A.next();) if (w = A.value, C = w.fromVertex, w.valid && C.layer === b) {
                for (w = 0; d[w] !== C;) w++;
                w < g && (q += 2 * (g + 1 - w), r += 2 * (g - w));
                w === g && (r += 1);
                w > g + 1 && (q += 4 * (w - (g + 1)), r += 4 * (w - g))
            }
            A = d[g + 1].pc.j;
            for (A.reset(); A.next();) if (w = A.value, C = w.toVertex, w.valid && C.layer === b) {
                for (w = 0; d[w] !== C;) w++;
                w === g && (q += 1)
            }
            var w = C = 0,
            A = h[d[g].index],
            N = k[d[g].index],
            H = h[d[g + 1].index],
            W = k[d[g + 1].index]; - 1 !== A && (C += Math.abs(A - s), w += Math.abs(A - y)); - 1 !== N && (C += Math.abs(N - s), w += Math.abs(N - y)); - 1 !== H && (C += Math.abs(H - u), w += Math.abs(H - t)); - 1 !== W && (C += Math.abs(W - u), w += Math.abs(W - t));
            if (r < q - .5 || r === q && p < n - .5 || r === q && p === n && w < C - .5) m = l = !0,
            d[g].column = y,
            d[g + 1].column = t,
            n = d[g],
            d[g] = d[g + 1],
            d[g + 1] = n
        }
        for (g = 0; g < e; g++) d[g].index = g;
        Eu(a, b, d);
        return l
    }
    pu.prototype.straightenAndPack = function() {
        var a = 0,
        b = !1,
        c = 0 !== (this.oj & bv),
        a = this.oj === uu;
        1E3 < this.network.edges.count && !a && (c = !1);
        if (c) {
            b = [];
            for (a = a = 0; a <= this.yb; a++) b[a] = 0;
            for (var d = 0,
            e = this.network.vertexes.j; e.next();) {
                var g = e.value,
                a = g.layer,
                d = g.column,
                g = this.nodeMinColumnSpace(g, !1);
                b[a] = Math.max(b[a], d + g)
            }
            for (e.reset(); e.next();) g = e.value,
            a = g.layer,
            d = g.column,
            g.column = (8 * (this.Pb - b[a]) >> 1) + 8 * d;
            this.Pb *= 8
        }
        if (0 !== (this.oj & cv)) for (b = !0; b;) {
            b = !1;
            for (a = this.Uf + 1; a <= this.yb; a++) b = dv(this, a, 1) || b;
            for (a = this.Uf - 1; 0 <= a; a--) b = dv(this, a, -1) || b;
            b = dv(this, this.Uf, 0) || b
        }
        if (0 !== (this.oj & ev)) {
            for (a = this.Uf + 1; a <= this.yb; a++) fv(this, a, 1);
            for (a = this.Uf - 1; 0 <= a; a--) fv(this, a, -1);
            fv(this, this.Uf, 0)
        }
        c && (gv(this, -1), gv(this, 1));
        if (0 !== (this.oj & cv)) for (b = !0; b;) {
            b = !1;
            b = dv(this, this.Uf, 0) || b;
            for (a = this.Uf + 1; a <= this.yb; a++) b = dv(this, a, 0) || b;
            for (a = this.Uf - 1; 0 <= a; a--) b = dv(this, a, 0) || b
        }
    };
    function dv(a, b, c) {
        v && (D.p(b, pu, "bendStraighten:unfixedLayer"), D.p(c, pu, "bendStraighten:direction"));
        for (var d = !1; hv(a, b, c);) d = !0;
        return d
    }
    function hv(a, b, c) {
        v && (D.p(b, pu, "shiftbendStraighten:unfixedLayer"), D.p(c, pu, "shiftbendStraighten:direction"));
        var d = 0,
        e = Du(a, b),
        g = a.se[b],
        h = Ku(a, b, -1);
        if (0 < c) for (d = 0; d < g; d++) h[d] = -1;
        var k = Ku(a, b, 1);
        if (0 > c) for (d = 0; d < g; d++) k[d] = -1;
        for (var l = !1,
        m = !0; m;) for (m = !1, d = 0; d < g; d++) {
            var n = e[d].column,
            p = a.nodeMinColumnSpace(e[d], !0),
            q = a.nodeMinColumnSpace(e[d], !1),
            r = 0,
            r = 0 > d - 1 || n - e[d - 1].column - 1 > p + a.nodeMinColumnSpace(e[d - 1], !1) ? n - 1 : n,
            p = 0,
            p = d + 1 >= g || e[d + 1].column - n - 1 > q + a.nodeMinColumnSpace(e[d + 1], !0) ? n + 1 : n,
            s = q = 0,
            u = 0,
            t = 0,
            y = 0,
            w = 0;
            if (0 >= c) for (var C = e[d].sc.j; C.next();) {
                var w = C.value,
                A = w.fromVertex;
                w.valid && A.layer !== b && (t = Fu(w), y = w.portFromColOffset, w = w.portToColOffset, A = A.column, q += (Math.abs(n + w - (A + y)) + 1) * t, s += (Math.abs(r + w - (A + y)) + 1) * t, u += (Math.abs(p + w - (A + y)) + 1) * t)
            }
            if (0 <= c) for (C = e[d].pc.j; C.next();) w = C.value,
            A = w.toVertex,
            w.valid && A.layer !== b && (t = Fu(w), y = w.portFromColOffset, w = w.portToColOffset, A = A.column, q += (Math.abs(n + y - (A + w)) + 1) * t, s += (Math.abs(r + y - (A + w)) + 1) * t, u += (Math.abs(p + y - (A + w)) + 1) * t);
            w = y = t = 0;
            C = h[e[d].index];
            A = k[e[d].index]; - 1 !== C && (t += Math.abs(C - n), y += Math.abs(C - r), w += Math.abs(C - p)); - 1 !== A && (t += Math.abs(A - n), y += Math.abs(A - r), w += Math.abs(A - p));
            if (s < q || s === q && y < t) m = l = !0,
            e[d].column = r;
            else if (u < q || u === q && w < t) m = l = !0,
            e[d].column = p
        }
        Eu(a, b, e);
        a.normalize();
        return l
    }
    function fv(a, b, c) {
        v && (D.p(b, pu, "medianStraighten:unfixedLayer"), D.p(c, pu, "medianStraighten:direction"));
        var d = 0,
        e = Du(a, b),
        g = a.se[b],
        h = Lu(a, b, c);
        c = [];
        for (d = 0; d < g; d++) c[d] = h[d];
        for (h = !0; h;) for (h = !1, d = 0; d < g; d++) {
            var k = e[d].column,
            l = a.nodeMinColumnSpace(e[d], !0),
            m = a.nodeMinColumnSpace(e[d], !1),
            n = 0,
            p = 0,
            q = 0,
            q = p = 0; - 1 === c[d] ? 0 === d && d === g - 1 ? n = k: 0 === d ? (p = e[d + 1].column, n = p - k === m + a.nodeMinColumnSpace(e[d + 1], !0) ? k - 1 : k) : d === g - 1 ? (q = e[d - 1].column, n = k - q === l + a.nodeMinColumnSpace(e[d - 1], !1) ? k + 1 : k) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = (q + p) / 2 | 0) : 0 === d && d === g - 1 ? n = c[d] : 0 === d ? (p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = Math.min(c[d], p)) : d === g - 1 ? (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, n = Math.max(c[d], q)) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, q < c[d] && c[d] < p ? n = c[d] : q >= c[d] ? n = q: p <= c[d] && (n = p));
            n !== k && (h = !0, e[d].column = n)
        }
        Eu(a, b, e);
        a.normalize()
    }
    function iv(a, b) {
        v && (D.p(b, pu, "packAux:column"), D.p(1, pu, "packAux:direction"));
        for (var c = !0,
        d = a.network.vertexes.j; d.next();) {
            var e = d.value,
            g = a.nodeMinColumnSpace(e, !0),
            h = a.nodeMinColumnSpace(e, !1);
            if (e.column - g <= b && e.column + h >= b) {
                c = !1;
                break
            }
        }
        e = !1;
        if (c) for (d.reset(); d.next();) c = d.value,
        c.column > b && (c.column -= 1, e = !0);
        return e
    }
    function jv(a, b) {
        v && (D.p(b, pu, "tightPackAux:column"), D.p(1, pu, "tightPackAux:direction"));
        for (var c = b,
        c = b + 1,
        d = 0,
        e = [], g = [], d = 0; d <= a.yb; d++) e[d] = !1,
        g[d] = !1;
        for (var h = a.network.vertexes.j; h.next();) {
            var d = h.value,
            k = d.column - a.nodeMinColumnSpace(d, !0),
            l = d.column + a.nodeMinColumnSpace(d, !1);
            k <= b && l >= b && (e[d.layer] = !0);
            k <= c && l >= c && (g[d.layer] = !0)
        }
        k = !0;
        c = !1;
        for (d = 0; d <= a.yb; d++) k = k && !(e[d] && g[d]);
        if (k) for (h.reset(); h.next();) e = h.value,
        e.column > b && (e.column -= 1, c = !0);
        return c
    }
    function gv(a, b) {
        v && D.p(b, pu, "componentPack:direction");
        for (var c = 0; c <= a.Pb; c++) for (; iv(a, c););
        a.normalize();
        for (c = 0; c < a.Pb; c++) for (; jv(a, c););
        a.normalize();
        var c = 0,
        d, e = 0,
        g = 0,
        h = 0;
        if (0 < b) for (c = 0; c <= a.Pb; c++) for (d = Gu(a), e = Ju(a), g = e + 1; e < g;) g = e,
        kv(a, c, 1),
        h = Ju(a),
        h > e ? Hu(a, d) : h < e && (e = h, d = Gu(a));
        if (0 > b) for (c = a.Pb; 0 <= c; c--) for (d = Gu(a), e = Ju(a), g = e + 1; e < g;) g = e,
        kv(a, c, -1),
        h = Ju(a),
        h > e ? Hu(a, d) : h < e && (e = h, d = Gu(a));
        a.normalize()
    }
    function kv(a, b, c) {
        a.Hg = 0;
        for (var d = a.network.vertexes.j; d.next();) d.value.component = -1;
        if (0 < c) for (d.reset(); d.next();) {
            var e = d.value;
            e.column - a.nodeMinColumnSpace(e, !0) <= b && (e.component = a.Hg)
        }
        if (0 > c) for (d.reset(); d.next();) e = d.value,
        e.column + a.nodeMinColumnSpace(e, !1) >= b && (e.component = a.Hg);
        a.Hg++;
        for (d.reset(); d.next();) b = d.value,
        -1 === b.component && (Nu(a, b, a.Hg, -1, !0, !0), a.Hg++);
        var g = 0;
        b = [];
        for (g = 0; g < a.Hg * a.Hg; g++) b[g] = !1;
        e = [];
        for (g = 0; g < (a.yb + 1) * (a.Pb + 1); g++) e[g] = -1;
        for (d.reset(); d.next();) for (var g = d.value,
        h = g.layer,
        k = Math.max(0, g.column - a.nodeMinColumnSpace(g, !0)), l = Math.min(a.Pb, g.column + a.nodeMinColumnSpace(g, !1)); k <= l; k++) e[h * (a.Pb + 1) + k] = g.component;
        for (g = 0; g <= a.yb; g++) {
            if (0 < c) for (k = 0; k < a.Pb; k++) - 1 !== e[g * (a.Pb + 1) + k] && -1 !== e[g * (a.Pb + 1) + k + 1] && e[g * (a.Pb + 1) + k] !== e[g * (a.Pb + 1) + k + 1] && (b[e[g * (a.Pb + 1) + k] * a.Hg + e[g * (a.Pb + 1) + k + 1]] = !0);
            if (0 > c) for (k = a.Pb; 0 < k; k--) - 1 !== e[g * (a.Pb + 1) + k] && -1 !== e[g * (a.Pb + 1) + k - 1] && e[g * (a.Pb + 1) + k] !== e[g * (a.Pb + 1) + k - 1] && (b[e[g * (a.Pb + 1) + k] * a.Hg + e[g * (a.Pb + 1) + k - 1]] = !0)
        }
        e = [];
        for (g = 0; g < a.Hg; g++) e[g] = !0;
        h = new K("number");
        h.add(0);
        for (l = 0; 0 !== h.count;) if (l = h.o[h.count - 1], h.jd(h.count - 1), e[l]) for (e[l] = !1, g = 0; g < a.Hg; g++) b[l * a.Hg + g] && h.Xd(0, g);
        if (0 < c) for (d.reset(); d.next();) a = d.value,
        e[a.component] && (a.column -= 1);
        if (0 > c) for (d.reset(); d.next();) c = d.value,
        e[c.component] && (c.column += 1)
    }
    pu.prototype.commitLayout = function() {
        if (this.Rq) for (var a = Bu(this, !0), b = Bu(this, !1), c = this.network.edges.j; c.next();) {
            var d = c.value.link;
            null !== d && (d.Gb = a, d.Hb = b)
        }
        this.commitNodes();
        this.sA();
        this.zu && this.commitLinks()
    };
    function Bu(a, b) {
        return 270 === a.fa ? b ? Yc: gd: 90 === a.fa ? b ? gd: Yc: 180 === a.fa ? b ? ed: fd: b ? fd: ed
    }
    pu.prototype.commitNodes = function() {
        this.Fg = [];
        this.Tf = [];
        this.Sf = [];
        this.Ub = [];
        for (var a = 0; a <= this.yb; a++) this.Fg[a] = 0,
        this.Tf[a] = 0,
        this.Sf[a] = 0,
        this.Ub[a] = 0;
        for (a = this.network.vertexes.j; a.next();) {
            var b = a.value,
            c = b.layer;
            this.Fg[c] = Math.max(this.Fg[c], this.nodeMinLayerSpace(b, !0));
            this.Tf[c] = Math.max(this.Tf[c], this.nodeMinLayerSpace(b, !1))
        }
        for (var b = 0,
        d = this.Zm,
        c = 0; c <= this.yb; c++) {
            var e = d;
            0 >= this.Fg[c] + this.Tf[c] && (e = 0);
            0 < c && (b += e / 2);
            90 === this.fa || 0 === this.fa ? (b += this.Tf[c], this.Sf[c] = b, b += this.Fg[c]) : (b += this.Fg[c], this.Sf[c] = b, b += this.Tf[c]);
            c < this.yb && (b += e / 2);
            this.Ub[c] = b
        }
        d = b;
        b = this.Ae;
        for (c = 0; c <= this.yb; c++) 270 === this.fa ? this.Sf[c] = b.y + this.Sf[c] : 90 === this.fa ? (this.Sf[c] = b.y + d - this.Sf[c], this.Ub[c] = d - this.Ub[c]) : 180 === this.fa ? this.Sf[c] = b.x + this.Sf[c] : (this.Sf[c] = b.x + d - this.Sf[c], this.Ub[c] = d - this.Ub[c]);
        a.reset();
        for (d = e = Infinity; a.next();) {
            var c = a.value,
            g = c.layer,
            h = c.column | 0,
            k = 0,
            l = 0;
            270 === this.fa || 90 === this.fa ? (k = b.x + this.ee * h, l = this.Sf[g]) : (k = this.Sf[g], l = b.y + this.ee * h);
            c.na = k;
            c.va = l;
            e = Math.min(c.x, e);
            d = Math.min(c.y, d)
        }
        e = b.x - e;
        b = b.y - d;
        this.nC = new O(e, b);
        for (a.reset(); a.next();) c = a.value,
        c.x += e,
        c.y += b,
        c.commit()
    };
    pu.prototype.sA = function() {
        for (var a = 0,
        b = this.Zm,
        c = 0; c <= this.yb; c++) a += this.Fg[c],
        a += this.Tf[c];
        for (var a = a + this.yb * b,
        b = [], c = this.ee * this.Pb, d = this.yJ; 0 <= d; d--) 270 === this.fa ? 0 === d ? b.push(new B(0, 0, c, Math.abs(this.Ub[0]))) : b.push(new B(0, this.Ub[d - 1], c, Math.abs(this.Ub[d - 1] - this.Ub[d]))) : 90 === this.fa ? 0 === d ? b.push(new B(0, this.Ub[0], c, Math.abs(this.Ub[0] - a))) : b.push(new B(0, this.Ub[d], c, Math.abs(this.Ub[d - 1] - this.Ub[d]))) : 180 === this.fa ? 0 === d ? b.push(new B(0, 0, Math.abs(this.Ub[0]), c)) : b.push(new B(this.Ub[d - 1], 0, Math.abs(this.Ub[d - 1] - this.Ub[d]), c)) : 0 === d ? b.push(new B(this.Ub[0], 0, Math.abs(this.Ub[0] - a), c)) : b.push(new B(this.Ub[d], 0, Math.abs(this.Ub[d - 1] - this.Ub[d]), c));
        this.commitLayers(b, this.nC)
    };
    pu.prototype.commitLayers = function() {};
    pu.prototype.commitLinks = function() {
        for (var a = this.network.edges.j,
        b; a.next();) b = a.value.link,
        null !== b && (b.zm(), b.dq(), b.Aj());
        for (a.reset(); a.next();) b = a.value.link,
        null !== b && b.yo();
        for (a.reset(); a.next();) {
            var c = a.value;
            b = c.link;
            if (null !== b) {
                b.zm();
                var d = b,
                e = d.aa,
                g = d.da,
                h = d.dd,
                k = d.Ld,
                l = c.fromVertex,
                m = c.toVertex;
                if (c.valid) {
                    if (b.gf === Nj && 4 === b.ta) {
                        if (c.rev) var n = e,
                        e = g,
                        g = n,
                        p = h,
                        h = k,
                        k = p;
                        if (l.column === m.column) {
                            var q = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, g, k),
                            r = b.getLinkPoint(g, k, b.computeSpot(!1), !1, !1, e, h);
                            q.F() || q.set(e.$.bm);
                            r.F() || r.set(g.$.bm);
                            b.dq();
                            b.Wl(q.x, q.y);
                            b.Wl((2 * q.x + r.x) / 3, (2 * q.y + r.y) / 3);
                            b.Wl((q.x + 2 * r.x) / 3, (q.y + 2 * r.y) / 3);
                            b.Wl(r.x, r.y)
                        } else {
                            var s = !1,
                            u = !1;
                            null !== h && b.computeSpot(!0) === bc && (s = !0);
                            null !== k && b.computeSpot(!1) === bc && (u = !0);
                            if (s || u) {
                                var t = b.n(0).x,
                                y = b.n(0).y,
                                w = b.n(1).x,
                                C = b.n(1).y,
                                A = b.n(2).x,
                                N = b.n(2).y,
                                H = b.n(3).x,
                                W = b.n(3).y;
                                if (s) {
                                    90 === this.fa || 270 === this.fa ? (w = t, C = (y + W) / 2) : (w = (t + H) / 2, C = y);
                                    b.ia(1, w, C);
                                    var fa = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, g, k);
                                    fa.F() || fa.set(e.$.bm);
                                    b.ia(0, fa.x, fa.y)
                                }
                                u && (90 === this.fa || 270 === this.fa ? (A = H, N = (y + W) / 2) : (A = (t + H) / 2, N = W), b.ia(2, A, N), fa = b.getLinkPoint(g, k, b.computeSpot(!1), !1, !1, e, h), fa.F() || fa.set(g.$.bm), b.ia(3, fa.x, fa.y))
                            }
                        }
                    }
                    b.Aj()
                } else if (l.layer === m.layer) b.Aj();
                else {
                    var S = !1,
                    ba = !1,
                    ia = 0,
                    U = b.ju + 1;
                    if (b.qc) ba = !0,
                    ia = b.ta,
                    4 < ia && b.points.removeRange(2, ia - 3);
                    else if (b.gf === Nj) S = !0,
                    ia = b.ta,
                    4 < ia && b.points.removeRange(2, ia - 3),
                    U = 2;
                    else {
                        var ia = b.ta,
                        Ua = b.computeSpot(!0) === bc,
                        lb = b.computeSpot(!1) === bc;
                        2 < ia && Ua && lb ? b.points.removeRange(1, ia - 2) : 3 < ia && Ua && !lb ? b.points.removeRange(1, ia - 3) : 3 < ia && !Ua && lb ? b.points.removeRange(2, ia - 2) : 4 < ia && !Ua && !lb && b.points.removeRange(2, ia - 3)
                    }
                    var ua, Oa;
                    if (c.rev) {
                        for (var Fa = 0; null !== m && l !== m;) {
                            Oa = ua = null;
                            for (var Vb = m.sc.j; Vb.next();) {
                                var Rb = Vb.value;
                                if (Rb.link === c.link && (ua = Rb.fromVertex, Oa = Rb.toVertex, null === ua.Bd)) break
                            }
                            if (ua !== l) if (Za = b.n(U - 1).x, pb = b.n(U - 1).y, sa = ua.na, pa = ua.va, ba) 180 === this.fa || 0 === this.fa ? 2 === U ? (b.B(U++, Za, pb), b.B(U++, Za, pa)) : (ve = null !== Oa ? Oa.va: pb, ve !== pa && (mb = this.Ub[ua.layer - 1], b.B(U++, mb, pb), b.B(U++, mb, pa))) : 2 === U ? (b.B(U++, Za, pb), b.B(U++, sa, pb)) : (Id = null !== Oa ? Oa.na: Za, Id !== sa && (mb = this.Ub[ua.layer - 1], b.B(U++, Za, mb), b.B(U++, sa, mb)));
                            else if (2 === U) if (nb = Math.max(10, this.Fg[m.layer]), ib = Math.max(10, this.Tf[m.layer]), S) 180 === this.fa ? sa <= m.R.x ? (Fa = m.R.x, b.B(U++, Fa - nb, pa), b.B(U++, Fa, pa), b.B(U++, Fa + ib, pa)) : (b.B(U++, sa - nb, pa), b.B(U++, sa, pa), b.B(U++, sa + ib, pa)) : 90 === this.fa ? pa >= m.R.bottom ? (Fa = m.R.y + m.R.height, b.B(U++, sa, Fa + ib), b.B(U++, sa, Fa), b.B(U++, sa, Fa - nb)) : (b.B(U++, sa, pa + ib), b.B(U++, sa, pa), b.B(U++, sa, pa - nb)) : 270 === this.fa ? pa <= m.R.y ? (Fa = m.R.y, b.B(U++, sa, Fa - nb), b.B(U++, sa, Fa), b.B(U++, sa, Fa + ib)) : (b.B(U++, sa, pa - nb), b.B(U++, sa, pa), b.B(U++, sa, pa + ib)) : 0 === this.fa && (sa >= m.R.right ? (Fa = m.R.x + m.R.width, b.B(U++, Fa + ib, pa), b.B(U++, Fa, pa), b.B(U++, Fa - nb, pa)) : (b.B(U++, sa + ib, pa), b.B(U++, sa, pa), b.B(U++, sa - nb, pa)));
                            else {
                                b.B(U++, Za, pb);
                                var de = 0;
                                if (180 === this.fa || 0 === this.fa) {
                                    if (180 === this.fa ? sa >= m.R.right: sa <= m.R.x) de = (0 === this.fa ? -nb: ib) / 2;
                                    b.B(U++, Za + de, pa)
                                } else {
                                    if (270 === this.fa ? pa >= m.R.bottom: pa <= m.R.y) de = (90 === this.fa ? -nb: ib) / 2;
                                    b.B(U++, sa, pb + de)
                                }
                                b.B(U++, sa, pa)
                            } else nb = Math.max(10, this.Fg[ua.layer]),
                            ib = Math.max(10, this.Tf[ua.layer]),
                            180 === this.fa ? (S && b.B(U++, sa - nb, pa), b.B(U++, sa, pa), S && b.B(U++, sa + ib, pa)) : 90 === this.fa ? (S && b.B(U++, sa, pa + ib), b.B(U++, sa, pa), S && b.B(U++, sa, pa - nb)) : 270 === this.fa ? (S && b.B(U++, sa, pa - nb), b.B(U++, sa, pa), S && b.B(U++, sa, pa + ib)) : (S && b.B(U++, sa + ib, pa), b.B(U++, sa, pa), S && b.B(U++, sa - nb, pa));
                            m = ua
                        }
                        if (null === k || b.computeSpot(!1) !== bc || ba) if (Za = b.n(U - 1).x, pb = b.n(U - 1).y, sa = b.n(U).x, pa = b.n(U).y, ba) {
                            var sd = this.Tf[l.layer],
                            vc = 0;
                            180 === this.fa || 0 === this.fa ? (vc = pb, vc >= l.R.y && vc <= l.R.bottom && (180 === this.fa ? sa >= l.R.x: sa <= l.R.right) && (Fa = l.na + (180 === this.fa ? -sd: sd), vc = vc < l.R.y + l.R.height / 2 ? l.R.y - this.ee / 2 : l.R.bottom + this.ee / 2, b.B(U++, Fa, pb), b.B(U++, Fa, vc)), b.B(U++, sa, vc)) : (vc = Za, vc >= l.R.x && vc <= l.R.right && (270 === this.fa ? pa >= l.R.y: pa <= l.R.bottom) && (Fa = l.va + (270 === this.fa ? -sd: sd), vc = vc < l.R.x + l.R.width / 2 ? l.R.x - this.ee / 2 : l.R.right + this.ee / 2, b.B(U++, Za, Fa), b.B(U++, vc, Fa)), b.B(U++, vc, pa));
                            b.B(U++, sa, pa)
                        } else if (S) nb = Math.max(10, this.Fg[l.layer]),
                        ib = Math.max(10, this.Tf[l.layer]),
                        180 === this.fa && sa >= l.R.x ? (Fa = l.R.x + l.R.width, b.ia(U - 2, Fa, pb), b.ia(U - 1, Fa + ib, pb)) : 90 === this.fa && pa <= l.R.bottom ? (Fa = l.R.y, b.ia(U - 2, Za, Fa), b.ia(U - 1, Za, Fa - nb)) : 270 === this.fa && pa >= l.R.y ? (Fa = l.R.y + l.R.height, b.ia(U - 2, Za, Fa), b.ia(U - 1, Za, Fa + ib)) : 0 === this.fa && sa <= l.R.right && (Fa = l.R.x, b.ia(U - 2, Fa, pb), b.ia(U - 1, Fa - nb, pb));
                        else {
                            nb = Math.max(10, this.Fg[l.layer]);
                            ib = Math.max(10, this.Tf[l.layer]);
                            de = 0;
                            if (180 === this.fa || 0 === this.fa) {
                                if (180 === this.fa ? sa <= l.R.x: sa >= l.R.right) de = (0 === this.fa ? ib: -nb) / 2;
                                b.B(U++, sa + de, pb)
                            } else {
                                if (270 === this.fa ? pa <= l.R.y: pa >= l.R.bottom) de = (90 === this.fa ? ib: -nb) / 2;
                                b.B(U++, Za, pa + de)
                            }
                            b.B(U++, sa, pa)
                        }
                    } else {
                        for (; null !== l && l !== m;) {
                            Oa = ua = null;
                            for (var Bg = l.pc.j; Bg.next();) {
                                var Ff = Bg.value;
                                if (Ff.link === c.link && (ua = Ff.toVertex, Oa = Ff.fromVertex, null !== Oa.Bd && (Oa = null), null === ua.Bd)) break
                            }
                            var Za = 0,
                            pb = 0,
                            sa = 0,
                            pa = 0,
                            mb = 0,
                            nb = 0,
                            ib = 0;
                            if (ua !== m) if (Za = b.n(U - 1).x, pb = b.n(U - 1).y, sa = ua.na, pa = ua.va, ba) if (180 === this.fa || 0 === this.fa) {
                                var ve = null !== Oa ? Oa.va: pb;
                                ve !== pa && (mb = this.Ub[ua.layer], 2 === U && (mb = 0 === this.fa ? Math.max(mb, Za) : Math.min(mb, Za)), b.B(U++, mb, pb), b.B(U++, mb, pa))
                            } else {
                                var Id = null !== Oa ? Oa.na: Za;
                                Id !== sa && (mb = this.Ub[ua.layer], 2 === U && (mb = 90 === this.fa ? Math.max(mb, pb) : Math.min(mb, pb)), b.B(U++, Za, mb), b.B(U++, sa, mb))
                            } else nb = Math.max(10, this.Fg[ua.layer]),
                            ib = Math.max(10, this.Tf[ua.layer]),
                            180 === this.fa ? (b.B(U++, sa + ib, pa), S && b.B(U++, sa, pa), b.B(U++, sa - nb, pa)) : 90 === this.fa ? (b.B(U++, sa, pa - nb), S && b.B(U++, sa, pa), b.B(U++, sa, pa + ib)) : 270 === this.fa ? (b.B(U++, sa, pa + ib), S && b.B(U++, sa, pa), b.B(U++, sa, pa - nb)) : (b.B(U++, sa - nb, pa), S && b.B(U++, sa, pa), b.B(U++, sa + ib, pa));
                            l = ua
                        }
                        ba && (Za = b.n(U - 1).x, pb = b.n(U - 1).y, sa = b.n(U).x, pa = b.n(U).y, 180 === this.fa || 0 === this.fa ? pb !== pa && (mb = 0 === this.fa ? Math.min(Math.max((sa + Za) / 2, this.Ub[m.layer]), sa) : Math.max(Math.min((sa + Za) / 2, this.Ub[m.layer]), sa), b.B(U++, mb, pb), b.B(U++, mb, pa)) : Za !== sa && (mb = 90 === this.fa ? Math.min(Math.max((pa + pb) / 2, this.Ub[m.layer]), pa) : Math.max(Math.min((pa + pb) / 2, this.Ub[m.layer]), pa), b.B(U++, Za, mb), b.B(U++, sa, mb)))
                    }
                    if (null !== d && S) {
                        if (null !== h) {
                            if (b.computeSpot(!0) === bc) {
                                var zb = b.n(0),
                                Oe = b.n(2);
                                zb.O(Oe) || b.ia(1, (zb.x + Oe.x) / 2, (zb.y + Oe.y) / 2)
                            }
                            fa = b.getLinkPoint(e, h, bc, !0, !1, g, k);
                            fa.F() || fa.set(e.$.bm);
                            b.ia(0, fa.x, fa.y)
                        }
                        null !== k && (b.computeSpot(!1) === bc && (zb = b.n(b.ta - 1), Oe = b.n(b.ta - 3), zb.O(Oe) || b.ia(b.ta - 2, (zb.x + Oe.x) / 2, (zb.y + Oe.y) / 2)), fa = b.getLinkPoint(g, k, bc, !1, !1, e, h), fa.F() || fa.set(g.$.bm), b.ia(b.ta - 1, fa.x, fa.y))
                    }
                    b.Aj();
                    c.commit()
                }
            }
        }
        for (var jd = new K(J), eg = this.network.edges.j; eg.next();) {
            var Gf = eg.value.link;
            null !== Gf && Gf.qc && !jd.contains(Gf) && jd.add(Gf)
        }
        if (0 < jd.count) if (90 === this.fa || 270 === this.fa) {
            for (var Cg = 0,
            ob = new K(lv), hc, Zc, fg = jd.j; fg.next();) {
                var Cb = fg.value;
                if (null !== Cb && Cb.qc) for (var Sb = 2; Sb < Cb.ta - 3; Sb++) if (hc = Cb.n(Sb), Zc = Cb.n(Sb + 1), mv(hc.y, Zc.y) && !mv(hc.x, Zc.x)) {
                    var we = new lv;
                    we.layer = Math.floor(hc.y / 2);
                    var Dg = Cb.n(0),
                    Jd = Cb.n(Cb.ta - 1);
                    we.first = Dg.x * Dg.x + Dg.y;
                    we.pe = Jd.x * Jd.x + Jd.y;
                    we.ef = Math.min(hc.x, Zc.x);
                    we.Ce = Math.max(hc.x, Zc.x);
                    we.index = Sb;
                    we.link = Cb;
                    if (Sb + 2 < Cb.ta) {
                        var qb = Cb.n(Sb - 1),
                        Nc = Cb.n(Sb + 2),
                        Hf = 0;
                        qb.y < hc.y ? Hf = Nc.y < hc.y ? 3 : hc.x < Zc.x ? 2 : 1 : qb.y > hc.y && (Hf = Nc.y > hc.y ? 0 : Zc.x < hc.x ? 2 : 1);
                        we.Ji = Hf
                    }
                    ob.add(we)
                }
            }
            if (1 < ob.count) {
                ob.sort(this.KG);
                for (var Pe = 0; Pe < ob.count;) {
                    for (var Zh = ob.o[Pe].layer, Va = Pe + 1; Va < ob.count && ob.o[Va].layer === Zh;) Va++;
                    if (1 < Va - Pe) for (var eb = Pe; eb < Va;) {
                        for (var Ac = ob.o[eb].Ce, wc = Pe + 1; wc < Va && ob.o[wc].ef < Ac;) Ac = Math.max(Ac, ob.o[wc].Ce),
                        wc++;
                        var $c = wc - eb;
                        if (1 < $c) {
                            ob.Uq(this.By, eb, eb + $c);
                            for (var oh = 1,
                            ab = ob.o[eb].pe, Sb = eb; Sb < wc; Sb++) {
                                var Db = ob.o[Sb];
                                Db.pe !== ab && (oh++, ab = Db.pe)
                            }
                            ob.Uq(this.JG, eb, eb + $c);
                            for (var Ab = 1,
                            ab = ob.o[eb].first, Sb = eb; Sb < wc; Sb++) Db = ob.o[Sb],
                            Db.first !== ab && (Ab++, ab = Db.first);
                            var Bc = !0,
                            Eb = Ab;
                            oh < Ab ? (Bc = !1, Eb = oh, ab = ob.o[eb].pe, ob.Uq(this.By, eb, eb + $c)) : ab = ob.o[eb].first;
                            for (var tb = 0,
                            Sb = eb; Sb < wc; Sb++) {
                                Db = ob.o[Sb]; (Bc ? Db.first: Db.pe) !== ab && (tb++, ab = Bc ? Db.first: Db.pe);
                                Cb = Db.link;
                                hc = Cb.n(Db.index);
                                Zc = Cb.n(Db.index + 1);
                                var Fb = this.aG * (tb - (Eb - 1) / 2);
                                if (!Cb.Di || nv(hc.x, hc.y + Fb, Zc.x, Zc.y + Fb)) Cg++,
                                Cb.zm(),
                                Cb.ia(Db.index, hc.x, hc.y + Fb),
                                Cb.ia(Db.index + 1, Zc.x, Zc.y + Fb),
                                Cb.Aj()
                            }
                        }
                        eb = wc
                    }
                    Pe = Va
                }
            }
        } else {
            for (var ee = 0,
            Ib = new K(lv), Mb, Oc, $h = jd.j; $h.next();) {
                var Nb = $h.value;
                if (null !== Nb && Nb.qc) for (var Tb = 2; Tb < Nb.ta - 3; Tb++) if (Mb = Nb.n(Tb), Oc = Nb.n(Tb + 1), mv(Mb.x, Oc.x) && !mv(Mb.y, Oc.y)) {
                    var Cc = new lv;
                    Cc.layer = Math.floor(Mb.x / 2);
                    var ad = Nb.n(0),
                    td = Nb.n(Nb.ta - 1);
                    Cc.first = ad.x + ad.y * ad.y;
                    Cc.pe = td.x + td.y * td.y;
                    Cc.ef = Math.min(Mb.y, Oc.y);
                    Cc.Ce = Math.max(Mb.y, Oc.y);
                    Cc.index = Tb;
                    Cc.link = Nb;
                    if (Tb + 2 < Nb.ta) {
                        var Eg = Nb.n(Tb - 1),
                        ai = Nb.n(Tb + 2),
                        ub = 0;
                        Eg.x < Mb.x ? ub = ai.x < Mb.x ? 3 : Mb.y < Oc.y ? 2 : 1 : Eg.x > Mb.x && (ub = ai.x > Mb.x ? 0 : Oc.y < Mb.y ? 2 : 1);
                        Cc.Ji = ub
                    }
                    Ib.add(Cc)
                }
            }
            if (1 < Ib.count) {
                Ib.sort(this.KG);
                for (var bd = 0; bd < Ib.count;) {
                    for (var bi = Ib.o[bd].layer, Qe = bd + 1; Qe < Ib.count && Ib.o[Qe].layer === bi;) Qe++;
                    if (1 < Qe - bd) for (var ic = bd; ic < Qe;) {
                        for (var xe = Ib.o[ic].Ce, Zb = bd + 1; Zb < Qe && Ib.o[Zb].ef < xe;) xe = Math.max(xe, Ib.o[Zb].Ce),
                        Zb++;
                        var Dc = Zb - ic;
                        if (1 < Dc) {
                            Ib.Uq(this.By, ic, ic + Dc);
                            for (var ud = 1,
                            jc = Ib.o[ic].pe, Tb = ic; Tb < Zb; Tb++) {
                                var Wa = Ib.o[Tb];
                                Wa.pe !== jc && (ud++, jc = Wa.pe)
                            }
                            Ib.Uq(this.JG, ic, ic + Dc);
                            for (var kc = 1,
                            jc = Ib.o[ic].first, Tb = ic; Tb < Zb; Tb++) Wa = Ib.o[Tb],
                            Wa.first !== jc && (kc++, jc = Wa.first);
                            var ci = !0,
                            ef = kc;
                            ud < kc ? (ci = !1, ef = ud, jc = Ib.o[ic].pe, Ib.Uq(this.By, ic, ic + Dc)) : jc = Ib.o[ic].first;
                            for (var Kd = 0,
                            Tb = ic; Tb < Zb; Tb++) {
                                Wa = Ib.o[Tb]; (ci ? Wa.first: Wa.pe) !== jc && (Kd++, jc = ci ? Wa.first: Wa.pe);
                                Nb = Wa.link;
                                Mb = Nb.n(Wa.index);
                                Oc = Nb.n(Wa.index + 1);
                                var fe = this.aG * (Kd - (ef - 1) / 2);
                                if (!Nb.Di || nv(Mb.x + fe, Mb.y, Oc.x + fe, Oc.y)) ee++,
                                Nb.zm(),
                                Nb.ia(Wa.index, Mb.x + fe, Mb.y),
                                Nb.ia(Wa.index + 1, Oc.x + fe, Oc.y),
                                Nb.Aj()
                            }
                        }
                        ic = Zb
                    }
                    bd = Qe
                }
            }
        }
    };
    pu.prototype.KG = function(a, b) {
        return a instanceof lv && b instanceof lv && a !== b ? a.layer < b.layer ? -1 : a.layer > b.layer ? 1 : a.ef < b.ef ? -1 : a.ef > b.ef ? 1 : a.Ce < b.Ce ? -1 : a.Ce > b.Ce ? 1 : 0 : 0
    };
    pu.prototype.JG = function(a, b) {
        return a instanceof lv && b instanceof lv && a !== b ? a.first < b.first ? -1 : a.first > b.first || a.Ji < b.Ji ? 1 : a.Ji > b.Ji || a.ef < b.ef ? -1 : a.ef > b.ef ? 1 : a.Ce < b.Ce ? -1 : a.Ce > b.Ce ? 1 : 0 : 0
    };
    pu.prototype.By = function(a, b) {
        return a instanceof lv && b instanceof lv && a !== b ? a.pe < b.pe ? -1 : a.pe > b.pe || a.Ji < b.Ji ? 1 : a.Ji > b.Ji || a.ef < b.ef ? -1 : a.ef > b.ef ? 1 : a.Ce < b.Ce ? -1 : a.Ce > b.Ce ? 1 : 0 : 0
    };
    function mv(a, b) {
        v && (D.p(a, pu, "isApprox:a"), D.p(b, pu, "isApprox:b"));
        var c = a - b;
        return - 1 < c && 1 > c
    }
    function nv(a, b, c, d) {
        v && (D.p(a, pu, "isUnoccupied2:px"), D.p(b, pu, "isUnoccupied2:py"), D.p(c, pu, "isUnoccupied2:qx"), D.p(d, pu, "isUnoccupied2:qy"));
        return ! 0
    }
    function Du(a, b) {
        var c, d = a.se[b];
        if (d >= a.xh.length) {
            c = [];
            for (var e = 0; e < a.xh.length; e++) c[e] = a.xh[e];
            a.xh = c
        }
        void 0 === a.xh[d] || null === a.xh[d] ? c = [] : (c = a.xh[d], a.xh[d] = null);
        d = a.Ls[b];
        for (e = 0; e < d.length; e++) {
            var g = d[e];
            c[g.index] = g
        }
        return c
    }
    function Eu(a, b, c) {
        a.xh[a.se[b]] = c
    }
    D.defineProperty(pu, {
        layerSpacing: "layerSpacing"
    },
    function() {
        return this.Zm
    },
    function(a) {
        this.Zm !== a && (D.h(a, "number", pu, "layerSpacing"), 0 <= a && (this.Zm = a, this.N()))
    });
    D.defineProperty(pu, {
        dL: "columnSpacing"
    },
    function() {
        return this.ee
    },
    function(a) {
        this.ee !== a && (D.h(a, "number", pu, "columnSpacing"), 0 < a && (this.ee = a, this.N()))
    });
    D.defineProperty(pu, {
        direction: "direction"
    },
    function() {
        return this.fa
    },
    function(a) {
        this.fa !== a && (D.h(a, "number", pu, "direction"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.fa = a, this.N()) : D.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))
    });
    D.defineProperty(pu, {
        angle: "angle"
    },
    function() {
        return this.direction
    },
    function(a) {
        this.direction = a
    });
    D.defineProperty(pu, {
        lI: "cycleRemoveOption"
    },
    function() {
        return this.Ro
    },
    function(a) {
        this.Ro !== a && (D.Ca(a, pu, pu, "cycleRemoveOption"), a === wu || a === qu) && (this.Ro = a, this.N())
    });
    D.defineProperty(pu, {
        pJ: "layeringOption"
    },
    function() {
        return this.vp
    },
    function(a) {
        this.vp !== a && (D.Ca(a, pu, pu, "layeringOption"), a === ru || a === Ou || a === Qu) && (this.vp = a, this.N())
    });
    D.defineProperty(pu, {
        cJ: "initializeOption"
    },
    function() {
        return this.jp
    },
    function(a) {
        this.jp !== a && (D.Ca(a, pu, pu, "initializeOption"), a === su || a === Wu || a === Uu) && (this.jp = a, this.N())
    });
    D.defineProperty(pu, {
        ML: "iterations"
    },
    function() {
        return this.Xm
    },
    function(a) {
        this.Xm !== a && (D.p(a, vu, "iterations"), 0 <= a && (this.Xm = a, this.N()))
    });
    D.defineProperty(pu, {
        PH: "aggressiveOption"
    },
    function() {
        return this.Eo
    },
    function(a) {
        this.Eo !== a && (D.Ca(a, pu, pu, "aggressiveOption"), a === $u || a === tu || a === av) && (this.Eo = a, this.N())
    });
    D.defineProperty(pu, {
        gM: "packOption"
    },
    function() {
        return this.oj
    },
    function(a) {
        this.oj !== a && (D.h(a, "number", pu, "packOption"), 0 <= a && 8 > a && (this.oj = a, this.N()))
    });
    D.defineProperty(pu, {
        Rq: "setsPortSpots"
    },
    function() {
        return this.pi
    },
    function(a) {
        this.pi !== a && (D.h(a, "boolean", pu, "setsPortSpots"), this.pi = a, this.N())
    });
    D.defineProperty(pu, {
        aG: "linkSpacing"
    },
    function() {
        return this.ts
    },
    function(a) {
        this.ts !== a && (D.h(a, "number", pu, "linkSpacing"), 0 <= a && (this.ts = a, this.N()))
    });
    D.w(pu, {
        yJ: "maxLayer"
    },
    function() {
        return this.yb
    });
    D.w(pu, {
        RL: "maxIndex"
    },
    function() {
        return this.ow
    });
    D.w(pu, {
        QL: "maxColumn"
    },
    function() {
        return this.Pb
    });
    D.w(pu, {
        WL: "minIndexLayer"
    },
    function() {
        return this.Cs
    });
    D.w(pu, {
        SL: "maxIndexLayer"
    },
    function() {
        return this.Uf
    });
    var qu;
    pu.CycleDepthFirst = qu = D.s(pu, "CycleDepthFirst", 0);
    var wu;
    pu.CycleGreedy = wu = D.s(pu, "CycleGreedy", 1);
    var ru;
    pu.LayerOptimalLinkLength = ru = D.s(pu, "LayerOptimalLinkLength", 0);
    var Ou;
    pu.LayerLongestPathSink = Ou = D.s(pu, "LayerLongestPathSink", 1);
    var Qu;
    pu.LayerLongestPathSource = Qu = D.s(pu, "LayerLongestPathSource", 2);
    var su;
    pu.InitDepthFirstOut = su = D.s(pu, "InitDepthFirstOut", 0);
    var Wu;
    pu.InitDepthFirstIn = Wu = D.s(pu, "InitDepthFirstIn", 1);
    var Uu;
    pu.InitNaive = Uu = D.s(pu, "InitNaive", 2);
    var $u;
    pu.AggressiveNone = $u = D.s(pu, "AggressiveNone", 0);
    var tu;
    pu.AggressiveLess = tu = D.s(pu, "AggressiveLess", 1);
    var av;
    pu.AggressiveMore = av = D.s(pu, "AggressiveMore", 2);
    pu.PackNone = 0;
    var bv;
    pu.PackExpand = bv = 1;
    var cv;
    pu.PackStraighten = cv = 2;
    var ev;
    pu.PackMedian = ev = 4;
    var uu;
    pu.PackAll = uu = 7;
    function lv() {
        this.index = this.Ce = this.ef = this.pe = this.first = this.layer = 0;
        this.link = null;
        this.Ji = 0
    }
    D.ke(lv, {
        layer: !0,
        first: !0,
        pe: !0,
        ef: !0,
        Ce: !0,
        index: !0,
        link: !0,
        Ji: !0
    });
    function vu() {
        va.call(this)
    }
    D.Sa(vu, va);
    D.ja("LayeredDigraphNetwork", vu);
    vu.prototype.createVertex = function() {
        return new ov
    };
    vu.prototype.createEdge = function() {
        return new pv
    };
    function ov() {
        wa.call(this);
        this.index = this.column = this.layer = -1;
        this.component = NaN;
        this.near = null;
        this.valid = !1;
        this.finish = this.lq = NaN;
        this.Dn = 0;
        this.mB = this.nB = null
    }
    D.Sa(ov, wa);
    D.ja("LayeredDigraphVertex", ov);
    function pv() {
        xa.call(this);
        this.forest = this.rev = this.valid = !1;
        this.portToPos = this.portFromPos = NaN;
        this.portToColOffset = this.portFromColOffset = 0
    }
    D.Sa(pv, xa);
    D.ja("LayeredDigraphEdge", pv);
    function Z() {
        0 < arguments.length && D.td(Z);
        Tg.call(this);
        this.Cd = new L(Object);
        this.Us = qv;
        this.Rf = rv;
        this.Lt = sv;
        this.lw = tv;
        this.lC = null;
        this.Yh = !0;
        this.vd = uv;
        this.sg = (new Ca(10, 10)).freeze();
        this.ya = new vv;
        this.za = new vv;
        this.bA = []
    }
    D.Sa(Z, Tg);
    D.ja("TreeLayout", Z);
    Z.prototype.cloneProtected = function(a) {
        Tg.prototype.cloneProtected.call(this, a);
        a.Us = this.Us;
        a.Lt = this.Lt;
        a.lw = this.lw;
        a.Yh = this.Yh;
        a.vd = this.vd;
        a.sg.assign(this.sg);
        a.ya.copyInheritedPropertiesFrom(this.ya);
        a.za.copyInheritedPropertiesFrom(this.za)
    };
    Z.prototype.nc = function(a) {
        a.Ne === Z ? 0 === a.name.indexOf("Alignment") ? this.alignment = a: 0 === a.name.indexOf("Arrangement") ? this.$f = a: 0 === a.name.indexOf("Compaction") ? this.compaction = a: 0 === a.name.indexOf("Path") ? this.path = a: 0 === a.name.indexOf("Sorting") ? this.sorting = a: 0 === a.name.indexOf("Style") ? this.wK = a: D.k("Unknown enum value: " + a) : Tg.prototype.nc.call(this, a)
    };
    Z.prototype.createNetwork = function() {
        return new wv
    };
    Z.prototype.makeNetwork = function(a) {
        function b(a) {
            if (a instanceof G) return ! a.tf && "Comment" !== a.Dd;
            if (a instanceof J) {
                var b = a.aa;
                if (null === b || b.tf || "Comment" === b.Dd) return ! 1;
                a = a.da;
                return null === a || a.tf || "Comment" === a.Dd ? !1 : !0
            }
            return ! 1
        }
        var c = this.createNetwork();
        c.Vb = this;
        a instanceof E ? (c.Jk(a.ng, !0, b), c.Jk(a.links, !0, b)) : a instanceof I ? c.Jk(a.Mc, !1, b) : c.Jk(a.j, !1, b);
        return c
    };
    Z.prototype.doLayout = function(a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.$f !== xv && (this.Ae = this.initialOrigin(this.Ae));
        var b = this.g;
        null === b && a instanceof E && (b = a);
        this.Rf = this.path === qv && null !== b ? b.$d ? rv: yv: this.path === qv ? rv: this.path;
        if (0 < this.network.vertexes.count) {
            this.network.Ax();
            for (a = this.network.vertexes.j; a.next();) b = a.value,
            b.initialized = !1,
            b.level = 0,
            b.parent = null,
            b.children = [];
            if (0 < this.Cd.count) {
                a = new L(vv);
                for (b = this.Cd.j; b.next();) {
                    var c = b.value;
                    c instanceof G ? (c = this.network.Qn(c), null !== c && a.add(c)) : c instanceof vv && a.add(c)
                }
                this.Cd = a
            }
            0 === this.Cd.count && this.findRoots();
            for (a = this.Cd.copy().j; a.next();) b = a.value,
            b.initialized || (b.initialized = !0, zv(this, b));
            b = this.network.vertexes;
            for (a = null; a = Av(b), 0 < a.count;) b = Bv(this, a),
            null !== b && this.Cd.add(b),
            b.initialized = !0,
            zv(this, b),
            b = a;
            for (a = this.Cd.j; a.next();) b = a.value,
            b instanceof vv && Cv(this, b);
            for (a = this.Cd.j; a.next();) b = a.value,
            b instanceof vv && Dv(this, b);
            for (a = this.Cd.j; a.next();) b = a.value,
            b instanceof vv && Ev(this, b);
            this.oA();
            if (this.aB === Fv) {
                c = [];
                for (a = this.network.vertexes.j; a.next();) {
                    var d = a.value,
                    b = d.parent;
                    null === b && (b = d);
                    var b = 0 === b.angle || 180 === b.angle,
                    e = c[d.level];
                    void 0 === e && (e = 0);
                    c[d.level] = Math.max(e, b ? d.width: d.height)
                }
                for (d = 0; d < c.length; d++) void 0 === c[d] && (c[d] = 0);
                this.lC = c;
                for (a = this.network.vertexes.j; a.next();) d = a.value,
                b = d.parent,
                null === b && (b = d),
                0 === b.angle || 180 === b.angle ? (180 === b.angle && (d.lu += c[d.level] - d.width), d.width = c[d.level]) : (270 === b.angle && (d.mu += c[d.level] - d.height), d.height = c[d.level])
            } else if (this.aB === Gv) for (a = this.network.vertexes.j; a.next();) {
                c = a.value;
                b = 0 === c.angle || 180 === c.angle;
                e = -1;
                for (d = 0; d < c.children.length; d++) var g = c.children[d],
                e = Math.max(e, b ? g.width: g.height);
                if (0 <= e) for (d = 0; d < c.children.length; d++) g = c.children[d],
                b ? (180 === c.angle && (g.lu += e - g.width), g.width = e) : (270 === c.angle && (g.mu += e - g.height), g.height = e)
            }
            for (a = this.Cd.j; a.next();) b = a.value,
            b instanceof vv && this.layoutTree(b);
            this.arrangeTrees();
            this.updateParts()
        }
        this.network = null;
        this.Cd = new L(Object);
        this.Hf = !0
    };
    function Av(a) {
        var b = new L(vv);
        for (a = a.j; a.next();) {
            var c = a.value;
            c.initialized || b.add(c)
        }
        return b
    }
    Z.prototype.findRoots = function() {
        for (var a = this.network.vertexes,
        b = a.j; b.next();) {
            var c = b.value;
            switch (this.Rf) {
            case rv:
                0 === c.sc.count && this.Cd.add(c);
                break;
            case yv:
                0 === c.pc.count && this.Cd.add(c);
                break;
            default:
                D.k("Unhandled path value " + this.Rf.toString())
            }
        }
        0 === this.Cd.count && (a = Bv(this, a), null !== a && this.Cd.add(a))
    };
    function Bv(a, b) {
        for (var c = 999999,
        d = null,
        e = b.j; e.next();) {
            var g = e.value;
            switch (a.Rf) {
            case rv:
                g.sc.count < c && (c = g.sc.count, d = g);
                break;
            case yv:
                g.pc.count < c && (c = g.pc.count, d = g);
                break;
            default:
                D.k("Unhandled path value " + a.Rf.toString())
            }
        }
        return d
    }
    function zv(a, b) {
        if (null !== b) {
            v && D.l(b, vv, Z, "walkTree:v");
            switch (a.Rf) {
            case rv:
                if (0 < b.pc.count) {
                    for (var c = new K(vv), d = b.qI; d.next();) {
                        var e = d.value;
                        Hv(a, b, e) && c.add(e)
                    }
                    0 < c.count && (b.children = c.lc())
                }
                break;
            case yv:
                if (0 < b.sc.count) {
                    c = new K(vv);
                    for (d = b.lK; d.next();) e = d.value,
                    Hv(a, b, e) && c.add(e);
                    0 < c.count && (b.children = c.lc())
                }
                break;
            default:
                D.k("Unhandled path value" + a.Rf.toString())
            }
            c = b.children;
            d = c.length;
            for (e = 0; e < d; e++) {
                var g = c[e];
                g.initialized = !0;
                g.level = b.level + 1;
                g.parent = b;
                a.Cd.remove(g)
            }
            for (e = 0; e < d; e++) g = c[e],
            zv(a, g)
        }
    }
    function Hv(a, b, c) {
        v && D.l(b, vv, Z, "walkOK:v");
        v && D.l(c, vv, Z, "walkOK:c");
        if (c.initialized) {
            var d;
            if (null === b) d = !1;
            else {
                v && D.l(c, vv, Z, "isAncestor:a");
                v && D.l(b, vv, Z, "isAncestor:b");
                for (d = b.parent; null !== d && d !== c;) d = d.parent;
                d = d === c
            }
            if (d || c.level > b.level) return ! 1;
            a.removeChild(c.parent, c)
        }
        return ! 0
    }
    Z.prototype.removeChild = function(a, b) {
        if (null !== a && null !== b) {
            v && D.l(a, vv, Z, "removeChild:p");
            v && D.l(b, vv, Z, "removeChild:c");
            for (var c = a.children,
            d = 0,
            e = 0; e < c.length; e++) c[e] === b && d++;
            if (0 < d) {
                for (var d = Array(c.length - d), g = 0, e = 0; e < c.length; e++) c[e] !== b && (d[g++] = c[e]);
                a.children = d
            }
        }
    };
    function Cv(a, b) {
        if (null !== b) {
            v && D.l(b, vv, Z, "initializeTree:v");
            a.initializeTreeVertexValues(b);
            b.alignment === Iv && a.sortTreeVertexChildren(b);
            for (var c = 0,
            d = b.Fn,
            e = 0,
            g = b.children,
            h = g.length,
            k = 0; k < h; k++) {
                var l = g[k];
                Cv(a, l);
                c += l.descendantCount + 1;
                d = Math.max(d, l.maxChildrenCount);
                e = Math.max(e, l.maxGenerationCount)
            }
            b.descendantCount = c;
            b.maxChildrenCount = d;
            b.maxGenerationCount = 0 < d ? e + 1 : 0
        }
    }
    function Jv(a, b) {
        v && D.l(b, vv, Z, "mom:v");
        switch (a.Lt) {
        default:
        case sv:
            return null !== b.parent ? b.parent: a.ya;
        case Kv:
            return null === b.parent ? a.ya: null === b.parent.parent ? a.za: b.parent;
        case Lv:
            return null !== b.parent ? null !== b.parent.parent ? b.parent.parent: a.za: a.ya;
        case Mv:
            var c = !0;
            if (0 === b.Fn) c = !1;
            else for (var d = b.children,
            e = d.length,
            g = 0; g < e; g++) if (0 < d[g].Fn) {
                c = !1;
                break
            }
            return c && null !== b.parent ? a.za: null !== b.parent ? b.parent: a.ya
        }
    }
    Z.prototype.initializeTreeVertexValues = function(a) {
        v && D.l(a, vv, Z, "initializeTreeVertexValues:v");
        var b = Jv(this, a);
        a.copyInheritedPropertiesFrom(b);
        if (null !== a.parent && a.parent.alignment === Iv) {
            for (var b = a.angle,
            c = a.parent.children,
            d = 0; d < c.length && a !== c[d];) d++;
            0 === d % 2 ? d !== c.length - 1 && (b = 90 === b ? 180 : 180 === b ? 270 : 270 === b ? 180 : 270) : b = 90 === b ? 0 : 180 === b ? 90 : 270 === b ? 0 : 90;
            a.angle = b
        }
        a.initialized = !0
    };
    function Dv(a, b) {
        if (null !== b) {
            v && D.l(b, vv, Z, "assignTree:v");
            a.assignTreeVertexValues(b);
            for (var c = b.children,
            d = c.length,
            e = 0; e < d; e++) Dv(a, c[e])
        }
    }
    Z.prototype.assignTreeVertexValues = function() {};
    function Ev(a, b) {
        if (null !== b) {
            v && D.l(b, vv, Z, "sortTree:v");
            b.alignment !== Iv && a.sortTreeVertexChildren(b);
            for (var c = b.children,
            d = c.length,
            e = 0; e < d; e++) Ev(a, c[e])
        }
    }
    Z.prototype.sortTreeVertexChildren = function(a) {
        v && D.l(a, vv, Z, "sortTreeVertexChildren:v");
        switch (a.sorting) {
        case Nv:
            break;
        case Ov:
            a.children.reverse();
            break;
        case Pv:
            a.children.sort(a.comparer);
            break;
        case Qv:
            a.children.sort(a.comparer);
            a.children.reverse();
            break;
        default:
            D.k("Unhandled sorting value " + a.sorting.toString())
        }
    };
    Z.prototype.oA = function() {
        if (this.comments) for (var a = this.network.vertexes.j; a.next();) this.addComments(a.value)
    };
    Z.prototype.addComments = function(a) {
        v && D.l(a, vv, Z, "addComments:v");
        var b = a.angle,
        c = a.parent,
        d = 0,
        e = Rv,
        e = !1;
        null !== c && (d = c.angle, e = c.alignment, e = Sv(e));
        var b = 90 === b || 270 === b,
        d = 90 === d || 270 === d,
        c = 0 === a.Fn,
        g = 0,
        h = 0,
        k = 0,
        l = a.commentSpacing;
        if (null !== a.Vc) for (var m = a.Vc.mF(); m.next();) {
            var n = m.value;
            "Comment" === n.Dd && n.canLayout() && (null === a.comments && (a.comments = []), a.comments.push(n), n.hf(), n = n.Fa, b && !c || !e && !d && c || e && d && c ? (g = Math.max(g, n.width), h += n.height + Math.abs(k)) : (g += n.width + Math.abs(k), h = Math.max(h, n.height)), k = l)
        }
        null !== a.comments && (b && !c || !e && !d && c || e && d && c ? (g += Math.abs(a.commentMargin), h = Math.max(0, h - a.height)) : (h += Math.abs(a.commentMargin), g = Math.max(0, g - a.width)), e = D.gh(0, 0, a.R.width + g, a.R.height + h), a.sb = e, D.Mb(e))
    };
    function Sv(a) {
        return a === Tv || a === Iv || a === Uv || a === Vv
    }
    function Wv(a) {
        return a === Tv || a === Iv
    }
    function Xv(a) {
        v && D.l(a, vv, Z, "isLeftSideBus:v");
        var b = a.parent;
        if (null !== b) {
            var c = b.alignment;
            if (Sv(c)) {
                if (Wv(c)) {
                    b = b.children;
                    for (c = 0; c < b.length && a !== b[c];) c++;
                    return 0 === c % 2
                }
                if (c === Uv) return ! 0
            }
        }
        return ! 1
    }
    Z.prototype.layoutComments = function(a) {
        v && D.l(a, vv, Z, "layoutComments:v");
        if (null !== a.comments) {
            var b = a.Vc.Fa,
            c = a.parent,
            d = a.angle,
            e = 0,
            g = Rv,
            g = !1;
            null !== c && (e = c.angle, g = c.alignment, g = Sv(g));
            for (var c = 90 === d || 270 === d,
            d = 90 === e || 270 === e,
            h = 0 === a.Fn,
            k = Xv(a), l = 0, m = a.comments, n = m.length, p = D.P(), q = 0; q < n; q++) {
                var r = m[q],
                s = r.Fa;
                if (c && !h || !g && !d && h || g && d && h) {
                    if (135 < e && !g || d && k) if (0 <= a.commentMargin) for (p.m(a.R.x - a.commentMargin - s.width, a.R.y + l), r.move(p), r = r.Vg(); r.next();) {
                        var u = r.value;
                        u.Gb = ed;
                        u.Hb = fd
                    } else for (p.m(a.R.x + 2 * a.W.x - a.commentMargin, a.R.y + l), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = fd,
                    u.Hb = ed;
                    else if (0 <= a.commentMargin) for (p.m(a.R.x + 2 * a.W.x + a.commentMargin, a.R.y + l), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = fd,
                    u.Hb = ed;
                    else for (p.m(a.R.x + a.commentMargin - s.width, a.R.y + l), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = ed,
                    u.Hb = fd;
                    l = 0 <= a.commentSpacing ? l + (s.height + a.commentSpacing) : l + (a.commentSpacing - s.height)
                } else {
                    if (135 < e && !g || !d && k) if (0 <= a.commentMargin) for (p.m(a.R.x + l, a.R.y - a.commentMargin - s.height), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = Yc,
                    u.Hb = gd;
                    else for (p.m(a.R.x + l, a.R.y + 2 * a.W.y - a.commentMargin), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = gd,
                    u.Hb = Yc;
                    else if (0 <= a.commentMargin) for (p.m(a.R.x + l, a.R.y + 2 * a.W.y + a.commentMargin), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = gd,
                    u.Hb = Yc;
                    else for (p.m(a.R.x + l, a.R.y + a.commentMargin - s.height), r.move(p), r = r.Vg(); r.next();) u = r.value,
                    u.Gb = Yc,
                    u.Hb = gd;
                    l = 0 <= a.commentSpacing ? l + (s.width + a.commentSpacing) : l + (a.commentSpacing - s.width)
                }
            }
            D.A(p);
            b = l - a.commentSpacing - (c ? b.height: b.width);
            if (this.Rf === rv) for (e = a.pc; e.next();) a = e.value.link,
            null === a || a.Di || (a.nm = 0 < b ? b: NaN);
            else for (e = a.sc; e.next();) a = e.value.link,
            null === a || a.Di || (a.Dm = 0 < b ? b: NaN)
        }
    };
    Z.prototype.layoutTree = function(a) {
        if (null !== a) {
            v && D.l(a, vv, Z, "layoutTree:v");
            for (var b = a.children,
            c = b.length,
            d = 0; d < c; d++) this.layoutTree(b[d]);
            switch (a.compaction) {
            case Yv:
                Zv(this, a);
                break;
            case $v:
                if (a.alignment === Iv) Zv(this, a);
                else if (v && D.l(a, vv, Z, "layoutTreeBlock:v"), 0 === a.Fn) {
                    var d = a.parent,
                    b = !1,
                    c = 0,
                    e = Rv;
                    null !== d && (c = d.angle, e = d.alignment, b = Sv(e));
                    d = Xv(a);
                    a.sa.m(0, 0);
                    a.rb.m(a.width, a.height);
                    null === a.parent || null === a.comments || (180 !== c && 270 !== c || b) && !d ? a.Wa.m(0, 0) : 180 === c && !b || (90 === c || 270 === c) && d ? a.Wa.m(a.width - 2 * a.W.x, 0) : a.Wa.m(0, a.height - 2 * a.W.y);
                    a.Bu = null;
                    a.Wu = null
                } else {
                    for (var g = aw(a), b = 90 === g || 270 === g, h = 0, k = a.children, l = k.length, m = 0; m < l; m++) var n = k[m],
                    h = Math.max(h, b ? n.rb.width: n.rb.height);
                    var p = a.alignment,
                    d = p === bw,
                    q = p === cw,
                    r = Sv(p),
                    s = Math.max(0, a.breadthLimit),
                    c = dw(a),
                    u = a.nodeSpacing,
                    t = ew(a),
                    y = a.rowSpacing,
                    w = 0;
                    if (d || q || a.Lq || a.Mq && 1 === a.maxGenerationCount) w = Math.max(0, a.rowIndent);
                    var d = a.width,
                    e = a.height,
                    C = 0,
                    A = 0,
                    N = 0,
                    H = null,
                    W = null,
                    fa = 0,
                    S = 0,
                    ba = 0,
                    ia = 0,
                    U = 0,
                    Ua = 0,
                    lb = 0,
                    ua = 0,
                    n = 0;
                    r && !Wv(p) && 135 < g && k.reverse();
                    if (Wv(p)) if (1 < l) for (m = 0; m < l; m++) 0 === m % 2 && m !== l - 1 ? ua = Math.max(ua, b ? k[m].rb.width: k[m].rb.height) : 0 !== m % 2 && (n = Math.max(n, b ? k[m].rb.width: k[m].rb.height));
                    else 1 === l && (ua = b ? k[0].rb.width: k[0].rb.height);
                    if (r) {
                        switch (p) {
                        case Tv:
                            A = 135 > g ? fw(a, k, ua, C, A) : gw(a, k, ua, C, A);
                            ua = A.x;
                            C = A.width;
                            A = A.height;
                            break;
                        case Uv:
                            for (m = 0; m < l; m++) {
                                var n = k[m],
                                Oa = n.rb,
                                H = 0 === Ua ? 0 : y;
                                b ? (n.sa.m(h - Oa.width, ia + H), C = Math.max(C, Oa.width), A = Math.max(A, ia + H + Oa.height), ia += H + Oa.height) : (n.sa.m(ba + H, h - Oa.height), C = Math.max(C, ba + H + Oa.width), A = Math.max(A, Oa.height), ba += H + Oa.width);
                                Ua++
                            }
                            break;
                        case Vv:
                            for (m = 0; m < l; m++) n = k[m],
                            Oa = n.rb,
                            H = 0 === Ua ? 0 : y,
                            b ? (n.sa.m(u / 2 + a.W.x, ia + H), C = Math.max(C, Oa.width), A = Math.max(A, ia + H + Oa.height), ia += H + Oa.height) : (n.sa.m(ba + H, u / 2 + a.W.y), C = Math.max(C, ba + H + Oa.width), A = Math.max(A, Oa.height), ba += H + Oa.width),
                            Ua++
                        }
                        H = Mw(this, 2);
                        W = Mw(this, 2);
                        b ? (H[0].m(0, 0), H[1].m(0, A), W[0].m(C, 0)) : (H[0].m(0, 0), H[1].m(C, 0), W[0].m(0, A));
                        W[1].m(C, A)
                    } else for (m = 0; m < l; m++) {
                        n = k[m];
                        Oa = n.rb;
                        if (b) {
                            0 < s && 0 < Ua && ba + u + Oa.width > s && (ba < h && Nw(a, p, h - ba, 0, lb, m - 1), U++, Ua = 0, lb = m, N = A, ba = 0, ia = 135 < g ? -A - y: A + y);
                            Ow(this, n, 0, ia);
                            var Fa = 0;
                            if (0 === Ua) {
                                if (H = n.Bu, W = n.Wu, fa = Oa.width, S = Oa.height, null === H || null === W || g !== aw(n)) H = Mw(this, 2),
                                W = Mw(this, 2),
                                H[0].m(0, 0),
                                H[1].m(0, S),
                                W[0].m(fa, 0),
                                W[1].m(fa, S)
                            } else {
                                var Vb = D.tb(),
                                S = Pw(this, a, n, H, W, fa, S, Vb),
                                Fa = S.x,
                                H = Vb[0],
                                W = Vb[1],
                                fa = S.width,
                                S = S.height;
                                D.Aa(Vb);
                                ba < Oa.width && 0 > Fa && (Qw(a, -Fa, 0, lb, m - 1), Rw(H, -Fa, 0), Rw(W, -Fa, 0), Fa = 0)
                            }
                            n.sa.m(Fa, ia);
                            C = Math.max(C, fa);
                            A = Math.max(A, N + (0 === U ? 0 : y) + Oa.height);
                            ba = fa
                        } else {
                            0 < s && 0 < Ua && ia + u + Oa.height > s && (ia < h && Nw(a, p, 0, h - ia, lb, m - 1), U++, Ua = 0, lb = m, N = C, ia = 0, ba = 135 < g ? -C - y: C + y);
                            Ow(this, n, ba, 0);
                            Fa = 0;
                            if (0 === Ua) {
                                if (H = n.Bu, W = n.Wu, fa = Oa.width, S = Oa.height, null === H || null === W || g !== aw(n)) H = Mw(this, 2),
                                W = Mw(this, 2),
                                H[0].m(0, 0),
                                H[1].m(fa, 0),
                                W[0].m(0, S),
                                W[1].m(fa, S)
                            } else Vb = D.tb(),
                            S = Pw(this, a, n, H, W, fa, S, Vb),
                            Fa = S.x,
                            H = Vb[0],
                            W = Vb[1],
                            fa = S.width,
                            S = S.height,
                            D.Aa(Vb),
                            ia < Oa.height && 0 > Fa && (Qw(a, 0, -Fa, lb, m - 1), Rw(H, 0, -Fa), Rw(W, 0, -Fa), Fa = 0);
                            n.sa.m(ba, Fa);
                            A = Math.max(A, S);
                            C = Math.max(C, N + (0 === U ? 0 : y) + Oa.width);
                            ia = S
                        }
                        Ua++
                    }
                    0 < U && (b ? (A += Math.max(0, c), ba < C && Nw(a, p, C - ba, 0, lb, l - 1), 0 < w && (q || Qw(a, w, 0, 0, l - 1), C += w)) : (C += Math.max(0, c), ia < A && Nw(a, p, 0, A - ia, lb, l - 1), 0 < w && (q || Qw(a, 0, w, 0, l - 1), A += w)));
                    w = q = 0;
                    switch (p) {
                    case Sw:
                        b ? q += C / 2 - a.W.x - t / 2 : w += A / 2 - a.W.y - t / 2;
                        break;
                    case Rv:
                        0 < U ? b ? q += C / 2 - a.W.x - t / 2 : w += A / 2 - a.W.y - t / 2 : b ? (ua = k[0].sa.x + k[0].Wa.x, m = k[l - 1].sa.x + k[l - 1].Wa.x + 2 * k[l - 1].W.x, q += ua + (m - ua) / 2 - a.W.x - t / 2) : (ua = k[0].sa.y + k[0].Wa.y, m = k[l - 1].sa.y + k[l - 1].Wa.y + 2 * k[l - 1].W.y, w += ua + (m - ua) / 2 - a.W.y - t / 2);
                        break;
                    case bw:
                        b ? (q -= t, C += t) : (w -= t, A += t);
                        break;
                    case cw:
                        b ? (q += C - a.width + t, C += t) : (w += A - a.height + t, A += t);
                        break;
                    case Tv:
                        b ? q = 1 < l ? q + (ua + u / 2 - a.W.x) : q + (k[0].W.x - a.W.x + k[0].Wa.x) : w = 1 < l ? w + (ua + u / 2 - a.W.y) : w + (k[0].W.y - a.W.y + k[0].Wa.y);
                        break;
                    case Uv:
                        b ? q += C + u / 2 - a.W.x: w += A + u / 2 - a.W.y;
                        break;
                    case Vv:
                        break;
                    default:
                        D.k("Unhandled alignment value " + p.toString())
                    }
                    for (m = 0; m < l; m++) n = k[m],
                    b ? n.sa.m(n.sa.x + n.Wa.x - q, n.sa.y + (135 < g ? (r ? -A: -n.rb.height) + n.Wa.y - c: e + c + n.Wa.y)) : n.sa.m(n.sa.x + (135 < g ? (r ? -C: -n.rb.width) + n.Wa.x - c: d + c + n.Wa.x), n.sa.y + n.Wa.y - w);
                    l = k = 0;
                    r ? b ? (C = Tw(a, C, q), 0 > q && (q = 0), 135 < g && (w += A + c), A += e + c, p === Vv && (k += u / 2 + a.W.x), l += e + c) : (135 < g && (q += C + c), C += d + c, A = Uw(a, A, w), 0 > w && (w = 0), p === Vv && (l += u / 2 + a.W.y), k += d + c) : b ? (null === a.comments ? d > C && (p = Vw(p, d - C, 0), k = p.x, l = p.y, C = d, q = 0) : C = Tw(a, C, q), 0 > q && (k -= q, q = 0), 135 < g && (w += A + c), A = Math.max(Math.max(A, e), A + e + c), l += e + c) : (135 < g && (q += C + c), C = Math.max(Math.max(C, d), C + d + c), null === a.comments ? e > A && (p = Vw(p, 0, e - A), k = p.x, l = p.y, A = e, w = 0) : A = Uw(a, A, w), 0 > w && (l -= w, w = 0), k += d + c);
                    if (0 < U) g = Mw(this, 4),
                    p = Mw(this, 4),
                    b ? (g[2].m(0, e + c), g[3].m(g[2].x, A), p[2].m(C, g[2].y), p[3].m(p[2].x, g[3].y)) : (g[2].m(d + c, 0), g[3].m(C, g[2].y), p[2].m(g[2].x, A), p[3].m(g[3].x, p[2].y));
                    else {
                        g = Mw(this, H.length + 2);
                        p = Mw(this, W.length + 2);
                        for (m = 0; m < H.length; m++) r = H[m],
                        g[m + 2].m(r.x + k, r.y + l);
                        for (m = 0; m < W.length; m++) r = W[m],
                        p[m + 2].m(r.x + k, r.y + l)
                    }
                    b ? (g[0].m(q, 0), g[1].m(g[0].x, e), g[2].y < g[1].y && (g[2].x > g[0].x ? g[2].assign(g[1]) : g[1].assign(g[2])), g[3].y < g[2].y && (g[3].x > g[0].x ? g[3].assign(g[2]) : g[2].assign(g[3])), p[0].m(q + d, 0), p[1].m(p[0].x, e), p[2].y < p[1].y && (p[2].x < p[0].x ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].y < p[2].y && (p[3].x < p[0].x ? p[3].assign(p[2]) : p[2].assign(p[3])), g[2].y -= c / 2, p[2].y -= c / 2) : (g[0].m(0, w), g[1].m(d, g[0].y), g[2].x < g[1].x && (g[2].y > g[0].y ? g[2].assign(g[1]) : g[1].assign(g[2])), g[3].x < g[2].x && (g[3].y > g[0].y ? g[3].assign(g[2]) : g[2].assign(g[3])), p[0].m(0, w + e), p[1].m(d, p[0].y), p[2].x < p[1].x && (p[2].y < p[0].y ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].x < p[2].x && (p[3].y < p[0].y ? p[3].assign(p[2]) : p[2].assign(p[3])), g[2].x -= c / 2, p[2].x -= c / 2);
                    Ww(this, H);
                    Ww(this, W);
                    a.Bu = g;
                    a.Wu = p;
                    a.Wa.m(q, w);
                    a.rb.m(C, A)
                }
                break;
            default:
                D.k("Unhandled compaction value " + a.compaction.toString())
            }
        }
    };
    function Zv(a, b) {
        v && D.l(b, vv, Z, "layoutTreeNone:v");
        if (0 === b.Fn) {
            var c = !1,
            d = 0,
            e = Rv;
            null !== b.parent && (d = b.parent.angle, e = b.parent.alignment, c = Sv(e));
            e = Xv(b);
            b.sa.m(0, 0);
            b.rb.m(b.width, b.height);
            null === b.parent || null === b.comments || (180 !== d && 270 !== d || c) && !e ? b.Wa.m(0, 0) : 180 === d && !c || (90 === d || 270 === d) && e ? b.Wa.m(b.width - 2 * b.W.x, 0) : b.Wa.m(0, b.height - 2 * b.W.y)
        } else {
            for (var c = aw(b), d = 90 === c || 270 === c, g = 0, e = b.children, h = e.length, k = 0; k < h; k++) var l = e[k],
            g = Math.max(g, d ? l.rb.width: l.rb.height);
            var m = b.alignment,
            n = m === bw,
            p = m === cw,
            q = Sv(m),
            r = Math.max(0, b.breadthLimit),
            s = dw(b),
            u = b.nodeSpacing,
            t = ew(b),
            y = n || p ? 0 : t / 2,
            w = b.rowSpacing,
            C = 0;
            if (n || p || b.Lq || b.Mq && 1 === b.maxGenerationCount) C = Math.max(0, b.rowIndent);
            var n = b.width,
            A = b.height,
            N = 0,
            H = 0,
            W = 0,
            fa = 0,
            S = 0,
            ba = 0,
            ia = 0,
            U = 0,
            Ua = 0,
            lb = 0;
            q && !Wv(m) && 135 < c && e.reverse();
            if (Wv(m)) if (1 < h) for (k = 0; k < h; k++) {
                var l = e[k],
                ua = l.rb;
                0 === k % 2 && k !== h - 1 ? Ua = Math.max(Ua, (d ? ua.width: ua.height) + Xw(l) - u) : 0 !== k % 2 && (lb = Math.max(lb, (d ? ua.width: ua.height) + Xw(l) - u))
            } else 1 === h && (Ua = d ? e[0].rb.width: e[0].rb.height);
            if (q) switch (m) {
            case Tv:
            case Iv:
                H = 135 > c ? fw(b, e, Ua, N, H) : gw(b, e, Ua, N, H);
                Ua = H.x;
                N = H.width;
                H = H.height;
                break;
            case Uv:
                for (k = 0; k < h; k++) l = e[k],
                ua = l.rb,
                r = 0 === ia ? 0 : w,
                d ? (l.sa.m(g - ua.width, S + r), N = Math.max(N, ua.width), H = Math.max(H, S + r + ua.height), S += r + ua.height) : (l.sa.m(fa + r, g - ua.height), N = Math.max(N, fa + r + ua.width), H = Math.max(H, ua.height), fa += r + ua.width),
                ia++;
                break;
            case Vv:
                for (g = 0; g < h; g++) l = e[g],
                ua = l.rb,
                r = 0 === ia ? 0 : w,
                d ? (l.sa.m(u / 2 + b.W.x, S + r), N = Math.max(N, ua.width), H = Math.max(H, S + r + ua.height), S += r + ua.height) : (l.sa.m(fa + r, u / 2 + b.W.y), N = Math.max(N, fa + r + ua.width), H = Math.max(H, ua.height), fa += r + ua.width),
                ia++
            } else for (k = 0; k < h; k++) l = e[k],
            ua = l.rb,
            d ? (0 < r && 0 < ia && fa + u + ua.width > r && (fa < g && Nw(b, m, g - fa, 0, U, k - 1), ba++, ia = 0, U = k, W = H, fa = 0, S = 135 < c ? -H - w: H + w), lb = 0 === ia ? y: u, Ow(a, l, 0, S), l.sa.m(fa + lb, S), N = Math.max(N, fa + lb + ua.width), H = Math.max(H, W + (0 === ba ? 0 : w) + ua.height), fa += lb + ua.width) : (0 < r && 0 < ia && S + u + ua.height > r && (S < g && Nw(b, m, 0, g - S, U, k - 1), ba++, ia = 0, U = k, W = N, S = 0, fa = 135 < c ? -N - w: N + w), lb = 0 === ia ? y: u, Ow(a, l, fa, 0), l.sa.m(fa, S + lb), H = Math.max(H, S + lb + ua.height), N = Math.max(N, W + (0 === ba ? 0 : w) + ua.width), S += lb + ua.height),
            ia++;
            0 < ba && (d ? (H += Math.max(0, s), fa < N && Nw(b, m, N - fa, 0, U, h - 1), 0 < C && (p || Qw(b, C, 0, 0, h - 1), N += C)) : (N += Math.max(0, s), S < H && Nw(b, m, 0, H - S, U, h - 1), 0 < C && (p || Qw(b, 0, C, 0, h - 1), H += C)));
            C = p = 0;
            switch (m) {
            case Sw:
                d ? p += N / 2 - b.W.x - t / 2 : C += H / 2 - b.W.y - t / 2;
                break;
            case Rv:
                0 < ba ? d ? p += N / 2 - b.W.x - t / 2 : C += H / 2 - b.W.y - t / 2 : d ? (m = e[0].sa.x + e[0].Wa.x, u = e[h - 1].sa.x + e[h - 1].Wa.x + 2 * e[h - 1].W.x, p += m + (u - m) / 2 - b.W.x - t / 2) : (m = e[0].sa.y + e[0].Wa.y, u = e[h - 1].sa.y + e[h - 1].Wa.y + 2 * e[h - 1].W.y, C += m + (u - m) / 2 - b.W.y - t / 2);
                break;
            case bw:
                d ? (p -= t, N += t) : (C -= t, H += t);
                break;
            case cw:
                d ? (p += N - b.width + t, N += t) : (C += H - b.height + t, H += t);
                break;
            case Tv:
            case Iv:
                d ? p = 1 < h ? p + (Ua + u / 2 - b.W.x) : p + (e[0].W.x - b.W.x + e[0].Wa.x) : C = 1 < h ? C + (Ua + u / 2 - b.W.y) : C + (e[0].W.y - b.W.y + e[0].Wa.y);
                break;
            case Uv:
                d ? p += N + u / 2 - b.W.x: C += H + u / 2 - b.W.y;
                break;
            case Vv:
                break;
            default:
                D.k("Unhandled alignment value " + m.toString())
            }
            for (k = 0; k < h; k++) l = e[k],
            d ? l.sa.m(l.sa.x + l.Wa.x - p, l.sa.y + (135 < c ? (q ? -H: -l.rb.height) + l.Wa.y - s: A + s + l.Wa.y)) : l.sa.m(l.sa.x + (135 < c ? (q ? -N: -l.rb.width) + l.Wa.x - s: n + s + l.Wa.x), l.sa.y + l.Wa.y - C);
            d ? (N = Tw(b, N, p), 0 > p && (p = 0), 135 < c && (C += H + s), H += A + s) : (135 < c && (p += N + s), N += n + s, H = Uw(b, H, C), 0 > C && (C = 0));
            b.Wa.m(p, C);
            b.rb.m(N, H)
        }
    }
    function fw(a, b, c, d, e) {
        v && D.l(a, vv, Z, "layoutBusChildrenPosDir:v");
        var g = b.length;
        if (0 === g) return new B(c, 0, d, e);
        if (1 === g) {
            var h = b[0];
            d = h.rb.width;
            e = h.rb.height;
            return new B(c, 0, d, e)
        }
        for (var k = a.nodeSpacing,
        l = a.rowSpacing,
        m = 90 === aw(a), n = 0, p = 0, q = 0, r = 0; r < g; r++) if (! (0 !== r % 2 || 1 < g && r === g - 1)) {
            var h = b[r],
            s = h.rb,
            u = 0 === n ? 0 : l;
            if (m) {
                var t = Xw(h) - k;
                h.sa.m(c - (s.width + t), q + u);
                d = Math.max(d, s.width + t);
                e = Math.max(e, q + u + s.height);
                q += u + s.height
            } else t = Xw(h) - k,
            h.sa.m(p + u, c - (s.height + t)),
            e = Math.max(e, s.height + t),
            d = Math.max(d, p + u + s.width),
            p += u + s.width;
            n++
        }
        var n = 0,
        y = p,
        w = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < g; r++) 0 !== r % 2 && (h = b[r], s = h.rb, u = 0 === n ? 0 : l, m ? (t = Xw(h) - k, h.sa.m(p + t, q + u), d = Math.max(d, p + s.width + t), e = Math.max(e, q + u + s.height), q += u + s.height) : (t = Xw(h) - k, h.sa.m(p + u, q + t), d = Math.max(d, p + u + s.width), e = Math.max(e, q + s.height + t), p += u + s.width), n++);
        1 < g && 1 === g % 2 && (h = b[g - 1], s = h.rb, b = Yw(h, m ? Math.max(Math.abs(w), Math.abs(q)) : Math.max(Math.abs(y), Math.abs(p))), m ? (h.sa.m(c + k / 2 - h.W.x - h.Wa.x, e + b), m = c + k / 2 - h.W.x - h.Wa.x, d = Math.max(d, m + s.width), 0 > m && (d -= m), e = Math.max(e, Math.max(w, q) + b + s.height), 0 > h.sa.x && (c = Zw(a, h.sa.x, !1, c, k))) : (h.sa.m(d + b, c + k / 2 - h.W.y - h.Wa.y), d = Math.max(d, Math.max(y, p) + b + s.width), m = c + k / 2 - h.W.y - h.Wa.y, e = Math.max(e, m + s.height), 0 > m && (e -= m), 0 > h.sa.y && (c = Zw(a, h.sa.y, !0, c, k))));
        return new B(c, 0, d, e)
    }
    function gw(a, b, c, d, e) {
        v && D.l(a, vv, Z, "layoutBusChildrenNegDir:v");
        var g = b.length;
        if (0 === g) return new B(c, 0, d, e);
        if (1 === g) {
            var h = b[0];
            d = h.rb.width;
            e = h.rb.height;
            return new B(c, 0, d, e)
        }
        for (var k = a.nodeSpacing,
        l = a.rowSpacing,
        m = 270 === aw(a), n = 0, p = 0, q = 0, r = 0; r < g; r++) if (! (0 !== r % 2 || 1 < g && r === g - 1)) {
            var h = b[r],
            s = h.rb,
            u = 0 === n ? 0 : l;
            if (m) {
                var t = Xw(h) - k,
                q = q - (u + s.height);
                h.sa.m(c - (s.width + t), q);
                d = Math.max(d, s.width + t);
                e = Math.max(e, Math.abs(q))
            } else t = Xw(h) - k,
            p -= u + s.width,
            h.sa.m(p, c - (s.height + t)),
            e = Math.max(e, s.height + t),
            d = Math.max(d, Math.abs(p));
            n++
        }
        var n = 0,
        y = p,
        w = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < g; r++) 0 !== r % 2 && (h = b[r], s = h.rb, u = 0 === n ? 0 : l, m ? (t = Xw(h) - k, q -= u + s.height, h.sa.m(p + t, q), d = Math.max(d, p + s.width + t), e = Math.max(e, Math.abs(q))) : (t = Xw(h) - k, p -= u + s.width, h.sa.m(p, q + t), e = Math.max(e, q + s.height + t), d = Math.max(d, Math.abs(p))), n++);
        1 < g && 1 === g % 2 && (h = b[g - 1], s = h.rb, l = Yw(h, m ? Math.max(Math.abs(w), Math.abs(q)) : Math.max(Math.abs(y), Math.abs(p))), m ? (h.sa.m(c + k / 2 - h.W.x - h.Wa.x, -e - s.height - l), p = c + k / 2 - h.W.x - h.Wa.x, d = Math.max(d, p + s.width), 0 > p && (d -= p), e = Math.max(e, Math.abs(Math.min(w, q)) + l + s.height), 0 > h.sa.x && (c = Zw(a, h.sa.x, !1, c, k))) : (h.sa.m( - d - s.width - l, c + k / 2 - h.W.y - h.Wa.y), d = Math.max(d, Math.abs(Math.min(y, p)) + l + s.width), p = c + k / 2 - h.W.y - h.Wa.y, e = Math.max(e, p + s.height), 0 > p && (e -= p), 0 > h.sa.y && (c = Zw(a, h.sa.y, !0, c, k))));
        for (r = 0; r < g; r++) h = b[r],
        m ? h.sa.m(h.sa.x, h.sa.y + e) : h.sa.m(h.sa.x + d, h.sa.y);
        return new B(c, 0, d, e)
    }
    function Xw(a) {
        v && D.l(a, vv, Z, "fixRelativePostions:child");
        return null === a.parent ? 0 : a.parent.nodeSpacing
    }
    function Yw(a) {
        v && D.l(a, vv, Z, "fixRelativePostions:lastchild");
        return null === a.parent ? 0 : a.parent.rowSpacing
    }
    function Zw(a, b, c, d, e) {
        v && D.l(a, vv, Z, "fixRelativePostions:v");
        a = a.children;
        for (var g = a.length,
        h = 0; h < g; h++) c ? a[h].sa.m(a[h].sa.x, a[h].sa.y - b) : a[h].sa.m(a[h].sa.x - b, a[h].sa.y);
        b = a[g - 1];
        return Math.max(d, c ? b.Wa.y + b.W.y - e / 2 : b.Wa.x + b.W.x - e / 2)
    }
    function Tw(a, b, c) {
        v && D.l(a, vv, Z, "calculateSubwidth:v");
        switch (a.alignment) {
        case Rv:
        case Sw:
            var d = b;
            c + a.width > d && (d = c + a.width);
            0 > c && (d -= c);
            return d;
        case bw:
            return a.width > b ? a.width: b;
        case cw:
            return 2 * a.W.x > b ? a.width: b + a.width - 2 * a.W.x;
        case Tv:
        case Iv:
            return d = Math.min(0, c),
            c = Math.max(b, c + a.width),
            Math.max(a.width, c - d);
        case Uv:
            return a.width - a.W.x + a.nodeSpacing / 2 + b;
        case Vv:
            return Math.max(a.width, a.W.x + a.nodeSpacing / 2 + b);
        default:
            return b
        }
    }
    function Uw(a, b, c) {
        v && D.l(a, vv, Z, "calculateSubheight:v");
        switch (a.alignment) {
        case Rv:
        case Sw:
            var d = b;
            c + a.height > d && (d = c + a.height);
            0 > c && (d -= c);
            return d;
        case bw:
            return a.height > b ? a.height: b;
        case cw:
            return 2 * a.W.y > b ? a.height: b + a.height - 2 * a.W.y;
        case Tv:
        case Iv:
            return d = Math.min(0, c),
            c = Math.max(b, c + a.height),
            Math.max(a.height, c - d);
        case Uv:
            return a.height - a.W.y + a.nodeSpacing / 2 + b;
        case Vv:
            return Math.max(a.height, a.W.y + a.nodeSpacing / 2 + b);
        default:
            return b
        }
    }
    function Vw(a, b, c) {
        v && D.l(a, za, Z, "alignOffset:align");
        switch (a) {
        case Sw:
            b /= 2;
            c /= 2;
            break;
        case Rv:
            b /= 2;
            c /= 2;
            break;
        case bw:
            c = b = 0;
            break;
        case cw:
            break;
        default:
            D.k("Unhandled alignment value " + a.toString())
        }
        return new O(b, c)
    }
    function Nw(a, b, c, d, e, g) {
        v && D.l(a, vv, Z, "shiftRelPosAlign:v");
        v && D.l(b, za, Z, "shiftRelPosAlign:align");
        b = Vw(b, c, d);
        Qw(a, b.x, b.y, e, g)
    }
    function Qw(a, b, c, d, e) {
        v && D.l(a, vv, Z, "shiftRelPos:v");
        if (0 !== b || 0 !== c) for (a = a.children; d <= e; d++) {
            var g = a[d].sa;
            g.x += b;
            g.y += c
        }
    }
    function Ow(a, b, c, d) {
        v && (D.l(b, vv, Z, "recordMidPoints:v"), D.h(c, "number", Z, "recordMidPoints:x"), D.h(d, "number", Z, "recordMidPoints:y"));
        var e = b.parent;
        switch (a.Rf) {
        case rv:
            for (a = b.sc; a.next();) b = a.value,
            b.fromVertex === e && b.at.m(c, d);
            break;
        case yv:
            for (a = b.pc; a.next();) b = a.value,
            b.toVertex === e && b.at.m(c, d);
            break;
        default:
            D.k("Unhandled path value " + a.Rf.toString())
        }
    }
    function Rw(a, b, c) {
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            e.x += b;
            e.y += c
        }
    }
    function Pw(a, b, c, d, e, g, h, k) {
        v && D.l(b, vv, Z, "mergeFringes:parent");
        v && D.l(c, vv, Z, "mergeFringes:child");
        var l = aw(b),
        m = 90 === l || 270 === l,
        n = b.nodeSpacing;
        b = d;
        var p = e;
        d = g;
        e = h;
        var q = c.Bu,
        r = c.Wu;
        h = c.rb;
        var s = m ? Math.max(e, h.height) : Math.max(d, h.width);
        if (null === q || l !== aw(c)) q = Mw(a, 2),
        r = Mw(a, 2),
        m ? (q[0].m(0, 0), q[1].m(0, h.height), r[0].m(h.width, 0), r[1].m(r[0].x, q[1].y)) : (q[0].m(0, 0), q[1].m(h.width, 0), r[0].m(0, h.height), r[1].m(q[1].x, r[0].y));
        if (m) {
            c = d;
            d = 9999999;
            if (! (null === p || 2 > p.length || null === q || 2 > q.length)) for (m = l = 0; l < p.length && m < q.length;) {
                e = p[l];
                var u = q[m];
                g = u.x;
                var t = u.y;
                g += c;
                var y = e;
                l + 1 < p.length && (y = p[l + 1]);
                var w = u,
                u = w.x,
                w = w.y;
                m + 1 < q.length && (w = q[m + 1], u = w.x, w = w.y, u += c);
                var C = d;
                e.y === t ? C = g - e.x: e.y > t && e.y < w ? C = g + (e.y - t) / (w - t) * (u - g) - e.x: t > e.y && t < y.y && (C = g - (e.x + (t - e.y) / (y.y - e.y) * (y.x - e.x)));
                C < d && (d = C);
                y.y <= e.y ? l++:w <= t ? m++:(y.y <= w && l++, w <= y.y && m++)
            }
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length) d = null;
            else {
                n = Mw(a, b.length + l.length);
                for (d = g = e = 0; g < l.length && l[g].y < b[0].y;) t = l[g++],
                n[d++].m(t.x + m, t.y);
                for (; e < b.length;) t = b[e++],
                n[d++].m(t.x, t.y);
                for (e = b[b.length - 1].y; g < l.length && l[g].y <= e;) g++;
                for (; g < l.length && l[g].y > e;) t = l[g++],
                n[d++].m(t.x + m, t.y);
                l = Mw(a, d);
                for (e = 0; e < d; e++) l[e].assign(n[e]);
                Ww(a, n);
                d = l
            }
            g = r;
            t = c;
            if (null === p || 2 > p.length || null === g || 2 > g.length) e = null;
            else {
                n = Mw(a, p.length + g.length);
                for (m = y = l = 0; l < p.length && p[l].y < g[0].y;) e = p[l++],
                n[m++].m(e.x, e.y);
                for (; y < g.length;) e = g[y++],
                n[m++].m(e.x + t, e.y);
                for (g = g[g.length - 1].y; l < p.length && p[l].y <= g;) l++;
                for (; l < p.length && p[l].y > g;) e = p[l++],
                n[m++].m(e.x, e.y);
                e = Mw(a, m);
                for (l = 0; l < m; l++) e[l].assign(n[l]);
                Ww(a, n)
            }
            g = Math.max(0, c) + h.width;
            h = s
        } else {
            c = e;
            d = 9999999;
            if (! (null === p || 2 > p.length || null === q || 2 > q.length)) for (m = l = 0; l < p.length && m < q.length;) e = p[l],
            u = q[m],
            g = u.x,
            t = u.y,
            t += c,
            y = e,
            l + 1 < p.length && (y = p[l + 1]),
            w = u,
            u = w.x,
            w = w.y,
            m + 1 < q.length && (w = q[m + 1], u = w.x, w = w.y, w += c),
            C = d,
            e.x === g ? C = t - e.y: e.x > g && e.x < u ? C = t + (e.x - g) / (u - g) * (w - t) - e.y: g > e.x && g < y.x && (C = t - (e.y + (g - e.x) / (y.x - e.x) * (y.y - e.y))),
            C < d && (d = C),
            y.x <= e.x ? l++:u <= g ? m++:(y.x <= u && l++, u <= y.x && m++);
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length) d = null;
            else {
                n = Mw(a, b.length + l.length);
                for (d = g = e = 0; g < l.length && l[g].x < b[0].x;) t = l[g++],
                n[d++].m(t.x, t.y + m);
                for (; e < b.length;) t = b[e++],
                n[d++].m(t.x, t.y);
                for (e = b[b.length - 1].x; g < l.length && l[g].x <= e;) g++;
                for (; g < l.length && l[g].x > e;) t = l[g++],
                n[d++].m(t.x, t.y + m);
                l = Mw(a, d);
                for (e = 0; e < d; e++) l[e].assign(n[e]);
                Ww(a, n);
                d = l
            }
            g = r;
            t = c;
            if (null === p || 2 > p.length || null === g || 2 > g.length) e = null;
            else {
                n = Mw(a, p.length + g.length);
                for (m = y = l = 0; l < p.length && p[l].x < g[0].x;) e = p[l++],
                n[m++].m(e.x, e.y);
                for (; y < g.length;) e = g[y++],
                n[m++].m(e.x, e.y + t);
                for (g = g[g.length - 1].x; l < p.length && p[l].x <= g;) l++;
                for (; l < p.length && p[l].x > g;) e = p[l++],
                n[m++].m(e.x, e.y);
                e = Mw(a, m);
                for (l = 0; l < m; l++) e[l].assign(n[l]);
                Ww(a, n)
            }
            g = s;
            h = Math.max(0, c) + h.height
        }
        Ww(a, b);
        Ww(a, q);
        Ww(a, p);
        Ww(a, r);
        k[0] = d;
        k[1] = e;
        return new B(c, 0, g, h)
    }
    function Mw(a, b) {
        var c = a.bA[b];
        if (void 0 !== c && (c = c.pop(), void 0 !== c)) return c;
        for (var c = [], d = 0; d < b; d++) c[d] = new O;
        return c
    }
    function Ww(a, b) {
        var c = b.length,
        d = a.bA[c];
        void 0 === d && (d = [], a.bA[c] = d);
        d.push(b)
    }
    Z.prototype.arrangeTrees = function() {
        if (this.vd === xv) for (var a = this.Cd.j; a.next();) {
            var b = a.value;
            if (b instanceof vv) {
                var c = b.Vc;
                if (null !== c) {
                    var d = c.position,
                    c = d.x,
                    d = d.y;
                    isFinite(c) || (c = 0);
                    isFinite(d) || (d = 0);
                    $w(this, b, c, d)
                }
            }
        } else {
            c = [];
            for (a = this.Cd.j; a.next();) b = a.value,
            b instanceof vv && c.push(b);
            switch (this.sorting) {
            case Nv:
                break;
            case Ov:
                c.reverse();
                break;
            case Pv:
                c.sort(this.comparer);
                break;
            case Qv:
                c.sort(this.comparer);
                c.reverse();
                break;
            default:
                D.k("Unhandled sorting value " + this.sorting.toString())
            }
            b = this.Ae;
            a = b.x;
            b = b.y;
            for (d = 0; d < c.length; d++) {
                var e = c[d];
                $w(this, e, a + e.Wa.x, b + e.Wa.y);
                switch (this.vd) {
                case uv:
                    b += e.rb.height + this.sg.height;
                    break;
                case ax:
                    a += e.rb.width + this.sg.width;
                    break;
                default:
                    D.k("Unhandled arrangement value " + this.vd.toString())
                }
            }
        }
    };
    function $w(a, b, c, d) {
        if (null !== b) {
            v && D.l(b, vv, Z, "assignAbsolutePositions:v");
            b.x = c;
            b.y = d;
            b = b.children;
            for (var e = b.length,
            g = 0; g < e; g++) {
                var h = b[g];
                $w(a, h, c + h.sa.x, d + h.sa.y)
            }
        }
    }
    Z.prototype.commitLayout = function() {
        this.EB();
        this.commitNodes();
        this.sA();
        this.zu && this.commitLinks()
    };
    Z.prototype.commitNodes = function() {
        for (var a = this.network.vertexes.j; a.next();) a.value.commit();
        for (a.reset(); a.next();) this.layoutComments(a.value)
    };
    Z.prototype.sA = function() {
        if (this.aB === Fv) {
            for (var a = this.lC,
            b = [], c = null, d = this.network.vertexes.j; d.next();) {
                var e = d.value;
                null === c ? c = e.sb.copy() : c.Wh(e.sb);
                var g = b[e.level],
                g = void 0 === g ? dw(e) : Math.max(g, dw(e));
                b[e.level] = g
            }
            for (d = 0; d < b.length; d++) void 0 === b[d] && (b[d] = 0);
            90 === this.angle || 270 === this.angle ? (c.eg(this.nodeSpacing / 2, this.layerSpacing), e = new O( - this.nodeSpacing / 2, -this.layerSpacing / 2)) : (c.eg(this.layerSpacing, this.nodeSpacing / 2), e = new O( - this.layerSpacing / 2, -this.nodeSpacing / 2));
            var g = [],
            c = 90 === this.angle || 270 === this.angle ? c.width: c.height,
            h = 0;
            if (180 === this.angle || 270 === this.angle) for (d = 0; d < a.length; d++) h += a[d] + b[d];
            for (d = 0; d < a.length; d++) {
                var k = a[d] + b[d];
                270 === this.angle ? (h -= k, g.push(new B(0, h, c, k))) : 90 === this.angle ? (g.push(new B(0, h, c, k)), h += k) : 180 === this.angle ? (h -= k, g.push(new B(h, 0, k, c))) : (g.push(new B(h, 0, k, c)), h += k)
            }
            this.commitLayers(g, e)
        }
    };
    Z.prototype.commitLayers = function() {};
    Z.prototype.commitLinks = function() {
        for (var a = this.network.edges.j; a.next();) a.value.commit()
    };
    Z.prototype.EB = function() {
        for (var a = this.Cd.j; a.next();) {
            var b = a.value;
            b instanceof vv && bx(this, b)
        }
    };
    function bx(a, b) {
        if (null !== b) {
            v && D.l(b, vv, Z, "setPortSpotsTree:v");
            a.setPortSpots(b);
            for (var c = b.children,
            d = c.length,
            e = 0; e < d; e++) bx(a, c[e])
        }
    }
    Z.prototype.setPortSpots = function(a) {
        v && D.l(a, vv, Z, "setPortSpots:v");
        var b = a.alignment;
        if (Sv(b)) {
            v && D.l(a, vv, Z, "setPortSpotsBus:v");
            v && D.l(b, za, Z, "setPortSpots:align");
            var c = this.Rf === rv,
            d = aw(a),
            e;
            switch (d) {
            case 0:
                e = fd;
                break;
            case 90:
                e = gd;
                break;
            case 180:
                e = ed;
                break;
            default:
                e = Yc
            }
            var g = a.children,
            h = g.length;
            switch (b) {
            case Tv:
            case Iv:
                for (b = 0; b < h; b++) {
                    var k = g[b],
                    k = (c ? k.sc: k.pc).first();
                    if (null !== k && (k = k.link, null !== k)) {
                        var l = 90 === d || 270 === d ? ed: Yc;
                        if (1 === h || b === h - 1 && 1 === h % 2) switch (d) {
                        case 0:
                            l = ed;
                            break;
                        case 90:
                            l = Yc;
                            break;
                        case 180:
                            l = fd;
                            break;
                        default:
                            l = gd
                        } else 0 === b % 2 && (l = 90 === d || 270 === d ? fd: gd);
                        c ? (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e))
                    }
                }
                break;
            case Uv:
                l = 90 === d || 270 === d ? fd: gd;
                for (d = c ? a.pc: a.sc; d.next();) k = d.value.link,
                null !== k && (c ? (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e)));
                break;
            case Vv:
                for (l = 90 === d || 270 === d ? ed: Yc, d = c ? a.pc: a.sc; d.next();) k = d.value.link,
                null !== k && (c ? (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e)))
            }
        } else if (c = aw(a), this.Rf === rv) for (e = a.pc; e.next();) {
            if (d = e.value.link, null !== d) {
                if (a.setsPortSpot) if (a.portSpot.ed()) switch (c) {
                case 0:
                    d.Gb = fd;
                    break;
                case 90:
                    d.Gb = gd;
                    break;
                case 180:
                    d.Gb = ed;
                    break;
                default:
                    d.Gb = Yc
                } else d.Gb = a.portSpot;
                if (a.setsChildPortSpot) if (a.childPortSpot.ed()) switch (c) {
                case 0:
                    d.Hb = ed;
                    break;
                case 90:
                    d.Hb = Yc;
                    break;
                case 180:
                    d.Hb = fd;
                    break;
                default:
                    d.Hb = gd
                } else d.Hb = a.childPortSpot
            }
        } else for (e = a.sc; e.next();) if (d = e.value.link, null !== d) {
            if (a.setsPortSpot) if (a.portSpot.ed()) switch (c) {
            case 0:
                d.Hb = fd;
                break;
            case 90:
                d.Hb = gd;
                break;
            case 180:
                d.Hb = ed;
                break;
            default:
                d.Hb = Yc
            } else d.Hb = a.portSpot;
            if (a.setsChildPortSpot) if (a.childPortSpot.ed()) switch (c) {
            case 0:
                d.Gb = ed;
                break;
            case 90:
                d.Gb = Yc;
                break;
            case 180:
                d.Gb = fd;
                break;
            default:
                d.Gb = gd
            } else d.Gb = a.childPortSpot
        }
    };
    function aw(a) {
        a = a.angle;
        return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
    }
    function dw(a) {
        v && D.l(a, vv, Z, "computeLayerSpacing:v");
        var b = aw(a),
        b = 90 === b || 270 === b,
        c = a.layerSpacing;
        if (0 < a.layerSpacingParentOverlap) var d = Math.min(1, a.layerSpacingParentOverlap),
        c = c - (b ? a.height * d: a.width * d);
        c < (b ? -a.height: -a.width) && (c = b ? -a.height: -a.width);
        return c
    }
    function ew(a) {
        v && D.l(a, vv, Z, "computeNodeIndent:v");
        var b = aw(a),
        b = 90 === b || 270 === b,
        c = a.nodeIndent;
        if (0 < a.nodeIndentPastParent) var d = Math.min(1, a.nodeIndentPastParent),
        c = c + (b ? a.width * d: a.height * d);
        return c = Math.max(0, c)
    }
    D.defineProperty(Z, {
        qM: "roots"
    },
    function() {
        return this.Cd
    },
    function(a) {
        this.Cd !== a && (D.l(a, L, Z, "roots"), this.Cd = a, this.N())
    });
    D.defineProperty(Z, {
        path: "path"
    },
    function() {
        return this.Us
    },
    function(a) {
        this.Us !== a && (D.Ca(a, Z, Z, "path"), this.Us = a, this.N())
    });
    D.defineProperty(Z, {
        wK: "treeStyle"
    },
    function() {
        return this.Lt
    },
    function(a) {
        this.vd !== a && (D.Ca(a, Z, Z, "treeStyle"), a === sv || a === Lv || a === Mv || a === Kv) && (this.Lt = a, this.N())
    });
    D.defineProperty(Z, {
        aB: "layerStyle"
    },
    function() {
        return this.lw
    },
    function(a) {
        this.vd !== a && (D.Ca(a, Z, Z, "layerStyle"), a === tv || a === Gv || a === Fv) && (this.lw = a, this.N())
    });
    D.defineProperty(Z, {
        comments: "comments"
    },
    function() {
        return this.Yh
    },
    function(a) {
        this.Yh !== a && (D.h(a, "boolean", Z, "comments"), this.Yh = a, this.N())
    });
    D.defineProperty(Z, {
        $f: "arrangement"
    },
    function() {
        return this.vd
    },
    function(a) {
        this.vd !== a && (D.Ca(a, Z, Z, "arrangement"), a === uv || a === ax || a === xv) && (this.vd = a, this.N())
    });
    D.defineProperty(Z, {
        IE: "arrangementSpacing"
    },
    function() {
        return this.sg
    },
    function(a) {
        D.l(a, Ca, Z, "arrangementSpacing");
        this.sg.O(a) || (this.sg.assign(a), this.N())
    });
    D.defineProperty(Z, {
        pM: "rootDefaults"
    },
    function() {
        return this.ya
    },
    function(a) {
        this.ya !== a && (D.l(a, vv, Z, "rootDefaults"), this.ya = a, this.N())
    });
    D.defineProperty(Z, {
        NK: "alternateDefaults"
    },
    function() {
        return this.za
    },
    function(a) {
        this.za !== a && (D.l(a, vv, Z, "alternateDefaults"), this.za = a, this.N())
    });
    D.defineProperty(Z, {
        sorting: "sorting"
    },
    function() {
        return this.ya.sorting
    },
    function(a) {
        this.ya.sorting !== a && (D.Ca(a, Z, Z, "sorting"), a === Nv || a === Ov || a === Pv || Qv) && (this.ya.sorting = a, this.N())
    });
    D.defineProperty(Z, {
        comparer: "comparer"
    },
    function() {
        return this.ya.comparer
    },
    function(a) {
        this.ya.comparer !== a && (D.h(a, "function", Z, "comparer"), this.ya.comparer = a, this.N())
    });
    D.defineProperty(Z, {
        angle: "angle"
    },
    function() {
        return this.ya.angle
    },
    function(a) {
        this.ya.angle !== a && (D.h(a, "number", Z, "angle"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.ya.angle = a, this.N()) : D.k("TreeLayout.angle must be 0, 90, 180, or 270"))
    });
    D.defineProperty(Z, {
        alignment: "alignment"
    },
    function() {
        return this.ya.alignment
    },
    function(a) {
        this.ya.alignment !== a && (D.Ca(a, Z, Z, "alignment"), this.ya.alignment = a, this.N())
    });
    D.defineProperty(Z, {
        nodeIndent: "nodeIndent"
    },
    function() {
        return this.ya.nodeIndent
    },
    function(a) {
        this.ya.nodeIndent !== a && (D.h(a, "number", Z, "nodeIndent"), 0 <= a && (this.ya.nodeIndent = a, this.N()))
    });
    D.defineProperty(Z, {
        nodeIndentPastParent: "nodeIndentPastParent"
    },
    function() {
        return this.ya.nodeIndentPastParent
    },
    function(a) {
        this.ya.nodeIndentPastParent !== a && (D.h(a, "number", Z, "nodeIndentPastParent"), 0 <= a && 1 >= a && (this.ya.nodeIndentPastParent = a, this.N()))
    });
    D.defineProperty(Z, {
        nodeSpacing: "nodeSpacing"
    },
    function() {
        return this.ya.nodeSpacing
    },
    function(a) {
        this.ya.nodeSpacing !== a && (D.h(a, "number", Z, "nodeSpacing"), this.ya.nodeSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        layerSpacing: "layerSpacing"
    },
    function() {
        return this.ya.layerSpacing
    },
    function(a) {
        this.ya.layerSpacing !== a && (D.h(a, "number", Z, "layerSpacing"), this.ya.layerSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        layerSpacingParentOverlap: "layerSpacingParentOverlap"
    },
    function() {
        return this.ya.layerSpacingParentOverlap
    },
    function(a) {
        this.ya.layerSpacingParentOverlap !== a && (D.h(a, "number", Z, "layerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.ya.layerSpacingParentOverlap = a, this.N()))
    });
    D.defineProperty(Z, {
        compaction: "compaction"
    },
    function() {
        return this.ya.compaction
    },
    function(a) {
        this.ya.compaction !== a && (D.Ca(a, Z, Z, "compaction"), a === Yv || a === $v) && (this.ya.compaction = a, this.N())
    });
    D.defineProperty(Z, {
        breadthLimit: "breadthLimit"
    },
    function() {
        return this.ya.breadthLimit
    },
    function(a) {
        this.ya.breadthLimit !== a && (D.h(a, "number", Z, "breadthLimit"), 0 <= a && (this.ya.breadthLimit = a, this.N()))
    });
    D.defineProperty(Z, {
        rowSpacing: "rowSpacing"
    },
    function() {
        return this.ya.rowSpacing
    },
    function(a) {
        this.ya.rowSpacing !== a && (D.h(a, "number", Z, "rowSpacing"), this.ya.rowSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        rowIndent: "rowIndent"
    },
    function() {
        return this.ya.rowIndent
    },
    function(a) {
        this.ya.rowIndent !== a && (D.h(a, "number", Z, "rowIndent"), 0 <= a && (this.ya.rowIndent = a, this.N()))
    });
    D.defineProperty(Z, {
        commentSpacing: "commentSpacing"
    },
    function() {
        return this.ya.commentSpacing
    },
    function(a) {
        this.ya.commentSpacing !== a && (D.h(a, "number", Z, "commentSpacing"), this.ya.commentSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        commentMargin: "commentMargin"
    },
    function() {
        return this.ya.commentMargin
    },
    function(a) {
        this.ya.commentMargin !== a && (D.h(a, "number", Z, "commentMargin"), this.ya.commentMargin = a, this.N())
    });
    D.defineProperty(Z, {
        setsPortSpot: "setsPortSpot"
    },
    function() {
        return this.ya.setsPortSpot
    },
    function(a) {
        this.ya.setsPortSpot !== a && (D.h(a, "boolean", Z, "setsPortSpot"), this.ya.setsPortSpot = a, this.N())
    });
    D.defineProperty(Z, {
        portSpot: "portSpot"
    },
    function() {
        return this.ya.portSpot
    },
    function(a) {
        D.l(a, R, Z, "portSpot");
        this.ya.portSpot.O(a) || (this.ya.portSpot = a, this.N())
    });
    D.defineProperty(Z, {
        setsChildPortSpot: "setsChildPortSpot"
    },
    function() {
        return this.ya.setsChildPortSpot
    },
    function(a) {
        this.ya.setsChildPortSpot !== a && (D.h(a, "boolean", Z, "setsChildPortSpot"), this.ya.setsChildPortSpot = a, this.N())
    });
    D.defineProperty(Z, {
        childPortSpot: "childPortSpot"
    },
    function() {
        return this.ya.childPortSpot
    },
    function(a) {
        D.l(a, R, Z, "childPortSpot");
        this.ya.childPortSpot.O(a) || (this.ya.childPortSpot = a, this.N())
    });
    D.defineProperty(Z, {
        YK: "alternateSorting"
    },
    function() {
        return this.za.sorting
    },
    function(a) {
        this.za.sorting !== a && (D.Ca(a, Z, Z, "alternateSorting"), a === Nv || a === Ov || a === Pv || Qv) && (this.za.sorting = a, this.N())
    });
    D.defineProperty(Z, {
        MK: "alternateComparer"
    },
    function() {
        return this.za.comparer
    },
    function(a) {
        this.za.comparer !== a && (D.h(a, "function", Z, "alternateComparer"), this.za.comparer = a, this.N())
    });
    D.defineProperty(Z, {
        GK: "alternateAngle"
    },
    function() {
        return this.za.angle
    },
    function(a) {
        this.za.angle !== a && (D.h(a, "number", Z, "alternateAngle"), 0 === a || 90 === a || 180 === a || 270 === a) && (this.za.angle = a, this.N())
    });
    D.defineProperty(Z, {
        FK: "alternateAlignment"
    },
    function() {
        return this.za.alignment
    },
    function(a) {
        this.za.alignment !== a && (D.Ca(a, Z, Z, "alternateAlignment"), this.za.alignment = a, this.N())
    });
    D.defineProperty(Z, {
        QK: "alternateNodeIndent"
    },
    function() {
        return this.za.nodeIndent
    },
    function(a) {
        this.za.nodeIndent !== a && (D.h(a, "number", Z, "alternateNodeIndent"), 0 <= a && (this.za.nodeIndent = a, this.N()))
    });
    D.defineProperty(Z, {
        RK: "alternateNodeIndentPastParent"
    },
    function() {
        return this.za.nodeIndentPastParent
    },
    function(a) {
        this.za.nodeIndentPastParent !== a && (D.h(a, "number", Z, "alternateNodeIndentPastParent"), 0 <= a && 1 >= a && (this.za.nodeIndentPastParent = a, this.N()))
    });
    D.defineProperty(Z, {
        SK: "alternateNodeSpacing"
    },
    function() {
        return this.za.nodeSpacing
    },
    function(a) {
        this.za.nodeSpacing !== a && (D.h(a, "number", Z, "alternateNodeSpacing"), this.za.nodeSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        OK: "alternateLayerSpacing"
    },
    function() {
        return this.za.layerSpacing
    },
    function(a) {
        this.za.layerSpacing !== a && (D.h(a, "number", Z, "alternateLayerSpacing"), this.za.layerSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        PK: "alternateLayerSpacingParentOverlap"
    },
    function() {
        return this.za.layerSpacingParentOverlap
    },
    function(a) {
        this.za.layerSpacingParentOverlap !== a && (D.h(a, "number", Z, "alternateLayerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.za.layerSpacingParentOverlap = a, this.N()))
    });
    D.defineProperty(Z, {
        LK: "alternateCompaction"
    },
    function() {
        return this.za.compaction
    },
    function(a) {
        this.za.compaction !== a && (D.Ca(a, Z, Z, "alternateCompaction"), a === Yv || a === $v) && (this.za.compaction = a, this.N())
    });
    D.defineProperty(Z, {
        HK: "alternateBreadthLimit"
    },
    function() {
        return this.za.breadthLimit
    },
    function(a) {
        this.za.breadthLimit !== a && (D.h(a, "number", Z, "alternateBreadthLimit"), 0 <= a && (this.za.breadthLimit = a, this.N()))
    });
    D.defineProperty(Z, {
        VK: "alternateRowSpacing"
    },
    function() {
        return this.za.rowSpacing
    },
    function(a) {
        this.za.rowSpacing !== a && (D.h(a, "number", Z, "alternateRowSpacing"), this.za.rowSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        UK: "alternateRowIndent"
    },
    function() {
        return this.za.rowIndent
    },
    function(a) {
        this.za.rowIndent !== a && (D.h(a, "number", Z, "alternateRowIndent"), 0 <= a && (this.za.rowIndent = a, this.N()))
    });
    D.defineProperty(Z, {
        KK: "alternateCommentSpacing"
    },
    function() {
        return this.za.commentSpacing
    },
    function(a) {
        this.za.commentSpacing !== a && (D.h(a, "number", Z, "alternateCommentSpacing"), this.za.commentSpacing = a, this.N())
    });
    D.defineProperty(Z, {
        JK: "alternateCommentMargin"
    },
    function() {
        return this.za.commentMargin
    },
    function(a) {
        this.za.commentMargin !== a && (D.h(a, "number", Z, "alternateCommentMargin"), this.za.commentMargin = a, this.N())
    });
    D.defineProperty(Z, {
        XK: "alternateSetsPortSpot"
    },
    function() {
        return this.za.setsPortSpot
    },
    function(a) {
        this.za.setsPortSpot !== a && (D.h(a, "boolean", Z, "alternateSetsPortSpot"), this.za.setsPortSpot = a, this.N())
    });
    D.defineProperty(Z, {
        TK: "alternatePortSpot"
    },
    function() {
        return this.za.portSpot
    },
    function(a) {
        D.l(a, R, Z, "alternatePortSpot");
        this.za.portSpot.O(a) || (this.za.portSpot = a, this.N())
    });
    D.defineProperty(Z, {
        WK: "alternateSetsChildPortSpot"
    },
    function() {
        return this.za.setsChildPortSpot
    },
    function(a) {
        this.za.setsChildPortSpot !== a && (D.h(a, "boolean", Z, "alternateSetsChildPortSpot"), this.za.setsChildPortSpot = a, this.N())
    });
    D.defineProperty(Z, {
        IK: "alternateChildPortSpot"
    },
    function() {
        return this.za.childPortSpot
    },
    function(a) {
        D.l(a, R, Z, "alternateChildPortSpot");
        this.za.childPortSpot.O(a) || (this.za.childPortSpot = a, this.N())
    });
    var qv;
    Z.PathDefault = qv = D.s(Z, "PathDefault", -1);
    var rv;
    Z.PathDestination = rv = D.s(Z, "PathDestination", 0);
    var yv;
    Z.PathSource = yv = D.s(Z, "PathSource", 1);
    var Nv;
    Z.SortingForwards = Nv = D.s(Z, "SortingForwards", 10);
    var Ov;
    Z.SortingReverse = Ov = D.s(Z, "SortingReverse", 11);
    var Pv;
    Z.SortingAscending = Pv = D.s(Z, "SortingAscending", 12);
    var Qv;
    Z.SortingDescending = Qv = D.s(Z, "SortingDescending", 13);
    var Sw;
    Z.AlignmentCenterSubtrees = Sw = D.s(Z, "AlignmentCenterSubtrees", 20);
    var Rv;
    Z.AlignmentCenterChildren = Rv = D.s(Z, "AlignmentCenterChildren", 21);
    var bw;
    Z.AlignmentStart = bw = D.s(Z, "AlignmentStart", 22);
    var cw;
    Z.AlignmentEnd = cw = D.s(Z, "AlignmentEnd", 23);
    var Tv;
    Z.AlignmentBus = Tv = D.s(Z, "AlignmentBus", 24);
    var Iv;
    Z.AlignmentBusBranching = Iv = D.s(Z, "AlignmentBusBranching", 25);
    var Uv;
    Z.AlignmentTopLeftBus = Uv = D.s(Z, "AlignmentTopLeftBus", 26);
    var Vv;
    Z.AlignmentBottomRightBus = Vv = D.s(Z, "AlignmentBottomRightBus", 27);
    var Yv;
    Z.CompactionNone = Yv = D.s(Z, "CompactionNone", 30);
    var $v;
    Z.CompactionBlock = $v = D.s(Z, "CompactionBlock", 31);
    var sv;
    Z.StyleLayered = sv = D.s(Z, "StyleLayered", 40);
    var Mv;
    Z.StyleLastParents = Mv = D.s(Z, "StyleLastParents", 41);
    var Lv;
    Z.StyleAlternating = Lv = D.s(Z, "StyleAlternating", 42);
    var Kv;
    Z.StyleRootOnly = Kv = D.s(Z, "StyleRootOnly", 43);
    var uv;
    Z.ArrangementVertical = uv = D.s(Z, "ArrangementVertical", 50);
    var ax;
    Z.ArrangementHorizontal = ax = D.s(Z, "ArrangementHorizontal", 51);
    var xv;
    Z.ArrangementFixedRoots = xv = D.s(Z, "ArrangementFixedRoots", 52);
    var tv;
    Z.LayerIndividual = tv = D.s(Z, "LayerIndividual", 60);
    var Gv;
    Z.LayerSiblings = Gv = D.s(Z, "LayerSiblings", 61);
    var Fv;
    Z.LayerUniform = Fv = D.s(Z, "LayerUniform", 62);
    function wv() {
        va.call(this)
    }
    D.Sa(wv, va);
    D.ja("TreeNetwork", wv);
    wv.prototype.createVertex = function() {
        return new vv
    };
    wv.prototype.createEdge = function() {
        return new cx
    };
    function vv() {
        wa.call(this);
        this.initialized = !1;
        this.parent = null;
        this.children = [];
        this.maxGenerationCount = this.maxChildrenCount = this.descendantCount = this.level = 0;
        this.comments = null;
        this.sa = new O(0, 0);
        this.rb = new Ca(0, 0);
        this.Wa = new O(0, 0);
        this.Mq = this.Lq = this.bK = !1;
        this.Wu = this.Bu = null;
        this.sorting = Nv;
        this.comparer = ws;
        this.angle = 0;
        this.alignment = Rv;
        this.nodeIndentPastParent = this.nodeIndent = 0;
        this.nodeSpacing = 20;
        this.layerSpacing = 50;
        this.layerSpacingParentOverlap = 0;
        this.compaction = $v;
        this.breadthLimit = 0;
        this.rowSpacing = 25;
        this.commentSpacing = this.rowIndent = 10;
        this.commentMargin = 20;
        this.setsPortSpot = !0;
        this.portSpot = Tc;
        this.setsChildPortSpot = !0;
        this.childPortSpot = Tc
    }
    D.Sa(vv, wa);
    D.ja("TreeVertex", vv);
    vv.prototype.copyInheritedPropertiesFrom = function(a) {
        null !== a && (this.sorting = a.sorting, this.comparer = a.comparer, this.angle = a.angle, this.alignment = a.alignment, this.nodeIndent = a.nodeIndent, this.nodeIndentPastParent = a.nodeIndentPastParent, this.nodeSpacing = a.nodeSpacing, this.layerSpacing = a.layerSpacing, this.layerSpacingParentOverlap = a.layerSpacingParentOverlap, this.compaction = a.compaction, this.breadthLimit = a.breadthLimit, this.rowSpacing = a.rowSpacing, this.rowIndent = a.rowIndent, this.commentSpacing = a.commentSpacing, this.commentMargin = a.commentMargin, this.setsPortSpot = a.setsPortSpot, this.portSpot = a.portSpot, this.setsChildPortSpot = a.setsChildPortSpot, this.childPortSpot = a.childPortSpot)
    };
    D.w(vv, {
        Fn: "childrenCount"
    },
    function() {
        return this.children.length
    });
    D.defineProperty(vv, {
        oM: "relativePosition"
    },
    function() {
        return this.sa
    },
    function(a) {
        this.sa.set(a)
    });
    D.defineProperty(vv, {
        BM: "subtreeSize"
    },
    function() {
        return this.rb
    },
    function(a) {
        this.rb.set(a)
    });
    D.defineProperty(vv, {
        AM: "subtreeOffset"
    },
    function() {
        return this.Wa
    },
    function(a) {
        this.Wa.set(a)
    });
    function cx() {
        xa.call(this);
        this.at = new O(0, 0)
    }
    D.Sa(cx, xa);
    D.ja("TreeEdge", cx);
    cx.prototype.commit = function() {
        var a = this.link;
        if (null !== a && !a.Di) {
            var b = this.network.Vb,
            c = null,
            d = null;
            switch (b.Rf) {
            case rv:
                c = this.fromVertex;
                d = this.toVertex;
                break;
            case yv:
                c = this.toVertex;
                d = this.fromVertex;
                break;
            default:
                D.k("Unhandled path value " + b.Rf.toString())
            }
            if (null !== c && null !== d) if (b = this.at, 0 !== b.x || 0 !== b.y || c.bK) {
                var d = c.sb,
                e = aw(c),
                g = dw(c),
                h = c.rowSpacing;
                a.yo();
                var k = a.gf === Nj,
                l = a.qc,
                m = 0,
                n, p;
                a.zm();
                if (l || k) {
                    for (m = 2; 4 < a.ta;) a.vG(2);
                    n = a.n(1);
                    p = a.n(2)
                } else {
                    for (m = 1; 3 < a.ta;) a.vG(1);
                    n = a.n(0);
                    p = a.n(a.ta - 1)
                }
                var q = a.n(a.ta - 1),
                r = 0;
                0 === e ? (c.alignment === cw ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - ew(c))))) : c.alignment === bw ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + ew(c))))) : r = c.Lq || c.Mq && 1 === c.maxGenerationCount ? d.top - c.Wa.y + b.y: d.y + d.height / 2 + b.y, k ? (a.B(m, n.x, r), m++, a.B(m, d.right + g, r), m++, a.B(m, d.right + g + (b.x - h) / 3, r), m++, a.B(m, d.right + g + 2 * (b.x - h) / 3, r), m++, a.B(m, d.right + g + (b.x - h), r), m++, a.B(m, p.x, r)) : (l && (a.B(m, d.right + g / 2, n.y), m++), a.B(m, d.right + g / 2, r), m++, a.B(m, d.right + g + b.x - (l ? h / 2 : h), r), m++, l && a.B(m, a.n(m - 1).x, p.y))) : 90 === e ? (c.alignment === cw ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - ew(c))))) : c.alignment === bw ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + ew(c))))) : r = c.Lq || c.Mq && 1 === c.maxGenerationCount ? d.left - c.Wa.x + b.x: d.x + d.width / 2 + b.x, k ? (a.B(m, r, n.y), m++, a.B(m, r, d.bottom + g), m++, a.B(m, r, d.bottom + g + (b.y - h) / 3), m++, a.B(m, r, d.bottom + g + 2 * (b.y - h) / 3), m++, a.B(m, r, d.bottom + g + (b.y - h)), m++, a.B(m, r, p.y)) : (l && (a.B(m, n.x, d.bottom + g / 2), m++), a.B(m, r, d.bottom + g / 2), m++, a.B(m, r, d.bottom + g + b.y - (l ? h / 2 : h)), m++, l && a.B(m, p.x, a.n(m - 1).y))) : 180 === e ? (c.alignment === cw ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - ew(c))))) : c.alignment === bw ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + ew(c))))) : r = c.Lq || c.Mq && 1 === c.maxGenerationCount ? d.top - c.Wa.y + b.y: d.y + d.height / 2 + b.y, k ? (a.B(m, n.x, r), m++, a.B(m, d.left - g, r), m++, a.B(m, d.left - g + (b.x + h) / 3, r), m++, a.B(m, d.left - g + 2 * (b.x + h) / 3, r), m++, a.B(m, d.left - g + (b.x + h), r), m++, a.B(m, p.x, r)) : (l && (a.B(m, d.left - g / 2, n.y), m++), a.B(m, d.left - g / 2, r), m++, a.B(m, d.left - g + b.x + (l ? h / 2 : h), r), m++, l && a.B(m, a.n(m - 1).x, p.y))) : 270 === e ? (c.alignment === cw ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - ew(c))))) : c.alignment === bw ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + ew(c))))) : r = c.Lq || c.Mq && 1 === c.maxGenerationCount ? d.left - c.Wa.x + b.x: d.x + d.width / 2 + b.x, k ? (a.B(m, r, n.y), m++, a.B(m, r, d.top - g), m++, a.B(m, r, d.top - g + (b.y + h) / 3), m++, a.B(m, r, d.top - g + 2 * (b.y + h) / 3), m++, a.B(m, r, d.top - g + (b.y + h)), m++, a.B(m, r, p.y)) : (l && (a.B(m, n.x, d.top - g / 2), m++), a.B(m, r, d.top - g / 2), m++, a.B(m, r, d.top - g + b.y + (l ? h / 2 : h)), m++, l && a.B(m, p.x, a.n(m - 1).y))) : D.k("Invalid angle " + e);
                a.Aj()
            } else e = c,
            g = d,
            v && D.l(e, vv, cx, "adjustRouteForAngleChange:parent"),
            v && D.l(g, vv, cx, "adjustRouteForAngleChange:child"),
            a = this.link,
            c = aw(e),
            c !== aw(g) && (b = dw(e), d = e.sb, e = g.sb, 0 === c && e.left - d.right < b + 1 || 90 === c && e.top - d.bottom < b + 1 || 180 === c && d.left - e.right < b + 1 || 270 === c && d.top - e.bottom < b + 1 || (a.yo(), e = a.gf === Nj, g = a.qc, h = Sv(this.fromVertex.alignment), a.zm(), 0 === c ? (c = d.right + b / 2, e ? 4 === a.ta && (b = a.n(3).y, a.ia(1, c - 20, a.n(1).y), a.B(2, c - 20, b), a.B(3, c, b), a.B(4, c + 20, b), a.ia(5, a.n(5).x, b)) : g ? h ? a.ia(3, a.n(2).x, a.n(4).y) : 6 === a.ta && (a.ia(2, c, a.n(2).y), a.ia(3, c, a.n(3).y)) : 4 === a.ta ? a.B(2, c, a.n(2).y) : 3 === a.ta ? a.ia(1, c, a.n(2).y) : 2 === a.ta && a.B(1, c, a.n(1).y)) : 90 === c ? (b = d.bottom + b / 2, e ? 4 === a.ta && (c = a.n(3).x, a.ia(1, a.n(1).x, b - 20), a.B(2, c, b - 20), a.B(3, c, b), a.B(4, c, b + 20), a.ia(5, c, a.n(5).y)) : g ? h ? a.ia(3, a.n(2).x, a.n(4).y) : 6 === a.ta && (a.ia(2, a.n(2).x, b), a.ia(3, a.n(3).x, b)) : 4 === a.ta ? a.B(2, a.n(2).x, b) : 3 === a.ta ? a.ia(1, a.n(2).x, b) : 2 === a.ta && a.B(1, a.n(1).x, b)) : 180 === c ? (c = d.left - b / 2, e ? 4 === a.ta && (b = a.n(3).y, a.ia(1, c + 20, a.n(1).y), a.B(2, c + 20, b), a.B(3, c, b), a.B(4, c - 20, b), a.ia(5, a.n(5).x, b)) : g ? h ? a.ia(3, a.n(2).x, a.n(4).y) : 6 === a.ta && (a.ia(2, c, a.n(2).y), a.ia(3, c, a.n(3).y)) : 4 === a.ta ? a.B(2, c, a.n(2).y) : 3 === a.ta ? a.ia(1, c, a.n(2).y) : 2 === a.ta && a.B(1, c, a.n(1).y)) : 270 === c && (b = d.top - b / 2, e ? 4 === a.ta && (c = a.n(3).x, a.ia(1, a.n(1).x, b + 20), a.B(2, c, b + 20), a.B(3, c, b), a.B(4, c, b - 20), a.ia(5, c, a.n(5).y)) : g ? h ? a.ia(3, a.n(2).x, a.n(4).y) : 6 === a.ta && (a.ia(2, a.n(2).x, b), a.ia(3, a.n(3).x, b)) : 4 === a.ta ? a.B(2, a.n(2).x, b) : 3 === a.ta ? a.ia(1, a.n(2).x, b) : 2 === a.ta && a.B(1, a.n(1).x, b)), a.Aj()))
        }
    };
    D.defineProperty(cx, {
        nM: "relativePoint"
    },
    function() {
        return this.at
    },
    function(a) {
        this.at.set(a)
    });
    function dx() {
        P.call(this);
        this.Ze = null
    }
    D.Sa(dx, P);
    dx.prototype.cloneProtected = function(a) {
        P.prototype.cloneProtected.call(this, a);
        a.element = this.Ze.cloneNode(!0)
    };
    dx.prototype.toString = function() {
        return "HTMLHost(" + this.Ze.toString() + ")#" + D.Fd(this)
    };
    dx.prototype.Pk = function(a, b) {
        var c = this.Ze;
        if (null !== c) {
            var d = this.eb(gc);
            d.x -= this.$.width / 2;
            d.y -= this.$.height / 2;
            d.x -= this.$.x;
            d.y -= this.$.y;
            var d = b.TB(d),
            e = b.Dj;
            null === e || e.contains(c) || e.appendChild(c);
            e = this.transform;
            c.style.transform = "matrix(" + e.m11 + "," + e.m12 + "," + e.m21 + "," + e.m22 + "," + e.dx + "," + e.dy + ")";
            c.style.transformOrigin = "0 0";
            e = d.y;
            c.style.left = d.x + "px";
            c.style.top = e + "px"
        }
    };
    dx.prototype.ho = function(a, b, c, d) {
        var e = this.Ea;
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        var e = this.kf,
        g = this.hg;
        c = Math.max(c, g.width);
        d = Math.max(d, g.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        c = this.Ze;
        null !== c && (b = c.getBoundingClientRect(), a = b.width, b = b.height);
        wb(this.$c, a, b);
        Go(this, 0, 0, a, b)
    };
    dx.prototype.yj = function(a, b, c, d) {
        Lo(this, a, b, c, d)
    };
    D.w(dx, {
        Ga: "naturalBounds"
    },
    function() {
        return this.$c
    });
    D.defineProperty(dx, {
        element: "element"
    },
    function() {
        return this.Ze
    },
    function(a) {
        var b = this.Ze;
        b !== a && (a instanceof HTMLElement || D.k("HTMLHost.element must be an instance of Element."), this.Ze = a, a.className = "HTMLHost", this.i("element", b, a), this.qa())
    });
    aa.version = "1.7.7";
    window && (window.module && "object" === typeof window.module && "object" === typeof window.module.exports ? window.module.exports = aa: window.define && "function" === typeof window.define && window.define.amd ? (window.go = aa, window.define(aa)) : window.go = aa);
    "undefined" !== typeof module && "object" === typeof module.exports && (module.exports = aa);
})(window);